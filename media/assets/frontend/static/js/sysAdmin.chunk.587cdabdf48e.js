(this["webpackJsonpseahub-frontend"]=this["webpackJsonpseahub-frontend"]||[]).push([[28],{107:function(e,t,a){"use strict";var n=a(5),r=a(6),i=a(8),o=a(7),s=a(0),l=a.n(s),c=a(3),u=a(1),m=a(4),d=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).handleChange=function(e){e.target.value.trim()?r.setState({isSubmitBtnActive:!0}):r.setState({isSubmitBtnActive:!1}),r.setState({childName:e.target.value})},r.handleSubmit=function(){if(r.state.isSubmitBtnActive){var e=r.state.childName;if(r.checkDuplicatedName()){var t=Object(u.mb)('The name "{name}" is already taken. Please choose a different name.');t=t.replace("{name}",m.a.HTMLescape(e)),r.setState({errMessage:t})}else{var a=r.state.parentPath+e;r.props.onAddFolder(a)}}},r.handleKeyPress=function(e){"Enter"===e.key&&(r.handleSubmit(),e.preventDefault())},r.toggle=function(){r.props.addFolderCancel()},r.checkDuplicatedName=function(){return r.props.checkDuplicatedName(r.state.childName)},r.state={parentPath:"",childName:"",errMessage:"",isSubmitBtnActive:!1},r.newInput=l.a.createRef(),r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.parentPath;"/"===e[e.length-1]?this.setState({parentPath:e}):this.setState({parentPath:e+"/"}),this.newInput.focus(),this.newInput.setSelectionRange(0,0)}},{key:"render",value:function(){var e=this;return l.a.createElement(c.x,{isOpen:!0,toggle:this.toggle},l.a.createElement(c.A,{toggle:this.toggle},Object(u.mb)("New Folder")),l.a.createElement(c.y,null,l.a.createElement(c.p,null,l.a.createElement(c.q,null,l.a.createElement(c.w,{for:"folderName"},Object(u.mb)("Name")),l.a.createElement(c.s,{id:"folderName",value:this.state.childName,innerRef:function(t){e.newInput=t},onKeyPress:this.handleKeyPress,onChange:this.handleChange}))),this.state.errMessage&&l.a.createElement(c.a,{color:"danger",className:"mt-2"},this.state.errMessage)),l.a.createElement(c.z,null,l.a.createElement(c.c,{color:"secondary",onClick:this.toggle},Object(u.mb)("Cancel")),l.a.createElement(c.c,{color:"primary",onClick:this.handleSubmit,disabled:!this.state.isSubmitBtnActive},Object(u.mb)("Submit"))))}}]),a}(l.a.Component);t.a=d},1235:function(e,t,a){e.exports=a(1264)},1236:function(e,t,a){},1237:function(e,t,a){var n=a(1238),r=a(1239),i=a(1245),o=a(105);e.exports=function(e,t){return function(a,s){var l=o(a)?n:r,c=t?t():{};return l(a,e,i(s,2),c)}}},1238:function(e,t){e.exports=function(e,t,a,n){for(var r=-1,i=null==e?0:e.length;++r<i;){var o=e[r];t(n,o,a(o),e)}return n}},1239:function(e,t,a){var n=a(1240);e.exports=function(e,t,a,r){return n(e,(function(e,n,i){t(r,e,a(e),i)})),r}},1240:function(e,t,a){var n=a(1241),r=a(1244)(n);e.exports=r},1241:function(e,t,a){var n=a(1242),r=a(125);e.exports=function(e,t){return e&&n(e,t,r)}},1242:function(e,t,a){var n=a(1243)();e.exports=n},1243:function(e,t){e.exports=function(e){return function(t,a,n){for(var r=-1,i=Object(t),o=n(t),s=o.length;s--;){var l=o[e?s:++r];if(!1===a(i[l],l,i))break}return t}}},1244:function(e,t,a){var n=a(336);e.exports=function(e,t){return function(a,r){if(null==a)return a;if(!n(a))return e(a,r);for(var i=a.length,o=t?i:-1,s=Object(a);(t?o--:++o<i)&&!1!==r(s[o],o,s););return a}}},1245:function(e,t,a){var n=a(1246),r=a(1249),i=a(546),o=a(105),s=a(1254);e.exports=function(e){return"function"==typeof e?e:null==e?i:"object"==typeof e?o(e)?r(e[0],e[1]):n(e):s(e)}},1246:function(e,t,a){var n=a(1247),r=a(1248),i=a(600);e.exports=function(e){var t=r(e);return 1==t.length&&t[0][2]?i(t[0][0],t[0][1]):function(a){return a===e||n(a,e,t)}}},1247:function(e,t,a){var n=a(324),r=a(323);e.exports=function(e,t,a,i){var o=a.length,s=o,l=!i;if(null==e)return!s;for(e=Object(e);o--;){var c=a[o];if(l&&c[2]?c[1]!==e[c[0]]:!(c[0]in e))return!1}for(;++o<s;){var u=(c=a[o])[0],m=e[u],d=c[1];if(l&&c[2]){if(void 0===m&&!(u in e))return!1}else{var p=new n;if(i)var h=i(m,d,u,e,t,p);if(!(void 0===h?r(d,m,3,i,p):h))return!1}}return!0}},1248:function(e,t,a){var n=a(599),r=a(125);e.exports=function(e){for(var t=r(e),a=t.length;a--;){var i=t[a],o=e[i];t[a]=[i,o,n(o)]}return t}},1249:function(e,t,a){var n=a(323),r=a(1250),i=a(1251),o=a(341),s=a(599),l=a(600),c=a(215);e.exports=function(e,t){return o(e)&&s(t)?l(c(e),t):function(a){var o=r(a,e);return void 0===o&&o===t?i(a,e):n(t,o,3)}}},1250:function(e,t,a){var n=a(343);e.exports=function(e,t,a){var r=null==e?void 0:n(e,t);return void 0===r?a:r}},1251:function(e,t,a){var n=a(1252),r=a(1253);e.exports=function(e,t){return null!=e&&r(e,t,n)}},1252:function(e,t){e.exports=function(e,t){return null!=e&&t in Object(e)}},1253:function(e,t,a){var n=a(272),r=a(330),i=a(105),o=a(538),s=a(332),l=a(215);e.exports=function(e,t,a){for(var c=-1,u=(t=n(t,e)).length,m=!1;++c<u;){var d=l(t[c]);if(!(m=null!=e&&a(e,d)))break;e=e[d]}return m||++c!=u?m:!!(u=null==e?0:e.length)&&s(u)&&o(d,u)&&(i(e)||r(e))}},1254:function(e,t,a){var n=a(1255),r=a(1256),i=a(341),o=a(215);e.exports=function(e){return i(e)?n(o(e)):r(e)}},1255:function(e,t){e.exports=function(e){return function(t){return null==t?void 0:t[e]}}},1256:function(e,t,a){var n=a(343);e.exports=function(e){return function(t){return n(t,e)}}},1257:function(e,t,a){},1258:function(e,t,a){},1259:function(e,t,a){},1260:function(e,t,a){},1264:function(e,t,a){"use strict";a.r(t);var n=a(5),r=a(6),i=a(8),o=a(7),s=a(0),l=a.n(s),c=a(23),u=a.n(c),m=a(16),d=a(1),p=a(70),h=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(){var e;Object(n.a)(this,a);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).getActiveClass=function(t){return e.props.currentTab==t?"active":""},e}return Object(r.a)(a,[{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:"side-panel ".concat(this.props.isSidePanelClosed?"":"left-zero")},l.a.createElement("div",{className:"side-panel-north"},l.a.createElement(p.a,{onCloseSidePanel:this.props.onCloseSidePanel})),l.a.createElement("div",{className:"side-panel-center"},l.a.createElement("div",{className:"side-nav"},l.a.createElement("div",{className:"side-nav-con"},l.a.createElement("h3",{className:"sf-heading"},Object(d.mb)("System Admin")),l.a.createElement("ul",{className:"nav nav-pills flex-column nav-container"},d.A&&l.a.createElement("li",{className:"nav-item"},l.a.createElement(m.a,{className:"nav-link ellipsis ".concat(this.getActiveClass("info")),to:d.ic+"sys/info/",onClick:function(){return e.props.tabItemClick("info")}},l.a.createElement("span",{className:"sf2-icon-info","aria-hidden":"true"}),l.a.createElement("span",{className:"nav-text"},Object(d.mb)("Info")))),d.wb&&d.z&&l.a.createElement("li",{className:"nav-item"},l.a.createElement(m.a,{className:"nav-link ellipsis ".concat(this.getActiveClass("statistic")),to:d.ic+"sys/statistics/file/",onClick:function(){return e.props.tabItemClick("statistic")}},l.a.createElement("span",{className:"sf2-icon-histogram","aria-hidden":"true"}),l.a.createElement("span",{className:"nav-text"},Object(d.mb)("Statistic")))),d.Sb&&l.a.createElement("li",{className:"nav-item"},l.a.createElement(m.a,{className:"nav-link ellipsis ".concat(this.getActiveClass("devices")),to:d.ic+"sys/desktop-devices/",onClick:function(){return e.props.tabItemClick("devices")}},l.a.createElement("span",{className:"sf2-icon-monitor","aria-hidden":"true"}),l.a.createElement("span",{className:"nav-text"},Object(d.mb)("Devices")))),d.C&&d.m&&l.a.createElement("li",{className:"nav-item"},l.a.createElement(m.a,{className:"nav-link ellipsis ".concat(this.getActiveClass("web-settings")),to:d.ic+"sys/web-settings/",onClick:function(){return e.props.tabItemClick("web-settings")}},l.a.createElement("span",{className:"sf2-icon-cog2","aria-hidden":"true"}),l.a.createElement("span",{className:"nav-text"},Object(d.mb)("Settings")))),d.t&&l.a.createElement("li",{className:"nav-item"},l.a.createElement(m.a,{className:"nav-link ellipsis ".concat(this.getActiveClass("libraries")),to:d.ic+"sys/all-libraries/",onClick:function(){return e.props.tabItemClick("libraries")}},l.a.createElement("span",{className:"sf2-icon-library","aria-hidden":"true"}),l.a.createElement("span",{className:"nav-text"},Object(d.mb)("Libraries")))),d.u&&l.a.createElement("li",{className:"nav-item"},l.a.createElement(m.a,{className:"nav-link ellipsis ".concat(this.getActiveClass("users")),to:d.ic+"sys/users/",onClick:function(){return e.props.tabItemClick("users")}},l.a.createElement("span",{className:"sf2-icon-user","aria-hidden":"true"}),l.a.createElement("span",{className:"nav-text"},Object(d.mb)("Users")))),d.s&&l.a.createElement("li",{className:"nav-item"},l.a.createElement(m.a,{className:"nav-link ellipsis ".concat(this.getActiveClass("groups")),to:d.ic+"sys/groups/",onClick:function(){return e.props.tabItemClick("groups")}},l.a.createElement("span",{className:"sf2-icon-group","aria-hidden":"true"}),l.a.createElement("span",{className:"nav-text"},Object(d.mb)("Groups")))),d.wb&&d.s&&l.a.createElement("li",{className:"nav-item"},l.a.createElement(m.a,{className:"nav-link ellipsis ".concat(this.getActiveClass("departments")),to:d.ic+"sys/departments/",onClick:function(){return e.props.tabItemClick("departments")}},l.a.createElement("span",{className:"sf2-icon-organization","aria-hidden":"true"}),l.a.createElement("span",{className:"nav-text"},Object(d.mb)("Departments")))),d.Lb&&d.Sb&&l.a.createElement("li",{className:"nav-item"},l.a.createElement(m.a,{className:"nav-link ellipsis ".concat(this.getActiveClass("organizations")),to:d.ic+"sys/organizations/",onClick:function(){return e.props.tabItemClick("organizations")}},l.a.createElement("span",{className:"sf2-icon-organization","aria-hidden":"true"}),l.a.createElement("span",{className:"nav-text"},Object(d.mb)("Organizations")))),d.Kb&&d.Sb&&l.a.createElement("li",{className:"nav-item"},l.a.createElement(m.a,{className:"nav-link ellipsis ".concat(this.getActiveClass("institutions")),to:d.ic+"sys/institutions/",onClick:function(){return e.props.tabItemClick("institutions")}},l.a.createElement("span",{className:"sf2-icon-organization","aria-hidden":"true"}),l.a.createElement("span",{className:"nav-text"},Object(d.mb)("Institutions")))),d.Sb&&l.a.createElement("li",{className:"nav-item"},l.a.createElement(m.a,{className:"nav-link ellipsis ".concat(this.getActiveClass("notifications")),to:d.ic+"sys/notifications/",onClick:function(){return e.props.tabItemClick("notifications")}},l.a.createElement("span",{className:"sf2-icon-msgs","aria-hidden":"true"}),l.a.createElement("span",{className:"nav-text"},Object(d.mb)("Notifications")))),d.Sb&&l.a.createElement("li",{className:"nav-item"},l.a.createElement(m.a,{className:"nav-link ellipsis ".concat(this.getActiveClass("links")),to:d.ic+"sys/share-links/",onClick:function(){return e.props.tabItemClick("links")}},l.a.createElement("span",{className:"sf2-icon-link","aria-hidden":"true"}),l.a.createElement("span",{className:"nav-text"},Object(d.mb)("Links")))),d.mc&&d.B&&l.a.createElement("li",{className:"nav-item"},l.a.createElement(m.a,{className:"nav-link ellipsis ".concat(this.getActiveClass("logs")),to:d.ic+"sys/logs/login",onClick:function(){return e.props.tabItemClick("logs")}},l.a.createElement("span",{className:"sf2-icon-clock","aria-hidden":"true"}),l.a.createElement("span",{className:"nav-text"},Object(d.mb)("Logs")))),d.wb&&d.Sb&&d.T&&l.a.createElement("li",{className:"nav-item"},l.a.createElement(m.a,{className:"nav-link ellipsis ".concat(this.getActiveClass("file-scan-records")),to:d.ic+"sys/file-scan-records/",onClick:function(){return e.props.tabItemClick("file-scan-records")}},l.a.createElement("span",{className:"sf2-icon-security","aria-hidden":"true"}),l.a.createElement("span",{className:"nav-text"},Object(d.mb)("File Scan")))),d.wb&&d.Sb&&l.a.createElement("li",{className:"nav-item"},l.a.createElement(m.a,{className:"nav-link ellipsis ".concat(this.getActiveClass("virus-files")),to:d.ic+"sys/virus-files/all/",onClick:function(){return e.props.tabItemClick("virus-files")}},l.a.createElement("span",{className:"sf2-icon-security","aria-hidden":"true"}),l.a.createElement("span",{className:"nav-text"},Object(d.mb)("Virus Scan")))),d.wb&&d.U&&d.Sb&&l.a.createElement("li",{className:"nav-item"},l.a.createElement(m.a,{className:"nav-link ellipsis ".concat(this.getActiveClass("invitations")),to:d.ic+"sys/invitations/",onClick:function(){return e.props.tabItemClick("invitations")}},l.a.createElement("span",{className:"sf2-icon-invite","aria-hidden":"true"}),l.a.createElement("span",{className:"nav-text"},Object(d.mb)("Invitations")))),d.Sb&&d.db&&l.a.createElement("li",{className:"nav-item"},l.a.createElement(m.a,{className:"nav-link ellipsis ".concat(this.getActiveClass("termsandconditions")),to:d.ic+"sys/terms-and-conditions/",onClick:function(){return e.props.tabItemClick("termsandconditions")}},l.a.createElement("span",{className:"sf2-icon-wiki","aria-hidden":"true"}),l.a.createElement("span",{className:"nav-text"},Object(d.mb)("Terms and Conditions")))),d.wb&&d.x&&l.a.createElement("li",{className:"nav-item"},l.a.createElement(m.a,{className:"nav-link ellipsis ".concat(this.getActiveClass("adminLogs")),to:d.ic+"sys/admin-logs/operation",onClick:function(){return e.props.tabItemClick("adminLogs")}},l.a.createElement("span",{className:"sf2-icon-admin-log","aria-hidden":"true"}),l.a.createElement("span",{className:"nav-text"},Object(d.mb)("Admin Logs")))),d.Sb&&d.eb&&l.a.createElement("li",{className:"nav-item"},l.a.createElement(m.a,{className:"nav-link ellipsis ".concat(this.getActiveClass("work-weixin")),to:d.ic+"sys/work-weixin/",onClick:function(){return e.props.tabItemClick("work-weixin")}},l.a.createElement("span",{className:"sf3-font-enterprise-wechat sf3-font","aria-hidden":"true"}),l.a.createElement("span",{className:"nav-text"},"\u4f01\u4e1a\u5fae\u4fe1\u96c6\u6210"))),d.Sb&&d.Q&&l.a.createElement("li",{className:"nav-item"},l.a.createElement(m.a,{className:"nav-link ellipsis ".concat(this.getActiveClass("dingtalk")),to:d.ic+"sys/dingtalk/",onClick:function(){return e.props.tabItemClick("dingtalk")}},l.a.createElement("span",{className:"sf3-font-dingtalk sf3-font","aria-hidden":"true"}),l.a.createElement("span",{className:"nav-text"},"\u9489\u9489\u96c6\u6210"))),d.Sb&&d.Z&&l.a.createElement("li",{className:"nav-item"},l.a.createElement(m.a,{className:"nav-link ellipsis ".concat(this.getActiveClass("abuse-reports")),to:d.ic+"sys/abuse-reports/",onClick:function(){return e.props.tabItemClick("abuse-reports")}},l.a.createElement("span",{className:"sf2-icon-monitor","aria-hidden":"true"}),l.a.createElement("span",{className:"nav-text"},Object(d.mb)("Abuse Reports")))))))))}}]),a}(l.a.Component),g=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(r.a)(a,[{key:"render",value:function(){return l.a.createElement("div",{className:"main-panel o-hidden"},this.props.children)}}]),a}(s.Component),f=a(3),b=a(9),v=a(10),E=a(4),y=a(14),O=a(50),x=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(r.a)(a,[{key:"render",value:function(){return l.a.createElement("div",{className:"main-panel-north ".concat(this.props.children?"border-left-show":"")},l.a.createElement("div",{className:"cur-view-toolbar"},l.a.createElement("span",{className:"sf2-icon-menu side-nav-toggle hidden-md-up d-md-none",title:"Side Nav Menu"}),l.a.createElement("div",{className:"operation"},this.props.children)),l.a.createElement("div",{className:"common-toolbar"},this.props.search&&this.props.search,l.a.createElement(O.a,{isAdminPanel:!0})))}}]),a}(s.Component),k=(a(1236),function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).uploadLicenseFile=function(e){if(r.fileInput.current.files.length){var t=r.fileInput.current.files[0];b.a.sysAdminUploadLicense(t).then((function(e){var t=r.state.sysInfo;Object.assign(t,e.data,{with_license:!0}),r.setState({sysInfo:t})})).catch((function(e){var t=E.a.getErrorMsg(e);v.a.danger(t)}))}},r.openFileInput=function(){r.fileInput.current.click()},r.renderLicenseDescString=function(e,t,a){return"life-time"==e?"zh-cn"==window.app.config.lang?"\u6c38\u4e45\u6388\u6743\u7ed9 "+t+"\uff0c\u6280\u672f\u652f\u6301\u670d\u52a1\u81f3 "+a+" \u5230\u671f":Object(d.mb)("licensed to {placeholder_license_to}, upgrade service expired in {placeholder_license_expiration}").replace("{placeholder_license_to}",t).replace("{placeholder_license_expiration}",a):Object(d.mb)("licensed to {placeholder_license_to}, expires on {placeholder_license_expiration}").replace("{placeholder_license_to}",t).replace("{placeholder_license_expiration}",a)},r.fileInput=l.a.createRef(),r.state={loading:!0,errorMsg:"",sysInfo:{}},r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this;b.a.sysAdminGetSysInfo().then((function(t){e.setState({loading:!1,sysInfo:t.data})})).catch((function(t){e.setState({loading:!1,errorMsg:E.a.getErrorMsg(t,!0)})}))}},{key:"render",value:function(){var e=this.state.sysInfo,t=e.license_mode,a=e.license_to,n=e.license_expiration,r=e.org_count,i=e.repos_count,o=e.total_files_count,c=e.total_storage,u=e.total_devices_count,m=e.current_connected_devices_count,p=e.license_maxusers,h=e.multi_tenancy_enabled,g=e.active_users_count,b=e.users_count,v=e.groups_count,O=e.with_license,k=this.state,S=k.loading,w=k.errorMsg;return l.a.createElement(s.Fragment,null,l.a.createElement(x,null),l.a.createElement("div",{className:"main-panel-center flex-row"},l.a.createElement("div",{className:"cur-view-container system-admin-info"},l.a.createElement("h2",{className:"heading"},Object(d.mb)("Info")),l.a.createElement("div",{className:"content"},S&&l.a.createElement(y.a,null),w&&l.a.createElement("p",{className:"error text-center mt-4"},w),!S&&!w&&l.a.createElement("dl",{className:"flex-1 m-0"},l.a.createElement("dt",{className:"info-item-heading"},Object(d.mb)("System Info")),d.wb?l.a.createElement("dd",{className:"info-item-content"},Object(d.mb)("Professional Edition"),O&&" "+this.renderLicenseDescString(t,a,n),l.a.createElement("br",null),d.sb&&l.a.createElement(s.Fragment,null,l.a.createElement(f.c,{type:"button",className:"mt-2",onClick:this.openFileInput},Object(d.mb)("Upload license")),l.a.createElement("input",{className:"d-none",type:"file",onChange:this.uploadLicenseFile,ref:this.fileInput}))):l.a.createElement("dd",{className:"info-item-content"},Object(d.mb)("Community Edition"),l.a.createElement("a",{className:"ml-1",href:"https://download.seafile.com/published/seafile-manual/deploy_pro/migrate_from_seafile_community_server.md",target:"_blank"},Object(d.mb)("Upgrade to Pro Edition"))),l.a.createElement("dt",{className:"info-item-heading"},Object(d.mb)("Libraries")," / ",Object(d.mb)("Files")),l.a.createElement("dd",{className:"info-item-content"},i," / ",o),l.a.createElement("dt",{className:"info-item-heading"},Object(d.mb)("Storage Used")),l.a.createElement("dd",{className:"info-item-content"},E.a.bytesToSize(c)),l.a.createElement("dt",{className:"info-item-heading"},Object(d.mb)("Total Devices")," / ",Object(d.mb)("Current Connected Devices")),l.a.createElement("dd",{className:"info-item-content"},u," / ",m),d.wb?l.a.createElement(s.Fragment,null,l.a.createElement("dt",{className:"info-item-heading"},Object(d.mb)("Activated Users")," / ",Object(d.mb)("Total Users")," / ",Object(d.mb)("Limits")),l.a.createElement("dd",{className:"info-item-content"},g," / ",b," / ",O?p:"--")):l.a.createElement(s.Fragment,null,l.a.createElement("dt",{className:"info-item-heading"},Object(d.mb)("Activated Users")," / ",Object(d.mb)("Total Users")),l.a.createElement("dd",{className:"info-item-content"},g," / ",b)),l.a.createElement("dt",{className:"info-item-heading"},Object(d.mb)("Groups")),l.a.createElement("dd",{className:"info-item-content"},v),h&&l.a.createElement(s.Fragment,null,l.a.createElement("dt",{className:"info-item-heading"},Object(d.mb)("Organizations")),l.a.createElement("dd",{className:"info-item-content"},r)))))))}}]),a}(s.Component)),S=a(12),w=a.n(S),D=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).navItems=[{name:"fileStatistic",urlPart:"statistics/file",text:Object(d.mb)("File")},{name:"storageStatistic",urlPart:"statistics/storage",text:Object(d.mb)("Storage")},{name:"usersStatistic",urlPart:"statistics/user",text:Object(d.mb)("Users")},{name:"trafficStatistic",urlPart:"statistics/traffic",text:Object(d.mb)("Traffic")},{name:"reportsStatistic",urlPart:"statistics/reports",text:Object(d.mb)("Reports")}],r}return Object(r.a)(a,[{key:"render",value:function(){var e=this.props.currentItem;return l.a.createElement("div",{className:"cur-view-path tab-nav-container"},l.a.createElement("ul",{className:"nav"},this.navItems.map((function(t,a){return l.a.createElement("li",{className:"nav-item",key:a},l.a.createElement(m.a,{to:"".concat(d.ic,"sys/").concat(t.urlPart,"/"),className:"nav-link".concat(e==t.name?" active":"")},t.text))}))))}}]),a}(l.a.Component),j=a(179),C=a(2),N=a.n(C),P=a(293),_=a(287),M=a.n(_),I=a(288),T=(a(584),{disabledDate:N.a.func.isRequired,value:N.a.object,onChange:N.a.func.isRequired}),A="YYYY-MM-DD",L=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).defaultCalendarValue=null,r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=window.app.config.lang;this.defaultCalendarValue=w()().locale(e).clone()}},{key:"render",value:function(){var e=this.props,t=l.a.createElement(P.a,{defaultValue:this.defaultCalendarValue,disabledDate:e.disabledDate,format:A,locale:Object(I.a)()});return l.a.createElement(M.a,{calendar:t,value:e.value,onChange:e.onChange},(function(e){var t=e.value;return l.a.createElement("span",null,l.a.createElement("input",{placeholder:"yyyy-mm-dd",tabIndex:"-1",readOnly:!0,value:t&&t.format(A)||"",className:"form-control system-statistic-input"}))}))}}]),a}(l.a.Component);L.propsTypes=T;var R=L,F=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).changeActive=function(e){if(r.state.statisticType!==e){var t,a=w()().format("YYYY-MM-DD 00:00:00");switch(e){case"oneWeek":t=w()().subtract(6,"d").format("YYYY-MM-DD 00:00:00");break;case"oneMonth":t=w()().subtract(29,"d").format("YYYY-MM-DD 00:00:00");break;case"oneYear":t=w()().subtract(364,"d").format("YYYY-MM-DD 00:00:00")}r.setState({statisticType:e});r.props.getActiviesFiles(t,a,"day")}},r.disabledStartDate=function(e){if(!e)return!1;var t=w()().format(),a=r.state.endValue;return a?a.isBefore(e)||w()(e).format()>t:t<w()(e).format()},r.disabledEndDate=function(e){if(!e)return!1;var t=w()().format(),a=r.state.startValue;return a?e.isBefore(a)||w()(e).format()>t:t<w()(e).format()},r.onChange=function(e,t){r.setState(Object(j.a)({},e,t))},r.onSubmit=function(){var e=r.state,t=e.startValue,a=e.endValue;if(t&&a){r.setState({statisticType:"itemButton"});var n=w()(t).format("YYYY-MM-DD 00:00:00"),i=w()(a).format("YYYY-MM-DD 00:00:00");r.props.getActiviesFiles(n,i,"day")}},r.state={statisticType:"oneWeek",startValue:null,endValue:null},r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=w()().format("YYYY-MM-DD 00:00:00"),t=w()().subtract(6,"d").format("YYYY-MM-DD 00:00:00");this.props.getActiviesFiles(t,e,"day")}},{key:"render",value:function(){var e=this.state,t=e.statisticType,a=e.endValue,n=e.startValue;return l.a.createElement(s.Fragment,null,this.props.children,l.a.createElement("div",{className:"system-statistic-time-range"},l.a.createElement("div",{className:"sys-stat-tool"},l.a.createElement("div",{className:"system-statistic-item border-right-0 rounded-left ".concat("oneWeek"===t?"item-active":""),onClick:this.changeActive.bind(this,"oneWeek")},Object(d.mb)("7 Days")),l.a.createElement("div",{className:"system-statistic-item border-right-0 ".concat("oneMonth"===t?"item-active":""),onClick:this.changeActive.bind(this,"oneMonth")},Object(d.mb)("30 Days")),l.a.createElement("div",{className:"system-statistic-item rounded-right ".concat("oneYear"===t?"item-active":""),onClick:this.changeActive.bind(this,"oneYear")},Object(d.mb)("1 Year"))),l.a.createElement("div",{className:"system-statistic-input-container"},l.a.createElement(R,{disabledDate:this.disabledStartDate,value:n,onChange:this.onChange.bind(this,"startValue")}),l.a.createElement("span",{className:"system-statistic-connect"},"-"),l.a.createElement(R,{disabledDate:this.disabledEndDate,value:a,onChange:this.onChange.bind(this,"endValue")}),l.a.createElement(f.c,{className:"operation-item system-statistic-button",onClick:this.onSubmit},Object(d.mb)("Submit")))))}}]),a}(l.a.Component),U=F,B=a(622),z=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).titleCallback=function(e,t){return t.datasets[e.datasetIndex].label+": "+E.a.bytesToSize(e.yLabel)},r.ticksCallback=function(e,t,a){return E.a.bytesToSize(e)},r.state={data:{},opations:{}},r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e.labels,a=e.filesData,n=e.isTitleCallback,r=e.isTicksCallback,i=e.suggestedMaxNumbers,o=e.isLegendStatus,s=e.chartTitle,l=this,c={labels:t,datasets:a},u={title:{display:!0,fontSize:14,text:s},elements:{line:{fill:!1,tension:0,borderWidth:2}},legend:{display:o,labels:{usePointStyle:!0}},tooltips:{callbacks:{label:function(e,t){return n?l.titleCallback(e,t):t.datasets[e.datasetIndex].label+": "+e.yLabel}}},layout:{padding:{right:100}},scales:{yAxes:[{ticks:{beginAtZero:!0,suggestedMax:i,callback:function(e,t,a){return r?l.ticksCallback(e,t,a):e}}}],xAxes:[{ticks:{maxTicksLimit:20}}]}};this.setState({data:c,options:u})}},{key:"componentWillReceiveProps",value:function(e){var t={labels:e.labels,datasets:e.filesData};this.setState({data:t})}},{key:"render",value:function(){var e=this.state,t=e.data,a=e.options;return l.a.createElement(B.a,{data:t,options:a})}}]),a}(l.a.Component),H=z,q=(a(1257),function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).getActiviesFiles=function(e,t,a){var n=r.state.filesData;b.a.sysAdminStatisticFiles(e,t,a).then((function(e){var t=[],a=[],i=[],o=[],s=[],l=e.data;if(Array.isArray(l)){l.forEach((function(e){t.push(w()(e.datetime).format("YYYY-MM-DD")),a.push(e.added),i.push(e.deleted),s.push(e.modified),o.push(e.visited)}));var c={label:Object(d.mb)("Added"),data:a,borderColor:"#57cd6b",backgroundColor:"#57cd6b"},u={label:Object(d.mb)("Visited"),data:o,borderColor:"#fd913a",backgroundColor:"#fd913a"},m={label:Object(d.mb)("Modified"),data:s,borderColor:"#72c3fc",backgroundColor:"#72c3fc"},p={label:Object(d.mb)("Deleted"),data:i,borderColor:"#f75356",backgroundColor:"#f75356"};n=[u,c,m,p]}r.setState({filesData:n,labels:t,isLoading:!1})})).catch((function(e){var t=E.a.getErrorMsg(e);v.a.danger(t)}))},r.state={filesData:[],labels:[],isLoading:!0},r}return Object(r.a)(a,[{key:"render",value:function(){var e=this.state,t=e.labels,a=e.filesData,n=e.isLoading;return l.a.createElement(s.Fragment,null,l.a.createElement(x,null),l.a.createElement("div",{className:"cur-view-container"},l.a.createElement(D,{currentItem:"fileStatistic"}),l.a.createElement("div",{className:"cur-view-content"},l.a.createElement(U,{getActiviesFiles:this.getActiviesFiles}),n&&l.a.createElement(y.a,null),!n&&t.length>0&&l.a.createElement(H,{labels:t,filesData:a,suggestedMaxNumbers:10,isLegendStatus:!0,chartTitle:Object(d.mb)("File Operations")}))))}}]),a}(l.a.Component)),W=q,V=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).getActiviesFiles=function(e,t,a){var n=r.state.filesData;b.a.sysAdminStatisticStorages(e,t,a).then((function(e){var t=[],a=[],i=e.data;if(Array.isArray(i)){i.forEach((function(e){t.push(w()(e.datetime).format("YYYY-MM-DD")),a.push(e.total_storage)}));var o={label:Object(d.mb)("Total Storage"),data:a,borderColor:"#fd913a",backgroundColor:"#fd913a"};n=[o]}r.setState({filesData:n,labels:t,isLoading:!1})})).catch((function(e){var t=E.a.getErrorMsg(e);v.a.danger(t)}))},r.state={filesData:[],labels:[],isLoading:!0},r}return Object(r.a)(a,[{key:"render",value:function(){var e=this.state,t=e.labels,a=e.filesData,n=e.isLoading;return l.a.createElement(s.Fragment,null,l.a.createElement(x,null),l.a.createElement("div",{className:"cur-view-container"},l.a.createElement(D,{currentItem:"storageStatistic"}),l.a.createElement("div",{className:"cur-view-content"},l.a.createElement(U,{getActiviesFiles:this.getActiviesFiles}),n&&l.a.createElement(y.a,null),!n&&t.length>0&&l.a.createElement(H,{labels:t,filesData:a,suggestedMaxNumbers:1e7,isTitleCallback:!0,isTicksCallback:!0,isLegendStatus:!1,chartTitle:Object(d.mb)("Total Storage")}))))}}]),a}(l.a.Component),G=V,Y=a(26),Q=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){return Object(n.a)(this,a),t.call(this,e)}return Object(r.a)(a,[{key:"render",value:function(){var e=this.props,t=e.type,a=e.sortBy,n="asc"==e.sortOrder?l.a.createElement("span",{className:"fas fa-caret-up"}):l.a.createElement("span",{className:"fas fa-caret-down"});return l.a.createElement("table",{className:"table-hover"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",{width:"16%"},"user"==t?Object(d.mb)("User"):Object(d.mb)("Organization")),l.a.createElement("th",{width:"11%"},l.a.createElement("div",{className:"d-block table-sort-op cursor-pointer",onClick:this.props.sortItems.bind(this,"sync_file_upload")},Object(d.mb)("Sync Upload")," ","sync_file_upload"===a&&n)),l.a.createElement("th",{width:"14%"},l.a.createElement("div",{className:"d-block table-sort-op cursor-pointer",onClick:this.props.sortItems.bind(this,"sync_file_download")},Object(d.mb)("Sync Download")," ","sync_file_download"===a&&n)),l.a.createElement("th",{width:"11%"},l.a.createElement("div",{className:"d-block table-sort-op cursor-pointer",onClick:this.props.sortItems.bind(this,"web_file_upload")},Object(d.mb)("Web Upload")," ","web_file_upload"===a&&n)),l.a.createElement("th",{width:"14%"},l.a.createElement("div",{className:"d-block table-sort-op cursor-pointer",onClick:this.props.sortItems.bind(this,"web_file_download")},Object(d.mb)("Web Download")," ","web_file_download"===a&&n)),l.a.createElement("th",{width:"17%"},l.a.createElement("div",{className:"d-block table-sort-op cursor-pointer",onClick:this.props.sortItems.bind(this,"link_file_upload")},Object(d.mb)("Share link upload")," ","link_file_upload"===a&&n)),l.a.createElement("th",{width:"17%"},l.a.createElement("div",{className:"d-block table-sort-op cursor-pointer",onClick:this.props.sortItems.bind(this,"link_file_download")},Object(d.mb)("Share link download")," ","link_file_download"===a&&n)))),l.a.createElement("tbody",null,this.props.children))}}]),a}(l.a.Component),K=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(){var e;Object(n.a)(this,a);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).trafficName=function(){var t=e.props,a=t.userTrafficItem;switch(t.type){case"user":return a.name?l.a.createElement("a",{href:d.ic+"useradmin/info/"+a.email+"/"},a.name):l.a.createElement("span",null,"--");case"org":return l.a.createElement("span",null,a.org_name)}},e}return Object(r.a)(a,[{key:"render",value:function(){var e=this.props.userTrafficItem,t=E.a.bytesToSize(e.sync_file_upload),a=E.a.bytesToSize(e.sync_file_download),n=E.a.bytesToSize(e.web_file_upload),r=E.a.bytesToSize(e.web_file_download),i=E.a.bytesToSize(e.link_file_upload),o=E.a.bytesToSize(e.link_file_download);return l.a.createElement("tr",null,l.a.createElement("td",null,this.trafficName()),l.a.createElement("td",null,t),l.a.createElement("td",null,a),l.a.createElement("td",null,n),l.a.createElement("td",null,r),l.a.createElement("td",null,i),l.a.createElement("td",null,o))}}]),a}(l.a.Component),X=a(34),$=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).getPreviousPage=function(){r.getTrafficList(r.state.month,r.state.currentPage-1)},r.getNextPage=function(){r.getTrafficList(r.state.month,r.state.currentPage+1)},r.handleChange=function(e){var t=e.target.value;r.setState({month:t})},r.handleKeyPress=function(e){var t=r.state.month;if("Enter"===e.key){if(!/^([012]\d{3})(0[1-9]|1[012])$/.test(t)){var a=Object(d.mb)("Invalid month, should be yyyymm.");return void r.setState({errorMessage:a})}r.getTrafficList(t,r.initPage),e.target.blur(),e.preventDefault()}},r.getTrafficList=function(e,t){var a=r.state,n=a.perPage,i=a.sortBy,o=a.sortOrder,s="asc"==o?i:"".concat(i,"_").concat(o);r.setState({isLoading:!0,errorMessage:""}),b.a.sysAdminListOrgTraffic(e,t,n,s).then((function(a){var n=a.data.org_monthly_traffic_list.slice(0);r.setState({month:e,currentPage:t,orgTrafficList:n,hasNextPage:a.data.has_next_page,isLoading:!1})})).catch((function(e){var t=E.a.getErrorMsg(e);v.a.danger(t)}))},r.sortItems=function(e){r.setState({sortBy:e,sortOrder:"asc"==r.state.sortOrder?"desc":"asc"},(function(){var e=r.state,t=e.month,a=e.currentPage;r.getTrafficList(t,a)}))},r.resetPerPage=function(e){r.setState({perPage:e},(function(){return r.getTrafficList(r.initPage,r.initMonth)}))},r.state={orgTrafficList:[],perPage:25,currentPage:1,hasNextPage:!1,month:w()().format("YYYYMM"),isLoading:!1,errorMessage:"",sortBy:"link_file_download",sortOrder:"desc"},r.initPage=1,r.initMonth=w()().format("YYYYMM"),r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=new URL(window.location).searchParams,a=this.state,n=a.currentPage,r=a.perPage;this.setState({perPage:parseInt(t.get("per_page")||r),currentPage:parseInt(t.get("page")||n)},(function(){e.getTrafficList(e.initMonth,e.state.currentPage)}))}},{key:"render",value:function(){var e=this.state,t=e.isLoading,a=e.errorMessage,n=e.orgTrafficList,r=e.currentPage,i=e.hasNextPage,o=e.perPage,c=e.sortBy,u=e.sortOrder;return l.a.createElement(s.Fragment,null,l.a.createElement("div",{className:"d-flex align-items-center mt-4"},l.a.createElement("span",{className:"statistic-reports-tip"},Object(d.mb)("Month:")),l.a.createElement(f.s,{className:"statistic-reports-input",defaultValue:w()().format("YYYYMM"),onChange:this.handleChange,onKeyPress:this.handleKeyPress}),a&&l.a.createElement("div",{className:"error"},a)),t&&l.a.createElement(y.a,null),!t&&l.a.createElement(Q,{type:"org",sortItems:this.sortItems,sortBy:c,sortOrder:u},n.length>0&&n.map((function(e,t){return l.a.createElement(K,{key:t,userTrafficItem:e,type:"org"})}))),l.a.createElement(X.a,{gotoPreviousPage:this.getPreviousPage,gotoNextPage:this.getNextPage,currentPage:r,hasNextPage:i,curPerPage:o,resetPerPage:this.resetPerPage}))}}]),a}(l.a.Component),J=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).getPreviousPage=function(){r.getTrafficList(r.state.month,r.state.currentPage-1)},r.getNextPage=function(){r.getTrafficList(r.state.month,r.state.currentPage+1)},r.handleChange=function(e){var t=e.target.value;r.setState({month:t})},r.handleKeyPress=function(e){var t=r.state.month;if("Enter"===e.key){if(!/^([012]\d{3})(0[1-9]|1[012])$/.test(t)){var a=Object(d.mb)("Invalid month, should be yyyymm.");return void r.setState({errorMessage:a})}r.getTrafficList(t,r.initPage),e.target.blur(),e.preventDefault()}},r.getTrafficList=function(e,t){var a=r.state,n=a.perPage,i=a.sortBy,o=a.sortOrder,s="asc"==o?i:"".concat(i,"_").concat(o);r.setState({isLoading:!0,errorMessage:""}),b.a.sysAdminListUserTraffic(e,t,n,s).then((function(a){var n=a.data.user_monthly_traffic_list.slice(0);r.setState({month:e,currentPage:t,userTrafficList:n,hasNextPage:a.data.has_next_page,isLoading:!1})})).catch((function(e){var t=E.a.getErrorMsg(e);v.a.danger(t)}))},r.sortItems=function(e){r.setState({sortBy:e,sortOrder:"asc"==r.state.sortOrder?"desc":"asc"},(function(){var e=r.state,t=e.month,a=e.currentPage;r.getTrafficList(t,a)}))},r.resetPerPage=function(e){r.setState({perPage:e},(function(){return r.getTrafficList(r.initMonth,r.initPage)}))},r.state={userTrafficList:[],hasNextPage:!1,perPage:25,currentPage:1,month:w()().format("YYYYMM"),isLoading:!1,errorMessage:"",sortBy:"link_file_download",sortOrder:"desc"},r.initPage=1,r.initMonth=w()().format("YYYYMM"),r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=new URL(window.location).searchParams,a=this.state,n=a.currentPage,r=a.perPage;this.setState({perPage:parseInt(t.get("per_page")||r),currentPage:parseInt(t.get("page")||n)},(function(){e.getTrafficList(e.initMonth,e.state.currentPage)}))}},{key:"render",value:function(){var e=this.state,t=e.isLoading,a=e.errorMessage,n=e.userTrafficList,r=e.currentPage,i=e.hasNextPage,o=e.perPage,c=e.sortBy,u=e.sortOrder;return l.a.createElement(s.Fragment,null,l.a.createElement("div",{className:"d-flex align-items-center mt-4"},l.a.createElement("span",{className:"statistic-reports-tip"},Object(d.mb)("Month:")),l.a.createElement(f.s,{className:"statistic-reports-input",defaultValue:w()().format("YYYYMM"),onChange:this.handleChange,onKeyPress:this.handleKeyPress}),a&&l.a.createElement("div",{className:"error"},a)),t&&l.a.createElement(y.a,null),!t&&l.a.createElement(Q,{type:"user",sortItems:this.sortItems,sortBy:c,sortOrder:u},n.length>0&&n.map((function(e,t){return l.a.createElement(K,{key:t,userTrafficItem:e,type:"user"})}))),l.a.createElement(X.a,{gotoPreviousPage:this.getPreviousPage,gotoNextPage:this.getNextPage,currentPage:r,hasNextPage:i,curPerPage:o,resetPerPage:this.resetPerPage}))}}]),a}(l.a.Component),Z=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).changeTabActive=function(e){r.setState({tabActive:e})},r.getActiviesFiles=function(e,t,a){b.a.sysAdminStatisticTraffic(e,t,a).then((function(e){var t=[],a=[],n=[],i=[],o=[],s=[],l=[],c=[],u=[],m=e.data;if(Array.isArray(m)){m.forEach((function(e){t.push(w()(e.datetime).format("YYYY-MM-DD")),i.push(e["link-file-upload"]),o.push(e["link-file-download"]),s.push(e["sync-file-upload"]),l.push(e["sync-file-download"]),c.push(e["web-file-upload"]),u.push(e["web-file-download"]),a.push(e["link-file-upload"]+e["sync-file-upload"]+e["web-file-upload"]),n.push(e["link-file-download"]+e["sync-file-download"]+e["web-file-download"])}));var p=[{label:Object(d.mb)("Upload"),data:i,borderColor:"#fd913a",backgroundColor:"#fd913a"},{label:Object(d.mb)("Download"),data:o,borderColor:"#57cd6b",backgroundColor:"#57cd6b"}],h=[{label:Object(d.mb)("Upload"),data:s,borderColor:"#fd913a",backgroundColor:"#fd913a"},{label:Object(d.mb)("Download"),data:l,borderColor:"#57cd6b",backgroundColor:"#57cd6b"}],g=[{label:Object(d.mb)("Upload"),data:c,borderColor:"#fd913a",backgroundColor:"#fd913a"},{label:Object(d.mb)("Download"),data:u,borderColor:"#57cd6b",backgroundColor:"#57cd6b"}],f=[{label:Object(d.mb)("Upload"),data:a,borderColor:"#fd913a",backgroundColor:"#fd913a"},{label:Object(d.mb)("Download"),data:n,borderColor:"#57cd6b",backgroundColor:"#57cd6b"}];r.setState({linkData:p,syncData:h,webData:g,filesData:f,labels:t,isLoading:!1})}})).catch((function(e){var t=E.a.getErrorMsg(e);v.a.danger(t)}))},r.renderCommonTool=function(){var e=r.state.tabActive;return"system"===e?l.a.createElement(U,{getActiviesFiles:r.getActiviesFiles},l.a.createElement("div",{className:"statistic-traffic-tab"},l.a.createElement("div",{className:"statistic-traffic-tab-item ".concat("system"===e?"active":""),onClick:r.changeTabActive.bind(Object(Y.a)(r),"system")},Object(d.mb)("System")),l.a.createElement("div",{className:"statistic-traffic-tab-item ".concat("user"===e?"active":""),onClick:r.changeTabActive.bind(Object(Y.a)(r),"user")},Object(d.mb)("Users")),l.a.createElement("div",{className:"statistic-traffic-tab-item ".concat("organizations"===e?"active":""),onClick:r.changeTabActive.bind(Object(Y.a)(r),"organizations")},Object(d.mb)("Organizations")))):l.a.createElement("div",{className:"statistic-traffic-tab"},l.a.createElement("div",{className:"statistic-traffic-tab-item ".concat("system"===e?"active":""),onClick:r.changeTabActive.bind(Object(Y.a)(r),"system")},Object(d.mb)("System")),l.a.createElement("div",{className:"statistic-traffic-tab-item ".concat("user"===e?"active":""),onClick:r.changeTabActive.bind(Object(Y.a)(r),"user")},Object(d.mb)("Users")),l.a.createElement("div",{className:"statistic-traffic-tab-item ".concat("organizations"===e?"active":""),onClick:r.changeTabActive.bind(Object(Y.a)(r),"organizations")},Object(d.mb)("Organizations")))},r.state={filesData:[],linkData:[],syncData:[],webData:[],labels:[],isLoading:!0,tabActive:"system"},r}return Object(r.a)(a,[{key:"render",value:function(){var e=this.state,t=e.labels,a=e.filesData,n=e.linkData,r=e.syncData,i=e.webData,o=e.isLoading,c=e.tabActive;return l.a.createElement(s.Fragment,null,l.a.createElement(x,null),l.a.createElement("div",{className:"cur-view-container"},l.a.createElement(D,{currentItem:"trafficStatistic"}),l.a.createElement("div",{className:"cur-view-content"},this.renderCommonTool(),o&&l.a.createElement(y.a,null),!o&&"system"===c&&l.a.createElement("div",{className:"statistic-traffic-chart-container"},l.a.createElement("div",{className:"mb-4"},t.length>0&&l.a.createElement(H,{labels:t,filesData:a,chartTitle:Object(d.mb)("Total Traffic"),suggestedMaxNumbers:1e7,isTitleCallback:!0,isTicksCallback:!0,isLegendStatus:!0})),l.a.createElement("div",{className:"mb-4"},t.length>0&&l.a.createElement(H,{labels:t,filesData:i,chartTitle:Object(d.mb)("Web Traffic"),suggestedMaxNumbers:1e7,isTitleCallback:!0,isTicksCallback:!0,isLegendStatus:!0})),l.a.createElement("div",{className:"mb-4"},t.length>0&&l.a.createElement(H,{labels:t,filesData:n,chartTitle:Object(d.mb)("Share Link Traffic"),suggestedMaxNumbers:1e7,isTitleCallback:!0,isTicksCallback:!0,isLegendStatus:!0})),l.a.createElement("div",{className:"mb-4"},t.length>0&&l.a.createElement(H,{labels:t,filesData:r,chartTitle:Object(d.mb)("Sync Traffic"),suggestedMaxNumbers:1e7,isTitleCallback:!0,isTicksCallback:!0,isLegendStatus:!0}))),!o&&"user"===c&&l.a.createElement(J,null),!o&&"organizations"===c&&l.a.createElement($,null))))}}]),a}(l.a.Component),ee=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).getActiviesFiles=function(e,t,a){var n=r.state.filesData;b.a.sysAdminStatisticActiveUsers(e,t,a).then((function(e){var t=[],a=[],i=e.data;if(Array.isArray(i)){i.forEach((function(e){t.push(w()(e.datetime).format("YYYY-MM-DD")),a.push(e.count)}));var o={label:Object(d.mb)("Active Users"),data:a,borderColor:"#fd913a",backgroundColor:"#fd913a"};n=[o]}r.setState({filesData:n,labels:t,isLoading:!1})})).catch((function(e){var t=E.a.getErrorMsg(e);v.a.danger(t)}))},r.state={filesData:[],labels:[],isLoading:!0},r}return Object(r.a)(a,[{key:"render",value:function(){var e=this.state,t=e.labels,a=e.filesData,n=e.isLoading;return l.a.createElement(s.Fragment,null,l.a.createElement(x,null),l.a.createElement("div",{className:"cur-view-container"},l.a.createElement(D,{currentItem:"usersStatistic"}),l.a.createElement("div",{className:"cur-view-content"},l.a.createElement(U,{getActiviesFiles:this.getActiviesFiles}),n&&l.a.createElement(y.a,null),!n&&t.length>0&&l.a.createElement(H,{labels:t,filesData:a,suggestedMaxNumbers:10,isLegendStatus:!1,chartTitle:Object(d.mb)("Active Users")}))))}}]),a}(l.a.Component),te=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).handleChange=function(e){var t=e.target.value;r.setState({month:t})},r.onGenerateReports=function(e){var t=d.ic+"api/v2.1/admin/statistics/",a=r.state.month;if(a){if("month"===e){if(!/^([012]\d{3})(0[1-9]|1[012])$/.test(a)){var n=Object(d.mb)("Invalid month, should be yyyymm.");return void r.setState({errorMessage:n})}}switch(e){case"month":t+="system-user-traffic/excel/?month="+a;break;case"storage":t+="system-user-storage/excel/?"}r.setState({errorMessage:""}),window.location.href=t}else{var i=Object(d.mb)("It is required.");r.setState({errorMessage:i})}},r.state={month:w()().format("YYYYMM"),errorMessage:""},r}return Object(r.a)(a,[{key:"render",value:function(){var e=this.state.errorMessage;return l.a.createElement(s.Fragment,null,l.a.createElement(x,null),l.a.createElement("div",{className:"cur-view-container"},l.a.createElement(D,{currentItem:"reportsStatistic"}),l.a.createElement("div",{className:"cur-view-content"},l.a.createElement("div",{className:"statistic-reports"},l.a.createElement("div",{className:"statistic-reports-title"},Object(d.mb)("Monthly User Traffic")),l.a.createElement("div",{className:"d-flex align-items-center mt-4"},l.a.createElement("span",{className:"statistic-reports-tip"},Object(d.mb)("Month:")),l.a.createElement(f.s,{className:"statistic-reports-input",defaultValue:w()().format("YYYYMM"),onChange:this.handleChange}),l.a.createElement(f.c,{className:"statistic-reports-submit operation-item",onClick:this.onGenerateReports.bind(this,"month")},Object(d.mb)("Create Report"))),e&&l.a.createElement("div",{className:"error"},e)),l.a.createElement("div",{className:"statistic-reports"},l.a.createElement("div",{className:"statistic-reports-title"},Object(d.mb)("User Storage")),l.a.createElement(f.c,{className:"mt-4 operation-item",onClick:this.onGenerateReports.bind(this,"storage")},Object(d.mb)("Create Report"))))))}}]),a}(l.a.Component),ae=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).navItems=[{name:"desktop",urlPart:"desktop-devices",text:Object(d.mb)("Desktop")},{name:"mobile",urlPart:"mobile-devices",text:Object(d.mb)("Mobile")}],d.wb&&r.navItems.push({name:"errors",urlPart:"device-errors",text:Object(d.mb)("Errors")}),r}return Object(r.a)(a,[{key:"render",value:function(){var e=this.props.currentItem;return l.a.createElement("div",{className:"cur-view-path tab-nav-container"},l.a.createElement("ul",{className:"nav"},this.navItems.map((function(t,a){return l.a.createElement("li",{className:"nav-item",key:a},l.a.createElement(m.a,{to:"".concat(d.ic,"sys/").concat(t.urlPart,"/"),className:"nav-link".concat(e==t.name?" active":"")},t.text))}))))}}]),a}(l.a.Component),ne=a(27),re=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).handleInputChange=function(e){r.setState({inputChecked:e.target.checked})},r.unlinkDevice=function(){r.props.toggleDialog(),r.props.unlinkDevice(r.state.inputChecked)},r.state={inputChecked:!1},r}return Object(r.a)(a,[{key:"render",value:function(){var e=this.state.inputChecked,t=this.props.toggleDialog;return l.a.createElement(f.x,{isOpen:!0,toggle:t},l.a.createElement(f.A,{toggle:t},Object(d.mb)("Unlink device")),l.a.createElement(f.y,null,l.a.createElement("p",null,Object(d.mb)("Are you sure you want to unlink this device?")),l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("input",{id:"delete-files",className:"mr-1",type:"checkbox",checked:e,onChange:this.handleInputChange}),l.a.createElement("label",{htmlFor:"delete-files",className:"m-0"},Object(d.mb)("Delete files from this device the next time it comes online.")))),l.a.createElement(f.z,null,l.a.createElement(f.c,{color:"secondary",onClick:t},Object(d.mb)("Cancel")),l.a.createElement(f.c,{color:"primary",onClick:this.unlinkDevice},Object(d.mb)("Unlink"))))}}]),a}(l.a.Component),ie=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).getPreviousPageDevicesList=function(){r.props.getDevicesListByPage(r.props.pageInfo.current_page-1)},r.getNextPageDevicesList=function(){r.props.getDevicesListByPage(r.props.pageInfo.current_page+1)},r}return Object(r.a)(a,[{key:"render",value:function(){var e=this.props,t=e.loading,a=e.errorMsg,n=e.items,r=e.pageInfo,i=e.curPerPage;if(t)return l.a.createElement(y.a,null);if(a)return l.a.createElement("p",{className:"error text-center"},a);var o=l.a.createElement(ne.a,null,l.a.createElement("h2",null,Object(d.mb)("No connected devices"))),c=l.a.createElement(s.Fragment,null,l.a.createElement("table",{className:"table-hover"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",{width:"19%"},Object(d.mb)("User")),l.a.createElement("th",{width:"19%"},Object(d.mb)("Platform")," / ",Object(d.mb)("Version")),l.a.createElement("th",{width:"19%"},Object(d.mb)("Device Name")),l.a.createElement("th",{width:"19%"},Object(d.mb)("IP")),l.a.createElement("th",{width:"19%"},Object(d.mb)("Last Access")),l.a.createElement("th",{width:"5%"}))),l.a.createElement("tbody",null,n.map((function(e,t){return l.a.createElement(oe,{key:t,item:e})})))),l.a.createElement(X.a,{gotoPreviousPage:this.getPreviousPageDevicesList,gotoNextPage:this.getNextPageDevicesList,currentPage:r.current_page,hasNextPage:r.has_next_page,curPerPage:i,resetPerPage:this.props.resetPerPage}));return n.length?c:o}}]),a}(s.Component),oe=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).handleMouseOver=function(){r.setState({isOpIconShown:!0})},r.handleMouseOut=function(){r.setState({isOpIconShown:!1})},r.handleUnlink=function(e){e.preventDefault(),r.props.item.is_desktop_client?r.toggleUnlinkDeviceDialog():r.unlinkDevice(!0)},r.toggleUnlinkDeviceDialog=function(){r.setState({isUnlinkDeviceDialogOpen:!r.state.isUnlinkDeviceDialogOpen})},r.unlinkDevice=function(e){var t=r.props.item,a=t.platform,n=t.device_id,i=t.user;b.a.sysAdminUnlinkDevice(a,n,i,e).then((function(e){r.setState({unlinked:!0});var t=Object(d.mb)("Successfully unlinked the device.");v.a.success(t)})).catch((function(e){var t=E.a.getErrorMsg(e);v.a.danger(t)}))},r.state={unlinked:!1,isOpIconShown:!1,isUnlinkDeviceDialogOpen:!1},r}return Object(r.a)(a,[{key:"render",value:function(){var e=this.props.item,t=this.state,a=t.unlinked,n=t.isUnlinkDeviceDialogOpen,r=t.isOpIconShown;return a?null:l.a.createElement(s.Fragment,null,l.a.createElement("tr",{onMouseEnter:this.handleMouseOver,onMouseLeave:this.handleMouseOut},l.a.createElement("td",null,e.user_name),l.a.createElement("td",null,e.platform," / ",e.client_version),l.a.createElement("td",null,e.device_name),l.a.createElement("td",null,e.last_login_ip),l.a.createElement("td",null,l.a.createElement("span",{title:w()(e.last_accessed).format("llll")},w()(e.last_accessed).fromNow())),l.a.createElement("td",null,d.wb&&l.a.createElement("a",{href:"#",className:"sf2-icon-delete action-icon ".concat(r?"":"invisible"),title:Object(d.mb)("Unlink"),onClick:this.handleUnlink}))),n&&l.a.createElement(re,{unlinkDevice:this.unlinkDevice,toggleDialog:this.toggleUnlinkDeviceDialog}))}}]),a}(s.Component),se=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).getDevicesListByPage=function(e){var t=r.props.devicesPlatform,a=r.state.perPage;b.a.sysAdminListDevices(t,e,a).then((function(e){r.setState({devicesData:e.data.devices,pageInfo:e.data.page_info,loading:!1})})).catch((function(e){r.setState({loading:!1,errorMsg:E.a.getErrorMsg(e,!0)})}))},r.resetPerPage=function(e){r.setState({perPage:e},(function(){r.getDevicesListByPage(1)}))},r.state={loading:!0,errorMsg:"",devicesData:{},pageInfo:{},perPage:25},r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=new URL(window.location).searchParams,a=this.state,n=a.currentPage,r=void 0===n?1:n,i=a.perPage;this.setState({perPage:parseInt(t.get("per_page")||i),currentPage:parseInt(t.get("page")||r)},(function(){e.getDevicesListByPage(e.state.currentPage)}))}},{key:"render",value:function(){return l.a.createElement("div",{className:"cur-view-content"},l.a.createElement(ie,{loading:this.state.loading,errorMsg:this.state.errorMsg,items:this.state.devicesData,getDevicesListByPage:this.getDevicesListByPage,curPerPage:this.state.perPage,resetPerPage:this.resetPerPage,pageInfo:this.state.pageInfo}))}}]),a}(s.Component),le=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){return Object(n.a)(this,a),t.call(this,e)}return Object(r.a)(a,[{key:"render",value:function(){return l.a.createElement(s.Fragment,null,l.a.createElement(x,null),l.a.createElement("div",{className:"main-panel-center flex-row"},l.a.createElement("div",{className:"cur-view-container"},l.a.createElement(ae,{currentItem:"desktop"}),l.a.createElement(se,{devicesPlatform:"desktop"}))))}}]),a}(s.Component),ce=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){return Object(n.a)(this,a),t.call(this,e)}return Object(r.a)(a,[{key:"render",value:function(){return l.a.createElement(s.Fragment,null,l.a.createElement(x,null),l.a.createElement("div",{className:"main-panel-center flex-row"},l.a.createElement("div",{className:"cur-view-container"},l.a.createElement(ae,{currentItem:"mobile"}),l.a.createElement(se,{devicesPlatform:"mobile"}))))}}]),a}(s.Component),ue=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(r.a)(a,[{key:"render",value:function(){return l.a.createElement(m.a,{to:"".concat(d.ic,"sys/users/").concat(encodeURIComponent(this.props.email),"/")},this.props.name)}}]),a}(s.Component),me=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){return Object(n.a)(this,a),t.call(this,e)}return Object(r.a)(a,[{key:"render",value:function(){var e=this.props,t=e.loading,a=e.errorMsg,n=e.items;if(t)return l.a.createElement(y.a,null);if(a)return l.a.createElement("p",{className:"error text-center"},a);var r=l.a.createElement(ne.a,null,l.a.createElement("h2",null,Object(d.mb)("No sync errors"))),i=l.a.createElement(s.Fragment,null,l.a.createElement("table",{className:"table-hover"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",{width:"16%"},Object(d.mb)("User")),l.a.createElement("th",{width:"20%"},Object(d.mb)("Device")," / ",Object(d.mb)("Version")),l.a.createElement("th",{width:"16%"},Object(d.mb)("IP")),l.a.createElement("th",{width:"16%"},Object(d.mb)("Library")),l.a.createElement("th",{width:"16%"},Object(d.mb)("Error")),l.a.createElement("th",{width:"16%"},Object(d.mb)("Time")))),l.a.createElement("tbody",null,n.map((function(e,t){return l.a.createElement(de,{key:t,item:e})})))));return n.length?i:r}}]),a}(s.Component),de=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).handleMouseOver=function(){r.setState({isOpIconShown:!0})},r.handleMouseOut=function(){r.setState({isOpIconShown:!1})},r.state={isOpIconShown:!1},r}return Object(r.a)(a,[{key:"render",value:function(){var e=this.props.item;return l.a.createElement("tr",{onMouseEnter:this.handleMouseOver,onMouseLeave:this.handleMouseOut},l.a.createElement("td",null,l.a.createElement(ue,{email:e.email,name:e.name})),l.a.createElement("td",null,e.device_name," / ",e.client_version),l.a.createElement("td",null,e.device_ip),l.a.createElement("td",null,l.a.createElement(m.a,{to:"".concat(d.ic,"sysadmin/#libs/").concat(e.repo_id)},e.repo_name)),l.a.createElement("td",null,e.error_msg),l.a.createElement("td",null,l.a.createElement("span",{className:"item-meta-info",title:w()(e.last_accessed).format("llll")},w()(e.error_time).fromNow())))}}]),a}(s.Component),pe=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).clean=function(){b.a.sysAdminClearDeviceErrors().then((function(e){r.setState({devicesErrors:[],isCleanBtnShown:!1});var t=Object(d.mb)("Successfully cleaned all errors.");v.a.success(t)})).catch((function(e){var t=E.a.getErrorMsg(e);v.a.danger(t)}))},r.state={loading:!0,errorMsg:"",devicesErrors:[],isCleanBtnShown:!1},r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this;b.a.sysAdminListDeviceErrors().then((function(t){e.setState({loading:!1,devicesErrors:t.data,isCleanBtnShown:t.data.length>0})})).catch((function(t){e.setState({loading:!1,errorMsg:E.a.getErrorMsg(t,!0)})}))}},{key:"render",value:function(){return l.a.createElement(s.Fragment,null,this.state.isCleanBtnShown?l.a.createElement(x,null,l.a.createElement(f.c,{className:"operation-item",onClick:this.clean},Object(d.mb)("Clean"))):l.a.createElement(x,null),l.a.createElement("div",{className:"main-panel-center flex-row"},l.a.createElement("div",{className:"cur-view-container"},l.a.createElement(ae,{currentItem:"errors"}),l.a.createElement("div",{className:"cur-view-content"},l.a.createElement(me,{loading:this.state.loading,errorMsg:this.state.errorMsg,items:this.state.devicesErrors})))))}}]),a}(s.Component),he=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).listAbuseReports=function(){b.a.sysAdminListAbuseReports().then((function(e){r.setState({abuseReportList:e.data.abuse_report_list})})).catch((function(e){r.handleError(e)}))},r.updateAbuseReport=function(e,t){b.a.sysAdminUpdateAbuseReport(e,t).then((function(e){var a=r.state.abuseReportList.map((function(a,n){return a.id===t&&(a.handled=e.data.handled),a}));r.setState({abuseReportList:a})})).catch((function(e){r.handleError(e)}))},r.handleError=function(e){e.response?v.a.danger(e.response.data.error_msg||e.response.data.detail||Object(d.mb)("Error"),{duration:3}):v.a.danger(Object(d.mb)("Please check the network."),{duration:3})},r.state={abuseReportList:[]},r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){this.listAbuseReports()}},{key:"render",value:function(){var e=this,t=E.a.isDesktop(),a=this.state.abuseReportList.map((function(t,a){var n=(!t.handled).toString(),r=t.id,i=d.ic+"lib/"+t.repo_id+"/file"+t.file_path;return l.a.createElement("tr",{key:a},l.a.createElement("td",null,t.repo_name),l.a.createElement("td",null,l.a.createElement("a",{href:i,target:"_blank"},t.file_path)),l.a.createElement("td",null,t.reporter),l.a.createElement("td",null,t.abuse_type),l.a.createElement("td",null,t.description),l.a.createElement("td",null,w()(t.time).format("YYYY-MM-DD")),l.a.createElement("td",null,l.a.createElement("p",{onClick:e.updateAbuseReport.bind(e,n,r),className:"op-target ellipsis ellipsis-op-target cursor-pointer"},Object(d.mb)(t.handled.toString()))))}));return l.a.createElement(s.Fragment,null,l.a.createElement("div",{className:"main-panel-north"},l.a.createElement("div",{className:"cur-view-toolbar"},l.a.createElement("span",{className:"sf2-icon-menu side-nav-toggle hidden-md-up d-md-none",title:"Side Nav Menu"})),l.a.createElement("div",{className:"common-toolbar"},l.a.createElement(O.a,{isAdminPanel:!0}))),l.a.createElement("div",{className:"main-panel-center"},l.a.createElement("div",{className:"cur-view-container"},l.a.createElement("div",{className:"cur-view-path"},l.a.createElement("h3",{className:"sf-heading"},Object(d.mb)("Abuse Reports"))),l.a.createElement("div",{className:"cur-view-content"},l.a.createElement("table",{className:"table-hover".concat(t?"":" table-thead-hidden")},l.a.createElement("thead",null,t?l.a.createElement("tr",null,l.a.createElement("th",{width:"20%"},Object(d.mb)("Library")),l.a.createElement("th",{width:"20%"},Object(d.mb)("File")),l.a.createElement("th",{width:"10%"},Object(d.mb)("Reporter")),l.a.createElement("th",{width:"15%"},Object(d.mb)("Abuse Type")),l.a.createElement("th",{width:"20%"},Object(d.mb)("Description")),l.a.createElement("th",{width:"10%"},Object(d.mb)("Time")),l.a.createElement("th",{width:"5%"},Object(d.mb)("Handled"))):l.a.createElement("tr",null,l.a.createElement("th",{width:"92%"}),l.a.createElement("th",{width:"8%"}))),l.a.createElement("tbody",null,a))))))}}]),a}(s.Component),ge=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).toggle=function(){r.props.toggle()},r.handleQuotaChange=function(e){var t=e.target.value;r.setState({quota:t,isSubmitBtnActive:""!=t.trim()})},r.handleKeyPress=function(e){"Enter"==e.key&&(r.handleSubmit(),e.preventDefault())},r.handleSubmit=function(){r.props.updateQuota(r.state.quota.trim()),r.toggle()},r.state={quota:"",isSubmitBtnActive:!1},r}return Object(r.a)(a,[{key:"render",value:function(){var e=this.state,t=e.quota,a=e.isSubmitBtnActive;return l.a.createElement(f.x,{isOpen:!0,toggle:this.toggle},l.a.createElement(f.A,{toggle:this.toggle},Object(d.mb)("Set Quota")),l.a.createElement(f.y,null,l.a.createElement(f.p,null,l.a.createElement(f.q,null,l.a.createElement(f.t,null,l.a.createElement(f.s,{type:"text",className:"form-control",value:t,onKeyPress:this.handleKeyPress,onChange:this.handleQuotaChange}),l.a.createElement(f.u,{addonType:"append"},l.a.createElement(f.v,null,"MB"))),l.a.createElement("p",{className:"small text-secondary mt-2 mb-2"},Object(d.mb)("An integer that is greater than or equal to 0."),l.a.createElement("br",null),Object(d.mb)("Tip: 0 means default limit"))))),l.a.createElement(f.z,null,l.a.createElement(f.c,{color:"secondary",onClick:this.toggle},Object(d.mb)("Cancel")),l.a.createElement(f.c,{color:"primary",onClick:this.handleSubmit,disabled:!a},Object(d.mb)("Submit"))))}}]),a}(l.a.Component),fe=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).toggle=function(){r.props.toggle()},r.openFileInput=function(){r.fileInputRef.current.click()},r.uploadFile=function(e){if(r.fileInputRef.current.files.length){var t=r.fileInputRef.current.files[0].name;if("xlsx"==t.substr(t.lastIndexOf(".")+1)){var a=r.fileInputRef.current.files[0];r.props.importUserInBatch(a),r.toggle()}else r.setState({errorMsg:Object(d.mb)("Please choose a .xlsx file.")})}},r.fileInputRef=l.a.createRef(),r.state={errorMsg:""},r}return Object(r.a)(a,[{key:"render",value:function(){var e=this.state.errorMsg;return l.a.createElement(f.x,{isOpen:!0,toggle:this.toggle},l.a.createElement(f.A,{toggle:this.toggle},Object(d.mb)("Import users from a .xlsx file")),l.a.createElement(f.y,null,l.a.createElement("p",null,l.a.createElement("a",{className:"text-secondary small",href:"".concat(d.ic,"useradmin/batchadduser/example/")},Object(d.mb)("Download an example file"))),l.a.createElement("button",{className:"btn btn-outline-primary",onClick:this.openFileInput},Object(d.mb)("Upload file")),l.a.createElement("input",{className:"d-none",type:"file",onChange:this.uploadFile,ref:this.fileInputRef}),e&&l.a.createElement(f.a,{color:"danger"},e)),l.a.createElement(f.z,null,l.a.createElement(f.c,{color:"secondary",onClick:this.toggle},Object(d.mb)("Cancel"))))}}]),a}(l.a.Component),be=a(78),ve=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(){var e;Object(n.a)(this,a);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).translateRoles=function(e){switch(e){case"default":return Object(d.mb)("Default");case"guest":return Object(d.mb)("Guest");default:return e}},e}return Object(r.a)(a,[{key:"render",value:function(){return l.a.createElement(be.a,{isTextMode:this.props.isTextMode,isEditIconShow:this.props.isEditIconShow,options:this.props.roleOptions,currentOption:this.props.currentRole,onOptionChanged:this.props.onRoleChanged,translateOption:this.translateRoles})}}]),a}(l.a.Component),Ee=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).checkSubmitBtnActive=function(){var e=r.state,t=e.email,a=e.password,n=e.passwordAgain,i=!0;i=!!(t.trim()&&a.trim()&&n.trim()),r.setState({isSubmitBtnActive:i})},r.toggle=function(){r.props.toggleDialog()},r.togglePasswordVisible=function(){r.setState({isPasswordVisible:!r.state.isPasswordVisible})},r.inputPassword=function(e){var t=e.target.value;r.setState({password:t,errorMsg:""},r.checkSubmitBtnActive)},r.inputPasswordAgain=function(e){var t=e.target.value;r.setState({passwordAgain:t,errorMsg:""},r.checkSubmitBtnActive)},r.generatePassword=function(){var e=E.a.generatePassword(8);r.setState({password:e,passwordAgain:e},r.checkSubmitBtnActive)},r.inputEmail=function(e){var t=e.target.value;r.setState({email:t},r.checkSubmitBtnActive)},r.inputName=function(e){var t=e.target.value;r.setState({name:t})},r.updateRole=function(e){r.setState({role:e})},r.handleSubmit=function(){var e=r.state,t=e.email,a=e.password,n=e.passwordAgain,i=e.name,o=e.role;if(a==n){var s={email:t.trim(),name:i.trim(),password:a.trim()};r.props.showRole&&(s.role=o),r.props.addUser(s),r.toggle()}else r.setState({errorMsg:Object(d.mb)("Passwords do not match.")})},r.state={errorMsg:"",isPasswordVisible:!1,password:"",passwordAgain:"",email:"",name:"",role:"default",isSubmitBtnActive:!1},r}return Object(r.a)(a,[{key:"render",value:function(){var e=this.props,t=e.dialogTitle,a=e.showRole,n=this.state,r=n.errorMsg,i=n.isPasswordVisible,o=n.email,s=n.name,c=n.role,u=n.password,m=n.passwordAgain,p=n.isSubmitBtnActive;return l.a.createElement(f.x,{isOpen:!0,toggle:this.toggle},l.a.createElement(f.A,{toggle:this.toggle},t||Object(d.mb)("Add Member")),l.a.createElement(f.y,null,l.a.createElement(f.p,{autoComplete:"off"},l.a.createElement(f.q,null,l.a.createElement(f.w,null,Object(d.mb)("Email")),l.a.createElement(f.s,{value:o,onChange:this.inputEmail})),l.a.createElement(f.q,null,l.a.createElement(f.w,null,Object(d.mb)("Name(optional)")),l.a.createElement(f.s,{type:"text",value:s,onChange:this.inputName})),a&&l.a.createElement(f.q,null,l.a.createElement(f.w,null,Object(d.mb)("Role"),l.a.createElement("span",{className:"small text-secondary ml-1 fas fa-question-circle",title:Object(d.mb)("You can also add a user as a guest, who will not be allowed to create libraries and groups.")})),l.a.createElement(ve,{isTextMode:!1,isEditIconShow:!1,currentRole:c,roleOptions:this.props.availableRoles,onRoleChanged:this.updateRole})),l.a.createElement(f.q,null,l.a.createElement(f.w,null,Object(d.mb)("Password")),l.a.createElement(f.t,null,l.a.createElement(f.s,{autoComplete:"new-password",type:i?"text":"password",value:u||"",onChange:this.inputPassword}),l.a.createElement(f.u,{addonType:"append"},l.a.createElement(f.c,{className:"mt-0",onClick:this.togglePasswordVisible},l.a.createElement("i",{className:"link-operation-icon fas ".concat(this.state.isPasswordVisible?"fa-eye":"fa-eye-slash")})),l.a.createElement(f.c,{className:"mt-0",onClick:this.generatePassword},l.a.createElement("i",{className:"link-operation-icon fas fa-magic"}))))),l.a.createElement(f.q,null,l.a.createElement(f.w,null,Object(d.mb)("Password again")),l.a.createElement(f.s,{type:i?"text":"password",value:m||"",onChange:this.inputPasswordAgain}))),r&&l.a.createElement(f.a,{color:"danger"},r)),l.a.createElement(f.z,null,l.a.createElement(f.c,{color:"secondary",onClick:this.toggle},Object(d.mb)("Cancel")),l.a.createElement(f.c,{color:"primary",onClick:this.handleSubmit,disabled:!p},Object(d.mb)("Submit"))))}}]),a}(l.a.Component),ye=a(43),Oe=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).toggle=function(){r.props.toggle()},r.handleSelectChange=function(e){r.setState({options:e,isSubmitBtnActive:e.length>0})},r.handleSubmit=function(){r.props.addAdminInBatch(r.state.options.map((function(e){return e.email}))),r.toggle()},r.handleKeyPress=function(e){"Enter"===e.key&&(r.handleSubmit(),e.preventDefault())},r.state={options:null,isSubmitBtnActive:!1},r}return Object(r.a)(a,[{key:"render",value:function(){return l.a.createElement(f.x,{isOpen:!0,toggle:this.toggle},l.a.createElement(f.A,{toggle:this.toggle},Object(d.mb)("Add Admin")),l.a.createElement(f.y,null,l.a.createElement(ye.a,{isMulti:!0,className:"reviewer-select",placeholder:Object(d.mb)("Search users..."),onSelectChange:this.handleSelectChange})),l.a.createElement(f.z,null,l.a.createElement(f.c,{color:"secondary",onClick:this.toggle},Object(d.mb)("Cancel")),l.a.createElement(f.c,{color:"primary",onClick:this.handleSubmit,disabled:!this.state.isSubmitBtnActive},Object(d.mb)("Submit"))))}}]),a}(l.a.Component),xe=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(){var e;Object(n.a)(this,a);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).toggle=function(){e.props.toggleDialog()},e.executeOperation=function(){e.toggle(),e.props.executeOperation()},e}return Object(r.a)(a,[{key:"render",value:function(){var e=this.props,t=e.title,a=e.message,n=e.confirmBtnText;return l.a.createElement(f.x,{isOpen:!0,toggle:this.toggle},l.a.createElement(f.A,{toggle:this.toggle},t),l.a.createElement(f.y,null,l.a.createElement("p",{dangerouslySetInnerHTML:{__html:a}})),l.a.createElement(f.z,null,l.a.createElement(f.c,{color:"secondary",onClick:this.toggle},Object(d.mb)("Cancel")),l.a.createElement(f.c,{color:"primary",onClick:this.executeOperation},n||Object(d.mb)("Confirm"))))}}]),a}(s.Component),ke=function e(t){Object(n.a)(this,e),this.email=t.email,this.name=t.name,this.contact_email=t.contact_email,this.login_id=t.login_id,this.last_login=t.last_login,this.create_time=t.create_time,this.is_active=t.is_active,this.is_staff=t.is_staff,this.reference_id=t.reference_id,this.department=t.department,this.quota_total=t.quota_total,this.quota_usage=t.quota_usage,this.role=t.role,this.institution=t.institution,t.org_id&&(this.org_id=t.org_id),t.org_name&&(this.org_name=t.org_name),this.isSelected=!1},Se=function e(t){Object(n.a)(this,e),this.email=t.email,this.name=t.name,this.contact_email=t.contact_email,this.login_id=t.login_id,this.last_login=t.last_login,this.create_time=t.create_time,this.is_active=t.is_active,this.is_staff=t.is_staff,this.quota_total=t.quota_total,this.quota_usage=t.quota_usage,this.admin_role=t.admin_role,this.isSelected=!1},we=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).handleInputChange=function(e){r.setState({value:e.target.value})},r.handleKeyPress=function(e){"Enter"==e.key&&(e.preventDefault(),r.handleSubmit())},r.handleSubmit=function(){var e=r.state.value.trim();if(!e)return!1;r.props.submit(e)},r.state={value:""},r}return Object(r.a)(a,[{key:"render",value:function(){return l.a.createElement("div",{className:"input-icon"},l.a.createElement("i",{className:"d-flex input-icon-addon fas fa-search"}),l.a.createElement("input",{type:"text",className:"form-control search-input h-6 mr-1",style:{width:"15rem"},placeholder:this.props.placeholder,value:this.state.value,onChange:this.handleInputChange,onKeyPress:this.handleKeyPress,autoComplete:"off"}))}}]),a}(l.a.Component),De=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).navItems=[{name:"database",urlPart:"users",text:Object(d.mb)("Database")}],d.ob&&r.navItems.push({name:"ldap",urlPart:"users/ldap",text:Object(d.mb)("LDAP")},{name:"ldap-imported",urlPart:"users/ldap-imported",text:Object(d.mb)("LDAP(imported)")}),d.sb&&r.navItems.push({name:"admin",urlPart:"users/admins",text:Object(d.mb)("Admin")}),r}return Object(r.a)(a,[{key:"render",value:function(){var e=this.props.currentItem;return l.a.createElement("div",{className:"cur-view-path tab-nav-container"},l.a.createElement("ul",{className:"nav"},this.navItems.map((function(t,a){return l.a.createElement("li",{className:"nav-item",key:a},l.a.createElement(m.a,{to:"".concat(d.ic,"sys/").concat(t.urlPart,"/"),className:"nav-link".concat(e==t.name?" active":"")},t.text))}))))}}]),a}(l.a.Component),je=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(){var e;Object(n.a)(this,a);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).translateStatus=function(e){switch(e){case"active":return Object(d.mb)("Active");case"inactive":return Object(d.mb)("Inactive")}},e}return Object(r.a)(a,[{key:"render",value:function(){return l.a.createElement(be.a,{isTextMode:this.props.isTextMode,isEditIconShow:this.props.isEditIconShow,options:this.props.statusOptions,currentOption:this.props.currentStatus,onOptionChanged:this.props.onStatusChanged,translateOption:this.translateStatus})}}]),a}(l.a.Component),Ce=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).onMenuItemClick=function(e){var t=E.a.getEventData(e,"op");r.props.onMenuItemClick(t)},r.onDropdownToggleClick=function(e){r.toggleOperationMenu(e)},r.toggleOperationMenu=function(e){r.setState({isItemMenuShow:!r.state.isItemMenuShow},(function(){r.state.isItemMenuShow?r.props.onFreezedItem():r.props.onUnfreezedItem()}))},r.state={isItemMenuShow:!1},r}return Object(r.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.operations,n=t.translateOperations;return l.a.createElement(f.l,{isOpen:this.state.isItemMenuShow,toggle:this.toggleOperationMenu},l.a.createElement(f.o,{tag:"i",className:"d-flex w-5 h-5 align-items-center justify-content-center sf-dropdown-toggle fa fa-ellipsis-v",title:Object(d.mb)("More Operations"),"data-toggle":"dropdown","aria-expanded":this.state.isItemMenuShow}),l.a.createElement(f.n,{className:"my-1 mr-2"},a.map((function(t,a){return l.a.createElement(f.m,{key:a,"data-op":t,onClick:e.onMenuItemClick},n(t))}))))}}]),a}(l.a.Component),Ne=window.sysadmin.pageOptions,Pe=Ne.availableRoles,_e=Ne.availableAdminRoles,Me=Ne.institutions,Ie=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).onFreezedItem=function(){r.setState({isItemFreezed:!0})},r.onUnfreezedItem=function(){r.setState({isItemFreezed:!1})},r.getPreviousPage=function(){r.props.getListByPage(r.props.currentPage-1)},r.getNextPage=function(){r.props.getListByPage(r.props.currentPage+1)},r.sortByQuotaUsage=function(e){e.preventDefault(),r.props.sortByQuotaUsage()},r.state={isItemFreezed:!1},r}return Object(r.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.isAdmin,n=t.loading,r=t.errorMsg,i=t.items,o=t.isAllUsersSelected,c=t.curPerPage,u=t.hasNextPage,m=t.currentPage,p=t.sortBy,h=t.sortOrder;if(n)return l.a.createElement(y.a,null);if(r)return l.a.createElement("p",{className:"error text-center mt-4"},r);var g,f=l.a.createElement(ne.a,null,l.a.createElement("h2",null,Object(d.mb)("No users"))),b=[];g=""==p?l.a.createElement("span",{className:"fas fa-sort"}):l.a.createElement("span",{className:"fas ".concat("asc"==h?"fa-caret-up":"fa-caret-down")});var v=Object(d.mb)("Space Used"),E=void 0!=p?l.a.createElement("a",{className:"d-inline-block table-sort-op",href:"#",onClick:this.sortByQuotaUsage},v," ",g):v,O=l.a.createElement(s.Fragment,null,E," / ".concat(Object(d.mb)("Quota"))),x="".concat(Object(d.mb)("Name")," / ").concat(Object(d.mb)("Contact Email")),k="".concat(Object(d.mb)("Created At")," / ").concat(Object(d.mb)("Last Login"));d.wb?b.push({width:"20%",text:x},{width:"15%",text:Object(d.mb)("Status")},{width:"15%",text:Object(d.mb)("Role")}):b.push({width:"30%",text:x},{width:"20%",text:Object(d.mb)("Status")}),d.Kb&&!a?b.push({width:"14%",text:O},{width:"14%",text:Object(d.mb)("Institution")},{width:"14%",text:k},{width:"5%",text:""}):b.push({width:"20%",text:O},{width:"22%",text:k},{width:"5%",text:""});var S=l.a.createElement(s.Fragment,null,l.a.createElement("table",null,l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",{width:"3%",className:"pl-2"},l.a.createElement("input",{type:"checkbox",className:"vam",onChange:this.props.toggleSelectAllUsers,checked:o})),b.map((function(e,t){return l.a.createElement("th",{width:e.width,key:t},e.text)})))),l.a.createElement("tbody",null,i.map((function(t,a){return l.a.createElement(Te,{key:a,item:t,isItemFreezed:e.state.isItemFreezed,onFreezedItem:e.onFreezedItem,onUnfreezedItem:e.onUnfreezedItem,updateUser:e.props.updateUser,deleteUser:e.props.deleteUser,updateAdminRole:e.props.updateAdminRole,revokeAdmin:e.props.revokeAdmin,onUserSelected:e.props.onUserSelected,isAdmin:e.props.isAdmin,isLDAPImported:e.props.isLDAPImported})})))),!this.props.isAdmin&&!this.props.isSearchResult&&l.a.createElement(X.a,{gotoPreviousPage:this.getPreviousPage,gotoNextPage:this.getNextPage,currentPage:m,hasNextPage:u,curPerPage:c,resetPerPage:this.props.resetPerPage}));return i.length?S:f}}]),a}(s.Component),Te=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).handleMouseEnter=function(){r.props.isItemFreezed||r.setState({isOpIconShown:!0,highlight:!0})},r.handleMouseLeave=function(){r.props.isItemFreezed||r.setState({isOpIconShown:!1,highlight:!1})},r.onUnfreezedItem=function(){r.setState({highlight:!1,isOpIconShow:!1}),r.props.onUnfreezedItem()},r.toggleSetQuotaDialog=function(){r.setState({isSetQuotaDialogOpen:!r.state.isSetQuotaDialogOpen})},r.toggleDeleteUserDialog=function(){r.setState({isDeleteUserDialogOpen:!r.state.isDeleteUserDialogOpen})},r.toggleResetUserPasswordDialog=function(){r.setState({isResetUserPasswordDialogOpen:!r.state.isResetUserPasswordDialogOpen})},r.toggleRevokeAdminDialog=function(){r.setState({isRevokeAdminDialogOpen:!r.state.isRevokeAdminDialogOpen})},r.onUserSelected=function(){r.props.onUserSelected(r.props.item)},r.updateStatus=function(e){var t="active"==e;t&&v.a.notify(Object(d.mb)("It may take some time, please wait.")),r.props.updateUser(r.props.item.email,"is_active",t)},r.updateRole=function(e){r.props.updateUser(r.props.item.email,"role",e)},r.updateAdminRole=function(e){r.props.updateAdminRole(r.props.item.email,e)},r.translateAdminRole=function(e){switch(e){case"default_admin":return Object(d.mb)("Default Admin");case"system_admin":return Object(d.mb)("System Admin");case"daily_admin":return Object(d.mb)("Daily Admin");case"audit_admin":return Object(d.mb)("Audit Admin");default:return e}},r.updateInstitution=function(e){r.props.updateUser(r.props.item.email,"institution",e)},r.translateInstitution=function(e){return e},r.updateQuota=function(e){r.props.updateUser(r.props.item.email,"quota_total",e)},r.deleteUser=function(){v.a.notify(Object(d.mb)("It may take some time, please wait.")),r.props.deleteUser(r.props.item.email)},r.resetPassword=function(){v.a.notify(Object(d.mb)("It may take some time, please wait.")),b.a.sysAdminResetUserPassword(r.props.item.email).then((function(e){v.a.success(e.data.reset_tip)})).catch((function(e){var t=E.a.getErrorMsg(e);v.a.danger(t)}))},r.revokeAdmin=function(){var e=r.props.item;r.props.revokeAdmin(e.email,e.name)},r.getMenuOperations=function(){var e=r.props,t=e.isAdmin,a=e.isLDAPImported,n=e.isSearchResult,i=e.item,o=["Delete"];return(!a||n&&"db"==i.source)&&o.push("Reset Password"),t&&(o=["Revoke Admin"]),o},r.translateOperations=function(e){var t="";switch(e){case"Delete":t=Object(d.mb)("Delete");break;case"Reset Password":t=Object(d.mb)("Reset Password");break;case"Revoke Admin":t=Object(d.mb)("Revoke Admin")}return t},r.onMenuItemClick=function(e){switch(e){case"Delete":r.toggleDeleteUserDialog();break;case"Reset Password":r.toggleResetUserPasswordDialog();break;case"Revoke Admin":r.toggleRevokeAdminDialog()}},r.state={isOpIconShown:!1,highlight:!1,isSetQuotaDialogOpen:!1,isDeleteUserDialogOpen:!1,isResetUserPasswordDialogOpen:!1,isRevokeAdminDialogOpen:!1},r}return Object(r.a)(a,[{key:"render",value:function(){var e=this.props,t=e.item,a=e.isAdmin,n=this.state,r=n.isOpIconShown,i=n.isSetQuotaDialogOpen,o=n.isDeleteUserDialogOpen,c=n.isResetUserPasswordDialogOpen,u=n.isRevokeAdminDialogOpen,p='<span class="op-target">'+E.a.HTMLescape(t.name)+"</span>",h=Object(d.mb)("Are you sure you want to delete {placeholder} ?").replace("{placeholder}",p),g=Object(d.mb)("Are you sure you want to reset the password of {placeholder} ?").replace("{placeholder}",p),f=Object(d.mb)("Are you sure you want to revoke the admin permission of {placeholder} ?").replace("{placeholder}",p);return l.a.createElement(s.Fragment,null,l.a.createElement("tr",{className:this.state.highlight?"tr-highlight":"",onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave},l.a.createElement("td",{className:"pl-2"},l.a.createElement("input",{type:"checkbox",className:"vam",onChange:this.onUserSelected,checked:t.isSelected})),l.a.createElement("td",null,l.a.createElement(ue,{email:t.email,name:t.name}),t.contact_email&&l.a.createElement(s.Fragment,null,l.a.createElement("br",null),t.contact_email),t.org_id&&l.a.createElement(s.Fragment,null,l.a.createElement("br",null),l.a.createElement(m.a,{to:"".concat(d.ic,"sys/organizations/").concat(t.org_id,"/info/")},"(",t.org_name,")"))),l.a.createElement("td",null,l.a.createElement(je,{isTextMode:!0,isEditIconShow:r,currentStatus:t.is_active?"active":"inactive",statusOptions:["active","inactive"],onStatusChanged:this.updateStatus})),d.wb&&l.a.createElement("td",null,a?l.a.createElement(be.a,{isTextMode:!0,isEditIconShow:r,options:_e,currentOption:t.admin_role,onOptionChanged:this.updateAdminRole,translateOption:this.translateAdminRole}):l.a.createElement(ve,{isTextMode:!0,isEditIconShow:r,currentRole:t.role,roleOptions:Pe,onRoleChanged:this.updateRole})),l.a.createElement("td",null,"".concat(E.a.bytesToSize(t.quota_usage)," / ").concat(t.quota_total>0?E.a.bytesToSize(t.quota_total):"--"),l.a.createElement("span",{title:Object(d.mb)("Edit"),className:"fa fa-pencil-alt attr-action-icon ".concat(r?"":"invisible"),onClick:this.toggleSetQuotaDialog})),d.Kb&&!a&&l.a.createElement("td",null,l.a.createElement(be.a,{isTextMode:!0,isEditIconShow:r&&Me.length>0,options:Me,currentOption:t.institution,onOptionChanged:this.updateInstitution,translateOption:this.translateInstitution})),l.a.createElement("td",null,"".concat(t.create_time?w()(t.create_time).format("YYYY-MM-DD HH:mm"):"--"," /"),l.a.createElement("br",null),"".concat(t.last_login?w()(t.last_login).fromNow():"--")),l.a.createElement("td",null,t.email!=d.tc&&r&&l.a.createElement(Ce,{operations:this.getMenuOperations(),translateOperations:this.translateOperations,onMenuItemClick:this.onMenuItemClick,onFreezedItem:this.props.onFreezedItem,onUnfreezedItem:this.onUnfreezedItem}))),i&&l.a.createElement(ge,{toggle:this.toggleSetQuotaDialog,updateQuota:this.updateQuota}),o&&l.a.createElement(xe,{title:Object(d.mb)("Delete User"),message:h,executeOperation:this.deleteUser,confirmBtnText:Object(d.mb)("Delete"),toggleDialog:this.toggleDeleteUserDialog}),c&&l.a.createElement(xe,{title:Object(d.mb)("Reset Password"),message:g,executeOperation:this.resetPassword,confirmBtnText:Object(d.mb)("Reset"),toggleDialog:this.toggleResetUserPasswordDialog}),u&&l.a.createElement(xe,{title:Object(d.mb)("Revoke Admin"),message:f,executeOperation:this.revokeAdmin,confirmBtnText:Object(d.mb)("Revoke"),toggleDialog:this.toggleRevokeAdminDialog}))}}]),a}(s.Component),Ae=Ie,Le=window.sysadmin.pageOptions.availableRoles,Re=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).toggleImportUserDialog=function(){r.setState({isImportUserDialogOpen:!r.state.isImportUserDialogOpen})},r.toggleAddUserDialog=function(){r.setState({isAddUserDialogOpen:!r.state.isAddUserDialogOpen})},r.toggleBatchSetQuotaDialog=function(){r.setState({isBatchSetQuotaDialogOpen:!r.state.isBatchSetQuotaDialogOpen})},r.toggleBatchDeleteUserDialog=function(){r.setState({isBatchDeleteUserDialogOpen:!r.state.isBatchDeleteUserDialogOpen})},r.onUserSelected=function(e){var t=!1,a=[],n=r.state.userList.map((function(n){return n.email===e.email&&(n.isSelected=!n.isSelected),1==n.isSelected?(t=!0,a.push(n)):a=a.filter((function(e){return e.email!=n.email})),n}));r.setState({userList:n,hasUserSelected:t,selectedUserList:a})},r.toggleSelectAllUsers=function(){if(r.state.isAllUsersSelected){var e=r.state.userList.map((function(e){return e.isSelected=!1,e}));r.setState({userList:e,hasUserSelected:!1,isAllUsersSelected:!1,selectedUserList:[]})}else{var t=r.state.userList.map((function(e){return e.isSelected=!0,e}));r.setState({userList:t,hasUserSelected:!0,isAllUsersSelected:!0,selectedUserList:t})}},r.getUserList=function(){b.a.sysAdminListAdmins().then((function(e){var t=e.data.admin_user_list.map((function(e){return new Se(e)}));r.setState({userList:t,loading:!1})})).catch((function(e){r.setState({loading:!1,errorMsg:E.a.getErrorMsg(e,!0)})}))},r.getUsersListByPage=function(e){var t=r.state,a=t.perPage,n=t.sortBy,i=t.sortOrder,o=r.props.isLDAPImported;b.a.sysAdminListUsers(e,a,o,n,i).then((function(t){var n=t.data.data.map((function(e){return new ke(e)}));r.setState({userList:n,loading:!1,hasNextPage:E.a.hasNextPage(e,a,t.data.total_count),currentPage:e})})).catch((function(e){r.setState({loading:!1,errorMsg:E.a.getErrorMsg(e,!0)})}))},r.sortByQuotaUsage=function(){r.setState({sortBy:"quota_usage",sortOrder:"asc"==r.state.sortOrder?"desc":"asc",currentPage:1},(function(){var e=new URL(location.href),t=new URLSearchParams(e.search),a=r.state,n=a.currentPage,i=a.sortBy,o=a.sortOrder;t.set("page",n),t.set("order_by",i),t.set("direction",o),e.search=t.toString(),Object(m.c)(e.toString()),r.getUsersListByPage(n)}))},r.deleteUser=function(e){b.a.sysAdminDeleteUser(e).then((function(t){var a=r.state.userList.filter((function(t){return t.email!=e}));r.setState({userList:a}),v.a.success(Object(d.mb)("Successfully deleted 1 item."))})).catch((function(e){var t=E.a.getErrorMsg(e);v.a.danger(t)}))},r.setUserQuotaInBatch=function(e){var t=r.state.selectedUserList.map((function(e){return e.email}));b.a.sysAdminSetUserQuotaInBatch(t,e).then((function(e){var t=r.state.userList.map((function(t){return e.data.success.map((function(e){t.email==e.email&&(t.quota_total=e.quota_total)})),t}));r.setState({userList:t})})).catch((function(e){var t=E.a.getErrorMsg(e);v.a.danger(t)}))},r.deleteUserInBatch=function(){var e=r.state.selectedUserList.map((function(e){return e.email}));b.a.sysAdminDeleteUserInBatch(e).then((function(t){if(t.data.success.length){var a=r.state.userList.filter((function(e){return!t.data.success.some((function(t){return t.email==e.email}))}));r.setState({userList:a,hasUserSelected:e.length!=t.data.success.length});var n=t.data.success.length,i=1==n?Object(d.mb)("Successfully deleted 1 user."):Object(d.mb)("Successfully deleted {user_number_placeholder} users.").replace("{user_number_placeholder}",n);v.a.success(i)}t.data.failed.map((function(e){var t="".concat(e.email,": ").concat(e.error_msg);v.a.danger(t)}))})).catch((function(e){var t=E.a.getErrorMsg(e);v.a.danger(t)}))},r.importUserInBatch=function(e){v.a.notify(Object(d.mb)("It may take some time, please wait.")),b.a.sysAdminImportUserViaFile(e).then((function(e){if(e.data.success.length){var t=e.data.success.map((function(e){return void 0==e.institution&&(e.institution=""),new ke(e)}));r.setState({userList:t.concat(r.state.userList)})}e.data.failed.map((function(e){var t="".concat(e.email,": ").concat(e.error_msg);v.a.danger(t)}))})).catch((function(e){var t=E.a.getErrorMsg(e);v.a.danger(t)}))},r.addUser=function(e){v.a.notify(Object(d.mb)("It may take some time, please wait."));var t=e.email,a=e.name,n=e.role,i=e.password;b.a.sysAdminAddUser(t,a,n,i).then((function(e){var t=r.state.userList;t.unshift(e.data),r.setState({userList:t}),v.a.success(e.data.add_user_tip)})).catch((function(e){var t=E.a.getErrorMsg(e);v.a.danger(t)}))},r.resetPerPage=function(e){r.setState({perPage:e},(function(){r.getUsersListByPage(1)}))},r.updateUser=function(e,t,a){b.a.sysAdminUpdateUser(e,t,a).then((function(n){var i=r.state.userList.map((function(a){return a.email==e&&(a[t]=n.data[t]),a}));r.setState({userList:i});var o="is_active"==t&&a?n.data.update_status_tip:Object(d.mb)("Edit succeeded");v.a.success(o)})).catch((function(e){var t=E.a.getErrorMsg(e);v.a.danger(t)}))},r.updateAdminRole=function(e,t){b.a.sysAdminUpdateAdminRole(e,t).then((function(t){var a=r.state.userList.map((function(a){return a.email==e&&(a.admin_role=t.data.role),a}));r.setState({userList:a}),v.a.success(Object(d.mb)("Edit succeeded"))})).catch((function(e){var t=E.a.getErrorMsg(e);v.a.danger(t)}))},r.revokeAdmin=function(e,t){b.a.sysAdminUpdateUser(e,"is_staff",!1).then((function(a){var n=r.state.userList.filter((function(t){return t.email!=e}));r.setState({userList:n}),v.a.success(Object(d.mb)("Successfully revoked the admin permission of {placeholder}.").replace("{placeholder}",t))})).catch((function(e){var t=E.a.getErrorMsg(e);v.a.danger(t)}))},r.getOperationsForAll=function(){var e=r.props,t=e.isAdmin,a=e.isLDAPImported;return t?l.a.createElement(f.c,{className:"btn btn-secondary operation-item",onClick:r.toggleBatchAddAdminDialog},Object(d.mb)("Add Admin")):a?l.a.createElement("a",{className:"btn btn-secondary operation-item",href:"".concat(d.ic,"sys/useradmin/export-excel/")},Object(d.mb)("Export Excel")):l.a.createElement(s.Fragment,null,l.a.createElement(f.c,{className:"btn btn-secondary operation-item",onClick:r.toggleImportUserDialog},Object(d.mb)("Import Users")),l.a.createElement(f.c,{className:"btn btn-secondary operation-item",onClick:r.toggleAddUserDialog},Object(d.mb)("Add User")),l.a.createElement("a",{className:"btn btn-secondary operation-item",href:"".concat(d.ic,"sys/useradmin/export-excel/")},Object(d.mb)("Export Excel")))},r.getCurrentNavItem=function(){var e=r.props,t=e.isAdmin,a=e.isLDAPImported,n="database";return t?n="admin":a&&(n="ldap-imported"),n},r.toggleBatchAddAdminDialog=function(){r.setState({isBatchAddAdminDialogOpen:!r.state.isBatchAddAdminDialogOpen})},r.addAdminInBatch=function(e){b.a.sysAdminAddAdminInBatch(e).then((function(e){var t=e.data.success.map((function(e){return new Se(e)}));r.setState({userList:t.concat(r.state.userList)}),e.data.failed.map((function(e){var t="".concat(e.email,": ").concat(e.error_msg);v.a.danger(t)}))})).catch((function(e){var t=E.a.getErrorMsg(e);v.a.danger(t)}))},r.getSearch=function(){return r.props.isAdmin?null:l.a.createElement(we,{placeholder:Object(d.mb)("Search users"),submit:r.searchItems})},r.searchItems=function(e){Object(m.c)("".concat(d.ic,"sys/search-users/?query=").concat(encodeURIComponent(e)))},r.state={loading:!0,errorMsg:"",userList:[],hasNextPage:!1,currentPage:1,perPage:25,hasUserSelected:!1,selectedUserList:[],isAllUsersSelected:!1,isImportUserDialogOpen:!1,isAddUserDialogOpen:!1,isBatchSetQuotaDialogOpen:!1,isBatchDeleteUserDialogOpen:!1,isBatchAddAdminDialogOpen:!1},r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this;if(this.props.isAdmin)this.getUserList();else{var t=new URL(window.location).searchParams,a=this.state,n=a.currentPage,r=a.perPage,i=a.sortBy,o=void 0===i?"":i,s=a.sortOrder,l=void 0===s?"asc":s;this.setState({perPage:parseInt(t.get("per_page")||r),currentPage:parseInt(t.get("page")||n),sortBy:t.get("order_by")||o,sortOrder:t.get("direction")||l},(function(){e.getUsersListByPage(e.state.currentPage)}))}}},{key:"render",value:function(){var e=this.props,t=e.isAdmin,a=e.isLDAPImported,n=this.state,r=n.hasUserSelected,i=n.isImportUserDialogOpen,o=n.isAddUserDialogOpen,c=n.isBatchDeleteUserDialogOpen,u=n.isBatchSetQuotaDialogOpen,m=n.isBatchAddAdminDialogOpen;return l.a.createElement(s.Fragment,null,l.a.createElement(x,{search:this.getSearch()},r?l.a.createElement(s.Fragment,null,l.a.createElement(f.c,{className:"btn btn-secondary operation-item",onClick:this.toggleBatchSetQuotaDialog},Object(d.mb)("Set Quota")),l.a.createElement(f.c,{className:"btn btn-secondary operation-item",onClick:this.toggleBatchDeleteUserDialog},Object(d.mb)("Delete Users"))):this.getOperationsForAll()),l.a.createElement("div",{className:"main-panel-center flex-row"},l.a.createElement("div",{className:"cur-view-container"},l.a.createElement(De,{currentItem:this.getCurrentNavItem()}),l.a.createElement("div",{className:"cur-view-content"},l.a.createElement(Ae,{isAdmin:t,isLDAPImported:a,loading:this.state.loading,errorMsg:this.state.errorMsg,items:this.state.userList,sortBy:this.state.sortBy,sortOrder:this.state.sortOrder,sortByQuotaUsage:this.sortByQuotaUsage,currentPage:this.state.currentPage,hasNextPage:this.state.hasNextPage,curPerPage:this.state.perPage,resetPerPage:this.resetPerPage,getListByPage:this.getUsersListByPage,updateUser:this.updateUser,deleteUser:this.deleteUser,updateAdminRole:this.updateAdminRole,revokeAdmin:this.revokeAdmin,onUserSelected:this.onUserSelected,isAllUsersSelected:this.isAllUsersSelected,toggleSelectAllUsers:this.toggleSelectAllUsers})))),i&&l.a.createElement(fe,{toggle:this.toggleImportUserDialog,importUserInBatch:this.importUserInBatch}),o&&l.a.createElement(Ee,{dialogTitle:Object(d.mb)("Add User"),showRole:d.wb,availableRoles:Le,addUser:this.addUser,toggleDialog:this.toggleAddUserDialog}),u&&l.a.createElement(ge,{toggle:this.toggleBatchSetQuotaDialog,updateQuota:this.setUserQuotaInBatch}),c&&l.a.createElement(xe,{title:Object(d.mb)("Delete Users"),message:Object(d.mb)("Are you sure you want to delete the selected user(s) ?"),executeOperation:this.deleteUserInBatch,confirmBtnText:Object(d.mb)("Delete"),toggleDialog:this.toggleBatchDeleteUserDialog}),m&&l.a.createElement(Oe,{addAdminInBatch:this.addAdminInBatch,toggle:this.toggleBatchAddAdminDialog}))}}]),a}(s.Component),Fe=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(r.a)(a,[{key:"render",value:function(){return l.a.createElement(Re,{isAdmin:!0})}}]),a}(s.Component),Ue=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(r.a)(a,[{key:"render",value:function(){return l.a.createElement(Re,{isLDAPImported:!0})}}]),a}(s.Component),Be=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).getPreviousPage=function(){r.props.getListByPage(r.props.currentPage-1)},r.getNextPage=function(){r.props.getListByPage(r.props.currentPage+1)},r}return Object(r.a)(a,[{key:"render",value:function(){var e=this.props,t=e.loading,a=e.errorMsg,n=e.items,r=e.curPerPage,i=e.hasNextPage,o=e.currentPage;if(t)return l.a.createElement(y.a,null);if(a)return l.a.createElement("p",{className:"error text-center mt-4"},a);var c=l.a.createElement(ne.a,null,l.a.createElement("h2",null,Object(d.mb)("No users"))),u=l.a.createElement(s.Fragment,null,l.a.createElement("table",{className:"table-hover"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",{width:"40%"},Object(d.mb)("Email")),l.a.createElement("th",{width:"30%"},Object(d.mb)("Space Used")," / ",Object(d.mb)("Quota")),l.a.createElement("th",{width:"30%"},Object(d.mb)("Last Login")))),l.a.createElement("tbody",null,n.map((function(e,t){return l.a.createElement(ze,{key:t,item:e})})))),l.a.createElement(X.a,{gotoPreviousPage:this.getPreviousPage,gotoNextPage:this.getNextPage,currentPage:o,hasNextPage:i,curPerPage:r,resetPerPage:this.props.resetPerPage}));return n.length?u:c}}]),a}(s.Component),ze=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){return Object(n.a)(this,a),t.call(this,e)}return Object(r.a)(a,[{key:"render",value:function(){var e=this.props.item;E.a.HTMLescape(e.email);return l.a.createElement(s.Fragment,null,l.a.createElement("tr",null,l.a.createElement("td",null,l.a.createElement(ue,{email:e.email,name:e.email})),l.a.createElement("td",null,"".concat(E.a.bytesToSize(e.quota_usage)," / ").concat(e.quota_total>0?E.a.bytesToSize(e.quota_total):"--")),l.a.createElement("td",null,e.last_login?w()(e.last_login).fromNow():"--")))}}]),a}(s.Component),He=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).getUsersListByPage=function(e){var t=r.state.perPage;b.a.sysAdminListLDAPUsers(e,t).then((function(t){r.setState({loading:!1,userList:t.data.ldap_user_list,hasNextPage:t.data.has_next_page,currentPage:e})})).catch((function(e){r.setState({loading:!1,errorMsg:E.a.getErrorMsg(e,!0)})}))},r.resetPerPage=function(e){r.setState({perPage:e},(function(){r.getUsersListByPage(1)}))},r.state={loading:!0,errorMsg:"",userList:{},hasNextPage:!1,currentPage:1,perPage:25},r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=new URL(window.location).searchParams,a=this.state,n=a.currentPage,r=a.perPage;this.setState({perPage:parseInt(t.get("per_page")||r),currentPage:parseInt(t.get("page")||n)},(function(){e.getUsersListByPage(e.state.currentPage)}))}},{key:"render",value:function(){return l.a.createElement(s.Fragment,null,l.a.createElement(x,null),l.a.createElement("div",{className:"main-panel-center flex-row"},l.a.createElement("div",{className:"cur-view-container"},l.a.createElement(De,{currentItem:"ldap"}),l.a.createElement("div",{className:"cur-view-content"},l.a.createElement(Be,{resetPerPage:this.resetPerPage,loading:this.state.loading,errorMsg:this.state.errorMsg,items:this.state.userList,currentPage:this.state.currentPage,hasNextPage:this.state.hasNextPage,curPerPage:this.state.perPage,getListByPage:this.getUsersListByPage})))))}}]),a}(s.Component),qe=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).toggleBatchSetQuotaDialog=function(){r.setState({isBatchSetQuotaDialogOpen:!r.state.isBatchSetQuotaDialogOpen})},r.toggleBatchDeleteUserDialog=function(){r.setState({isBatchDeleteUserDialogOpen:!r.state.isBatchDeleteUserDialogOpen})},r.onUserSelected=function(e){var t=!1,a=[],n=r.state.userList.map((function(n){return n.email===e.email&&(n.isSelected=!n.isSelected),1==n.isSelected?(t=!0,a.push(n)):a=a.filter((function(e){return e.email!=n.email})),n}));r.setState({userList:n,hasUserSelected:t,selectedUserList:a})},r.toggleSelectAllUsers=function(){if(r.state.isAllUsersSelected){var e=r.state.userList.map((function(e){return e.isSelected=!1,e}));r.setState({userList:e,hasUserSelected:!1,isAllUsersSelected:!1,selectedUserList:[]})}else{var t=r.state.userList.map((function(e){return e.isSelected=!0,e}));r.setState({userList:t,hasUserSelected:!0,isAllUsersSelected:!0,selectedUserList:t})}},r.getItems=function(){b.a.sysAdminSearchUsers(r.state.query.trim()).then((function(e){r.setState({userList:e.data.user_list,loading:!1})})).catch((function(e){r.setState({loading:!1,errorMsg:E.a.getErrorMsg(e,!0)})}))},r.deleteUser=function(e){b.a.sysAdminDeleteUser(e).then((function(t){var a=r.state.userList.filter((function(t){return t.email!=e}));r.setState({userList:a}),v.a.success(Object(d.mb)("Successfully deleted 1 item."))})).catch((function(e){var t=E.a.getErrorMsg(e);v.a.danger(t)}))},r.setUserQuotaInBatch=function(e){var t=r.state.selectedUserList.map((function(e){return e.email}));b.a.sysAdminSetUserQuotaInBatch(t,e).then((function(e){var t=r.state.userList.map((function(t){return e.data.success.map((function(e){t.email==e.email&&(t.quota_total=e.quota_total)})),t}));r.setState({userList:t})})).catch((function(e){var t=E.a.getErrorMsg(e);v.a.danger(t)}))},r.deleteUserInBatch=function(){var e=r.state.selectedUserList.map((function(e){return e.email}));b.a.sysAdminDeleteUserInBatch(e).then((function(t){if(t.data.success.length){var a=r.state.userList.filter((function(e){return!t.data.success.some((function(t){return t.email==e.email}))}));r.setState({userList:a,hasUserSelected:e.length!=t.data.success.length});var n=t.data.success.length,i=1==n?Object(d.mb)("Successfully deleted 1 user."):Object(d.mb)("Successfully deleted {user_number_placeholder} users.").replace("{user_number_placeholder}",n);v.a.success(i)}t.data.failed.map((function(e){var t="".concat(e.email,": ").concat(e.error_msg);v.a.danger(t)}))})).catch((function(e){var t=E.a.getErrorMsg(e);v.a.danger(t)}))},r.updateUser=function(e,t,a){b.a.sysAdminUpdateUser(e,t,a).then((function(n){var i=r.state.userList.map((function(a){return a.email==e&&(a[t]=n.data[t]),a}));r.setState({userList:i});var o="is_active"==t&&a?n.data.update_status_tip:Object(d.mb)("Edit succeeded");v.a.success(o)})).catch((function(e){var t=E.a.getErrorMsg(e);v.a.danger(t)}))},r.updateAdminRole=function(e,t){b.a.sysAdminUpdateAdminRole(e,t).then((function(t){var a=r.state.userList.map((function(a){return a.email==e&&(a.admin_role=t.data.role),a}));r.setState({userList:a}),v.a.success(Object(d.mb)("Edit succeeded"))})).catch((function(e){var t=E.a.getErrorMsg(e);v.a.danger(t)}))},r.revokeAdmin=function(e,t){b.a.sysAdminUpdateUser(e,"is_staff",!1).then((function(a){var n=r.state.userList.filter((function(t){return t.email!=e}));r.setState({userList:n}),v.a.success(Object(d.mb)("Successfully revoked the admin permission of {placeholder}.").replace("{placeholder}",t))})).catch((function(e){var t=E.a.getErrorMsg(e);v.a.danger(t)}))},r.handleInputChange=function(e){r.setState({query:e.target.value},r.checkSubmitBtnActive)},r.checkSubmitBtnActive=function(){var e=r.state.query;r.setState({isSubmitBtnActive:e.trim()})},r.state={query:"",isSubmitBtnActive:!1,loading:!0,errorMsg:"",userList:[],hasUserSelected:!1,selectedUserList:[],isAllUsersSelected:!1,isBatchSetQuotaDialogOpen:!1,isBatchDeleteUserDialogOpen:!1},r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=new URL(document.location).searchParams;this.setState({query:e.get("query")||""},this.getItems)}},{key:"render",value:function(){var e=this.state,t=e.query,a=e.isSubmitBtnActive,n=this.state,r=n.hasUserSelected,i=n.isBatchDeleteUserDialogOpen,o=n.isBatchSetQuotaDialogOpen;return l.a.createElement(s.Fragment,null,r?l.a.createElement(x,null,l.a.createElement(s.Fragment,null,l.a.createElement(f.c,{className:"btn btn-secondary operation-item",onClick:this.toggleBatchSetQuotaDialog},Object(d.mb)("Set Quota")),l.a.createElement(f.c,{className:"btn btn-secondary operation-item",onClick:this.toggleBatchDeleteUserDialog},Object(d.mb)("Delete Users")))):l.a.createElement(x,null),l.a.createElement("div",{className:"main-panel-center flex-row"},l.a.createElement("div",{className:"cur-view-container"},l.a.createElement("div",{className:"cur-view-path"},l.a.createElement("h3",{className:"sf-heading"},Object(d.mb)("Users"))),l.a.createElement("div",{className:"cur-view-content"},l.a.createElement("div",{className:"mt-4 mb-6"},l.a.createElement("h4",{className:"border-bottom font-weight-normal mb-2 pb-1"},Object(d.mb)("Search Users")),l.a.createElement(f.p,null,l.a.createElement(f.q,{row:!0},l.a.createElement(f.i,{sm:5},l.a.createElement(f.s,{type:"text",name:"query",value:t,placeholder:Object(d.mb)("Search users"),onChange:this.handleInputChange}))),l.a.createElement(f.q,{row:!0},l.a.createElement(f.i,{sm:{size:5}},l.a.createElement("button",{className:"btn btn-outline-primary",disabled:!a,onClick:this.getItems},Object(d.mb)("Submit")))))),l.a.createElement("div",{className:"mt-4 mb-6"},l.a.createElement("h4",{className:"border-bottom font-weight-normal mb-2 pb-1"},Object(d.mb)("Result")),l.a.createElement(Ae,{isLDAPImported:!1,isAdmin:!1,isSearchResult:!0,loading:this.state.loading,errorMsg:this.state.errorMsg,items:this.state.userList,updateUser:this.updateUser,deleteUser:this.deleteUser,updateAdminRole:this.updateAdminRole,revokeAdmin:this.revokeAdmin,onUserSelected:this.onUserSelected,isAllUsersSelected:this.isAllUsersSelected,toggleSelectAllUsers:this.toggleSelectAllUsers}))))),o&&l.a.createElement(ge,{toggle:this.toggleBatchSetQuotaDialog,updateQuota:this.setUserQuotaInBatch}),i&&l.a.createElement(xe,{title:Object(d.mb)("Delete Users"),message:Object(d.mb)("Are you sure you want to delete the selected user(s) ?"),executeOperation:this.deleteUserInBatch,confirmBtnText:Object(d.mb)("Delete"),toggleDialog:this.toggleBatchDeleteUserDialog}))}}]),a}(s.Component),We=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).handleInputChange=function(e){var t=e.target.value;r.setState({value:t})},r.handleKeyPress=function(e){"Enter"==e.key&&(r.handleSubmit(),e.preventDefault())},r.handleSubmit=function(){r.props.updateValue(r.state.value.trim()),r.props.toggleDialog()},r.state={value:r.props.value,isSubmitBtnActive:!1},r}return Object(r.a)(a,[{key:"render",value:function(){var e=this.props,t=(e.dialogTitle,e.toggleDialog);return l.a.createElement(f.x,{isOpen:!0,toggle:t},l.a.createElement(f.A,{toggle:t},this.props.dialogTitle),l.a.createElement(f.y,null,l.a.createElement(f.p,null,l.a.createElement(f.q,null,l.a.createElement(f.s,{type:"text",value:this.state.value,onKeyPress:this.handleKeyPress,onChange:this.handleInputChange})))),l.a.createElement(f.z,null,l.a.createElement(f.c,{color:"secondary",onClick:t},Object(d.mb)("Cancel")),l.a.createElement(f.c,{color:"primary",onClick:this.handleSubmit},Object(d.mb)("Submit"))))}}]),a}(l.a.Component),Ve=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).navItems=[{name:"info",urlPart:"",text:Object(d.mb)("Info")},{name:"owned-repos",urlPart:"owned-libraries",text:Object(d.mb)("Owned Libraries")},{name:"shared-repos",urlPart:"shared-libraries",text:Object(d.mb)("Shared Libraries")},{name:"links",urlPart:"shared-links",text:Object(d.mb)("Shared Links")},{name:"groups",urlPart:"groups",text:Object(d.mb)("Groups")}],r}return Object(r.a)(a,[{key:"render",value:function(){var e=this.props,t=e.currentItem,a=e.email,n=e.userName;return l.a.createElement("div",null,l.a.createElement("div",{className:"cur-view-path"},l.a.createElement("h3",{className:"sf-heading"},l.a.createElement(m.a,{to:"".concat(d.ic,"sys/users/")},Object(d.mb)("Users"))," / ",n)),l.a.createElement("ul",{className:"nav border-bottom mx-4"},this.navItems.map((function(e,n){return l.a.createElement("li",{className:"nav-item mr-2",key:n},l.a.createElement(m.a,{to:"".concat(d.ic,"sys/users/").concat(encodeURIComponent(a),"/").concat(e.urlPart),className:"nav-link ".concat(t==e.name?" active":"")},e.text))}))))}}]),a}(l.a.Component),Ge=window.sysadmin.pageOptions.twoFactorAuthEnabled,Ye=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).toggleSetQuotaDialog=function(){r.setState({isSetQuotaDialogOpen:!r.state.isSetQuotaDialogOpen})},r.updateQuota=function(e){r.props.updateUser("quota_total",e)},r.toggleDialog=function(e,t){r.setState({currentKey:e,dialogTitle:t,isUpdateUserDialogOpen:!r.state.isUpdateUserDialogOpen})},r.toggleSetNameDialog=function(){r.toggleDialog("name",Object(d.mb)("Set Name"))},r.toggleSetUserLoginIDDialog=function(){r.toggleDialog("login_id",Object(d.mb)("Set Login ID"))},r.toggleSetUserComtactEmailDialog=function(){r.toggleDialog("contact_email",Object(d.mb)("Set Contact Email"))},r.toggleSetUserReferenceIDDialog=function(){r.toggleDialog("reference_id",Object(d.mb)("Set Reference ID"))},r.updateValue=function(e){r.props.updateUser(r.state.currentKey,e)},r.toggleUpdateUserDialog=function(){r.toggleDialog("","")},r.showEditIcon=function(e){return l.a.createElement("span",{title:Object(d.mb)("Edit"),className:"fa fa-pencil-alt attr-action-icon",onClick:e})},r.state={currentKey:"",dialogTitle:"",isSetQuotaDialogOpen:!1,isUpdateUserDialogOpen:!1},r}return Object(r.a)(a,[{key:"render",value:function(){var e=this.props,t=e.loading,a=e.errorMsg;e.userInfo;if(t)return l.a.createElement(y.a,null);if(a)return l.a.createElement("p",{className:"error text-center mt-4"},a);var n=this.props.userInfo,r=this.state,i=r.currentKey,o=r.dialogTitle,c=r.isSetQuotaDialogOpen,u=r.isUpdateUserDialogOpen;return l.a.createElement(s.Fragment,null,l.a.createElement("dl",{className:"m-0"},l.a.createElement("dt",{className:"info-item-heading"},Object(d.mb)("Avatar")),l.a.createElement("dd",{className:"info-item-content"},l.a.createElement("img",{src:n.avatar_url,alt:n.name,width:"80",className:"rounded"})),l.a.createElement("dt",{className:"info-item-heading"},Object(d.mb)("Email")),l.a.createElement("dd",{className:"info-item-content"},n.email),n.org_name&&l.a.createElement(s.Fragment,null,l.a.createElement("dt",{className:"info-item-heading"},Object(d.mb)("Organization")),l.a.createElement("dd",{className:"info-item-content"},n.org_name)),l.a.createElement("dt",{className:"info-item-heading"},Object(d.mb)("Name")),l.a.createElement("dd",{className:"info-item-content"},n.name||"--",this.showEditIcon(this.toggleSetNameDialog)),l.a.createElement("dt",{className:"info-item-heading"},Object(d.mb)("Login ID")),l.a.createElement("dd",{className:"info-item-content"},n.login_id||"--",this.showEditIcon(this.toggleSetUserLoginIDDialog)),l.a.createElement("dt",{className:"info-item-heading"},Object(d.mb)("Contact Email")),l.a.createElement("dd",{className:"info-item-content"},n.contact_email||"--",this.showEditIcon(this.toggleSetUserComtactEmailDialog)),l.a.createElement("dt",{className:"info-item-heading"},Object(d.mb)("Reference ID")),l.a.createElement("dd",{className:"info-item-content"},n.reference_id||"--",this.showEditIcon(this.toggleSetUserReferenceIDDialog)),l.a.createElement("dt",{className:"info-item-heading"},Object(d.mb)("Space Used / Quota")),l.a.createElement("dd",{className:"info-item-content"},"".concat(E.a.bytesToSize(n.quota_usage)," / ").concat(n.quota_total>0?E.a.bytesToSize(n.quota_total):"--"),this.showEditIcon(this.toggleSetQuotaDialog)),Ge&&l.a.createElement(s.Fragment,null,l.a.createElement("dt",{className:"info-item-heading"},Object(d.mb)("Two-Factor Authentication")),l.a.createElement("dd",{className:"info-item-content"},n.has_default_device?l.a.createElement(f.q,null,l.a.createElement("p",{className:"mb-1"},Object(d.mb)("Status: enabled")),l.a.createElement(f.c,{onClick:this.props.disable2FA},Object(d.mb)("Disable Two-Factor Authentication"))):l.a.createElement(f.q,null,l.a.createElement(f.c,{disabled:!0},Object(d.mb)("Disable Two-Factor Authentication"))),l.a.createElement(f.q,{check:!0},l.a.createElement(f.w,{check:!0},l.a.createElement(f.s,{type:"checkbox",checked:n.is_force_2fa,onChange:this.props.toggleForce2fa}),l.a.createElement("span",null,Object(d.mb)("Force Two-Factor Authentication"))))))),c&&l.a.createElement(ge,{updateQuota:this.updateQuota,toggle:this.toggleSetQuotaDialog}),u&&l.a.createElement(We,{dialogTitle:o,value:n[i],updateValue:this.updateValue,toggleDialog:this.toggleUpdateUserDialog}))}}]),a}(s.Component),Qe=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).updateUser=function(e,t){var a=r.state.userInfo.email;b.a.sysAdminUpdateUser(a,e,t).then((function(t){var a=r.state.userInfo;a[e]=t.data[e],r.setState({userInfo:a}),v.a.success(Object(d.mb)("Edit succeeded"))})).catch((function(e){var t=E.a.getErrorMsg(e);v.a.danger(t)}))},r.disable2FA=function(){var e=r.state.userInfo.email;b.a.sysAdminDeleteTwoFactorAuth(e).then((function(e){var t=r.state.userInfo;t.has_default_device=!1,r.setState({userInfo:t})})).catch((function(e){var t=E.a.getErrorMsg(e);v.a.danger(t)}))},r.toggleForce2fa=function(e){var t=r.state.userInfo.email,a=e.target.checked;b.a.sysAdminSetForceTwoFactorAuth(t,a).then((function(e){var t=r.state.userInfo;t.is_force_2fa=a,r.setState({userInfo:t})})).catch((function(e){var t=E.a.getErrorMsg(e);v.a.danger(t)}))},r.state={loading:!0,errorMsg:"",userInfo:{}},r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this;b.a.sysAdminGetUser(this.props.email,160).then((function(t){e.setState({loading:!1,userInfo:t.data})})).catch((function(t){e.setState({loading:!1,errorMsg:E.a.getErrorMsg(t,!0)})}))}},{key:"render",value:function(){var e=this.state.userInfo;return l.a.createElement(s.Fragment,null,l.a.createElement(x,null),l.a.createElement("div",{className:"main-panel-center flex-row"},l.a.createElement("div",{className:"cur-view-container"},l.a.createElement(Ve,{currentItem:"info",email:this.props.email,userName:e.name}),l.a.createElement("div",{className:"cur-view-content"},l.a.createElement(Ye,{loading:this.state.loading,errorMsg:this.state.errorMsg,userInfo:this.state.userInfo,updateUser:this.updateUser,disable2FA:this.disable2FA,toggleForce2fa:this.toggleForce2fa})))))}}]),a}(s.Component),Ke=a(139),Xe=window.sysadmin.pageOptions.enableSysAdminViewRepo,$e=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).onFreezedItem=function(){r.setState({isItemFreezed:!0})},r.onUnfreezedItem=function(){r.setState({isItemFreezed:!1})},r.state={isItemFreezed:!1},r}return Object(r.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.loading,n=t.errorMsg,r=t.items;if(a)return l.a.createElement(y.a,null);if(n)return l.a.createElement("p",{className:"error text-center mt-4"},n);var i=l.a.createElement(ne.a,null,l.a.createElement("h2",null,Object(d.mb)("No libraries"))),o=l.a.createElement(s.Fragment,null,l.a.createElement("table",null,l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",{width:"5%"}),l.a.createElement("th",{width:"35%"},Object(d.mb)("Name")),l.a.createElement("th",{width:"30%"},Object(d.mb)("Size")),l.a.createElement("th",{width:"25%"},Object(d.mb)("Last Update")),l.a.createElement("th",{width:"5%"}))),l.a.createElement("tbody",null,r.map((function(t,a){return l.a.createElement(Je,{key:a,item:t,isItemFreezed:e.state.isItemFreezed,onFreezedItem:e.onFreezedItem,onUnfreezedItem:e.onUnfreezedItem,deleteRepo:e.props.deleteRepo,transferRepo:e.props.transferRepo})})))));return r.length?o:i}}]),a}(s.Component),Je=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).handleMouseEnter=function(){r.props.isItemFreezed||r.setState({isOpIconShown:!0,highlight:!0})},r.handleMouseLeave=function(){r.props.isItemFreezed||r.setState({isOpIconShown:!1,highlight:!1})},r.onUnfreezedItem=function(){r.setState({highlight:!1,isOpIconShow:!1}),r.props.onUnfreezedItem()},r.toggleDeleteDialog=function(){r.setState({isDeleteDialogOpen:!r.state.isDeleteDialogOpen})},r.deleteRepo=function(){r.props.deleteRepo(r.props.item.id)},r.toggleTransferDialog=function(){r.setState({isTransferDialogOpen:!r.state.isTransferDialogOpen})},r.transferRepo=function(e){r.props.transferRepo(r.props.item.id,e.email),r.toggleTransferDialog()},r.renderRepoName=function(){var e=r.props.item;return e.name?d.wb&&Xe&&!e.encrypted?l.a.createElement(m.a,{to:"".concat(d.ic,"sys/libraries/").concat(e.id,"/")},e.name):e.name:Object(d.mb)("Broken ({repo_id_placeholder})").replace("{repo_id_placeholder}",e.id)},r.translateOperations=function(e){var t="";switch(e){case"Delete":t=Object(d.mb)("Delete");break;case"Transfer":t=Object(d.mb)("Transfer")}return t},r.onMenuItemClick=function(e){switch(e){case"Delete":r.toggleDeleteDialog();break;case"Transfer":r.toggleTransferDialog()}},r.state={isOpIconShown:!1,highlight:!1,isDeleteDialogOpen:!1,isTransferDialogOpen:!1},r}return Object(r.a)(a,[{key:"render",value:function(){var e=this.props.item,t=this.state,a=t.isOpIconShown,n=t.isDeleteDialogOpen,r=t.isTransferDialogOpen,i=E.a.getLibIconUrl(e),o=E.a.getLibIconTitle(e),c='<span class="op-target">'+E.a.HTMLescape(e.name)+"</span>",u=Object(d.mb)("Are you sure you want to delete {placeholder} ?").replace("{placeholder}",c);return l.a.createElement(s.Fragment,null,l.a.createElement("tr",{className:this.state.highlight?"tr-highlight":"",onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave},l.a.createElement("td",null,l.a.createElement("img",{src:i,title:o,alt:o,width:"24"})),l.a.createElement("td",null,this.renderRepoName()),l.a.createElement("td",null,E.a.bytesToSize(e.size)),l.a.createElement("td",null,w()(e.last_modified).fromNow()),l.a.createElement("td",null,a&&l.a.createElement(Ce,{operations:["Delete","Transfer"],translateOperations:this.translateOperations,onMenuItemClick:this.onMenuItemClick,onFreezedItem:this.props.onFreezedItem,onUnfreezedItem:this.onUnfreezedItem}))),n&&l.a.createElement(xe,{title:Object(d.mb)("Delete Library"),message:u,executeOperation:this.deleteRepo,confirmBtnText:Object(d.mb)("Delete"),toggleDialog:this.toggleDeleteDialog}),r&&l.a.createElement(Ke.a,{itemName:e.name,submit:this.transferRepo,canTransferToDept:!1,toggleDialog:this.toggleTransferDialog}))}}]),a}(s.Component),Ze=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).deleteRepo=function(e){b.a.sysAdminDeleteRepo(e).then((function(t){var a=r.state.repoList.filter((function(t){return t.id!=e}));r.setState({repoList:a}),v.a.success(Object(d.mb)("Successfully deleted 1 item."))})).catch((function(e){var t=E.a.getErrorMsg(e);v.a.danger(t)}))},r.transferRepo=function(e,t){b.a.sysAdminTransferRepo(e,t).then((function(t){var a=r.state.repoList.filter((function(t){return t.id!=e}));r.setState({repoList:a});var n=Object(d.mb)("Successfully transferred the library.");v.a.success(n)})).catch((function(e){var t=E.a.getErrorMsg(e);v.a.danger(t)}))},r.state={loading:!0,errorMsg:"",userInfo:{},repoList:[]},r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this;b.a.sysAdminGetUser(this.props.email).then((function(t){e.setState({userInfo:t.data})})),b.a.sysAdminListReposByOwner(this.props.email).then((function(t){e.setState({loading:!1,repoList:t.data.repos})})).catch((function(t){e.setState({loading:!1,errorMsg:E.a.getErrorMsg(t,!0)})}))}},{key:"render",value:function(){return l.a.createElement(s.Fragment,null,l.a.createElement(x,null),l.a.createElement("div",{className:"main-panel-center flex-row"},l.a.createElement("div",{className:"cur-view-container"},l.a.createElement(Ve,{currentItem:"owned-repos",email:this.props.email,userName:this.state.userInfo.name}),l.a.createElement("div",{className:"cur-view-content"},l.a.createElement($e,{loading:this.state.loading,errorMsg:this.state.errorMsg,items:this.state.repoList,deleteRepo:this.deleteRepo,transferRepo:this.transferRepo})))))}}]),a}(s.Component),et=window.sysadmin.pageOptions.enableSysAdminViewRepo,tt=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){return Object(n.a)(this,a),t.call(this,e)}return Object(r.a)(a,[{key:"render",value:function(){var e=this.props,t=e.loading,a=e.errorMsg,n=e.items;if(t)return l.a.createElement(y.a,null);if(a)return l.a.createElement("p",{className:"error text-center mt-4"},a);var r=l.a.createElement(ne.a,null,l.a.createElement("h2",null,Object(d.mb)("No libraries"))),i=l.a.createElement(s.Fragment,null,l.a.createElement("table",{className:"table-hover"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",{width:"5%"}),l.a.createElement("th",{width:"35%"},Object(d.mb)("Name")),l.a.createElement("th",{width:"20%"},Object(d.mb)("Share From")),l.a.createElement("th",{width:"20%"},Object(d.mb)("Size")),l.a.createElement("th",{width:"20%"},Object(d.mb)("Last Update")))),l.a.createElement("tbody",null,n.map((function(e,t){return l.a.createElement(at,{key:t,item:e})})))));return n.length?i:r}}]),a}(s.Component),at=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).renderRepoName=function(){var e=r.props.item;return e.name?d.wb&&et&&!e.encrypted?l.a.createElement(m.a,{to:"".concat(d.ic,"sys/libraries/").concat(e.id,"/")},e.name):e.name:Object(d.mb)("Broken ({repo_id_placeholder})").replace("{repo_id_placeholder}",e.id)},r.getOwnerLink=function(){var e,t=r.props.item,a=t.owner_email.indexOf("@seafile_group");if(-1==a)e=l.a.createElement(ue,{email:t.owner_email,name:t.owner_name});else{var n=t.owner_email.substring(0,a);e=l.a.createElement(m.a,{to:"".concat(d.ic,"sys/departments/").concat(n,"/")},t.owner_name)}return e},r}return Object(r.a)(a,[{key:"render",value:function(){var e=this.props.item,t=E.a.getLibIconUrl(e),a=E.a.getLibIconTitle(e);return l.a.createElement(s.Fragment,null,l.a.createElement("tr",null,l.a.createElement("td",null,l.a.createElement("img",{src:t,title:a,alt:a,width:"24"})),l.a.createElement("td",null,this.renderRepoName()),l.a.createElement("td",null,this.getOwnerLink()),l.a.createElement("td",null,E.a.bytesToSize(e.size)),l.a.createElement("td",null,w()(e.last_modify).fromNow())))}}]),a}(s.Component),nt=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).state={loading:!0,errorMsg:"",userInfo:{},repoList:[]},r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this;b.a.sysAdminGetUser(this.props.email).then((function(t){e.setState({userInfo:t.data})})),b.a.sysAdminListShareInRepos(this.props.email).then((function(t){e.setState({loading:!1,repoList:t.data.repo_list})})).catch((function(t){e.setState({loading:!1,errorMsg:E.a.getErrorMsg(t,!0)})}))}},{key:"render",value:function(){return l.a.createElement(s.Fragment,null,l.a.createElement(x,null),l.a.createElement("div",{className:"main-panel-center flex-row"},l.a.createElement("div",{className:"cur-view-container"},l.a.createElement(Ve,{currentItem:"shared-repos",email:this.props.email,userName:this.state.userInfo.name}),l.a.createElement("div",{className:"cur-view-content"},l.a.createElement(tt,{loading:this.state.loading,errorMsg:this.state.errorMsg,items:this.state.repoList})))))}}]),a}(s.Component),rt=a(161),it=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).onFreezedItem=function(){r.setState({isItemFreezed:!0})},r.onUnfreezedItem=function(){r.setState({isItemFreezed:!1})},r.state={isItemFreezed:!1},r}return Object(r.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.loading,n=t.errorMsg,r=t.items;if(a)return l.a.createElement(y.a,null);if(n)return l.a.createElement("p",{className:"error text-center mt-4"},n);var i=l.a.createElement(ne.a,null,l.a.createElement("h2",null,Object(d.mb)("No shared links"))),o=l.a.createElement(s.Fragment,null,l.a.createElement("table",null,l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",{width:"5%"}),l.a.createElement("th",{width:"30%"},Object(d.mb)("Name")),l.a.createElement("th",{width:"20%"},Object(d.mb)("Size")),l.a.createElement("th",{width:"20%"},Object(d.mb)("Type")),l.a.createElement("th",{width:"20%"},Object(d.mb)("Visits")),l.a.createElement("th",{width:"5%"}))),l.a.createElement("tbody",null,r.map((function(t,a){return l.a.createElement(ot,{key:a,item:t,isItemFreezed:e.state.isItemFreezed,onFreezedItem:e.onFreezedItem,onUnfreezedItem:e.onUnfreezedItem,deleteItem:e.props.deleteItem})})))));return r.length?o:i}}]),a}(s.Component),ot=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).handleMouseEnter=function(){r.props.isItemFreezed||r.setState({isOpIconShown:!0,highlight:!0})},r.handleMouseLeave=function(){r.props.isItemFreezed||r.setState({isOpIconShown:!1,highlight:!1})},r.onUnfreezedItem=function(){r.setState({highlight:!1,isOpIconShow:!1}),r.props.onUnfreezedItem()},r.toggleLinkDialog=function(){r.setState({isLinkDialogOpen:!r.state.isLinkDialogOpen})},r.deleteItem=function(){r.props.deleteItem(r.props.item)},r.translateOperations=function(e){var t="";switch(e){case"View":t=Object(d.mb)("View");break;case"Delete":t=Object(d.mb)("Delete")}return t},r.onMenuItemClick=function(e){switch(e){case"View":r.toggleLinkDialog();break;case"Delete":r.deleteItem()}},r.getRoleText=function(){var e;switch(r.props.item.role){case"Owner":e=Object(d.mb)("Owner");break;case"Admin":e=Object(d.mb)("Admin");break;case"Member":e=Object(d.mb)("Member")}return e},r.getIconUrl=function(){var e=r.props.item;return"upload"==e.type||e.is_dir?E.a.getFolderIconUrl():E.a.getFileIconUrl(e.obj_name)},r.state={isOpIconShown:!1,highlight:!1,isLinkDialogOpen:!1},r}return Object(r.a)(a,[{key:"render",value:function(){var e=this.props.item,t=this.state,a=t.isOpIconShown,n=t.isLinkDialogOpen;return l.a.createElement(s.Fragment,null,l.a.createElement("tr",{className:this.state.highlight?"tr-highlight":"",onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave},l.a.createElement("td",null,l.a.createElement("img",{src:this.getIconUrl(),alt:"",width:"24"})),l.a.createElement("td",null,"/"==e.obj_name?e.repo_name:e.obj_name),"upload"==e.type?l.a.createElement(s.Fragment,null,l.a.createElement("td",null),l.a.createElement("td",null,Object(d.mb)("Upload"))):l.a.createElement(s.Fragment,null,l.a.createElement("td",null,e.is_dir?null:E.a.bytesToSize(e.size)),l.a.createElement("td",null,Object(d.mb)("Download"))),l.a.createElement("td",null,e.view_cnt),l.a.createElement("td",null,a&&l.a.createElement(Ce,{operations:["View","Delete"],translateOperations:this.translateOperations,onMenuItemClick:this.onMenuItemClick,onFreezedItem:this.props.onFreezedItem,onUnfreezedItem:this.onUnfreezedItem}))),n&&l.a.createElement(rt.a,{link:e.link,toggleDialog:this.toggleLinkDialog}))}}]),a}(s.Component),st=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).deleteItem=function(e){var t=e.type,a=e.token;"download"==t?b.a.sysAdminDeleteShareLink(a).then((function(e){var t=r.state.shareLinkItems.filter((function(e){return e.token!=a}));r.setState({shareLinkItems:t}),v.a.success(Object(d.mb)("Successfully deleted 1 item."))})).catch((function(e){var t=E.a.getErrorMsg(e);v.a.danger(t)})):b.a.sysAdminDeleteUploadLink(a).then((function(e){var t=r.state.uploadLinkItems.filter((function(e){return e.token!=a}));r.setState({uploadLinkItems:t}),v.a.success(Object(d.mb)("Successfully deleted 1 item."))})).catch((function(e){var t=E.a.getErrorMsg(e);v.a.danger(t)}))},r.state={loading:!0,errorMsg:"",userInfo:{},uploadLinkItems:[],shareLinkItems:[]},r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this;b.a.sysAdminGetUser(this.props.email).then((function(t){e.setState({userInfo:t.data})})),b.a.sysAdminListShareLinksByUser(this.props.email).then((function(t){var a=t.data.share_link_list.map((function(e){return e.type="download",e}));a.sort((function(e,t){return e.is_dir?-1:1})),e.setState({loading:!1,shareLinkItems:a})})),b.a.sysAdminListUploadLinksByUser(this.props.email).then((function(t){var a=t.data.upload_link_list.map((function(e){return e.type="upload",e}));e.setState({loading:!1,uploadLinkItems:a})})).catch((function(t){e.setState({loading:!1,errorMsg:E.a.getErrorMsg(t,!0)})}))}},{key:"render",value:function(){var e=this.state,t=e.shareLinkItems,a=e.uploadLinkItems;return l.a.createElement(s.Fragment,null,l.a.createElement(x,null),l.a.createElement("div",{className:"main-panel-center flex-row"},l.a.createElement("div",{className:"cur-view-container"},l.a.createElement(Ve,{currentItem:"links",email:this.props.email,userName:this.state.userInfo.name}),l.a.createElement("div",{className:"cur-view-content"},l.a.createElement(it,{loading:this.state.loading,errorMsg:this.state.errorMsg,items:[].concat(a,t),deleteItem:this.deleteItem})))))}}]),a}(s.Component),lt=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).onFreezedItem=function(){r.setState({isItemFreezed:!0})},r.onUnfreezedItem=function(){r.setState({isItemFreezed:!1})},r.state={isItemFreezed:!1},r}return Object(r.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.loading,n=t.errorMsg,r=t.items;if(a)return l.a.createElement(y.a,null);if(n)return l.a.createElement("p",{className:"error text-center mt-4"},n);var i=l.a.createElement(ne.a,null,l.a.createElement("h2",null,Object(d.mb)("No groups"))),o=l.a.createElement(s.Fragment,null,l.a.createElement("table",null,l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",{width:"35%"},Object(d.mb)("Name")),l.a.createElement("th",{width:"30%"},Object(d.mb)("Role")),l.a.createElement("th",{width:"30%"},Object(d.mb)("Created At")),l.a.createElement("th",{width:"5%"}))),l.a.createElement("tbody",null,r.map((function(t,a){return l.a.createElement(ct,{key:a,item:t,isItemFreezed:e.state.isItemFreezed,onFreezedItem:e.onFreezedItem,onUnfreezedItem:e.onUnfreezedItem,deleteItem:e.props.deleteItem})})))));return r.length?o:i}}]),a}(s.Component),ct=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).handleMouseEnter=function(){r.props.isItemFreezed||r.setState({isOpIconShown:!0,highlight:!0})},r.handleMouseLeave=function(){r.props.isItemFreezed||r.setState({isOpIconShown:!1,highlight:!1})},r.onUnfreezedItem=function(){r.setState({highlight:!1,isOpIconShow:!1}),r.props.onUnfreezedItem()},r.toggleDeleteDialog=function(){r.setState({isDeleteDialogOpen:!r.state.isDeleteDialogOpen})},r.deleteItem=function(){r.props.deleteItem(r.props.item.id)},r.translateOperations=function(e){var t="";switch(e){case"Delete":t=Object(d.mb)("Delete")}return t},r.onMenuItemClick=function(e){switch(e){case"Delete":r.toggleDeleteDialog()}},r.getRoleText=function(){var e;switch(r.props.item.role){case"Owner":e=Object(d.mb)("Owner");break;case"Admin":e=Object(d.mb)("Admin");break;case"Member":e=Object(d.mb)("Member")}return e},r.state={isOpIconShown:!1,highlight:!1,isDeleteDialogOpen:!1},r}return Object(r.a)(a,[{key:"render",value:function(){var e=this.props.item,t=this.state,a=t.isOpIconShown,n=t.isDeleteDialogOpen,r='<span class="op-target">'+E.a.HTMLescape(e.name)+"</span>",i=Object(d.mb)("Are you sure you want to delete {placeholder} ?").replace("{placeholder}",r),o=0==e.parent_group_id?"".concat(d.ic,"sys/groups/").concat(e.id,"/libraries/"):"".concat(d.ic,"sys/departments/").concat(e.id,"/");return l.a.createElement(s.Fragment,null,l.a.createElement("tr",{className:this.state.highlight?"tr-highlight":"",onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave},l.a.createElement("td",null,l.a.createElement(m.a,{to:o},e.name)),l.a.createElement("td",null,this.getRoleText()),l.a.createElement("td",null,w()(e.created_at).format("YYYY-MM-DD HH:mm")),l.a.createElement("td",null,a&&0==e.parent_group_id&&l.a.createElement(Ce,{operations:["Delete"],translateOperations:this.translateOperations,onMenuItemClick:this.onMenuItemClick,onFreezedItem:this.props.onFreezedItem,onUnfreezedItem:this.onUnfreezedItem}))),n&&l.a.createElement(xe,{title:Object(d.mb)("Delete Group"),message:i,executeOperation:this.deleteItem,confirmBtnText:Object(d.mb)("Delete"),toggleDialog:this.toggleDeleteDialog}))}}]),a}(s.Component),ut=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).deleteItem=function(e){b.a.sysAdminDismissGroupByID(e).then((function(t){var a=r.state.items.filter((function(t){return t.id!=e}));r.setState({items:a}),v.a.success(Object(d.mb)("Successfully deleted 1 item."))})).catch((function(e){var t=E.a.getErrorMsg(e);v.a.danger(t)}))},r.state={loading:!0,errorMsg:"",userInfo:{},items:[]},r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this;b.a.sysAdminGetUser(this.props.email).then((function(t){e.setState({userInfo:t.data})})),b.a.sysAdminListGroupsJoinedByUser(this.props.email).then((function(t){e.setState({loading:!1,items:t.data.group_list})})).catch((function(t){e.setState({loading:!1,errorMsg:E.a.getErrorMsg(t,!0)})}))}},{key:"render",value:function(){return l.a.createElement(s.Fragment,null,l.a.createElement(x,null),l.a.createElement("div",{className:"main-panel-center flex-row"},l.a.createElement("div",{className:"cur-view-container"},l.a.createElement(Ve,{currentItem:"groups",email:this.props.email,userName:this.state.userInfo.name}),l.a.createElement("div",{className:"cur-view-content"},l.a.createElement(lt,{loading:this.state.loading,errorMsg:this.state.errorMsg,items:this.state.items,deleteItem:this.deleteItem})))))}}]),a}(s.Component),mt=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).handleRepoNameChange=function(e){var t=e.target.value;r.setState({repoName:t,isSubmitBtnActive:t.trim()})},r.handleSubmit=function(){var e=r.state,t=e.repoName,a=e.ownerEmail;r.props.createRepo(t.trim(),a),r.toggle()},r.handleSelectChange=function(e){r.setState({ownerEmail:e?e.email:""})},r.handleKeyPress=function(e){"Enter"===e.key&&(r.handleSubmit(),e.preventDefault())},r.toggle=function(){r.props.toggleDialog()},r.state={repoName:"",ownerEmail:"",errMessage:"",isSubmitBtnActive:!1},r.newInput=l.a.createRef(),r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){this.newInput.focus()}},{key:"render",value:function(){var e=this;return l.a.createElement(f.x,{isOpen:!0,toggle:this.toggle},l.a.createElement(f.A,{toggle:this.toggle},Object(d.mb)("New Library")),l.a.createElement(f.y,null,l.a.createElement(f.p,null,l.a.createElement(f.q,null,l.a.createElement(f.w,{for:"repoName"},Object(d.mb)("Name")),l.a.createElement(f.s,{id:"repoName",onKeyPress:this.handleKeyPress,innerRef:function(t){e.newInput=t},value:this.state.repoName,onChange:this.handleRepoNameChange})),l.a.createElement(f.q,null,l.a.createElement(f.w,{for:"userSelect"},Object(d.mb)("Owner"),l.a.createElement("span",{className:"small text-secondary"},Object(d.mb)("(If left blank, owner will be admin)"))),l.a.createElement(ye.a,{id:"userSelect",isMulti:!1,className:"reviewer-select",placeholder:Object(d.mb)("Select a user"),onSelectChange:this.handleSelectChange}))),this.state.errMessage&&l.a.createElement(f.a,{color:"danger"},this.state.errMessage)),l.a.createElement(f.z,null,l.a.createElement(f.c,{color:"secondary",onClick:this.toggle},Object(d.mb)("Cancel")),l.a.createElement(f.c,{color:"primary",onClick:this.handleSubmit,disabled:!this.state.isSubmitBtnActive},Object(d.mb)("Submit"))))}}]),a}(l.a.Component),dt=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).navItems=[{name:"all",urlPart:"all-libraries",text:Object(d.mb)("All")},{name:"system",urlPart:"system-library",text:Object(d.mb)("System")},{name:"trash",urlPart:"trash-libraries",text:Object(d.mb)("Trash")}],r}return Object(r.a)(a,[{key:"render",value:function(){var e=this.props.currentItem;return l.a.createElement("div",{className:"cur-view-path tab-nav-container"},l.a.createElement("ul",{className:"nav"},this.navItems.map((function(t,a){return l.a.createElement("li",{className:"nav-item",key:a},l.a.createElement(m.a,{to:"".concat(d.ic,"sys/").concat(t.urlPart,"/"),className:"nav-link".concat(e==t.name?" active":"")},t.text))}))))}}]),a}(l.a.Component),pt=a(17),ht=a(113),gt=a(53),ft=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).onMouseEnter=function(){r.setState({isOperationShow:!0})},r.onMouseLeave=function(){r.setState({isOperationShow:!1})},r.deleteShareItem=function(){var e=r.props.item;r.props.deleteShareItem(e.user_email)},r.onChangeUserPermission=function(e){var t=r.props.item;r.props.onChangeUserPermission(t,e)},r.state={isOperationShow:!1},r}return Object(r.a)(a,[{key:"render",value:function(){var e=this.props.item,t=e.is_admin?"admin":e.permission;return l.a.createElement("tr",{onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave},l.a.createElement("td",{className:"name"},e.user_name),l.a.createElement("td",null,l.a.createElement(gt.a,{isTextMode:!0,isEditIconShow:this.state.isOperationShow,currentPermission:t,permissions:this.props.permissions,onPermissionChanged:this.onChangeUserPermission})),l.a.createElement("td",null,l.a.createElement("span",{className:"sf2-icon-x3 action-icon ".concat(this.state.isOperationShow?"":"hide"),onClick:this.deleteShareItem,title:Object(d.mb)("Delete")})))}}]),a}(l.a.Component),bt=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(r.a)(a,[{key:"render",value:function(){var e=this,t=this.props.items;return l.a.createElement("tbody",null,t.map((function(t,a){return l.a.createElement(ft,{key:a,item:t,permissions:e.props.permissions,deleteShareItem:e.props.deleteShareItem,onChangeUserPermission:e.props.onChangeUserPermission})})))}}]),a}(l.a.Component),vt=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).handleSelectChange=function(e){r.setState({selectedOption:e}),r.options=[]},r.setPermission=function(e){r.setState({permission:e})},r.shareToUser=function(){var e=[],t=r.props.repoID;if(r.state.selectedOption&&r.state.selectedOption.length>0)for(var a=0;a<r.state.selectedOption.length;a++)e[a]=r.state.selectedOption[a].email;b.a.sysAdminAddRepoSharedItem(t,"user",e,r.state.permission).then((function(e){var t=[];if(e.data.failed.length>0)for(var a=0;a<e.data.failed.length;a++)t[a]=e.data.failed[a];var n=e.data.success;r.setState({errorMsg:t,sharedItems:r.state.sharedItems.concat(n),selectedOption:null,permission:"rw"}),r.refs.userSelect.clearSelect()})).catch((function(e){if(e.response){var t=Object(d.mb)("Library can not be shared to owner."),a=[];a.push(t),r.setState({errorMsg:a,selectedOption:null})}}))},r.deleteShareItem=function(e){var t=r.props.repoID;b.a.sysAdminDeleteRepoSharedItem(t,"user",e).then((function(t){r.setState({sharedItems:r.state.sharedItems.filter((function(t){return t.user_email!==e}))})})).catch((function(e){var t=E.a.getErrorMsg(e);v.a.danger(t)}))},r.onChangeUserPermission=function(e,t){var a=r.props.repoID,n=e.user_email;b.a.sysAdminUpdateRepoSharedItemPermission(a,"user",n,t).then((function(){r.updateSharedItems(e,t)})).catch((function(e){var t=E.a.getErrorMsg(e);v.a.danger(t)}))},r.updateSharedItems=function(e,t){var a=e.user_name,n=r.state.sharedItems.map((function(e){var n=e.user_name;return a===n&&(e.permission=t,e.is_admin="admin"===t),e}));r.setState({sharedItems:n})},r.state={selectedOption:null,errorMsg:[],permission:"rw",sharedItems:[]},r.options=[],r.permissions=["rw","r"],d.wb&&r.permissions.push("admin","cloud-edit","preview"),r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.repoID;b.a.sysAdminListRepoSharedItems(t,"user").then((function(t){0!==t.data.length&&e.setState({sharedItems:t.data})})).catch((function(e){var t=E.a.getErrorMsg(e);v.a.danger(t)}))}},{key:"render",value:function(){var e=this.state.sharedItems;return l.a.createElement(s.Fragment,null,l.a.createElement("table",null,l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",{width:"50%"},Object(d.mb)("User")),l.a.createElement("th",{width:"35%"},Object(d.mb)("Permission")),l.a.createElement("th",{width:"15%"}))),l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("td",null,l.a.createElement(ye.a,{ref:"userSelect",isMulti:!0,className:"reviewer-select",placeholder:Object(d.mb)("Search users..."),onSelectChange:this.handleSelectChange})),l.a.createElement("td",null,l.a.createElement(gt.a,{isTextMode:!1,isEditIconShow:!1,currentPermission:this.state.permission,permissions:this.permissions,onPermissionChanged:this.setPermission})),l.a.createElement("td",null,l.a.createElement(f.c,{onClick:this.shareToUser},Object(d.mb)("Submit")))),this.state.errorMsg.length>0&&this.state.errorMsg.map((function(e,t){var a="";return a=e.email?e.email+": "+e.error_msg:e,l.a.createElement("tr",{key:t},l.a.createElement("td",{colSpan:3},l.a.createElement("p",{className:"error"},a)))})))),l.a.createElement("div",{className:"share-list-container"},l.a.createElement("table",{className:"table-thead-hidden"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",{width:"50%"},Object(d.mb)("User")),l.a.createElement("th",{width:"35%"},Object(d.mb)("Permission")),l.a.createElement("th",{width:"15%"}))),l.a.createElement(bt,{items:e,permissions:this.permissions,deleteShareItem:this.deleteShareItem,onChangeUserPermission:this.onChangeUserPermission}))))}}]),a}(l.a.Component),Et=a(67),yt=a(244),Ot=a.n(yt),xt=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).onMouseEnter=function(){r.setState({isOperationShow:!0})},r.onMouseLeave=function(){r.setState({isOperationShow:!1})},r.deleteShareItem=function(){var e=r.props.item;r.props.deleteShareItem(e.group_id)},r.onChangeUserPermission=function(e){var t=r.props.item;r.props.onChangeUserPermission(t,e)},r.state={isOperationShow:!1},r}return Object(r.a)(a,[{key:"render",value:function(){var e=this.props.item,t=e.is_admin?"admin":e.permission;return l.a.createElement("tr",{onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave},l.a.createElement("td",{className:"name"},e.group_name),l.a.createElement("td",null,l.a.createElement(gt.a,{isTextMode:!0,isEditIconShow:this.state.isOperationShow,currentPermission:t,permissions:this.props.permissions,onPermissionChanged:this.onChangeUserPermission})),l.a.createElement("td",null,l.a.createElement("span",{className:"sf2-icon-x3 action-icon ".concat(this.state.isOperationShow?"":"hide"),onClick:this.deleteShareItem,title:Object(d.mb)("Delete")})))}}]),a}(l.a.Component),kt=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(r.a)(a,[{key:"render",value:function(){var e=this,t=this.props.items;return l.a.createElement("tbody",null,t.map((function(t,a){return l.a.createElement(xt,{key:a,item:t,permissions:e.props.permissions,deleteShareItem:e.props.deleteShareItem,onChangeUserPermission:e.props.onChangeUserPermission})})))}}]),a}(l.a.Component),St=function(e){return l.a.createElement("div",Object.assign({},e.innerProps,{style:{margin:"6px 10px",textAlign:"center",color:"hsl(0,0%,50%)"}}),Object(d.mb)("Group not found"))},wt=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).handleSelectChange=function(e){r.setState({selectedOption:e})},r.loadOptions=function(){b.a.shareableGroups().then((function(e){r.options=[];for(var t=0;t<e.data.length;t++){var a={};a.value=e.data[t].name,a.id=e.data[t].id,a.label=e.data[t].name,r.options.push(a)}})).catch((function(e){var t=E.a.getErrorMsg(e);v.a.danger(t)}))},r.listSharedGroups=function(){var e=r.props.repoID;b.a.sysAdminListRepoSharedItems(e,"group").then((function(e){0!==e.data.length&&r.setState({sharedItems:e.data})})).catch((function(e){var t=E.a.getErrorMsg(e);v.a.danger(t)}))},r.setPermission=function(e){r.setState({permission:e})},r.shareToGroup=function(){var e=[],t=r.props.repoID;if(r.state.selectedOption&&r.state.selectedOption.length>0)for(var a=0;a<r.state.selectedOption.length;a++)e[a]=r.state.selectedOption[a].id;b.a.sysAdminAddRepoSharedItem(t,"group",e,r.state.permission).then((function(e){var t=[];if(e.data.failed.length>0)for(var a=0;a<e.data.failed.length;a++)t[a]=e.data.failed[a];var n=e.data.success;r.setState({errorMsg:t,sharedItems:r.state.sharedItems.concat(n),selectedOption:null,permission:"rw"})})).catch((function(e){var t=E.a.getErrorMsg(e);v.a.danger(t)}))},r.deleteShareItem=function(e){var t=r.props.repoID;b.a.sysAdminDeleteRepoSharedItem(t,"group",e).then((function(){r.setState({sharedItems:r.state.sharedItems.filter((function(t){return t.group_id!==e}))})})).catch((function(e){var t=E.a.getErrorMsg(e);v.a.danger(t)}))},r.onChangeUserPermission=function(e,t){var a=r.props.repoID,n=e.group_id;b.a.sysAdminUpdateRepoSharedItemPermission(a,"group",n,t).then((function(){r.updateSharedItems(e,t)})).catch((function(e){var t=E.a.getErrorMsg(e);v.a.danger(t)}))},r.updateSharedItems=function(e,t){var a=e.group_id,n=r.state.sharedItems.map((function(e){var n=e.group_id;return a===n&&(e.permission=t,e.is_admin="admin"===t),e}));r.setState({sharedItems:n})},r.state={selectedOption:null,errorMsg:[],permission:"rw",sharedItems:[]},r.options=[],r.permissions=["rw","r"],d.wb&&r.permissions.push("admin","cloud-edit","preview"),r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){this.loadOptions(),this.listSharedGroups()}},{key:"render",value:function(){return l.a.createElement(s.Fragment,null,l.a.createElement("table",null,l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",{width:"50%"},Object(d.mb)("Group")),l.a.createElement("th",{width:"35%"},Object(d.mb)("Permission")),l.a.createElement("th",{width:"15%"}))),l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("td",null,l.a.createElement(Et.a,Object(j.a)({isMulti:!0,onChange:this.handleSelectChange,options:this.options,placeholder:Object(d.mb)("Select groups..."),components:Ot()(),maxMenuHeight:200,inputId:"react-select-2-input",value:this.state.selectedOption},"components",{NoOptionsMessage:St}))),l.a.createElement("td",null,l.a.createElement(gt.a,{isTextMode:!1,isEditIconShow:!1,currentPermission:this.state.permission,permissions:this.permissions,onPermissionChanged:this.setPermission})),l.a.createElement("td",null,l.a.createElement(f.c,{onClick:this.shareToGroup},Object(d.mb)("Submit")))),this.state.errorMsg.length>0&&this.state.errorMsg.map((function(e,t){var a=e.group_name+": "+e.error_msg;return l.a.createElement("tr",{key:t},l.a.createElement("td",{colSpan:3},l.a.createElement("p",{className:"error"},a)))})))),l.a.createElement("div",{className:"share-list-container"},l.a.createElement("table",{className:"table-thead-hidden"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",{width:"50%"},Object(d.mb)("Group")),l.a.createElement("th",{width:"35%"},Object(d.mb)("Permission")),l.a.createElement("th",{width:"15%"}))),l.a.createElement(kt,{items:this.state.sharedItems,permissions:this.permissions,deleteShareItem:this.deleteShareItem,onChangeUserPermission:this.onChangeUserPermission}))))}}]),a}(l.a.Component),Dt=(a(391),function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).getInitialActiveTab=function(){return"shareToUser"},r.toggle=function(e){r.state.activeTab!==e&&r.setState({activeTab:e})},r.renderDirContent=function(){var e=r.state.activeTab,t=r.props,a=t.enableDirPrivateShare,n=t.isGroupOwnedRepo;return l.a.createElement(s.Fragment,null,l.a.createElement("div",{className:"share-dialog-side"},l.a.createElement(f.B,{pills:!0},a&&l.a.createElement(s.Fragment,null,l.a.createElement(f.C,null,l.a.createElement(f.D,{className:"shareToUser"===e?"active":"",onClick:r.toggle.bind(Object(Y.a)(r),"shareToUser")},Object(d.mb)("Share to user"))),l.a.createElement(f.C,null,l.a.createElement(f.D,{className:"shareToGroup"===e?"active":"",onClick:r.toggle.bind(Object(Y.a)(r),"shareToGroup")},Object(d.mb)("Share to group")))))),l.a.createElement("div",{className:"share-dialog-main"},l.a.createElement(f.G,{activeTab:r.state.activeTab},a&&l.a.createElement(s.Fragment,null,l.a.createElement(f.H,{tabId:"shareToUser"},l.a.createElement(vt,{itemType:"library",isGroupOwnedRepo:n,itemPath:r.props.itemPath,repoID:r.props.repoID,isRepoOwner:r.state.isRepoOwner})),l.a.createElement(f.H,{tabId:"shareToGroup"},l.a.createElement(wt,{itemType:"library",isGroupOwnedRepo:n,itemPath:r.props.itemPath,repoID:r.props.repoID,isRepoOwner:r.state.isRepoOwner}))))))},r.state={activeTab:r.getInitialActiveTab(),isRepoOwner:!1},r}return Object(r.a)(a,[{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement(f.x,{isOpen:!0,style:{maxWidth:"720px"},className:"share-dialog",toggle:this.props.toggleDialog},l.a.createElement(f.A,{toggle:this.props.toggleDialog},Object(d.mb)("Share")," ",l.a.createElement("span",{className:"op-target",title:this.props.itemName},this.props.itemName)),l.a.createElement(f.y,{className:"share-dialog-content"},this.renderDirContent())))}}]),a}(l.a.Component)),jt=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).submit=function(){var e=r.state.keepDays;r.state.autoHistory&&(e=r.state.expireDays);var t=r.props.repoID;if(/^-?\d+$/.test(e)){var a=Object(d.mb)("Successfully set library history.");b.a.sysAdminUpdateRepoHistorySetting(t,e).then((function(e){v.a.success(a),r.setState({keepDays:e.data.keep_days}),r.props.toggleDialog()})).catch((function(e){var t=E.a.getErrorMsg(e);v.a.danger(t)}))}else r.setState({errorInfo:Object(d.mb)("Please enter a non-negative integer")})},r.handleKeyPress=function(e){"Enter"===e.key&&(r.submit(),e.preventDefault())},r.onChange=function(e){var t=e.target.value;r.setState({keepDays:t,expireDays:t})},r.setLimitDays=function(e){"allHistory"===e?r.setState({keepDays:-1}):"noHistory"===e?r.setState({keepDays:0}):r.setState({disabled:!1}),r.setState({allHistory:"allHistory"===e,noHistory:"noHistory"===e,autoHistory:"autoHistory"===e})},r.state={keepDays:-1,expireDays:30,disabled:!0,allHistory:!0,noHistory:!1,autoHistory:!1,errorInfo:""},r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this;b.a.sysAdminGetRepoHistorySetting(this.props.repoID).then((function(t){e.setState({keepDays:t.data.keep_days,allHistory:t.data.keep_days<0,noHistory:0===t.data.keep_days,autoHistory:t.data.keep_days>0,disabled:!(t.data.keep_days>0),expireDays:t.data.keep_days>0?t.data.keep_days:30})})).catch((function(e){var t=E.a.getErrorMsg(e);v.a.danger(t)}))}},{key:"render",value:function(){var e=this,t=this.props.itemName;return l.a.createElement(f.x,{isOpen:!0},l.a.createElement(f.A,{toggle:this.props.toggleDialog},l.a.createElement("span",{className:"op-target",title:t},t)," ",Object(d.mb)("History Setting")),l.a.createElement(f.y,null,l.a.createElement(f.p,null,l.a.createElement(f.q,{check:!0},l.a.createElement(f.s,{type:"radio",name:"radio1",checked:this.state.allHistory,onChange:function(){e.setLimitDays("allHistory")}})," ",l.a.createElement(f.w,null,Object(d.mb)("Keep full history"))),l.a.createElement(f.q,{check:!0},l.a.createElement(f.s,{type:"radio",name:"radio1",checked:this.state.noHistory,onChange:function(){e.setLimitDays("noHistory")}})," ",l.a.createElement(f.w,null,Object(d.mb)("Don't keep history"))),l.a.createElement(f.q,{check:!0},l.a.createElement(f.s,{type:"radio",name:"radio1",checked:this.state.autoHistory,onChange:function(){e.setLimitDays("autoHistory")}})," ",l.a.createElement(f.w,null,Object(d.mb)("Only keep a period of history:")),l.a.createElement(f.s,{type:"text",className:"expire-input",value:this.state.expireDays,onChange:this.onChange,disabled:this.state.disabled,onKeyDown:this.handleKeyPress})," ",l.a.createElement(f.w,null,l.a.createElement("span",null,Object(d.mb)("days")))),this.state.errorInfo&&l.a.createElement(f.a,{color:"danger"},this.state.errorInfo))),l.a.createElement(f.z,null,l.a.createElement(f.c,{color:"secondary",onClick:this.props.toggleDialog},Object(d.mb)("Cancel")),l.a.createElement(f.c,{color:"primary",onClick:this.submit},Object(d.mb)("Submit"))))}}]),a}(l.a.Component),Ct=window.sysadmin.pageOptions.enableSysAdminViewRepo,Nt=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).onFreezedItem=function(){r.setState({isItemFreezed:!0})},r.onUnfreezedItem=function(){r.setState({isItemFreezed:!1})},r.getPreviousPageList=function(){r.props.getListByPage(r.props.pageInfo.current_page-1)},r.getNextPageList=function(){r.props.getListByPage(r.props.pageInfo.current_page+1)},r.sortByFileCount=function(e){e.preventDefault(),r.props.sortItems("file_count")},r.sortBySize=function(e){e.preventDefault(),r.props.sortItems("size")},r.state={isItemFreezed:!1},r}return Object(r.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.loading,n=t.errorMsg,r=t.items,i=t.pageInfo,o=t.curPerPage,c=t.sortBy;if(a)return l.a.createElement(y.a,null);if(n)return l.a.createElement("p",{className:"error text-center"},n);var u=l.a.createElement(ne.a,null,l.a.createElement("h2",null,Object(d.mb)("No libraries"))),m=l.a.createElement("span",{className:"fas fa-sort"}),p=l.a.createElement("span",{className:"fas fa-caret-down"}),h=l.a.createElement(s.Fragment,null,l.a.createElement("table",null,l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",{width:"5%"}),l.a.createElement("th",{width:"25%"},Object(d.mb)("Name")),l.a.createElement("th",{width:"15%"},void 0!=c?l.a.createElement(s.Fragment,null,l.a.createElement("a",{className:"d-inline-block table-sort-op",href:"#",onClick:this.sortByFileCount},Object(d.mb)("Files")," ","file_count"==c?p:m)," / ",l.a.createElement("a",{className:"d-inline-block table-sort-op",href:"#",onClick:this.sortBySize},Object(d.mb)("Size")," ","size"==c?p:m)):Object(d.mb)("Files")/Object(d.mb)("Size")),l.a.createElement("th",{width:"32%"},"ID"),l.a.createElement("th",{width:"18%"},Object(d.mb)("Owner")),l.a.createElement("th",{width:"5%"}))),l.a.createElement("tbody",null,r.map((function(t,a){return l.a.createElement(Pt,{key:a,repo:t,isItemFreezed:e.state.isItemFreezed,onFreezedItem:e.onFreezedItem,onUnfreezedItem:e.onUnfreezedItem,onDeleteRepo:e.props.onDeleteRepo,onTransferRepo:e.props.onTransferRepo})})))),i&&l.a.createElement(X.a,{gotoPreviousPage:this.getPreviousPageList,gotoNextPage:this.getNextPageList,currentPage:i.current_page,hasNextPage:i.has_next_page,curPerPage:o,resetPerPage:this.props.resetPerPage}));return r.length?h:u}}]),a}(s.Component),Pt=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).onDeleteRepo=function(e){b.a.sysAdminDeleteRepo(e.id).then((function(t){r.props.onDeleteRepo(e),r.setState({isDeleteDialogOpen:!1,isRepoDeleted:!0});var a=Object(d.mb)("Successfully deleted {name}.").replace("{name}",e.name);v.a.success(a)})).catch((function(e){var t=E.a.getErrorMsg(e);v.a.danger(t),r.setState({isRepoDeleted:!1})}))},r.onTransferRepo=function(e){b.a.sysAdminTransferRepo(r.props.repo.id,e.email).then((function(e){r.props.onTransferRepo(e.data);var t=Object(d.mb)("Successfully transferred the library.");v.a.success(t)})).catch((function(e){var t=E.a.getErrorMsg(e);v.a.danger(t)})),r.toggleTransferDialog()},r.handleMouseOver=function(){r.props.isItemFreezed||r.setState({isOpIconShown:!0,highlight:!0})},r.handleMouseOut=function(){r.props.isItemFreezed||r.setState({isOpIconShown:!1,highlight:!1})},r.onUnfreezedItem=function(){r.setState({highlight:!1,isOpIconShow:!1}),r.props.onUnfreezedItem()},r.onMenuItemClick=function(e){switch(e){case"Share":r.toggleShareDialog();break;case"Delete":r.toggleDeleteDialog();break;case"Transfer":r.toggleTransferDialog();break;case"History Setting":r.toggleHistorySettingDialog()}},r.toggleShareDialog=function(){r.setState({isShareDialogOpen:!r.state.isShareDialogOpen})},r.toggleDeleteDialog=function(){r.setState({isDeleteDialogOpen:!r.state.isDeleteDialogOpen})},r.toggleTransferDialog=function(){r.setState({isTransferDialogOpen:!r.state.isTransferDialogOpen})},r.toggleHistorySettingDialog=function(){r.setState({isHistorySettingDialogOpen:!r.state.isHistorySettingDialogOpen})},r.renderRepoName=function(){var e=r.props.repo;return e.name?d.wb&&Ct&&!e.encrypted?l.a.createElement(m.a,{to:"".concat(d.ic,"sys/libraries/").concat(e.id,"/")},e.name):e.name:"--"},r.translateOperations=function(e){var t="";switch(e){case"Share":t=Object(d.mb)("Share");break;case"Delete":t=Object(d.mb)("Delete");break;case"Transfer":t=Object(d.mb)("Transfer");break;case"History Setting":t=Object(d.mb)("History Setting")}return t},r.getOperations=function(){var e=["Delete","Transfer"];return r.props.repo.encrypted||e.push("Share"),e.push("History Setting"),e},r.state={isOpIconShown:!1,highlight:!1,isShareDialogOpen:!1,isDeleteDialogOpen:!1,isTransferDialogOpen:!1,isHistorySettingDialogOpen:!1,isRepoDeleted:!1},r}return Object(r.a)(a,[{key:"render",value:function(){var e,t=this.props.repo,a=this.state,n=a.isOpIconShown,r=a.isShareDialogOpen,i=a.isDeleteDialogOpen,o=a.isTransferDialogOpen,c=a.isHistorySettingDialogOpen,u=E.a.getLibIconUrl(t),p=E.a.getLibIconTitle(t),h=t.owner_email.indexOf("@seafile_group"),g=-1!=h;return g&&(e=t.owner_email.substring(0,h)),l.a.createElement(s.Fragment,null,l.a.createElement("tr",{className:this.state.highlight?"tr-highlight":"",onMouseEnter:this.handleMouseOver,onMouseLeave:this.handleMouseOut},l.a.createElement("td",null,l.a.createElement("img",{src:u,title:p,alt:p,width:"24"})),l.a.createElement("td",null,this.renderRepoName()),l.a.createElement("td",null,"".concat(t.file_count," / ").concat(E.a.bytesToSize(t.size))),l.a.createElement("td",null,t.id),l.a.createElement("td",null,g?l.a.createElement(m.a,{to:"".concat(d.ic,"sys/departments/").concat(e,"/")},t.owner_name):l.a.createElement(ue,{email:t.owner_email,name:t.owner_name})),l.a.createElement("td",null,!g&&n&&l.a.createElement(Ce,{operations:this.getOperations(),translateOperations:this.translateOperations,onMenuItemClick:this.onMenuItemClick,onFreezedItem:this.props.onFreezedItem,onUnfreezedItem:this.onUnfreezedItem}))),r&&l.a.createElement(pt.a,null,l.a.createElement(Dt,{itemName:t.name,itemPath:"/",repoID:t.id,isGroupOwnedRepo:g,repoEncrypted:t.encrypted,enableDirPrivateShare:!0,userPerm:t.permission,toggleDialog:this.toggleShareDialog})),i&&l.a.createElement(pt.a,null,l.a.createElement(ht.a,{repo:t,isRepoDeleted:this.state.isRepoDeleted,onDeleteRepo:this.onDeleteRepo,toggle:this.toggleDeleteDialog})),o&&l.a.createElement(pt.a,null,l.a.createElement(Ke.a,{itemName:t.name,submit:this.onTransferRepo,canTransferToDept:!1,toggleDialog:this.toggleTransferDialog})),c&&l.a.createElement(pt.a,null,l.a.createElement(jt,{repoID:t.id,itemName:t.name,toggleDialog:this.toggleHistorySettingDialog})))}}]),a}(s.Component),_t=Nt,Mt=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).toggleCreateRepoDialog=function(){r.setState({isCreateRepoDialogOpen:!r.state.isCreateRepoDialogOpen})},r.getReposByPage=function(e){var t=r.state,a=t.perPage,n=t.sortBy;b.a.sysAdminListAllRepos(e,a,n).then((function(e){r.setState({loading:!1,repos:e.data.repos,pageInfo:e.data.page_info})})).catch((function(e){r.setState({loading:!1,errorMsg:E.a.getErrorMsg(e,!0)})}))},r.sortItems=function(e){r.setState({currentPage:1,sortBy:e},(function(){var e=new URL(location.href),t=new URLSearchParams(e.search),a=r.state,n=a.currentPage,i=a.sortBy;t.set("page",n),t.set("order_by",i),e.search=t.toString(),Object(m.c)(e.toString()),r.getReposByPage(n)}))},r.resetPerPage=function(e){r.setState({perPage:e},(function(){r.getReposByPage(1)}))},r.createRepo=function(e,t){b.a.sysAdminCreateRepo(e,t).then((function(e){r.state.repos.unshift(e.data),r.setState({repos:r.state.repos})})).catch((function(e){var t=E.a.getErrorMsg(e);v.a.danger(t)}))},r.onDeleteRepo=function(e){var t=r.state.repos.filter((function(t){return t.id!=e.id}));r.setState({repos:t})},r.onTransferRepo=function(e){var t=r.state.repos.map((function(t){return t.id==e.id?e:t}));r.setState({repos:t})},r.getSearch=function(){return l.a.createElement(we,{placeholder:Object(d.mb)("Search libraries by name"),submit:r.searchRepos})},r.searchRepos=function(e){Object(m.c)("".concat(d.ic,"sys/search-libraries/?name=").concat(encodeURIComponent(e)))},r.state={loading:!0,errorMsg:"",repos:[],pageInfo:{},perPage:25,sortBy:"",isCreateRepoDialogOpen:!1},r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=new URL(window.location).searchParams,a=this.state,n=a.currentPage,r=void 0===n?1:n,i=a.perPage,o=a.sortBy;this.setState({sortBy:t.get("order_by")||o,perPage:parseInt(t.get("per_page")||i),currentPage:parseInt(t.get("page")||r)},(function(){e.getReposByPage(e.state.currentPage)}))}},{key:"render",value:function(){var e=this.state.isCreateRepoDialogOpen;return l.a.createElement(s.Fragment,null,l.a.createElement(x,{search:this.getSearch()},l.a.createElement(f.c,{className:"btn btn-secondary operation-item",onClick:this.toggleCreateRepoDialog},l.a.createElement("i",{className:"fas fa-plus-square text-secondary mr-1"}),Object(d.mb)("New Library"))),l.a.createElement("div",{className:"main-panel-center flex-row"},l.a.createElement("div",{className:"cur-view-container"},l.a.createElement(dt,{currentItem:"all"}),l.a.createElement("div",{className:"cur-view-content"},l.a.createElement(_t,{loading:this.state.loading,errorMsg:this.state.errorMsg,items:this.state.repos,sortBy:this.state.sortBy,sortItems:this.sortItems,pageInfo:this.state.pageInfo,curPerPage:this.state.perPage,getListByPage:this.getReposByPage,resetPerPage:this.resetPerPage,onDeleteRepo:this.onDeleteRepo,onTransferRepo:this.onTransferRepo})))),e&&l.a.createElement(mt,{createRepo:this.createRepo,toggleDialog:this.toggleCreateRepoDialog}))}}]),a}(s.Component),It=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){return Object(n.a)(this,a),t.call(this,e)}return Object(r.a)(a,[{key:"render",value:function(){var e=this.props,t=e.loading,a=e.errorMsg,n=e.items;return t?l.a.createElement(y.a,null):a?l.a.createElement("p",{className:"error text-center"},a):l.a.createElement(s.Fragment,null,l.a.createElement("table",{className:"table-hover"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",{width:"33%"},Object(d.mb)("Name")),l.a.createElement("th",{width:"34%"},"ID"),l.a.createElement("th",{width:"33%"},Object(d.mb)("Description")))),l.a.createElement("tbody",null,n.map((function(e,t){return l.a.createElement(Tt,{key:t,item:e})})))))}}]),a}(s.Component),Tt=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){return Object(n.a)(this,a),t.call(this,e)}return Object(r.a)(a,[{key:"render",value:function(){var e=this.props.item;return l.a.createElement("tr",null,l.a.createElement("td",null,l.a.createElement(m.a,{to:"".concat(d.ic,"sys/libraries/").concat(e.id,"/")},e.name)),l.a.createElement("td",null,e.id),l.a.createElement("td",null,e.description))}}]),a}(s.Component),At=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).state={loading:!0,errorMsg:"",items:[]},r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this;b.a.sysAdminGetSystemRepoInfo().then((function(t){var a=[];a.push(t.data),e.setState({items:a,loading:!1})})).catch((function(t){e.setState({loading:!1,errorMsg:E.a.getErrorMsg(t,!0)})}))}},{key:"render",value:function(){return l.a.createElement(s.Fragment,null,l.a.createElement(x,null),l.a.createElement("div",{className:"main-panel-center flex-row"},l.a.createElement("div",{className:"cur-view-container"},l.a.createElement(dt,{currentItem:"system"}),l.a.createElement("div",{className:"cur-view-content"},l.a.createElement(It,{loading:this.state.loading,errorMsg:this.state.errorMsg,items:this.state.items})))))}}]),a}(s.Component),Lt=window.sysadmin.pageOptions.trashReposExpireDays,Rt=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).onFreezedItem=function(){r.setState({isItemFreezed:!0})},r.onUnfreezedItem=function(){r.setState({isItemFreezed:!1})},r.getPreviousPageList=function(){r.props.getListByPage(r.props.pageInfo.current_page-1)},r.getNextPageList=function(){r.props.getListByPage(r.props.pageInfo.current_page+1)},r.state={isItemFreezed:!1},r}return Object(r.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.loading,n=t.errorMsg,r=t.items,i=t.pageInfo,o=t.curPerPage;if(a)return l.a.createElement(y.a,null);if(n)return l.a.createElement("p",{className:"error text-center mt-4"},n);var c=l.a.createElement(ne.a,null,l.a.createElement("h2",null,Object(d.mb)("No deleted libraries"))),u=l.a.createElement(s.Fragment,null,l.a.createElement("p",{className:"mt-4 small text-secondary"},Object(d.mb)("Tip: libraries deleted {trashReposExpireDays} days ago will be cleaned automatically.").replace("{trashReposExpireDays}",Lt)),l.a.createElement("table",{className:"table-hover"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",{width:"5%"}),l.a.createElement("th",{width:"43%"},Object(d.mb)("Name")),l.a.createElement("th",{width:"27%"},Object(d.mb)("Owner")),l.a.createElement("th",{width:"20%"},Object(d.mb)("Deleted Time")),l.a.createElement("th",{width:"5%"}))),l.a.createElement("tbody",null,r.map((function(t,a){return l.a.createElement(Ft,{key:a,repo:t,isItemFreezed:e.state.isItemFreezed,onFreezedItem:e.onFreezedItem,onUnfreezedItem:e.onUnfreezedItem,onDeleteRepo:e.props.onDeleteRepo,onRestoreRepo:e.props.onRestoreRepo})})))),i&&l.a.createElement(X.a,{gotoPreviousPage:this.getPreviousPageList,gotoNextPage:this.getNextPageList,currentPage:i.current_page,hasNextPage:i.has_next_page,curPerPage:o,resetPerPage:this.props.resetPerPage}));return r.length?u:c}}]),a}(s.Component),Ft=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).handleMouseOver=function(){r.props.isItemFreezed||r.setState({isOpIconShown:!0,highlight:!0})},r.handleMouseOut=function(){r.props.isItemFreezed||r.setState({isOpIconShown:!1,highlight:!1})},r.onUnfreezedItem=function(){r.setState({highlight:!1,isOpIconShow:!1}),r.props.onUnfreezedItem()},r.onDeleteRepo=function(){var e=r.props.repo;b.a.sysAdminDeleteTrashRepo(e.id).then((function(t){r.props.onDeleteRepo(e);var a=Object(d.mb)("Successfully deleted {name}.").replace("{name}",e.name);v.a.success(a)})).catch((function(e){var t=E.a.getErrorMsg(e);v.a.danger(t)}))},r.onRestoreRepo=function(){var e=r.props.repo;b.a.sysAdminRestoreTrashRepo(e.id).then((function(t){r.props.onRestoreRepo(e);var a=Object(d.mb)("Successfully restored the library.");v.a.success(a)})).catch((function(e){var t=E.a.getErrorMsg(e);v.a.danger(t)}))},r.toggleDeleteRepoDialog=function(e){e&&e.preventDefault(),r.setState({isDeleteRepoDialogOpen:!r.state.isDeleteRepoDialogOpen})},r.toggleRestoreRepoDialog=function(e){e&&e.preventDefault(),r.setState({isRestoreRepoDialogOpen:!r.state.isRestoreRepoDialogOpen})},r.translateOperations=function(e){var t="";switch(e){case"Restore":t=Object(d.mb)("Restore");break;case"Delete":t=Object(d.mb)("Delete")}return t},r.onMenuItemClick=function(e){switch(e){case"Restore":r.toggleRestoreRepoDialog();break;case"Delete":r.toggleDeleteRepoDialog()}},r.state={highlight:!1,isOpIconShown:!1,isDeleteRepoDialogOpen:!1,isRestoreRepoDialogOpen:!1},r}return Object(r.a)(a,[{key:"render",value:function(){var e=this.props.repo,t=this.state,a=t.isOpIconShown,n=t.isDeleteRepoDialogOpen,r=t.isRestoreRepoDialogOpen,i=E.a.getLibIconUrl(e),o=E.a.getLibIconTitle(e),c='<span class="op-target">'+E.a.HTMLescape(e.name)+"</span>";return l.a.createElement(s.Fragment,null,l.a.createElement("tr",{onMouseEnter:this.handleMouseOver,onMouseLeave:this.handleMouseOut},l.a.createElement("td",null,l.a.createElement("img",{src:i,title:o,alt:o,width:"24"})),l.a.createElement("td",null,e.name),l.a.createElement("td",null,-1==e.owner.indexOf("@seafile_group")?l.a.createElement(ue,{email:e.owner,name:e.owner_name}):e.group_name),l.a.createElement("td",null,w()(e.delete_time).fromNow()),l.a.createElement("td",null,a&&l.a.createElement(Ce,{operations:["Restore","Delete"],translateOperations:this.translateOperations,onMenuItemClick:this.onMenuItemClick,onFreezedItem:this.props.onFreezedItem,onUnfreezedItem:this.onUnfreezedItem}))),n&&l.a.createElement(pt.a,null,l.a.createElement(xe,{title:Object(d.mb)("Delete Library"),message:Object(d.mb)("Are you sure you want to delete {placeholder} completely?").replace("{placeholder}",c),executeOperation:this.onDeleteRepo,confirmBtnText:Object(d.mb)("Delete"),toggleDialog:this.toggleDeleteRepoDialog})),r&&l.a.createElement(pt.a,null,l.a.createElement(xe,{title:Object(d.mb)("Restore Library"),message:Object(d.mb)("Are you sure you want to restore {placeholder}?").replace("{placeholder}",c),executeOperation:this.onRestoreRepo,confirmBtnText:Object(d.mb)("Restore"),toggleDialog:this.toggleRestoreRepoDialog})))}}]),a}(s.Component),Ut=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).toggleCleanTrashDialog=function(){r.setState({isCleanTrashDialogOpen:!r.state.isCleanTrashDialogOpen})},r.getReposByPage=function(e){var t=r.state.perPage;b.a.sysAdminListTrashRepos(e,t).then((function(e){r.setState({repos:e.data.repos,pageInfo:e.data.page_info,loading:!1})})).catch((function(e){r.setState({loading:!1,errorMsg:E.a.getErrorMsg(e,!0)})}))},r.resetPerPage=function(e){r.setState({perPage:e},(function(){r.getReposByPage(1)}))},r.onDeleteRepo=function(e){var t=r.state.repos.filter((function(t){return t.id!=e.id}));r.setState({repos:t})},r.onRestoreRepo=function(e){var t=r.state.repos.filter((function(t){return t.id!=e.id}));r.setState({repos:t})},r.cleanTrash=function(){b.a.sysAdminCleanTrashRepos().then((function(e){r.setState({repos:[]}),v.a.success(Object(d.mb)("Successfully cleared trash."))})).catch((function(e){var t=E.a.getErrorMsg(e);v.a.danger(t)}))},r.getSearch=function(){return l.a.createElement(we,{placeholder:Object(d.mb)("Search libraries by owner"),submit:r.searchRepos})},r.searchRepos=function(e){b.a.sysAdminSearchTrashRepos(e).then((function(e){r.setState({repos:e.data.repos,pageInfo:null,errorMsg:"",loading:!1})})).catch((function(e){r.setState({loading:!1,errorMsg:E.a.getErrorMsg(e,!0)})}))},r.state={loading:!0,errorMsg:"",repos:[],pageInfo:{},perPage:25,isCleanTrashDialogOpen:!1},r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=new URL(window.location).searchParams,a=this.state,n=a.currentPage,r=void 0===n?1:n,i=a.perPage;this.setState({perPage:parseInt(t.get("per_page")||i),currentPage:parseInt(t.get("page")||r)},(function(){e.getReposByPage(e.state.currentPage)}))}},{key:"render",value:function(){var e=this.state.isCleanTrashDialogOpen;return l.a.createElement(s.Fragment,null,this.state.repos.length?l.a.createElement(x,null,l.a.createElement(f.c,{className:"operation-item",onClick:this.toggleCleanTrashDialog},Object(d.mb)("Clean"))):l.a.createElement(x,null),l.a.createElement("div",{className:"main-panel-center flex-row"},l.a.createElement("div",{className:"cur-view-container"},l.a.createElement(dt,{currentItem:"trash"}),l.a.createElement("div",{className:"cur-view-content"},l.a.createElement(Rt,{loading:this.state.loading,errorMsg:this.state.errorMsg,items:this.state.repos,pageInfo:this.state.pageInfo,onDeleteRepo:this.onDeleteRepo,onRestoreRepo:this.onRestoreRepo,getListByPage:this.getReposByPage,resetPerPage:this.resetPerPage,curPerPage:this.state.perPage})))),e&&l.a.createElement(xe,{title:Object(d.mb)("Clear Trash"),message:Object(d.mb)("Are you sure you want to clear trash?"),executeOperation:this.cleanTrash,confirmBtnText:Object(d.mb)("Clear"),toggleDialog:this.toggleCleanTrashDialog}))}}]),a}(s.Component),Bt=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).getRepos=function(){var e=r.state.name;b.a.sysAdminSearchRepos(e).then((function(e){r.setState({loading:!1,repos:e.data.repo_list})})).catch((function(e){r.setState({loading:!1,errorMsg:E.a.getErrorMsg(e,!0)})}))},r.searchRepos=function(){r.getRepos()},r.onDeleteRepo=function(e){var t=r.state.repos.filter((function(t){return t.id!=e.id}));r.setState({repos:t})},r.onTransferRepo=function(e){var t=r.state.repos.map((function(t){return t.id==e.id?e:t}));r.setState({repos:t})},r.handleNameInputChange=function(e){r.setState({name:e.target.value},r.checkSubmitBtnActive)},r.checkSubmitBtnActive=function(){var e=r.state.name;r.setState({isSubmitBtnActive:e.trim()})},r.state={name:"",isSubmitBtnActive:!1,loading:!0,errorMsg:"",repos:[]},r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=new URL(document.location).searchParams;this.setState({name:e.get("name")||""},this.getRepos)}},{key:"render",value:function(){var e=this.state,t=e.name,a=e.isSubmitBtnActive;return l.a.createElement(s.Fragment,null,l.a.createElement(x,null),l.a.createElement("div",{className:"main-panel-center flex-row"},l.a.createElement("div",{className:"cur-view-container"},l.a.createElement("div",{className:"cur-view-path"},l.a.createElement("h3",{className:"sf-heading"},Object(d.mb)("Libraries"))),l.a.createElement("div",{className:"cur-view-content"},l.a.createElement("div",{className:"mt-4 mb-6"},l.a.createElement("h4",{className:"border-bottom font-weight-normal mb-2 pb-1"},Object(d.mb)("Search Libraries")),l.a.createElement("p",{className:"text-secondary small"},Object(d.mb)("Tip: you can search by keyword in name.")),l.a.createElement(f.p,null,l.a.createElement(f.q,{row:!0},l.a.createElement(f.w,{for:"name",sm:1},Object(d.mb)("Name")),l.a.createElement(f.i,{sm:5},l.a.createElement(f.s,{type:"text",name:"name",id:"name",value:t,onChange:this.handleNameInputChange}))),l.a.createElement(f.q,{row:!0},l.a.createElement(f.i,{sm:{size:5,offset:1}},l.a.createElement("button",{className:"btn btn-outline-primary",disabled:!a,onClick:this.searchRepos},Object(d.mb)("Submit")))))),l.a.createElement("div",{className:"mt-4 mb-6"},l.a.createElement("h4",{className:"border-bottom font-weight-normal mb-2 pb-1"},Object(d.mb)("Result")),l.a.createElement(_t,{loading:this.state.loading,errorMsg:this.state.errorMsg,items:this.state.repos,onDeleteRepo:this.onDeleteRepo,onTransferRepo:this.onTransferRepo}))))))}}]),a}(s.Component),zt=a(46),Ht=a(107),qt=function(){function e(t){Object(n.a)(this,e),this.name=t.obj_name,this.mtime=t.last_update,this.size=t.file_size,this.is_file=t.is_file}return Object(r.a)(e,[{key:"isDir",value:function(){return!this.is_file}}]),e}(),Wt=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(){var e;Object(n.a)(this,a);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).onPathClick=function(t){var a=E.a.getEventData(t,"path");e.props.onPathClick(a)},e.turnPathToLink=function(t){var a=(t="/"===t[t.length-1]?t.slice(0,t.length-1):t).split("/"),n="";return a.map((function(t,r){if(""!==t)return r===a.length-1?l.a.createElement(s.Fragment,{key:r},l.a.createElement("span",{className:"path-split"},"/"),l.a.createElement("span",{className:"path-file-name"},t)):(n+="/"+t,l.a.createElement(s.Fragment,{key:r},l.a.createElement("span",{className:"path-split"},"/"),l.a.createElement("a",{className:"path-link","data-path":n,onClick:e.onPathClick},t)))}))},e}return Object(r.a)(a,[{key:"render",value:function(){var e=this.props,t=e.isSystemRepo,a=e.currentPath,n=e.repoName,r=this.turnPathToLink(a);return l.a.createElement("div",{className:"path-container"},t?l.a.createElement("a",{href:"".concat(d.ic,"sys/system-library/")},Object(d.mb)("System")):l.a.createElement("a",{href:"".concat(d.ic,"sys/all-libraries/")},Object(d.mb)("All")),l.a.createElement("span",{className:"path-split"},"/"),"/"===a||""===a?l.a.createElement("span",{className:"path-repo-name"},n):l.a.createElement("a",{className:"path-link","data-path":"/",onClick:this.onPathClick},n),r)}}]),a}(l.a.Component),Vt=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).handleMouseOver=function(){r.setState({isOpIconShown:!0})},r.handleMouseOut=function(){r.setState({isOpIconShown:!1})},r.openFolder=function(){r.props.openFolder(r.props.dirent)},r.deleteDirent=function(e){e.preventDefault(),r.props.deleteDirent(r.props.dirent)},r.downloadDirent=function(e){e.preventDefault(),r.props.downloadDirent(r.props.dirent)},r.state={isOpIconShown:!1},r}return Object(r.a)(a,[{key:"render",value:function(){var e=this.state,t=e.isOpIconShown,a=(e.isDeleteDialogOpen,this.props),n=a.dirent,r=a.fromSystemRepo,i=E.a.getDirentIcon(n);return l.a.createElement(s.Fragment,null,l.a.createElement("tr",{onMouseEnter:this.handleMouseOver,onMouseLeave:this.handleMouseOut},l.a.createElement("td",{className:"text-center"},l.a.createElement("img",{src:i,width:"24",alt:""})),l.a.createElement("td",null,n.is_file?n.name:l.a.createElement(m.a,{to:"#",onClick:this.openFolder},n.name)),l.a.createElement("td",null,t&&r&&l.a.createElement("a",{href:"#",className:"op-icon sf2-icon-delete",title:Object(d.mb)("Delete"),onClick:this.deleteDirent}),t&&n.is_file&&l.a.createElement("a",{href:"#",className:"op-icon sf2-icon-download",title:Object(d.mb)("Download"),onClick:this.downloadDirent})),l.a.createElement("td",null,n.size),l.a.createElement("td",null,w()(n.mtime).fromNow())))}}]),a}(l.a.Component),Gt=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){return Object(n.a)(this,a),t.call(this,e)}return Object(r.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.loading,n=t.errorMsg,r=t.direntList;return a?l.a.createElement(y.a,null):n?l.a.createElement("p",{className:"error text-center mt-4"},n):l.a.createElement(s.Fragment,null,l.a.createElement("table",{className:"table-hover"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",{width:"5%"}),l.a.createElement("th",{width:"55%"},Object(d.mb)("Name")),l.a.createElement("th",{width:"10%"}),l.a.createElement("th",{width:"15%"},Object(d.mb)("Size")),l.a.createElement("th",{width:"15%"},Object(d.mb)("Last Update")))),l.a.createElement("tbody",null,r.map((function(t,a){return l.a.createElement(Vt,{key:a,dirent:t,openFolder:e.props.openFolder,deleteDirent:e.props.deleteDirent,downloadDirent:e.props.downloadDirent,fromSystemRepo:e.props.fromSystemRepo})})))))}}]),a}(l.a.Component),Yt=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).onPathClick=function(e){r.loadDirentList(e)},r.toggleNewFolderDialog=function(){r.setState({isNewFolderDialogOpen:!r.state.isNewFolderDialogOpen})},r.createNewFolder=function(e){var t=E.a.getFileName(e);b.a.sysAdminCreateSysRepoFolder(r.props.repoID,r.state.path,t).then((function(e){var t=new qt(e.data),a=r.state.direntList;a.unshift(t),r.setState({direntList:a}),r.toggleNewFolderDialog()})).catch((function(e){var t=E.a.getErrorMsg(e);v.a.danger(t)}))},r.openFolder=function(e){var t=E.a.joinPath(r.state.path,e.name);e.is_file||r.loadDirentList(t)},r.loadDirentList=function(e){var t=r.props.repoID;b.a.sysAdminListRepoDirents(t,e).then((function(a){var n=a.data,i=n.is_system_library,o=n.repo_name,s=n.dirent_list,l=[];s.forEach((function(e){var t=new qt(e);l.push(t)})),r.setState({loading:!1,repoName:o,isSystemRepo:i,direntList:l,path:e},(function(){var a=d.ic+"sys/libraries/"+t+"/"+encodeURIComponent(r.state.repoName)+E.a.encodePath(e);window.history.replaceState({url:a,path:e},e,a)}))})).catch((function(e){r.setState({loading:!1,errorMsg:E.a.getErrorMsg(e,!0)})}))},r.deleteDirent=function(e){var t=E.a.joinPath(r.state.path,e.name);b.a.sysAdminDeleteRepoDirent(r.props.repoID,t).then((function(t){v.a.success(Object(d.mb)("Successfully deleted 1 item."));var a=r.state.direntList.filter((function(t){return t.name!=e.name}));r.setState({direntList:a})})).catch((function(e){var t=E.a.getErrorMsg(e);v.a.danger(t)}))},r.downloadDirent=function(e){var t=E.a.joinPath(r.state.path,e.name);b.a.sysAdminGetRepoFileDownloadURL(r.props.repoID,t).then((function(e){location.href=e.data.download_url})).catch((function(e){var t=E.a.getErrorMsg(e);v.a.danger(t)}))},r.openFileInput=function(){r.fileInput.current.click()},r.onFileInputChange=function(){if(r.fileInput.current.files.length){var e=r.fileInput.current.files[0],t=r.state.path;b.a.sydAdminGetSysRepoItemUploadURL(t).then((function(a){var n=new FormData;n.append("parent_dir",t),n.append("file",e),Object(zt.post)(a.data.upload_link,n).then((function(e){var t=e.data[0],a=new qt({is_file:!0,obj_name:t.name,file_size:E.a.bytesToSize(t.size),last_update:(new Date).getTime()}),n=r.state.direntList,i=n.filter((function(e){return!e.is_file}));n.splice(i.length,0,a),r.setState({direntList:n})}))})).catch((function(e){var t=E.a.getErrorMsg(e);v.a.danger(t)}))}},r.checkDuplicatedName=function(e){return r.state.direntList.some((function(t){return t.name===e}))},r.fileInput=l.a.createRef(),r.state={loading:!0,errorMsg:"",isSystemRepo:!1,repoName:"",path:"",direntList:[],isNewFolderDialogOpen:!1},r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){this.loadDirentList("/")}},{key:"render",value:function(){var e=this.state,t=e.loading,a=e.errorMsg,n=e.repoName,r=e.direntList,i=e.isSystemRepo,o=e.path,c=e.isNewFolderDialogOpen,u=this.props.repoID;return l.a.createElement(s.Fragment,null,i?l.a.createElement(x,null,l.a.createElement(s.Fragment,null,l.a.createElement("input",{className:"d-none",type:"file",onChange:this.onFileInputChange,ref:this.fileInput}),l.a.createElement(f.c,{className:"operation-item",onClick:this.openFileInput},Object(d.mb)("Upload")),l.a.createElement(f.c,{className:"operation-item",onClick:this.toggleNewFolderDialog},Object(d.mb)("New Folder")))):l.a.createElement(x,null),l.a.createElement("div",{className:"main-panel-center flex-row"},l.a.createElement("div",{className:"cur-view-container"},l.a.createElement("div",{className:"cur-view-path align-items-center"},l.a.createElement(Wt,{isSystemRepo:i,repoID:u,repoName:n,currentPath:o,onPathClick:this.onPathClick})),l.a.createElement("div",{className:"cur-view-content"},l.a.createElement(Gt,{loading:t,errorMsg:a,fromSystemRepo:i,direntList:r,openFolder:this.openFolder,deleteDirent:this.deleteDirent,downloadDirent:this.downloadDirent})))),c&&l.a.createElement(Ht.a,{parentPath:o,checkDuplicatedName:this.checkDuplicatedName,onAddFolder:this.createNewFolder,addFolderCancel:this.toggleNewFolderDialog}))}}]),a}(s.Component),Qt=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).handleRepoNameChange=function(e){e.target.value.trim()?r.setState({isSubmitBtnActive:!0}):r.setState({isSubmitBtnActive:!1}),r.setState({groupName:e.target.value})},r.handleSubmit=function(){var e=r.state.groupName.trim();r.props.createGroup(e,r.state.ownerEmail)},r.handleSelectChange=function(e){r.setState({ownerEmail:e?e.email:""})},r.handleKeyPress=function(e){"Enter"===e.key&&(r.handleSubmit(),e.preventDefault())},r.toggle=function(){r.props.toggleDialog()},r.state={groupName:"",ownerEmail:"",errMessage:"",isSubmitBtnActive:!1},r.newInput=l.a.createRef(),r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){this.newInput.focus()}},{key:"render",value:function(){var e=this;return l.a.createElement(f.x,{isOpen:!0,toggle:this.toggle},l.a.createElement(f.A,{toggle:this.toggle},Object(d.mb)("New Group")),l.a.createElement(f.y,null,l.a.createElement(f.p,null,l.a.createElement(f.q,null,l.a.createElement(f.w,{for:"groupName"},Object(d.mb)("Name")),l.a.createElement(f.s,{id:"groupName",onKeyPress:this.handleKeyPress,innerRef:function(t){e.newInput=t},value:this.state.groupName,onChange:this.handleRepoNameChange}),l.a.createElement(f.w,{className:"mt-2"},Object(d.mb)("Owner"),l.a.createElement("span",{className:"small text-secondary"},Object(d.mb)("(If left blank, owner will be admin)"))),l.a.createElement(ye.a,{isMulti:!1,className:"reviewer-select",placeholder:Object(d.mb)("Select a user"),onSelectChange:this.handleSelectChange}))),this.state.errMessage&&l.a.createElement(f.a,{color:"danger"},this.state.errMessage)),l.a.createElement(f.z,null,l.a.createElement(f.c,{color:"secondary",onClick:this.toggle},Object(d.mb)("Cancel")),l.a.createElement(f.c,{color:"primary",onClick:this.handleSubmit,disabled:!this.state.isSubmitBtnActive},Object(d.mb)("Submit"))))}}]),a}(l.a.Component),Kt=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).handleSelectChange=function(e){r.setState({selectedOption:e,submitBtnDisabled:null==e})},r.submit=function(){var e=r.state.selectedOption.email;r.props.transferGroup(e),r.props.toggleDialog()},r.state={selectedOption:null,submitBtnDisabled:!0},r}return Object(r.a)(a,[{key:"render",value:function(){var e=this.state.submitBtnDisabled,t='<span class="op-target">'+E.a.HTMLescape(this.props.groupName)+"</span>",a=Object(d.mb)("Transfer Group {placeholder} to").replace("{placeholder}",t);return l.a.createElement(f.x,{isOpen:!0},l.a.createElement(f.A,{toggle:this.props.toggleDialog},l.a.createElement("span",{dangerouslySetInnerHTML:{__html:a}})),l.a.createElement(f.y,null,l.a.createElement(ye.a,{ref:"userSelect",isMulti:!1,className:"reviewer-select",placeholder:Object(d.mb)("Select a user"),onSelectChange:this.handleSelectChange})),l.a.createElement(f.z,null,l.a.createElement(f.c,{color:"secondary",onClick:this.props.toggleDialog},Object(d.mb)("Cancel")),l.a.createElement(f.c,{color:"primary",onClick:this.submit,disabled:e},Object(d.mb)("Submit"))))}}]),a}(l.a.Component),Xt=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).onFreezedItem=function(){r.setState({isItemFreezed:!0})},r.onUnfreezedItem=function(){r.setState({isItemFreezed:!1})},r.getPreviousPage=function(){r.props.getListByPage(r.props.pageInfo.current_page-1)},r.getNextPage=function(){r.props.getListByPage(r.props.pageInfo.current_page+1)},r.state={isItemFreezed:!1},r}return Object(r.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.loading,n=t.errorMsg,r=t.items,i=t.pageInfo,o=t.curPerPage;if(a)return l.a.createElement(y.a,null);if(n)return l.a.createElement("p",{className:"error text-center mt-4"},n);var c=l.a.createElement(ne.a,null,l.a.createElement("h2",null,Object(d.mb)("No groups"))),u=l.a.createElement(s.Fragment,null,l.a.createElement("table",null,l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",{width:"35%"},Object(d.mb)("Name")),l.a.createElement("th",{width:"40%"},Object(d.mb)("Owner")),l.a.createElement("th",{width:"20%"},Object(d.mb)("Created At")),l.a.createElement("th",{width:"5%"}))),l.a.createElement("tbody",null,r.map((function(t,a){return l.a.createElement($t,{key:a,item:t,isItemFreezed:e.state.isItemFreezed,onFreezedItem:e.onFreezedItem,onUnfreezedItem:e.onUnfreezedItem,deleteGroup:e.props.deleteGroup,transferGroup:e.props.transferGroup})})))),i&&l.a.createElement(X.a,{gotoPreviousPage:this.getPreviousPage,gotoNextPage:this.getNextPage,currentPage:i.current_page,hasNextPage:i.has_next_page,curPerPage:o,resetPerPage:this.props.resetPerPage}));return r.length?u:c}}]),a}(s.Component),$t=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).handleMouseEnter=function(){r.props.isItemFreezed||r.setState({isOpIconShown:!0,highlight:!0})},r.handleMouseLeave=function(){r.props.isItemFreezed||r.setState({isOpIconShown:!1,highlight:!1})},r.onUnfreezedItem=function(){r.setState({highlight:!1,isOpIconShow:!1}),r.props.onUnfreezedItem()},r.onMenuItemClick=function(e){switch(e){case"Delete":r.toggleDeleteDialog();break;case"Transfer":r.toggleTransferDialog()}},r.toggleDeleteDialog=function(e){e&&e.preventDefault(),r.setState({isDeleteDialogOpen:!r.state.isDeleteDialogOpen})},r.toggleTransferDialog=function(e){e&&e.preventDefault(),r.setState({isTransferDialogOpen:!r.state.isTransferDialogOpen})},r.deleteGroup=function(){r.props.deleteGroup(r.props.item.id)},r.transferGroup=function(e){r.props.transferGroup(r.props.item.id,e)},r.translateOperations=function(e){var t="";switch(e){case"Delete":t=Object(d.mb)("Delete");break;case"Transfer":t=Object(d.mb)("Transfer")}return t},r.state={isOpIconShown:!1,highlight:!1,isDeleteDialogOpen:!1,isTransferDialogOpen:!1},r}return Object(r.a)(a,[{key:"render",value:function(){var e=this.props.item,t=this.state,a=t.isOpIconShown,n=t.isDeleteDialogOpen,r=t.isTransferDialogOpen,i='<span class="op-target">'+E.a.HTMLescape(e.name)+"</span>",o=Object(d.mb)("Are you sure you want to delete {placeholder} ?").replace("{placeholder}",i),c=0==e.parent_group_id?"".concat(d.ic,"sys/groups/").concat(e.id,"/libraries/"):"".concat(d.ic,"sys/departments/").concat(e.id,"/");return l.a.createElement(s.Fragment,null,l.a.createElement("tr",{className:this.state.highlight?"tr-highlight":"",onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave},l.a.createElement("td",null,l.a.createElement(m.a,{to:c},e.name)),l.a.createElement("td",null,"system admin"==e.owner?"--":l.a.createElement(ue,{email:e.owner,name:e.owner_name})),l.a.createElement("td",null,l.a.createElement("span",{title:w()(e.created_at).format("llll")},w()(e.created_at).fromNow())),l.a.createElement("td",null,a&&"system admin"!=e.owner&&l.a.createElement(Ce,{operations:["Delete","Transfer"],translateOperations:this.translateOperations,onMenuItemClick:this.onMenuItemClick,onFreezedItem:this.props.onFreezedItem,onUnfreezedItem:this.onUnfreezedItem}))),n&&l.a.createElement(xe,{title:Object(d.mb)("Delete Group"),message:o,executeOperation:this.deleteGroup,confirmBtnText:Object(d.mb)("Delete"),toggleDialog:this.toggleDeleteDialog}),r&&l.a.createElement(Kt,{groupName:e.name,transferGroup:this.transferGroup,toggleDialog:this.toggleTransferDialog}))}}]),a}(s.Component),Jt=Xt,Zt=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).toggleCreateGroupDialog=function(){r.setState({isCreateGroupDialogOpen:!r.state.isCreateGroupDialogOpen})},r.getGroupListByPage=function(e){b.a.sysAdminListAllGroups(e,r.state.perPage).then((function(e){r.setState({loading:!1,groupList:e.data.groups,pageInfo:e.data.page_info})})).catch((function(e){r.setState({loading:!1,errorMsg:E.a.getErrorMsg(e,!0)})}))},r.resetPerPage=function(e){r.setState({perPage:e},(function(){r.getGroupListByPage(1)}))},r.createGroup=function(e,t){b.a.sysAdminCreateNewGroup(e,t).then((function(e){var t=r.state.groupList;t.unshift(e.data),r.setState({groupList:t}),r.toggleCreateGroupDialog()})).catch((function(e){var t=E.a.getErrorMsg(e);v.a.danger(t)}))},r.deleteGroup=function(e){b.a.sysAdminDismissGroupByID(e).then((function(t){var a=r.state.groupList.filter((function(t){return t.id!=e}));r.setState({groupList:a}),v.a.success(Object(d.mb)("Successfully deleted 1 item."))})).catch((function(e){var t=E.a.getErrorMsg(e);v.a.danger(t)}))},r.transferGroup=function(e,t){b.a.sysAdminTransferGroup(t,e).then((function(t){var a=r.state.groupList.map((function(a){return a.id==e&&(a=t.data),a}));r.setState({groupList:a}),v.a.success(Object(d.mb)("Successfully transferred the group."))})).catch((function(e){var t=E.a.getErrorMsg(e);v.a.danger(t)}))},r.getSearch=function(){return l.a.createElement(we,{placeholder:Object(d.mb)("Search groups by name"),submit:r.searchGroups})},r.searchGroups=function(e){Object(m.c)("".concat(d.ic,"sys/search-groups/?name=").concat(encodeURIComponent(e)))},r.state={loading:!0,errorMsg:"",groupList:[],pageInfo:{},perPage:25,isCreateGroupDialogOpen:!1},r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=new URL(window.location).searchParams,a=this.state,n=a.currentPage,r=void 0===n?1:n,i=a.perPage;this.setState({perPage:parseInt(t.get("per_page")||i),currentPage:parseInt(t.get("page")||r)},(function(){e.getGroupListByPage(e.state.currentPage)}))}},{key:"render",value:function(){var e=this.state.isCreateGroupDialogOpen;return l.a.createElement(s.Fragment,null,l.a.createElement(x,{search:this.getSearch()},l.a.createElement(s.Fragment,null,l.a.createElement(f.c,{className:"operation-item",onClick:this.toggleCreateGroupDialog},Object(d.mb)("New Group")),l.a.createElement("a",{className:"btn btn-secondary operation-item",href:"".concat(d.ic,"sys/groupadmin/export-excel/")},Object(d.mb)("Export Excel")))),l.a.createElement("div",{className:"main-panel-center flex-row"},l.a.createElement("div",{className:"cur-view-container"},l.a.createElement("div",{className:"cur-view-path"},l.a.createElement("h3",{className:"sf-heading"},Object(d.mb)("Groups"))),l.a.createElement("div",{className:"cur-view-content"},l.a.createElement(Jt,{loading:this.state.loading,errorMsg:this.state.errorMsg,items:this.state.groupList,pageInfo:this.state.pageInfo,deleteGroup:this.deleteGroup,transferGroup:this.transferGroup,getListByPage:this.getGroupListByPage,resetPerPage:this.resetPerPage,curPerPage:this.state.perPage})))),e&&l.a.createElement(Qt,{createGroup:this.createGroup,toggleDialog:this.toggleCreateGroupDialog}))}}]),a}(s.Component),ea=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).getGroups=function(){var e=r.state.name;b.a.sysAdminSearchGroups(e).then((function(e){r.setState({loading:!1,groupList:e.data.group_list})})).catch((function(e){r.setState({loading:!1,errorMsg:E.a.getErrorMsg(e,!0)})}))},r.deleteGroup=function(e){b.a.sysAdminDismissGroupByID(e).then((function(t){var a=r.state.groupList.filter((function(t){return t.id!=e}));r.setState({groupList:a}),v.a.success(Object(d.mb)("Successfully deleted 1 item."))})).catch((function(e){var t=E.a.getErrorMsg(e);v.a.danger(t)}))},r.transferGroup=function(e,t){b.a.sysAdminTransferGroup(t,e).then((function(t){var a=r.state.groupList.map((function(a){return a.id==e&&(a=t.data),a}));r.setState({groupList:a}),v.a.success(Object(d.mb)("Successfully transferred the group."))})).catch((function(e){var t=E.a.getErrorMsg(e);v.a.danger(t)}))},r.handleNameInputChange=function(e){r.setState({name:e.target.value},r.checkSubmitBtnActive)},r.checkSubmitBtnActive=function(){var e=r.state.name;r.setState({isSubmitBtnActive:e.trim()})},r.state={name:"",isSubmitBtnActive:!1,loading:!0,errorMsg:"",groupList:[],pageInfo:null},r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=new URL(document.location).searchParams;this.setState({name:e.get("name")||""},this.getGroups)}},{key:"render",value:function(){var e=this.state,t=e.name,a=e.isSubmitBtnActive;return l.a.createElement(s.Fragment,null,l.a.createElement(x,null),l.a.createElement("div",{className:"main-panel-center flex-row"},l.a.createElement("div",{className:"cur-view-container"},l.a.createElement("div",{className:"cur-view-path"},l.a.createElement("h3",{className:"sf-heading"},Object(d.mb)("Groups"))),l.a.createElement("div",{className:"cur-view-content"},l.a.createElement("div",{className:"mt-4 mb-6"},l.a.createElement("h4",{className:"border-bottom font-weight-normal mb-2 pb-1"},Object(d.mb)("Search Groups")),l.a.createElement("p",{className:"text-secondary small"},Object(d.mb)("Tip: you can search by keyword in name.")),l.a.createElement(f.p,null,l.a.createElement(f.q,{row:!0},l.a.createElement(f.w,{for:"name",sm:1},Object(d.mb)("Name")),l.a.createElement(f.i,{sm:5},l.a.createElement(f.s,{type:"text",name:"name",id:"name",value:t,onChange:this.handleNameInputChange}))),l.a.createElement(f.q,{row:!0},l.a.createElement(f.i,{sm:{size:5,offset:1}},l.a.createElement("button",{className:"btn btn-outline-primary",disabled:!a,onClick:this.getGroups},Object(d.mb)("Submit")))))),l.a.createElement("div",{className:"mt-4 mb-6"},l.a.createElement("h4",{className:"border-bottom font-weight-normal mb-2 pb-1"},Object(d.mb)("Result")),l.a.createElement(Jt,{loading:this.state.loading,errorMsg:this.state.errorMsg,items:this.state.groupList,deleteGroup:this.deleteGroup,transferGroup:this.transferGroup}))))))}}]),a}(s.Component),ta=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).navItems=[{name:"repos",urlPart:"groups/"+r.props.groupID+"/libraries",text:Object(d.mb)("Libraries")},{name:"members",urlPart:"groups/"+r.props.groupID+"/members",text:Object(d.mb)("Members")}],r}return Object(r.a)(a,[{key:"render",value:function(){var e=this.props,t=e.groupName,a=e.currentItem;return l.a.createElement("div",null,l.a.createElement("div",{className:"cur-view-path"},l.a.createElement("h3",{className:"sf-heading"},l.a.createElement(m.a,{to:"".concat(d.ic,"sys/groups/")},Object(d.mb)("Groups"))," / ",t)),l.a.createElement("ul",{className:"nav border-bottom mx-4"},this.navItems.map((function(e,t){return l.a.createElement("li",{className:"nav-item mr-2",key:t},l.a.createElement(m.a,{to:"".concat(d.ic,"sys/").concat(e.urlPart,"/"),className:"nav-link ".concat(a==e.name?" active":"")},e.text))}))))}}]),a}(l.a.Component),aa=window.sysadmin.pageOptions.enableSysAdminViewRepo,na=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){return Object(n.a)(this,a),t.call(this,e)}return Object(r.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.loading,n=t.errorMsg,r=t.items;if(a)return l.a.createElement(y.a,null);if(n)return l.a.createElement("p",{className:"error text-center mt-4"},n);var i=l.a.createElement(ne.a,null,l.a.createElement("h2",null,Object(d.mb)("No libraries"))),o=l.a.createElement(s.Fragment,null,l.a.createElement("table",{className:"table-hover"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",{width:"5%"}),l.a.createElement("th",{width:"30%"},Object(d.mb)("Name")),l.a.createElement("th",{width:"30%"},Object(d.mb)("Size")),l.a.createElement("th",{width:"25%"},Object(d.mb)("Shared By")),l.a.createElement("th",{width:"10%"}))),l.a.createElement("tbody",null,r.map((function(t,a){return l.a.createElement(ra,{key:a,item:t,unshareRepo:e.props.unshareRepo})})))));return r.length?o:i}}]),a}(s.Component),ra=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).handleMouseEnter=function(){r.setState({isOpIconShown:!0})},r.handleMouseLeave=function(){r.setState({isOpIconShown:!1})},r.toggleUnshareRepoDialog=function(e){e&&e.preventDefault(),r.setState({isUnshareRepoDialogOpen:!r.state.isUnshareRepoDialogOpen})},r.unshareRepo=function(){var e=r.props.item;r.props.unshareRepo(e.repo_id,e.name),r.toggleUnshareRepoDialog()},r.renderRepoName=function(){var e=r.props.item,t=e;return t.id=e.repo_id,t.name?d.wb&&aa&&!t.encrypted?l.a.createElement("a",{href:"".concat(d.ic,"sys/libraries/").concat(t.id,"/")},t.name):t.name:"--"},r.state={isOpIconShown:!1,isUnshareRepoDialogOpen:!1},r}return Object(r.a)(a,[{key:"render",value:function(){var e=this.state,t=e.isOpIconShown,a=e.isUnshareRepoDialogOpen,n=this.props.item,r=E.a.getLibIconUrl(n),i=E.a.getLibIconTitle(n),o='<span class="op-target">'+E.a.HTMLescape(n.name)+"</span>",c=Object(d.mb)("Are you sure you want to unshare {placeholder} ?").replace("{placeholder}",o);return l.a.createElement(s.Fragment,null,l.a.createElement("tr",{onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave},l.a.createElement("td",null,l.a.createElement("img",{src:r,title:i,alt:i,width:"24"})),l.a.createElement("td",null,this.renderRepoName()),l.a.createElement("td",null,E.a.bytesToSize(n.size)),l.a.createElement("td",null,l.a.createElement(ue,{email:n.shared_by,name:n.shared_by_name})),l.a.createElement("td",null,l.a.createElement("a",{href:"#",className:"action-icon sf2-icon-x3 ".concat(t?"":"invisible"),title:Object(d.mb)("Unshare"),onClick:this.toggleUnshareRepoDialog}))),a&&l.a.createElement(xe,{title:Object(d.mb)("Unshare Library"),message:c,executeOperation:this.unshareRepo,confirmBtnText:Object(d.mb)("Unshare"),toggleDialog:this.toggleUnshareRepoDialog}))}}]),a}(s.Component),ia=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).unshareRepo=function(e,t){b.a.sysAdminUnshareRepoFromGroup(r.props.groupID,e).then((function(a){var n=r.state.repoList.filter((function(t){return t.repo_id!=e}));r.setState({repoList:n});var i=Object(d.mb)("Successfully unshared library {placeholder}").replace("{placeholder}",t);v.a.success(i)})).catch((function(e){var t=E.a.getErrorMsg(e);v.a.danger(t)}))},r.state={loading:!0,errorMsg:"",groupName:"",repoList:[]},r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this;b.a.sysAdminListGroupRepos(this.props.groupID).then((function(t){e.setState({loading:!1,repoList:t.data.libraries,groupName:t.data.group_name})})).catch((function(t){e.setState({loading:!1,errorMsg:E.a.getErrorMsg(t,!0)})}))}},{key:"render",value:function(){return l.a.createElement(s.Fragment,null,l.a.createElement(x,null),l.a.createElement("div",{className:"main-panel-center flex-row"},l.a.createElement("div",{className:"cur-view-container"},l.a.createElement(ta,{groupID:this.props.groupID,groupName:this.state.groupName,currentItem:"repos"}),l.a.createElement("div",{className:"cur-view-content"},l.a.createElement(na,{loading:this.state.loading,errorMsg:this.state.errorMsg,items:this.state.repoList,unshareRepo:this.unshareRepo})))))}}]),a}(s.Component),oa=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).handleSelectChange=function(e){r.setState({selectedOptions:e,isSubmitBtnDisabled:!e.length})},r.addMembers=function(){var e=r.state.selectedOptions.map((function(e){return e.email}));r.props.addMembers(e),r.props.toggle()},r.state={selectedOptions:null,isSubmitBtnDisabled:!0},r}return Object(r.a)(a,[{key:"render",value:function(){var e=this.state.isSubmitBtnDisabled;return l.a.createElement(f.x,{isOpen:!0},l.a.createElement(f.A,{toggle:this.props.toggle},Object(d.mb)("Add Member")),l.a.createElement(f.y,null,l.a.createElement(ye.a,{ref:"userSelect",isMulti:!0,className:"reviewer-select",placeholder:Object(d.mb)("Search users..."),onSelectChange:this.handleSelectChange})),l.a.createElement(f.z,null,l.a.createElement(f.c,{color:"secondary",onClick:this.props.toggle},Object(d.mb)("Cancel")),l.a.createElement(f.c,{color:"primary",onClick:this.addMembers,disabled:e},Object(d.mb)("Submit"))))}}]),a}(l.a.Component),sa=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(){var e;Object(n.a)(this,a);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).translateRoles=function(e){switch(e){case"Member":return Object(d.mb)("Member");case"Admin":return Object(d.mb)("Admin");default:return e}},e}return Object(r.a)(a,[{key:"render",value:function(){return l.a.createElement(be.a,{isTextMode:this.props.isTextMode,isEditIconShow:this.props.isEditIconShow,options:this.props.roleOptions,currentOption:this.props.currentRole,onOptionChanged:this.props.onRoleChanged,translateOption:this.translateRoles})}}]),a}(l.a.Component),la=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).getPreviousPageList=function(){r.props.getListByPage(r.props.pageInfo.current_page-1)},r.getNextPageList=function(){r.props.getListByPage(r.props.pageInfo.current_page+1)},r}return Object(r.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.loading,n=t.errorMsg,r=t.items,i=t.pageInfo,o=t.curPerPage;if(a)return l.a.createElement(y.a,null);if(n)return l.a.createElement("p",{className:"error text-center mt-4"},n);var c=l.a.createElement(ne.a,null,l.a.createElement("h2",null,Object(d.mb)("No members"))),u=l.a.createElement(s.Fragment,null,l.a.createElement("table",{className:"table-hover"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",{width:"5%"}),l.a.createElement("th",{width:"55%"},Object(d.mb)("Name")),l.a.createElement("th",{width:"30%"},Object(d.mb)("Role")),l.a.createElement("th",{width:"10%"}))),l.a.createElement("tbody",null,r.map((function(t,a){return l.a.createElement(ca,{key:a,item:t,removeMember:e.props.removeMember,updateMemberRole:e.props.updateMemberRole})})))),i&&l.a.createElement(X.a,{gotoPreviousPage:this.getPreviousPageList,gotoNextPage:this.getNextPageList,currentPage:i.current_page,hasNextPage:i.has_next_page,curPerPage:o,resetPerPage:this.props.resetPerPage}));return r.length?u:c}}]),a}(s.Component),ca=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).handleMouseEnter=function(){r.setState({isOpIconShown:!0})},r.handleMouseLeave=function(){r.setState({isOpIconShown:!1})},r.toggleDeleteDialog=function(e){e&&e.preventDefault(),r.setState({isDeleteDialogOpen:!r.state.isDeleteDialogOpen})},r.removeMember=function(){var e=r.props.item;r.props.removeMember(e.email,e.name),r.toggleDeleteDialog()},r.updateMemberRole=function(e){r.props.updateMemberRole(r.props.item.email,e)},r.state={isOpIconShown:!1,isDeleteDialogOpen:!1},r}return Object(r.a)(a,[{key:"render",value:function(){var e=this.state,t=e.isOpIconShown,a=e.isDeleteDialogOpen,n=this.props.item,r='<span class="op-target">'+E.a.HTMLescape(n.name)+"</span>",i=Object(d.mb)("Are you sure you want to remove {placeholder} ?").replace("{placeholder}",r);return l.a.createElement(s.Fragment,null,l.a.createElement("tr",{onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave},l.a.createElement("td",null,l.a.createElement("img",{src:n.avatar_url,alt:"",className:"rounded-circle",width:"24"})),l.a.createElement("td",null,l.a.createElement(ue,{email:n.email,name:n.name})),l.a.createElement("td",null,"Owner"==n.role?Object(d.mb)("Owner"):l.a.createElement(sa,{isTextMode:!0,isEditIconShow:t,roleOptions:["Member","Admin"],currentRole:n.role,onRoleChanged:this.updateMemberRole})),l.a.createElement("td",null,"Owner"!=n.role&&l.a.createElement("a",{href:"#",className:"action-icon sf2-icon-x3 ".concat(t?"":"invisible"),title:Object(d.mb)("Remove"),onClick:this.toggleDeleteDialog}))),a&&l.a.createElement(xe,{title:Object(d.mb)("Remove Member"),message:i,executeOperation:this.removeMember,confirmBtnText:Object(d.mb)("Remove"),toggleDialog:this.toggleDeleteDialog}))}}]),a}(s.Component),ua=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).getListByPage=function(e){var t=r.state.perPage;b.a.sysAdminListGroupMembers(r.props.groupID,e,t).then((function(e){r.setState({loading:!1,memberList:e.data.members,groupName:e.data.group_name,pageInfo:e.data.page_info})})).catch((function(e){r.setState({loading:!1,errorMsg:E.a.getErrorMsg(e,!0)})}))},r.resetPerPage=function(e){r.setState({perPage:e},(function(){r.getListByPage(1)}))},r.toggleAddMemgerDialog=function(){r.setState({isAddMemberDialogOpen:!r.state.isAddMemberDialogOpen})},r.addMembers=function(e){b.a.sysAdminAddGroupMember(r.props.groupID,e).then((function(e){var t=e.data.success;t.length&&(r.setState({memberList:t.concat(r.state.memberList)}),t.map((function(e){var t=Object(d.mb)("Successfully added {email_placeholder}").replace("{email_placeholder}",e.email);v.a.success(t)}))),e.data.failed.map((function(e){var t=Object(d.mb)("Failed to add {email_placeholder}: {error_msg_placeholder}").replace("{email_placeholder}",e.email).replace("{error_msg_placeholder}",e.error_msg);v.a.danger(t,{duration:3})}))})).catch((function(e){var t=E.a.getErrorMsg(e);v.a.danger(t)}))},r.removeMember=function(e,t){b.a.sysAdminDeleteGroupMember(r.props.groupID,e).then((function(a){var n=r.state.memberList.filter((function(t){return t.email!=e}));r.setState({memberList:n}),v.a.success(Object(d.mb)("Successfully removed {placeholder}.").replace("{placeholder}",t))})).catch((function(e){var t=E.a.getErrorMsg(e);v.a.danger(t)}))},r.updateMemberRole=function(e,t){var a="Admin"==t;b.a.sysAdminUpdateGroupMemberRole(r.props.groupID,e,a).then((function(a){var n=r.state.memberList.map((function(a){return a.email==e&&(a.role=t),a}));r.setState({memberList:n})})).catch((function(e){var t=E.a.getErrorMsg(e);v.a.danger(t)}))},r.state={loading:!0,errorMsg:"",groupName:"",memberList:[],pageInfo:{},currentPage:1,perPage:25,isAddMemberDialogOpen:!1},r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=new URL(window.location).searchParams,a=this.state,n=a.currentPage,r=a.perPage;this.setState({currentPage:parseInt(t.get("page")||n),perPage:parseInt(t.get("per_page")||r)},(function(){e.getListByPage(e.state.currentPage)}))}},{key:"render",value:function(){var e=this.state.isAddMemberDialogOpen;return l.a.createElement(s.Fragment,null,l.a.createElement(x,null,l.a.createElement(f.c,{className:"btn btn-secondary operation-item",onClick:this.toggleAddMemgerDialog},Object(d.mb)("Add Member"))),l.a.createElement("div",{className:"main-panel-center flex-row"},l.a.createElement("div",{className:"cur-view-container"},l.a.createElement(ta,{currentItem:"members",groupID:this.props.groupID,groupName:this.state.groupName}),l.a.createElement("div",{className:"cur-view-content"},l.a.createElement(la,{loading:this.state.loading,errorMsg:this.state.errorMsg,items:this.state.memberList,removeMember:this.removeMember,updateMemberRole:this.updateMemberRole,pageInfo:this.state.pageInfo,curPerPage:this.state.perPage,getListByPage:this.getListByPage,resetPerPage:this.resetPerPage})))),e&&l.a.createElement(oa,{addMembers:this.addMembers,toggle:this.toggleAddMemgerDialog}))}}]),a}(s.Component),ma=(a(159),function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){return Object(n.a)(this,a),t.call(this,e)}return Object(r.a)(a,[{key:"render",value:function(){return l.a.createElement("div",{className:"h-100 org-departments"},this.props.children)}}]),a}(l.a.Component)),da=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).handleSubmit=function(){if(r.validateName()){var e=-1;r.props.parentGroupID&&(e=r.props.parentGroupID),b.a.sysAdminAddNewDepartment(e,r.state.departName.trim()).then((function(e){r.props.toggle(),r.props.onDepartChanged()})).catch((function(e){var t=Object(d.mb)(e.response.data.error_msg);r.setState({errMessage:t})}))}},r.validateName=function(){var e="";return!!r.state.departName.trim().length||(e=Object(d.mb)("Name is required"),r.setState({errMessage:e}),!1)},r.handleChange=function(e){r.setState({departName:e.target.value})},r.handleKeyPress=function(e){"Enter"===e.key&&(r.handleSubmit(),e.preventDefault())},r.state={departName:"",errMessage:""},r.newInput=l.a.createRef(),r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){this.newInput.focus(),this.newInput.setSelectionRange(0,0)}},{key:"render",value:function(){var e=this,t=this.props.parentGroupID?Object(d.mb)("New Sub-department"):Object(d.mb)("New Department");return l.a.createElement(f.x,{isOpen:!0,toggle:this.props.toggle},l.a.createElement(f.A,{toggle:this.props.toggle},t),l.a.createElement(f.y,null,l.a.createElement(f.p,null,l.a.createElement(f.q,null,l.a.createElement(f.w,{for:"departName"},Object(d.mb)("Name")),l.a.createElement(f.s,{id:"departName",onKeyPress:this.handleKeyPress,value:this.state.departName,onChange:this.handleChange,innerRef:function(t){e.newInput=t}}))),this.state.errMessage&&l.a.createElement("p",{className:"error"},this.state.errMessage)),l.a.createElement(f.z,null,l.a.createElement(f.c,{color:"primary",onClick:this.handleSubmit},Object(d.mb)("Submit"))))}}]),a}(l.a.Component),pa=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).deleteDepart=function(){r.props.toggle(),b.a.sysAdminDeleteDepartment(r.props.groupID).then((function(e){r.props.onDepartChanged()})).catch((function(e){var t=E.a.getErrorMsg(e);v.a.danger(t)}))},r}return Object(r.a)(a,[{key:"render",value:function(){var e=Object(d.mb)("Are you sure you want to delete {placeholder} ?");return e=e.replace("{placeholder}",'<span class="op-target">'+E.a.HTMLescape(this.props.groupName)+"</span>"),l.a.createElement(f.x,{isOpen:!0,toggle:this.props.toggle},l.a.createElement(f.A,{toggle:this.props.toggle},Object(d.mb)("Delete Department")),l.a.createElement(f.y,null,l.a.createElement("p",{dangerouslySetInnerHTML:{__html:e}})),l.a.createElement(f.z,null,l.a.createElement(f.c,{color:"secondary",onClick:this.props.toggle},Object(d.mb)("Cancel")),l.a.createElement(f.c,{color:"primary",onClick:this.deleteDepart},Object(d.mb)("Delete"))))}}]),a}(l.a.Component),ha=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).setGroupQuota=function(){var e=r.state.quota;if(e.length&&/^[1-9]\d*$/im.test(e)||-2==e){r.setState({errMessage:""});var t=-2==r.state.quota?r.state.quota:1e6*r.state.quota;b.a.sysAdminUpdateDepartmentQuota(r.props.groupID,t).then((function(e){r.props.toggle(),r.props.onDepartChanged()})).catch((function(e){var t=E.a.getErrorMsg(e);v.a.danger(t)}))}else{var a=Object(d.mb)("Quota is invalid.");r.setState({errMessage:a})}},r.handleChange=function(e){var t=e.target.value.trim();r.setState({quota:t})},r.handleKeyPress=function(e){"Enter"===e.key&&(r.setGroupQuota(),e.preventDefault())},r.state={quota:"",errMessage:""},r.newInput=l.a.createRef(),r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){this.newInput.focus(),this.newInput.setSelectionRange(0,0)}},{key:"render",value:function(){var e=this;return l.a.createElement(f.x,{isOpen:!0,toggle:this.props.toggle},l.a.createElement(f.A,{toggle:this.props.toggle},Object(d.mb)("Set Quota")),l.a.createElement(f.y,null,l.a.createElement(f.t,null,l.a.createElement(f.s,{onKeyPress:this.handleKeyPress,value:this.state.quota,onChange:this.handleChange,innerRef:function(t){e.newInput=t}}),l.a.createElement(f.u,{addonType:"append"},"MB")),l.a.createElement("p",{className:"tip"},l.a.createElement("br",null),l.a.createElement("span",null,Object(d.mb)("An integer that is greater than 0 or equal to -2.")),l.a.createElement("br",null),l.a.createElement("span",null,Object(d.mb)("Tip: -2 means no limit."))),this.state.errMessage&&l.a.createElement("p",{className:"error"},this.state.errMessage)),l.a.createElement(f.z,null,l.a.createElement(f.c,{color:"primary",onClick:this.setGroupQuota},Object(d.mb)("Submit"))))}}]),a}(l.a.Component),ga=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).onMouseEnter=function(){r.setState({highlight:!0})},r.onMouseLeave=function(){r.setState({highlight:!1})},r.state={highlight:!1},r}return Object(r.a)(a,[{key:"render",value:function(){var e=this.props.group,t=this.state.highlight,a=d.ic+"sys/departments/"+e.id+"/";return l.a.createElement("tr",{className:t?"tr-highlight":"",onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave},l.a.createElement("td",null,l.a.createElement(m.a,{to:a},e.name)),l.a.createElement("td",null,w()(e.created_at).fromNow()),l.a.createElement("td",{onClick:this.props.showSetGroupQuotaDialog.bind(this,e.id)},E.a.bytesToSize(e.quota)," ",l.a.createElement("span",{title:"Edit Quota",className:"fa fa-pencil-alt attr-action-icon ".concat(t?"":"vh")})),l.a.createElement("td",{className:"cursor-pointer text-center",onClick:this.props.showDeleteDepartDialog.bind(this,e)},l.a.createElement("span",{className:"sf2-icon-delete action-icon  ".concat(t?"":"vh"),title:"Delete"})))}}]),a}(l.a.Component);w.a.locale(d.zb);var fa=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).listDepartGroups=function(){b.a.sysAdminListAllDepartments().then((function(e){r.setState({groups:e.data.data})}))},r.showDeleteDepartDialog=function(e){r.setState({showDeleteDepartDialog:!0,groupID:e.id,groupName:e.name})},r.showSetGroupQuotaDialog=function(e){r.setState({showSetGroupQuotaDialog:!0,groupID:e})},r.toggleAddDepartDialog=function(){r.setState({isShowAddDepartDialog:!r.state.isShowAddDepartDialog})},r.toggleCancel=function(){r.setState({showDeleteDepartDialog:!1,showSetGroupQuotaDialog:!1})},r.onDepartChanged=function(){r.listDepartGroups()},r.state={groups:null,groupID:"",groupName:"",showDeleteDepartDialog:!1,showSetGroupQuotaDialog:!1,isShowAddDepartDialog:!1},r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){this.listDepartGroups()}},{key:"render",value:function(){var e=this,t=this.state.groups,a=l.a.createElement(s.Fragment,null,l.a.createElement("button",{className:"btn btn-secondary operation-item",title:Object(d.mb)("New Department"),onClick:this.toggleAddDepartDialog},Object(d.mb)("New Department")),this.state.isShowAddDepartDialog&&l.a.createElement(pt.a,null,l.a.createElement(da,{onDepartChanged:this.onDepartChanged,groupID:this.state.groupID,toggle:this.toggleAddDepartDialog})));return l.a.createElement(s.Fragment,null,l.a.createElement(x,{children:a}),l.a.createElement("div",{className:"main-panel-center flex-row h-100"},l.a.createElement("div",{className:"cur-view-container o-auto"},l.a.createElement("div",{className:"cur-view-path"},l.a.createElement("div",{className:"fleft"},l.a.createElement("h3",{className:"sf-heading"},Object(d.mb)("Departments")))),l.a.createElement("div",{className:"cur-view-content"},t&&t.length>0?l.a.createElement("table",null,l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",{width:"40%"},Object(d.mb)("Name")),l.a.createElement("th",{width:"25%"},Object(d.mb)("Created At")),l.a.createElement("th",{width:"20%"},Object(d.mb)("Quota")),l.a.createElement("th",{width:"15%"}))),l.a.createElement("tbody",null,t.map((function(t,a){return l.a.createElement(s.Fragment,{key:t.id},l.a.createElement(ga,{group:t,showDeleteDepartDialog:e.showDeleteDepartDialog,showSetGroupQuotaDialog:e.showSetGroupQuotaDialog}))})))):l.a.createElement("p",{className:"no-group"},Object(d.mb)("No departments"))),this.state.showDeleteDepartDialog&&l.a.createElement(pt.a,null,l.a.createElement(pa,{toggle:this.toggleCancel,groupID:this.state.groupID,groupName:this.state.groupName,onDepartChanged:this.onDepartChanged})),this.state.showSetGroupQuotaDialog&&l.a.createElement(pt.a,null,l.a.createElement(ha,{toggle:this.toggleCancel,groupID:this.state.groupID,onDepartChanged:this.onDepartChanged})))))}}]),a}(l.a.Component),ba=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).handleSelectChange=function(e){r.setState({selectedOption:e})},r.handleSubmit=function(){if(r.state.selectedOption){var e=r.state.selectedOption.map((function(e){return e.email}));r.refs.orgSelect.clearSelect(),r.setState({errMessage:[]}),b.a.sysAdminAddGroupMember(r.props.groupID,e).then((function(e){r.setState({selectedOption:null}),e.data.failed.length>0&&r.setState({errMessage:e.data.failed[0].error_msg}),e.data.success.length>0&&(r.props.onMemberChanged(),r.props.toggle())})).catch((function(e){var t=E.a.getErrorMsg(e);v.a.danger(t)}))}},r.state={selectedOption:null,errMessage:""},r}return Object(r.a)(a,[{key:"render",value:function(){return l.a.createElement(f.x,{isOpen:!0,toggle:this.props.toggle},l.a.createElement(f.A,{toggle:this.props.toggle},Object(d.mb)("Add Member")),l.a.createElement(f.y,null,l.a.createElement(ye.a,{placeholder:Object(d.mb)("Search users..."),onSelectChange:this.handleSelectChange,ref:"orgSelect",isMulti:!0,className:"org-add-member-select"}),this.state.errMessage&&l.a.createElement("p",{className:"error"},this.state.errMessage)),l.a.createElement(f.z,null,l.a.createElement(f.c,{color:"primary",onClick:this.handleSubmit},Object(d.mb)("Submit")),l.a.createElement(f.c,{color:"secondary",onClick:this.props.toggle},Object(d.mb)("Cancel"))))}}]),a}(l.a.Component),va=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).deleteMember=function(){var e=r.props.member.email;b.a.sysAdminDeleteGroupMember(r.props.groupID,e).then((function(e){e.data.success&&(r.props.onMemberChanged(),r.props.toggle())})).catch((function(e){var t=E.a.getErrorMsg(e);v.a.danger(t)}))},r}return Object(r.a)(a,[{key:"render",value:function(){var e=Object(d.mb)("Are you sure you want to delete {placeholder} ?");return e=e.replace("{placeholder}",'<span class="op-target">'+E.a.HTMLescape(this.props.member.name)+"</span>"),l.a.createElement(f.x,{isOpen:!0,toggle:this.props.toggle},l.a.createElement(f.A,{toggle:this.props.toggle},Object(d.mb)("Delete Member")),l.a.createElement(f.y,null,l.a.createElement("div",{dangerouslySetInnerHTML:{__html:e}})),l.a.createElement(f.z,null,l.a.createElement(f.c,{color:"primary",onClick:this.deleteMember},Object(d.mb)("Delete")),l.a.createElement(f.c,{color:"secondary",onClick:this.props.toggle},Object(d.mb)("Cancel"))))}}]),a}(l.a.Component),Ea=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).handleSubmit=function(){r.validateName()&&b.a.sysAdminAddRepoInDepartment(r.props.groupID,r.state.repoName.trim()).then((function(e){r.props.toggle(),r.props.onRepoChanged()})).catch((function(e){var t=E.a.getErrorMsg(e);r.setState({errMessage:t})}))},r.validateName=function(){var e="";return!!r.state.repoName.trim().length||(e=Object(d.mb)("Name is required"),r.setState({errMessage:e}),!1)},r.handleChange=function(e){r.setState({repoName:e.target.value})},r.handleKeyPress=function(e){"Enter"===e.key&&(r.handleSubmit(),e.preventDefault())},r.state={repoName:"",errMessage:""},r.newInput=l.a.createRef(),r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){this.newInput.focus(),this.newInput.setSelectionRange(0,0)}},{key:"render",value:function(){var e=this;return l.a.createElement(f.x,{isOpen:!0,toggle:this.props.toggle},l.a.createElement(f.A,{toggle:this.props.toggle},Object(d.mb)("New Library")),l.a.createElement(f.y,null,l.a.createElement(f.p,null,l.a.createElement(f.q,null,l.a.createElement(f.w,{for:"repoName"},Object(d.mb)("Name")),l.a.createElement(f.s,{id:"repoName",onKeyPress:this.handleKeyPress,value:this.state.repoName,onChange:this.handleChange,innerRef:function(t){e.newInput=t}}))),this.state.errMessage&&l.a.createElement("p",{className:"error"},this.state.errMessage)),l.a.createElement(f.z,null,l.a.createElement(f.c,{color:"primary",onClick:this.handleSubmit},Object(d.mb)("Submit"))))}}]),a}(l.a.Component),ya=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).deleteRepo=function(){b.a.sysAdminDeleteRepoInDepartment(r.props.groupID,r.props.repo.repo_id).then((function(e){e.data.success&&(r.props.onRepoChanged(),r.props.toggle())})).catch((function(e){var t=E.a.getErrorMsg(e);v.a.danger(t)}))},r}return Object(r.a)(a,[{key:"render",value:function(){var e=Object(d.mb)("Are you sure you want to delete {placeholder} ?");return e=e.replace("{placeholder}",'<span class="op-target">'+E.a.HTMLescape(this.props.repo.name)+"</span>"),l.a.createElement(f.x,{isOpen:!0,toggle:this.props.toggle},l.a.createElement(f.A,{toggle:this.props.toggle},Object(d.mb)("Delete Library")),l.a.createElement(f.y,null,l.a.createElement("div",{dangerouslySetInnerHTML:{__html:e}})),l.a.createElement(f.z,null,l.a.createElement(f.c,{color:"primary",onClick:this.deleteRepo},Object(d.mb)("Delete")),l.a.createElement(f.c,{color:"secondary",onClick:this.props.toggle},Object(d.mb)("Cancel"))))}}]),a}(l.a.Component),Oa=a(191),xa=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).onMouseEnter=function(){r.props.isItemFreezed||r.setState({highlight:!0})},r.onMouseLeave=function(){r.props.isItemFreezed||r.setState({highlight:!1})},r.toggleMemberRoleMenu=function(){r.setState({showRoleMenu:!r.state.showRoleMenu})},r.onChangeUserRole=function(e){var t="Admin"===e;b.a.sysAdminUpdateGroupMemberRole(r.props.groupID,r.props.member.email,t).then((function(e){r.props.onMemberChanged()})).catch((function(e){var t=E.a.getErrorMsg(e);v.a.danger(t)})),r.setState({highlight:!1})},r.state={highlight:!1,showRoleMenu:!1},r.roles=["Admin","Member"],r}return Object(r.a)(a,[{key:"render",value:function(){var e=this.props.member,t=this.state.highlight;return"Owner"===e.role?null:l.a.createElement("tr",{className:t?"tr-highlight":"",onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave},l.a.createElement("td",null,l.a.createElement("img",{src:e.avatar_url,alt:"member-header",width:"24",className:"avatar"})),l.a.createElement("td",null,l.a.createElement(ue,{email:e.email,name:e.name})),l.a.createElement("td",null,l.a.createElement(Oa.a,{isTextMode:!0,isEditIconShow:t,currentRole:e.role,roles:this.roles,onRoleChanged:this.onChangeUserRole,toggleItemFreezed:this.props.toggleItemFreezed})),this.props.isItemFreezed?l.a.createElement("td",null):l.a.createElement("td",{className:"cursor-pointer text-center",onClick:this.props.showDeleteMemberDialog.bind(this,e)},l.a.createElement("span",{className:"sf2-icon-x3 action-icon ".concat(t?"":"vh"),title:"Delete"})))}}]),a}(l.a.Component),ka=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).onMouseEnter=function(){r.setState({highlight:!0})},r.onMouseLeave=function(){r.setState({highlight:!1})},r.state={highlight:!1},r}return Object(r.a)(a,[{key:"render",value:function(){var e=this.props.repo,t=this.state.highlight,a=E.a.getLibIconUrl(e);return l.a.createElement("tr",{className:t?"tr-highlight":"",onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave},l.a.createElement("td",null,l.a.createElement("img",{src:a,width:"24",alt:Object(d.mb)("icon")})),l.a.createElement("td",null,l.a.createElement("a",{href:d.ic+"sys/libraries/"+e.repo_id+"/"+e.name+"/"},e.name)),l.a.createElement("td",null,E.a.bytesToSize(e.size)," "),l.a.createElement("td",{className:"cursor-pointer text-center",onClick:this.props.showDeleteRepoDialog.bind(this,e)},l.a.createElement("span",{className:"sf2-icon-delete action-icon ".concat(t?"":"vh"),title:"Delete"})))}}]),a}(l.a.Component);w.a.locale(d.zb);var Sa=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).listGroupRepo=function(e){b.a.sysAdminListGroupRepos(e).then((function(e){r.setState({repos:e.data.libraries})})).catch((function(e){var t=E.a.getErrorMsg(e);v.a.danger(t)}))},r.getDepartmentInfo=function(e){b.a.sysAdminGetDepartmentInfo(e,!0).then((function(e){r.setState({groups:e.data.groups,ancestorGroups:e.data.ancestor_groups,groupName:e.data.name})})).catch((function(e){var t=E.a.getErrorMsg(e);v.a.danger(t)}))},r.listMembers=function(e,t,a){b.a.sysAdminListGroupMembers(e,t,a).then((function(e){r.setState({members:e.data.members,membersPageInfo:e.data.page_info})})).catch((function(e){var t=E.a.getErrorMsg(e);r.setState({membersErrorMsg:t})}))},r.getPreviousPageList=function(){r.listMembers(r.props.groupID,r.state.membersPageInfo.current_page-1,r.state.membersPerPage)},r.getNextPageList=function(){r.listMembers(r.props.groupID,r.state.membersPageInfo.current_page+1,r.state.membersPerPage)},r.resetPerPage=function(e){r.setState({membersPerPage:e},(function(){r.listMembers(r.props.groupID,1,e)}))},r.listSubDepartGroups=function(e){b.a.sysAdminGetDepartmentInfo(e,!0).then((function(e){r.setState({groups:e.data.groups})})).catch((function(e){var t=E.a.getErrorMsg(e);v.a.danger(t)}))},r.toggleCancel=function(){r.setState({showDeleteMemberDialog:!1,showDeleteRepoDialog:!1,showDeleteDepartDialog:!1,showSetGroupQuotaDialog:!1})},r.onSubDepartChanged=function(){r.listSubDepartGroups(r.props.groupID)},r.onRepoChanged=function(){r.listGroupRepo(r.props.groupID)},r.onMemberChanged=function(){r.listMembers(r.props.groupID,r.state.membersPageInfo.current_page,r.state.membersPerPage)},r.toggleItemFreezed=function(e){r.setState({isItemFreezed:e})},r.showDeleteMemberDialog=function(e){r.setState({showDeleteMemberDialog:!0,deletedMember:e})},r.showDeleteRepoDialog=function(e){r.setState({showDeleteRepoDialog:!0,deletedRepo:e})},r.toggleAddRepoDialog=function(){r.setState({isShowAddRepoDialog:!r.state.isShowAddRepoDialog})},r.toggleAddMemberDialog=function(){r.setState({isShowAddMemberDialog:!r.state.isShowAddMemberDialog})},r.toggleAddDepartDialog=function(){r.setState({isShowAddDepartDialog:!r.state.isShowAddDepartDialog})},r.showDeleteDepartDialog=function(e){r.setState({showDeleteDepartDialog:!0,subGroupID:e.id,subGroupName:e.name})},r.showSetGroupQuotaDialog=function(e){r.setState({showSetGroupQuotaDialog:!0,subGroupID:e})},r.state={groupName:"",isItemFreezed:!1,ancestorGroups:[],members:[],membersErrorMsg:"",membersPageInfo:{},membersPage:1,membersPerPage:25,deletedMember:{},isShowAddMemberDialog:!1,showDeleteMemberDialog:!1,repos:[],deletedRepo:{},isShowAddRepoDialog:!1,showDeleteRepoDialog:!1,groups:[],subGroupID:"",subGroupName:"",isShowAddDepartDialog:!1,showDeleteDepartDialog:!1,showSetGroupQuotaDialog:!1},r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.groupID;this.listGroupRepo(e),this.getDepartmentInfo(e),this.listMembers(e,this.state.membersPage,this.state.membersPerPage)}},{key:"componentWillReceiveProps",value:function(e){this.props.groupID!==e.groupID&&(this.listGroupRepo(e.groupID),this.getDepartmentInfo(e.groupID),this.listMembers(e.groupID,this.state.membersPage,this.state.membersPerPage))}},{key:"render",value:function(){var e=this,t=this.state,a=t.members,n=t.membersErrorMsg,r=t.repos,i=t.groups,o=this.props.groupID,c="btn btn-secondary operation-item",u=l.a.createElement(s.Fragment,null,o&&l.a.createElement(s.Fragment,null,l.a.createElement("button",{className:c,title:Object(d.mb)("New Sub-department"),onClick:this.toggleAddDepartDialog},Object(d.mb)("New Sub-department")),l.a.createElement("button",{className:c,title:Object(d.mb)("Add Member"),onClick:this.toggleAddMemberDialog},Object(d.mb)("Add Member")),l.a.createElement("button",{className:c,onClick:this.toggleAddRepoDialog,title:Object(d.mb)("New Library")},Object(d.mb)("New Library"))),this.state.isShowAddMemberDialog&&l.a.createElement(pt.a,null,l.a.createElement(ba,{toggle:this.toggleAddMemberDialog,onMemberChanged:this.onMemberChanged,groupID:o})),this.state.isShowAddRepoDialog&&l.a.createElement(pt.a,null,l.a.createElement(Ea,{toggle:this.toggleAddRepoDialog,onRepoChanged:this.onRepoChanged,groupID:o})),this.state.isShowAddDepartDialog&&l.a.createElement(pt.a,null,l.a.createElement(da,{onDepartChanged:this.onSubDepartChanged,parentGroupID:o,toggle:this.toggleAddDepartDialog})));return l.a.createElement(s.Fragment,null,l.a.createElement(x,{children:u}),l.a.createElement("div",{className:"main-panel-center flex-row h-100"},l.a.createElement("div",{className:"cur-view-container o-auto"},l.a.createElement("div",{className:"cur-view-path"},l.a.createElement("div",{className:"fleft"},l.a.createElement("h3",{className:"sf-heading"},o?l.a.createElement(m.a,{to:d.ic+"sys/departments/"},Object(d.mb)("Departments")):l.a.createElement("span",null,Object(d.mb)("Departments")),this.state.ancestorGroups.map((function(e){var t=d.ic+"sys/departments/"+e.id+"/";return l.a.createElement("span",{key:e.id}," / ",l.a.createElement(m.a,{to:t},e.name))})),o&&l.a.createElement("span",null," / ",this.state.groupName)))),l.a.createElement("div",{className:"cur-view-subcontainer org-groups"},l.a.createElement("div",{className:"cur-view-path"},l.a.createElement("div",{className:"fleft"},l.a.createElement("h3",{className:"sf-heading"},Object(d.mb)("Sub-departments")))),l.a.createElement("div",{className:"cur-view-content"},i&&i.length>0?l.a.createElement("table",null,l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",{width:"40%"},Object(d.mb)("Name")),l.a.createElement("th",{width:"25%"},Object(d.mb)("Created At")),l.a.createElement("th",{width:"20%"},Object(d.mb)("Quota")),l.a.createElement("th",{width:"15%"}))),l.a.createElement("tbody",null,i.map((function(t,a){return l.a.createElement(s.Fragment,{key:t.id},l.a.createElement(ga,{group:t,showDeleteDepartDialog:e.showDeleteDepartDialog,showSetGroupQuotaDialog:e.showSetGroupQuotaDialog}))})))):l.a.createElement("p",{className:"no-group"},Object(d.mb)("No sub-departments")))),l.a.createElement("div",{className:"cur-view-subcontainer org-members"},l.a.createElement("div",{className:"cur-view-path"},l.a.createElement("div",{className:"fleft"},l.a.createElement("h3",{className:"sf-heading"},Object(d.mb)("Members")))),l.a.createElement("div",{className:"cur-view-content"},n?l.a.createElement("p",{className:"error text-center"},n):0==a.length?l.a.createElement("p",{className:"no-member"},Object(d.mb)("No members")):l.a.createElement(s.Fragment,null,l.a.createElement("table",null,l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",{width:"5%"}),l.a.createElement("th",{width:"50%"},Object(d.mb)("Name")),l.a.createElement("th",{width:"15%"},Object(d.mb)("Role")),l.a.createElement("th",{width:"30%"}))),l.a.createElement("tbody",null,a.map((function(t,a){return l.a.createElement(s.Fragment,{key:a},l.a.createElement(xa,{member:t,showDeleteMemberDialog:e.showDeleteMemberDialog,isItemFreezed:e.state.isItemFreezed,onMemberChanged:e.onMemberChanged,toggleItemFreezed:e.toggleItemFreezed,groupID:o}))})))),this.state.membersPageInfo&&l.a.createElement(X.a,{gotoPreviousPage:this.getPreviousPageList,gotoNextPage:this.getNextPageList,currentPage:this.state.membersPageInfo.current_page,hasNextPage:this.state.membersPageInfo.has_next_page,curPerPage:this.state.membersPerPage,resetPerPage:this.resetPerPage})))),l.a.createElement("div",{className:"cur-view-subcontainer org-libriries"},l.a.createElement("div",{className:"cur-view-path"},l.a.createElement("div",{className:"fleft"},l.a.createElement("h3",{className:"sf-heading"},Object(d.mb)("Libraries")))),r.length>0?l.a.createElement("div",{className:"cur-view-content"},l.a.createElement("table",null,l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",{width:"5%"}),l.a.createElement("th",{width:"50%"},Object(d.mb)("Name")),l.a.createElement("th",{width:"30%"},Object(d.mb)("Size")),l.a.createElement("th",{width:"15%"}))),l.a.createElement("tbody",null,r.map((function(t,a){return l.a.createElement(s.Fragment,{key:a},l.a.createElement(ka,{repo:t,showDeleteRepoDialog:e.showDeleteRepoDialog}))}))))):l.a.createElement("p",{className:"no-libraty"},Object(d.mb)("No libraries")))),this.state.showDeleteMemberDialog&&l.a.createElement(pt.a,null,l.a.createElement(va,{toggle:this.toggleCancel,onMemberChanged:this.onMemberChanged,member:this.state.deletedMember,groupID:o})),this.state.showDeleteRepoDialog&&l.a.createElement(pt.a,null,l.a.createElement(ya,{toggle:this.toggleCancel,onRepoChanged:this.onRepoChanged,repo:this.state.deletedRepo,groupID:o})),this.state.showDeleteDepartDialog&&l.a.createElement(pt.a,null,l.a.createElement(pa,{toggle:this.toggleCancel,groupID:this.state.subGroupID,groupName:this.state.subGroupName,onDepartChanged:this.onSubDepartChanged})),this.state.showSetGroupQuotaDialog&&l.a.createElement(pt.a,null,l.a.createElement(ha,{toggle:this.toggleCancel,groupID:this.state.subGroupID,onDepartChanged:this.onSubDepartChanged}))))}}]),a}(l.a.Component),wa=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).navItems=[{name:"shareLinks",urlPart:"share-links",text:Object(d.mb)("Share Links")},{name:"uploadLinks",urlPart:"upload-links",text:Object(d.mb)("Upload Links")}],r}return Object(r.a)(a,[{key:"render",value:function(){var e=this.props.currentItem;return l.a.createElement("div",{className:"cur-view-path tab-nav-container"},l.a.createElement("ul",{className:"nav"},this.navItems.map((function(t,a){return l.a.createElement("li",{className:"nav-item",key:a},l.a.createElement(m.a,{to:"".concat(d.ic,"sys/").concat(t.urlPart,"/"),className:"nav-link".concat(e==t.name?" active":"")},t.text))}))))}}]),a}(l.a.Component),Da=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).getPreviousPage=function(){r.props.getShareLinksByPage(r.props.currentPage-1)},r.getNextPage=function(){r.props.getShareLinksByPage(r.props.currentPage+1)},r.sortByTime=function(e){e.preventDefault(),r.props.sortItems("ctime")},r.sortByCount=function(e){e.preventDefault(),r.props.sortItems("view_cnt")},r}return Object(r.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.loading,n=t.errorMsg,r=t.items,i=t.perPage,o=t.currentPage,c=t.hasNextPage,u=t.sortBy,m=t.sortOrder;if(a)return l.a.createElement(y.a,null);if(n)return l.a.createElement("p",{className:"error text-center"},n);var p=l.a.createElement(ne.a,null,l.a.createElement("h2",null,Object(d.mb)("No share links"))),h=l.a.createElement("span",{className:"fas fa-sort"}),g=l.a.createElement("span",{className:"fas ".concat("asc"==m?"fa-caret-up":"fa-caret-down")}),f=l.a.createElement(s.Fragment,null,l.a.createElement("table",{className:"table-hover"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",{width:"18%"},Object(d.mb)("Name")),l.a.createElement("th",{width:"18%"},Object(d.mb)("Token")),l.a.createElement("th",{width:"18%"},Object(d.mb)("Owner")),l.a.createElement("th",{width:"15%"},l.a.createElement("a",{className:"d-inline-block table-sort-op",href:"#",onClick:this.sortByTime},Object(d.mb)("Created At")," ","ctime"==u?g:h)),l.a.createElement("th",{width:"10%"},l.a.createElement("a",{className:"d-inline-block table-sort-op",href:"#",onClick:this.sortByCount},Object(d.mb)("Count")," ","view_cnt"==u?g:h)),l.a.createElement("th",{width:"11%"},Object(d.mb)("Expiration")),l.a.createElement("th",{width:"10%"}))),r&&l.a.createElement("tbody",null,r.map((function(t,a){return l.a.createElement(ja,{key:a,item:t,deleteShareLink:e.props.deleteShareLink})})))),l.a.createElement(X.a,{gotoPreviousPage:this.getPreviousPage,gotoNextPage:this.getNextPage,currentPage:o,hasNextPage:c,curPerPage:i,resetPerPage:this.props.resetPerPage}));return r.length?f:p}}]),a}(s.Component),ja=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).handleMouseOver=function(){r.setState({isOpIconShown:!0})},r.handleMouseOut=function(){r.setState({isOpIconShown:!1})},r.deleteShareLink=function(){r.props.deleteShareLink(r.props.item.token)},r.renderExpiration=function(){var e=r.props.item;if(!e.expire_date)return"--";var t=w()(e.expire_date).format("YYYY-MM-DD"),a=w()(e.expire_date).format("YYYY-MM-DD HH:mm:ss");return l.a.createElement("span",{className:e.is_expired?"error":"",title:a},t)},r.state={isOpIconShown:!1},r}return Object(r.a)(a,[{key:"render",value:function(){var e=this.state.isOpIconShown,t=this.props.item,a="action-icon sf2-icon-delete ".concat(e?"":"invisible");return l.a.createElement("tr",{onMouseOver:this.handleMouseOver,onMouseOut:this.handleMouseOut},l.a.createElement("td",null,t.obj_name),l.a.createElement("td",null,t.token),l.a.createElement("td",null,l.a.createElement(ue,{email:t.creator_email,name:t.creator_name})),l.a.createElement("td",null,w()(t.ctime).fromNow()),l.a.createElement("td",null,t.view_cnt),l.a.createElement("td",null,this.renderExpiration()),l.a.createElement("td",null,l.a.createElement("a",{href:"#",className:a,title:Object(d.mb)("Remove"),onClick:this.deleteShareLink})))}}]),a}(s.Component),Ca=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).getShareLinksByPage=function(e){var t=r.state,a=t.perPage,n=t.sortBy,i=t.sortOrder;b.a.sysAdminListShareLinks(e,a,n,i).then((function(t){r.setState({shareLinkList:t.data.share_link_list,loading:!1,currentPage:e,hasNextPage:E.a.hasNextPage(e,a,t.data.count)})})).catch((function(e){r.setState({loading:!1,errorMsg:E.a.getErrorMsg(e,!0)})}))},r.sortItems=function(e){r.setState({currentPage:1,sortBy:e,sortOrder:"asc"==r.state.sortOrder?"desc":"asc"},(function(){var e=new URL(location.href),t=new URLSearchParams(e.search),a=r.state,n=a.currentPage,i=a.sortBy,o=a.sortOrder;t.set("page",n),t.set("order_by",i),t.set("direction",o),e.search=t.toString(),Object(m.c)(e.toString()),r.getShareLinksByPage(n)}))},r.deleteShareLink=function(e){b.a.sysAdminDeleteShareLink(e).then((function(t){var a=r.state.shareLinkList.filter((function(t){return t.token!=e}));r.setState({shareLinkList:a})})).catch((function(e){var t=E.a.getErrorMsg(e);v.a.danger(t)}))},r.resetPerPage=function(e){r.setState({perPage:e},(function(){return r.getShareLinksByPage(r.initPage)}))},r.state={loading:!0,errorMsg:"",shareLinkList:[],perPage:25,currentPage:1,hasNextPage:!1,sortBy:"",sortOrder:"asc"},r.initPage=1,r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=new URL(window.location).searchParams,a=this.state,n=a.currentPage,r=a.perPage,i=a.sortBy,o=a.sortOrder;this.setState({perPage:parseInt(t.get("per_page")||r),currentPage:parseInt(t.get("page")||n),sortBy:t.get("order_by")||i,sortOrder:t.get("direction")||o},(function(){e.getShareLinksByPage(e.state.currentPage)}))}},{key:"render",value:function(){var e=this.state,t=e.shareLinkList,a=e.currentPage,n=e.perPage,r=e.hasNextPage;return l.a.createElement(s.Fragment,null,l.a.createElement(x,null),l.a.createElement("div",{className:"main-panel-center flex-row"},l.a.createElement("div",{className:"cur-view-container"},l.a.createElement(wa,{currentItem:"shareLinks"}),l.a.createElement("div",{className:"cur-view-content"},l.a.createElement(Da,{loading:this.state.loading,errorMsg:this.state.errorMsg,items:t,currentPage:a,perPage:n,hasNextPage:r,getShareLinksByPage:this.getShareLinksByPage,resetPerPage:this.resetPerPage,sortBy:this.state.sortBy,sortOrder:this.state.sortOrder,sortItems:this.sortItems,deleteShareLink:this.deleteShareLink})))))}}]),a}(s.Component),Na=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).getPreviousPage=function(){r.props.getUploadLinksByPage(r.props.currentPage-1)},r.getNextPage=function(){r.props.getUploadLinksByPage(r.props.currentPage+1)},r}return Object(r.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.loading,n=t.errorMsg,r=t.items,i=t.perPage,o=t.currentPage,c=t.hasNextPage;if(a)return l.a.createElement(y.a,null);if(n)return l.a.createElement("p",{className:"error text-center"},n);var u=l.a.createElement(ne.a,null,l.a.createElement("h2",null,Object(d.mb)("No upload links"))),m=l.a.createElement(s.Fragment,null,l.a.createElement("table",{className:"table-hover"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",{width:"18%"},Object(d.mb)("Name")),l.a.createElement("th",{width:"18%"},Object(d.mb)("Token")),l.a.createElement("th",{width:"18%"},Object(d.mb)("Owner")),l.a.createElement("th",{width:"15%"},Object(d.mb)("Created At")),l.a.createElement("th",{width:"10%"},Object(d.mb)("Count")),l.a.createElement("th",{width:"11%"},Object(d.mb)("Expiration")),l.a.createElement("th",{width:"10%"}))),r&&l.a.createElement("tbody",null,r.map((function(t,a){return l.a.createElement(Pa,{key:a,item:t,deleteUploadLink:e.props.deleteUploadLink})})))),l.a.createElement(X.a,{gotoPreviousPage:this.getPreviousPage,gotoNextPage:this.getNextPage,currentPage:o,hasNextPage:c,curPerPage:i,resetPerPage:this.props.resetPerPage}));return r.length?m:u}}]),a}(s.Component),Pa=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).handleMouseOver=function(){r.setState({isOpIconShown:!0})},r.handleMouseOut=function(){r.setState({isOpIconShown:!1})},r.deleteUploadLink=function(){r.props.deleteUploadLink(r.props.item.token)},r.renderExpiration=function(){var e=r.props.item;if(!e.expire_date)return"--";var t=w()(e.expire_date).format("YYYY-MM-DD"),a=w()(e.expire_date).format("YYYY-MM-DD HH:mm:ss");return l.a.createElement("span",{className:e.is_expired?"error":"",title:a},t)},r.state={isOpIconShown:!1},r}return Object(r.a)(a,[{key:"render",value:function(){var e=this.state.isOpIconShown,t=this.props.item,a="action-icon sf2-icon-delete ".concat(e?"":"invisible");return l.a.createElement(s.Fragment,null,l.a.createElement("tr",{onMouseOver:this.handleMouseOver,onMouseOut:this.handleMouseOut},l.a.createElement("td",null,t.path),l.a.createElement("td",null,t.token),l.a.createElement("td",null,l.a.createElement(ue,{email:t.creator_email,name:t.creator_name})),l.a.createElement("td",null,w()(t.ctime).fromNow()),l.a.createElement("td",null,t.view_cnt),l.a.createElement("td",null,this.renderExpiration()),l.a.createElement("td",null,l.a.createElement("a",{href:"#",className:a,title:Object(d.mb)("Remove"),onClick:this.deleteUploadLink}))))}}]),a}(s.Component),_a=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).getUploadLinksByPage=function(e){var t=r.state.perPage;b.a.sysAdminListAllUploadLinks(e,t).then((function(a){r.setState({uploadLinkList:a.data.upload_link_list,loading:!1,currentPage:e,hasNextPage:E.a.hasNextPage(e,t,a.data.count)})})).catch((function(e){r.setState({loading:!1,errorMsg:E.a.getErrorMsg(e,!0)})}))},r.deleteUploadLink=function(e){b.a.sysAdminDeleteUploadLink(e).then((function(t){var a=r.state.uploadLinkList.filter((function(t){return t.token!=e}));r.setState({uploadLinkList:a})})).catch((function(e){var t=E.a.getErrorMsg(e);v.a.danger(t)}))},r.resetPerPage=function(e){r.setState({perPage:e},(function(){return r.getUploadLinksByPage(r.initPage)}))},r.state={loading:!0,errorMsg:"",uploadLinkList:[],perPage:25,currentPage:1,hasNextPage:!1},r.initPage=1,r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=new URL(window.location).searchParams,a=this.state,n=a.currentPage,r=a.perPage;this.setState({perPage:parseInt(t.get("per_page")||r),currentPage:parseInt(t.get("page")||n)},(function(){e.getUploadLinksByPage(e.state.currentPage)}))}},{key:"render",value:function(){var e=this.state,t=e.uploadLinkList,a=e.currentPage,n=e.perPage,r=e.hasNextPage;return l.a.createElement(s.Fragment,null,l.a.createElement(x,null),l.a.createElement("div",{className:"main-panel-center flex-row"},l.a.createElement("div",{className:"cur-view-container"},l.a.createElement(wa,{currentItem:"uploadLinks"}),l.a.createElement("div",{className:"cur-view-content"},l.a.createElement(Na,{loading:this.state.loading,errorMsg:this.state.errorMsg,items:t,currentPage:a,perPage:n,hasNextPage:r,getUploadLinksByPage:this.getUploadLinksByPage,resetPerPage:this.resetPerPage,deleteUploadLink:this.deleteUploadLink})))))}}]),a}(s.Component),Ma=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).checkSubmitBtnActive=function(){var e=r.state,t=e.name,a=e.email,n=e.password,i=e.passwordAgain,o=!0;o=""!=t.trim()&&""!=a.trim()&&""!=n.trim()&&""!=i.trim(),r.setState({isSubmitBtnActive:o})},r.toggle=function(){r.props.toggleDialog()},r.inputPassword=function(e){var t=e.target.value;r.setState({password:t},r.checkSubmitBtnActive)},r.inputPasswordAgain=function(e){var t=e.target.value;r.setState({passwordAgain:t},r.checkSubmitBtnActive)},r.inputEmail=function(e){var t=e.target.value;r.setState({email:t},r.checkSubmitBtnActive)},r.inputName=function(e){var t=e.target.value;r.setState({name:t},r.checkSubmitBtnActive)},r.handleSubmit=function(){var e=r.state,t=e.name,a=e.email,n=e.password;if(n==e.passwordAgain){var i={orgName:t.trim(),ownerEmail:a.trim(),password:n.trim()};r.props.addOrg(i),r.toggle()}else r.setState({errorMsg:Object(d.mb)("Passwords do not match.")})},r.state={name:"",email:"",password:"",passwordAgain:"",errorMsg:"",isSubmitBtnActive:!1},r}return Object(r.a)(a,[{key:"render",value:function(){var e=this.state,t=e.errorMsg,a=e.password,n=e.passwordAgain,r=e.email,i=e.name,o=e.isSubmitBtnActive;return l.a.createElement(f.x,{isOpen:!0,toggle:this.toggle},l.a.createElement(f.A,{toggle:this.toggle},Object(d.mb)("Add Organization")),l.a.createElement(f.y,null,l.a.createElement(f.p,{autoComplete:"off"},l.a.createElement(f.q,null,l.a.createElement(f.w,null,Object(d.mb)("Name")),l.a.createElement(f.s,{value:i,onChange:this.inputName})),l.a.createElement(f.q,null,l.a.createElement(f.w,null,Object(d.mb)("Owner"),l.a.createElement("span",{className:"small text-secondary ml-1 fas fa-question-circle",title:Object(d.mb)("Owner can use admin panel in an organization, must be a new account.")})),l.a.createElement(f.s,{value:r,onChange:this.inputEmail})),l.a.createElement(f.q,null,l.a.createElement(f.w,null,Object(d.mb)("Password")),l.a.createElement(f.s,{type:"password",value:a,onChange:this.inputPassword})),l.a.createElement(f.q,null,l.a.createElement(f.w,null,Object(d.mb)("Password again")),l.a.createElement(f.s,{type:"password",value:n,onChange:this.inputPasswordAgain}))),t&&l.a.createElement(f.a,{color:"danger"},t)),l.a.createElement(f.z,null,l.a.createElement(f.c,{color:"secondary",onClick:this.toggle},Object(d.mb)("Cancel")),l.a.createElement(f.c,{color:"primary",onClick:this.handleSubmit,disabled:!o},Object(d.mb)("Submit"))))}}]),a}(l.a.Component),Ia=window.sysadmin.pageOptions.availableRoles,Ta=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).getPreviousPage=function(){r.props.getListByPage(r.props.currentPage-1)},r.getNextPage=function(){r.props.getListByPage(r.props.currentPage+1)},r}return Object(r.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.loading,n=t.errorMsg,r=t.items;if(a)return l.a.createElement(y.a,null);if(n)return l.a.createElement("p",{className:"error text-center mt-4"},n);var i=l.a.createElement(ne.a,null,l.a.createElement("h2",null,Object(d.mb)("No organizations"))),o=l.a.createElement(s.Fragment,null,l.a.createElement("table",{className:"table-hover"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",{width:"20%"},Object(d.mb)("Name")),l.a.createElement("th",{width:"20%"},Object(d.mb)("Creator")),l.a.createElement("th",{width:"20%"},Object(d.mb)("Role")),l.a.createElement("th",{width:"15%"},Object(d.mb)("Space Used")),l.a.createElement("th",{width:"20%"},Object(d.mb)("Created At")),l.a.createElement("th",{width:"5%"}))),l.a.createElement("tbody",null,r.map((function(t,a){return l.a.createElement(Aa,{key:a,item:t,updateRole:e.props.updateRole,deleteOrg:e.props.deleteOrg})})))),this.props.currentPage&&l.a.createElement(X.a,{currentPage:this.props.currentPage,hasNextPage:this.props.hasNextPage,curPerPage:this.props.curPerPage,resetPerPage:this.props.resetPerPage,gotoPreviousPage:this.getPreviousPage,gotoNextPage:this.getNextPage}));return r.length?o:i}}]),a}(s.Component),Aa=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).handleMouseEnter=function(){r.setState({isOpIconShown:!0})},r.handleMouseLeave=function(){r.setState({isOpIconShown:!1})},r.toggleDeleteDialog=function(e){e&&e.preventDefault(),r.setState({isDeleteDialogOpen:!r.state.isDeleteDialogOpen},(function(){r.state.isDeleteDialogOpen&&b.a.sysAdminGetOrg(r.props.item.org_id).then((function(e){var t='<span class="op-target">'+E.a.HTMLescape(e.data.org_name)+"</span>",a='<span class="op-target">'+E.a.HTMLescape(e.data.users_count)+"</span>",n='<span class="op-target">'+E.a.HTMLescape(e.data.repos_count)+"</span>",i=Object(d.mb)("Are you sure you want to delete {placeholder} ?").replace("{placeholder}",t)+"<br/>"+Object(d.mb)("{userCount} user(s) and {repoCount} libraries of this organization will also be deleted.").replace("{userCount}",a).replace("{repoCount}",n);r.setState({deleteDialogMsg:i})})).catch((function(e){var t=E.a.getErrorMsg(e);v.a.danger(t)}))}))},r.updateRole=function(e){r.props.updateRole(r.props.item.org_id,e)},r.deleteOrg=function(){v.a.notify(Object(d.mb)("It may take some time, please wait.")),r.props.deleteOrg(r.props.item.org_id)},r.state={isOpIconShown:!1,isDeleteDialogOpen:!1,deleteDialogMsg:""},r}return Object(r.a)(a,[{key:"render",value:function(){var e=this.props.item,t=this.state,a=t.isOpIconShown,n=t.isDeleteDialogOpen,r=t.deleteDialogMsg;return l.a.createElement(s.Fragment,null,l.a.createElement("tr",{onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave},l.a.createElement("td",null,l.a.createElement(m.a,{to:"".concat(d.ic,"sys/organizations/").concat(e.org_id,"/info/")},e.org_name)),l.a.createElement("td",null,l.a.createElement(ue,{email:e.creator_email,name:e.creator_name})),l.a.createElement("td",null,l.a.createElement(ve,{isTextMode:!0,isEditIconShow:a,currentRole:e.role,roleOptions:Ia,onRoleChanged:this.updateRole})),l.a.createElement("td",null,"".concat(E.a.bytesToSize(e.quota_usage)," / ").concat(e.quota>0?E.a.bytesToSize(e.quota):"--")),l.a.createElement("td",null,w()(e.ctime).format("YYYY-MM-DD HH:mm:ss")),l.a.createElement("td",null,l.a.createElement("a",{href:"#",className:"action-icon sf2-icon-delete ".concat(a?"":"invisible"),title:Object(d.mb)("Delete"),onClick:this.toggleDeleteDialog}))),n&&l.a.createElement(xe,{title:Object(d.mb)("Delete Organization"),message:r,executeOperation:this.deleteOrg,confirmBtnText:Object(d.mb)("Delete"),toggleDialog:this.toggleDeleteDialog}))}}]),a}(s.Component),La=Ta,Ra=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).getItemsByPage=function(e){var t=r.state.perPage;b.a.sysAdminListOrgs(e,t).then((function(a){r.setState({loading:!1,orgList:a.data.organizations,currentPage:e,hasNextPage:E.a.hasNextPage(e,t,a.data.total_count)})})).catch((function(e){r.setState({loading:!1,errorMsg:E.a.getErrorMsg(e,!0)})}))},r.resetPerPage=function(e){r.setState({perPage:e},(function(){r.getItemsByPage(1)}))},r.toggleAddOrgDialog=function(){r.setState({isAddOrgDialogOpen:!r.state.isAddOrgDialogOpen})},r.updateRole=function(e,t){var a={};a.role=t,b.a.sysAdminUpdateOrg(e,a).then((function(a){var n=r.state.orgList.map((function(a){return a.org_id==e&&(a.role=t),a}));r.setState({orgList:n}),v.a.success(Object(d.mb)("Edit succeeded"))})).catch((function(e){var t=E.a.getErrorMsg(e);v.a.danger(t)}))},r.addOrg=function(e){var t=e.orgName,a=e.ownerEmail,n=e.password;b.a.sysAdminAddOrg(t,a,n).then((function(e){var t=r.state.orgList;t.unshift(e.data),r.setState({orgList:t})})).catch((function(e){var t=E.a.getErrorMsg(e);v.a.danger(t)}))},r.deleteOrg=function(e){b.a.sysAdminDeleteOrg(e).then((function(t){var a=r.state.orgList.filter((function(t){return t.org_id!=e}));r.setState({orgList:a}),v.a.success(Object(d.mb)("Successfully deleted 1 item."))})).catch((function(e){var t=E.a.getErrorMsg(e);v.a.danger(t)}))},r.getSearch=function(){return l.a.createElement(we,{placeholder:Object(d.mb)("Search organizations"),submit:r.searchItems})},r.searchItems=function(e){Object(m.c)("".concat(d.ic,"sys/search-organizations/?query=").concat(encodeURIComponent(e)))},r.state={loading:!0,errorMsg:"",orgList:[],currentPage:1,perPage:25,hasNextPage:!1,isAddOrgDialogOpen:!1},r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=new URL(window.location).searchParams,a=this.state,n=a.currentPage,r=a.perPage;this.setState({perPage:parseInt(t.get("per_page")||r),currentPage:parseInt(t.get("page")||n)},(function(){e.getItemsByPage(e.state.currentPage)}))}},{key:"render",value:function(){var e=this.state.isAddOrgDialogOpen;return l.a.createElement(s.Fragment,null,l.a.createElement(x,{search:this.getSearch()},l.a.createElement(f.c,{className:"btn btn-secondary operation-item",onClick:this.toggleAddOrgDialog},Object(d.mb)("Add Organization"))),l.a.createElement("div",{className:"main-panel-center flex-row"},l.a.createElement("div",{className:"cur-view-container"},l.a.createElement("div",{className:"cur-view-path"},l.a.createElement("h3",{className:"sf-heading"},Object(d.mb)("Organizations"))),l.a.createElement("div",{className:"cur-view-content"},l.a.createElement(La,{loading:this.state.loading,errorMsg:this.state.errorMsg,items:this.state.orgList,currentPage:this.state.currentPage,hasNextPage:this.state.hasNextPage,curPerPage:this.state.perPage,resetPerPage:this.resetPerPage,getListByPage:this.getItemsByPage,updateRole:this.updateRole,deleteOrg:this.deleteOrg})))),e&&l.a.createElement(Ma,{addOrg:this.addOrg,toggleDialog:this.toggleAddOrgDialog}))}}]),a}(s.Component),Fa=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).getItems=function(){b.a.sysAdminSearchOrgs(r.state.query.trim()).then((function(e){r.setState({loading:!1,orgList:e.data.organization_list})})).catch((function(e){r.setState({loading:!1,errorMsg:E.a.getErrorMsg(e,!0)})}))},r.updateRole=function(e,t){var a={};a.role=t,b.a.sysAdminUpdateOrg(e,a).then((function(a){var n=r.state.orgList.map((function(a){return a.org_id==e&&(a.role=t),a}));r.setState({orgList:n}),v.a.success(Object(d.mb)("Edit succeeded"))})).catch((function(e){var t=E.a.getErrorMsg(e);v.a.danger(t)}))},r.deleteOrg=function(e){b.a.sysAdminDeleteOrg(e).then((function(t){var a=r.state.orgList.filter((function(t){return t.org_id!=e}));r.setState({orgList:a}),v.a.success(Object(d.mb)("Successfully deleted 1 item."))})).catch((function(e){var t=E.a.getErrorMsg(e);v.a.danger(t)}))},r.handleInputChange=function(e){r.setState({query:e.target.value},r.checkSubmitBtnActive)},r.checkSubmitBtnActive=function(){var e=r.state.query;r.setState({isSubmitBtnActive:e.trim()})},r.state={query:"",isSubmitBtnActive:!1,loading:!0,errorMsg:"",orgList:[]},r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=new URL(document.location).searchParams;this.setState({query:e.get("query")||""},this.getItems)}},{key:"render",value:function(){var e=this.state,t=e.query,a=e.isSubmitBtnActive;return l.a.createElement(s.Fragment,null,l.a.createElement(x,null),l.a.createElement("div",{className:"main-panel-center flex-row"},l.a.createElement("div",{className:"cur-view-container"},l.a.createElement("div",{className:"cur-view-path"},l.a.createElement("h3",{className:"sf-heading"},Object(d.mb)("Organizations"))),l.a.createElement("div",{className:"cur-view-content"},l.a.createElement("div",{className:"mt-4 mb-6"},l.a.createElement("h4",{className:"border-bottom font-weight-normal mb-2 pb-1"},Object(d.mb)("Search Organizations")),l.a.createElement("p",{className:"text-secondary small"},Object(d.mb)("Tip: you can search by keyword in name.")),l.a.createElement(f.p,null,l.a.createElement(f.q,{row:!0},l.a.createElement(f.w,{for:"name",sm:1},Object(d.mb)("Name")),l.a.createElement(f.i,{sm:5},l.a.createElement(f.s,{type:"text",name:"query",id:"name",value:t,onChange:this.handleInputChange}))),l.a.createElement(f.q,{row:!0},l.a.createElement(f.i,{sm:{size:5,offset:1}},l.a.createElement("button",{className:"btn btn-outline-primary",disabled:!a,onClick:this.getItems},Object(d.mb)("Submit")))))),l.a.createElement("div",{className:"mt-4 mb-6"},l.a.createElement("h4",{className:"border-bottom font-weight-normal mb-2 pb-1"},Object(d.mb)("Result")),l.a.createElement(La,{loading:this.state.loading,errorMsg:this.state.errorMsg,items:this.state.orgList,updateRole:this.updateRole,deleteOrg:this.deleteOrg}))))))}}]),a}(s.Component),Ua=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).toggle=function(){r.props.toggle()},r.handleInputChange=function(e){var t=e.target.value;r.setState({name:t,isSubmitBtnActive:""!=t.trim()})},r.handleKeyPress=function(e){"Enter"==e.key&&(r.handleSubmit(),e.preventDefault())},r.handleSubmit=function(){r.props.updateName(r.state.name.trim()),r.toggle()},r.state={name:r.props.name,isSubmitBtnActive:!1},r}return Object(r.a)(a,[{key:"render",value:function(){var e=this.state,t=e.name,a=e.isSubmitBtnActive;return l.a.createElement(f.x,{isOpen:!0,toggle:this.toggle},l.a.createElement(f.A,{toggle:this.toggle},Object(d.mb)("Set Name")),l.a.createElement(f.y,null,l.a.createElement(f.p,null,l.a.createElement(f.q,null,l.a.createElement(f.s,{type:"text",value:t,onKeyPress:this.handleKeyPress,onChange:this.handleInputChange})))),l.a.createElement(f.z,null,l.a.createElement(f.c,{color:"secondary",onClick:this.toggle},Object(d.mb)("Cancel")),l.a.createElement(f.c,{color:"primary",onClick:this.handleSubmit,disabled:!a},Object(d.mb)("Submit"))))}}]),a}(l.a.Component),Ba=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).toggle=function(){r.props.toggle()},r.handleInputChange=function(e){var t=e.target.value;r.setState({value:t,isSubmitBtnActive:""!=t.trim()})},r.handleKeyPress=function(e){"Enter"==e.key&&(r.handleSubmit(),e.preventDefault())},r.handleSubmit=function(){r.props.updateValue(r.state.value.trim()),r.toggle()},r.state={value:r.props.value,isSubmitBtnActive:!1},r}return Object(r.a)(a,[{key:"render",value:function(){var e=this.state,t=e.value,a=e.isSubmitBtnActive;return l.a.createElement(f.x,{isOpen:!0,toggle:this.toggle},l.a.createElement(f.A,{toggle:this.toggle},Object(d.mb)("Set max number of members")),l.a.createElement(f.y,null,l.a.createElement(f.p,null,l.a.createElement(f.q,null,l.a.createElement(f.s,{type:"text",className:"form-control",value:t,onKeyPress:this.handleKeyPress,onChange:this.handleInputChange})))),l.a.createElement(f.z,null,l.a.createElement(f.c,{color:"secondary",onClick:this.toggle},Object(d.mb)("Cancel")),l.a.createElement(f.c,{color:"primary",onClick:this.handleSubmit,disabled:!a},Object(d.mb)("Submit"))))}}]),a}(l.a.Component),za=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).navItems=[{name:"info",urlPart:"info",text:Object(d.mb)("Info")},{name:"users",urlPart:"users",text:Object(d.mb)("Members")},{name:"groups",urlPart:"groups",text:Object(d.mb)("Groups")},{name:"repos",urlPart:"libraries",text:Object(d.mb)("Libraries")}],r}return Object(r.a)(a,[{key:"render",value:function(){var e=this.props,t=e.currentItem,a=e.orgID,n=e.orgName;return l.a.createElement("div",null,l.a.createElement("div",{className:"cur-view-path"},l.a.createElement("h3",{className:"sf-heading"},l.a.createElement(m.a,{to:"".concat(d.ic,"sys/organizations/")},Object(d.mb)("Organizations"))," / ",n)),l.a.createElement("ul",{className:"nav border-bottom mx-4"},this.navItems.map((function(e,n){return l.a.createElement("li",{className:"nav-item mr-2",key:n},l.a.createElement(m.a,{to:"".concat(d.ic,"sys/organizations/").concat(a,"/").concat(e.urlPart,"/"),className:"nav-link ".concat(t==e.name?" active":"")},e.text))}))))}}]),a}(l.a.Component),Ha=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).toggleSetQuotaDialog=function(){r.setState({isSetQuotaDialogOpen:!r.state.isSetQuotaDialogOpen})},r.toggleSetNameDialog=function(){r.setState({isSetNameDialogOpen:!r.state.isSetNameDialogOpen})},r.toggleSetMaxUserNumberDialog=function(){r.setState({isSetMaxUserNumberDialogOpen:!r.state.isSetMaxUserNumberDialogOpen})},r.showEditIcon=function(e){return l.a.createElement("span",{title:Object(d.mb)("Edit"),className:"fa fa-pencil-alt attr-action-icon",onClick:e})},r.state={isSetQuotaDialogOpen:!1,isSetNameDialogOpen:!1,isSetMaxUserNumberDialogOpen:!1},r}return Object(r.a)(a,[{key:"render",value:function(){var e=this.props,t=e.loading,a=e.errorMsg;e.orgInfo;if(t)return l.a.createElement(y.a,null);if(a)return l.a.createElement("p",{className:"error text-center"},a);var n=this.props.orgInfo,r=n.org_name,i=n.users_count,o=n.max_user_number,c=n.groups_count,u=n.quota,m=n.quota_usage,p=this.state,h=p.isSetQuotaDialogOpen,g=p.isSetNameDialogOpen,f=p.isSetMaxUserNumberDialogOpen;return l.a.createElement(s.Fragment,null,l.a.createElement("dl",{className:"m-0"},l.a.createElement("dt",{className:"info-item-heading"},Object(d.mb)("Name")),l.a.createElement("dd",{className:"info-item-content"},r,this.showEditIcon(this.toggleSetNameDialog)),l.a.createElement("dt",{className:"info-item-heading"},Object(d.mb)("Number of members")),l.a.createElement("dd",{className:"info-item-content"},i),o&&l.a.createElement(s.Fragment,null,l.a.createElement("dt",{className:"info-item-heading"},Object(d.mb)("Max number of members")),l.a.createElement("dd",{className:"info-item-content"},o,this.showEditIcon(this.toggleSetMaxUserNumberDialog))),l.a.createElement("dt",{className:"info-item-heading"},Object(d.mb)("Number of groups")),l.a.createElement("dd",{className:"info-item-content"},c),l.a.createElement("dt",{className:"info-item-heading"},Object(d.mb)("Space Used")),l.a.createElement("dd",{className:"info-item-content"},"".concat(E.a.bytesToSize(m)," / ").concat(u>0?E.a.bytesToSize(u):"--"),this.showEditIcon(this.toggleSetQuotaDialog))),h&&l.a.createElement(ge,{updateQuota:this.props.updateQuota,toggle:this.toggleSetQuotaDialog}),g&&l.a.createElement(Ua,{name:r,updateName:this.props.updateName,toggle:this.toggleSetNameDialog}),f&&l.a.createElement(Ba,{value:o,updateValue:this.props.updateMaxUserNumber,toggle:this.toggleSetMaxUserNumberDialog}))}}]),a}(s.Component),qa=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).updateQuota=function(e){var t={quota:e};b.a.sysAdminUpdateOrg(r.props.orgID,t).then((function(e){var t=Object.assign(r.state.orgInfo,{quota:e.data.quota});r.setState({orgInfo:t}),v.a.success(Object(d.mb)("Successfully set quota."))})).catch((function(e){var t=E.a.getErrorMsg(e);v.a.danger(t)}))},r.updateName=function(e){var t={orgName:e};b.a.sysAdminUpdateOrg(r.props.orgID,t).then((function(e){var t=Object.assign(r.state.orgInfo,{org_name:e.data.org_name});r.setState({orgInfo:t}),v.a.success(Object(d.mb)("Successfully set name."))})).catch((function(e){var t=E.a.getErrorMsg(e);v.a.danger(t)}))},r.updateMaxUserNumber=function(e){var t={maxUserNumber:e};b.a.sysAdminUpdateOrg(r.props.orgID,t).then((function(e){var t=Object.assign(r.state.orgInfo,{max_user_number:e.data.max_user_number});r.setState({orgInfo:t}),v.a.success(Object(d.mb)("Successfully set max number of members."))})).catch((function(e){var t=E.a.getErrorMsg(e);v.a.danger(t)}))},r.state={loading:!0,errorMsg:"",orgInfo:{}},r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this;b.a.sysAdminGetOrg(this.props.orgID).then((function(t){e.setState({loading:!1,orgInfo:t.data})})).catch((function(t){e.setState({loading:!1,errorMsg:E.a.getErrorMsg(t,!0)})}))}},{key:"render",value:function(){var e=this.state.orgInfo;return l.a.createElement(s.Fragment,null,l.a.createElement(x,null),l.a.createElement("div",{className:"main-panel-center flex-row"},l.a.createElement("div",{className:"cur-view-container"},l.a.createElement(za,{currentItem:"info",orgID:this.props.orgID,orgName:e.org_name}),l.a.createElement("div",{className:"cur-view-content"},l.a.createElement(Ha,{orgID:this.props.orgID,loading:this.state.loading,errorMsg:this.state.errorMsg,orgInfo:this.state.orgInfo,updateQuota:this.updateQuota,updateName:this.updateName,updateMaxUserNumber:this.updateMaxUserNumber})))))}}]),a}(s.Component),Wa=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).onFreezedItem=function(){r.setState({isItemFreezed:!0})},r.onUnfreezedItem=function(){r.setState({isItemFreezed:!1})},r.state={isItemFreezed:!1},r}return Object(r.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.loading,n=t.errorMsg,r=t.items;if(a)return l.a.createElement(y.a,null);if(n)return l.a.createElement("p",{className:"error text-center mt-4"},n);var i=l.a.createElement(ne.a,null,l.a.createElement("h2",null,Object(d.mb)("No members"))),o=l.a.createElement(s.Fragment,null,l.a.createElement("table",null,l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",{width:"25%"},Object(d.mb)("Name")),l.a.createElement("th",{width:"20%"},Object(d.mb)("Status")),l.a.createElement("th",{width:"20%"},Object(d.mb)("Space Used")),l.a.createElement("th",{width:"30%"},Object(d.mb)("Created At")," / ",Object(d.mb)("Last Login")),l.a.createElement("th",{width:"5%"}))),l.a.createElement("tbody",null,r.map((function(t,a){return l.a.createElement(Va,{key:a,item:t,isItemFreezed:e.state.isItemFreezed,onFreezedItem:e.onFreezedItem,onUnfreezedItem:e.onUnfreezedItem,updateStatus:e.props.updateStatus,deleteUser:e.props.deleteUser})})))));return r.length?o:i}}]),a}(s.Component),Va=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).handleMouseEnter=function(){r.props.isItemFreezed||r.setState({isOpIconShown:!0,highlight:!0})},r.handleMouseLeave=function(){r.props.isItemFreezed||r.setState({isOpIconShown:!1,highlight:!1})},r.onUnfreezedItem=function(){r.setState({highlight:!1,isOpIconShow:!1}),r.props.onUnfreezedItem()},r.onMenuItemClick=function(e){switch(e){case"Delete":r.toggleDeleteDialog();break;case"Reset Password":r.toggleResetPasswordDialog()}},r.toggleDeleteDialog=function(e){e&&e.preventDefault(),r.setState({isDeleteDialogOpen:!r.state.isDeleteDialogOpen})},r.toggleResetPasswordDialog=function(e){e&&e.preventDefault(),r.setState({isResetPasswordDialogOpen:!r.state.isResetPasswordDialogOpen})},r.updateStatus=function(e){r.props.updateStatus(r.props.item.email,e)},r.deleteUser=function(){var e=r.props.item;r.props.deleteUser(e.org_id,e.email)},r.resetPassword=function(){b.a.sysAdminResetUserPassword(r.props.item.email).then((function(e){v.a.success(e.data.reset_tip)})).catch((function(e){var t=E.a.getErrorMsg(e);v.a.danger(t)}))},r.translateOperations=function(e){var t="";switch(e){case"Delete":t=Object(d.mb)("Delete");break;case"Reset Password":t=Object(d.mb)("Reset Password")}return t},r.state={isOpIconShown:!1,highlight:!1,isDeleteDialogOpen:!1,isResetPasswordDialogOpen:!1},r}return Object(r.a)(a,[{key:"render",value:function(){var e=this.props.item,t=this.state,a=t.isOpIconShown,n=t.isDeleteDialogOpen,r=t.isResetPasswordDialogOpen,i='<span class="op-target">'+E.a.HTMLescape(e.name)+"</span>",o=Object(d.mb)("Are you sure you want to delete {placeholder} ?").replace("{placeholder}",i),c=Object(d.mb)("Are you sure you want to reset the password of {placeholder} ?").replace("{placeholder}",i);return l.a.createElement(s.Fragment,null,l.a.createElement("tr",{className:this.state.highlight?"tr-highlight":"",onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave},l.a.createElement("td",null,l.a.createElement(ue,{email:e.email,name:e.name})),l.a.createElement("td",null,l.a.createElement(je,{isTextMode:!0,isEditIconShow:a,currentStatus:e.active?"active":"inactive",statusOptions:["active","inactive"],onStatusChanged:this.updateStatus})),l.a.createElement("td",null,"".concat(E.a.bytesToSize(e.quota_usage)," / ").concat(e.quota_total>0?E.a.bytesToSize(e.quota_total):"--")),l.a.createElement("td",null,w()(e.create_time).format("YYYY-MM-DD HH:mm:ss")," / ",e.last_login?w()(e.last_login).fromNow():"--"),l.a.createElement("td",null,a&&e.email!=d.tc&&l.a.createElement(Ce,{operations:["Delete","Reset Password"],translateOperations:this.translateOperations,onMenuItemClick:this.onMenuItemClick,onFreezedItem:this.props.onFreezedItem,onUnfreezedItem:this.onUnfreezedItem}))),n&&l.a.createElement(xe,{title:Object(d.mb)("Delete Member"),message:o,executeOperation:this.deleteUser,confirmBtnText:Object(d.mb)("Delete"),toggleDialog:this.toggleDeleteDialog}),r&&l.a.createElement(xe,{title:Object(d.mb)("Reset Password"),message:c,executeOperation:this.resetPassword,confirmBtnText:Object(d.mb)("Reset"),toggleDialog:this.toggleResetPasswordDialog}))}}]),a}(s.Component),Ga=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).toggleAddUserDialog=function(){r.setState({isAddUserDialogOpen:!r.state.isAddUserDialogOpen})},r.addUser=function(e){var t=e.email,a=e.name,n=e.password;b.a.sysAdminAddOrgUser(r.props.orgID,t,a,n).then((function(e){var t=r.state.userList;t.unshift(e.data),r.setState({userList:t})})).catch((function(e){var t=E.a.getErrorMsg(e);v.a.danger(t)}))},r.deleteUser=function(e,t){b.a.sysAdminDeleteOrgUser(e,t).then((function(e){var a=r.state.userList.filter((function(e){return e.email!=t}));r.setState({userList:a}),v.a.success(Object(d.mb)("Successfully deleted 1 item."))})).catch((function(e){var t=E.a.getErrorMsg(e);v.a.danger(t)}))},r.updateStatus=function(e,t){var a="active"==t;b.a.sysAdminUpdateOrgUser(r.props.orgID,e,"active",a).then((function(t){var a=r.state.userList.map((function(a){return a.email==e&&(a.active=t.data.active),a}));r.setState({userList:a})})).catch((function(e){var t=E.a.getErrorMsg(e);v.a.danger(t)}))},r.state={loading:!0,errorMsg:"",orgName:"",userList:[],isAddUserDialogOpen:!1},r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this;b.a.sysAdminGetOrg(this.props.orgID).then((function(t){e.setState({orgName:t.data.org_name})})),b.a.sysAdminListOrgUsers(this.props.orgID).then((function(t){e.setState({loading:!1,userList:t.data.users})})).catch((function(t){e.setState({loading:!1,errorMsg:E.a.getErrorMsg(t,!0)})}))}},{key:"render",value:function(){var e=this.state,t=e.isAddUserDialogOpen,a=e.orgName;return l.a.createElement(s.Fragment,null,l.a.createElement(x,null,l.a.createElement(f.c,{className:"btn btn-secondary operation-item",onClick:this.toggleAddUserDialog},Object(d.mb)("Add Member"))),l.a.createElement("div",{className:"main-panel-center flex-row"},l.a.createElement("div",{className:"cur-view-container"},l.a.createElement(za,{currentItem:"users",orgID:this.props.orgID,orgName:a}),l.a.createElement("div",{className:"cur-view-content"},l.a.createElement(Wa,{loading:this.state.loading,errorMsg:this.state.errorMsg,items:this.state.userList,updateStatus:this.updateStatus,deleteUser:this.deleteUser})))),t&&l.a.createElement(Ee,{addUser:this.addUser,toggleDialog:this.toggleAddUserDialog}))}}]),a}(s.Component),Ya=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){return Object(n.a)(this,a),t.call(this,e)}return Object(r.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.loading,n=t.errorMsg,r=t.items;if(a)return l.a.createElement(y.a,null);if(n)return l.a.createElement("p",{className:"error text-center mt-4"},n);var i=l.a.createElement(ne.a,null,l.a.createElement("h2",null,Object(d.mb)("No groups"))),o=l.a.createElement(s.Fragment,null,l.a.createElement("table",{className:"table-hover"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",{width:"30%"},Object(d.mb)("Name")),l.a.createElement("th",{width:"30%"},Object(d.mb)("Creator")),l.a.createElement("th",{width:"30%"},Object(d.mb)("Created At")),l.a.createElement("th",{width:"10%"}))),l.a.createElement("tbody",null,r.map((function(t,a){return l.a.createElement(Qa,{key:a,item:t,deleteGroup:e.props.deleteGroup})})))));return r.length?o:i}}]),a}(s.Component),Qa=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).handleMouseEnter=function(){r.setState({isOpIconShown:!0})},r.handleMouseLeave=function(){r.setState({isOpIconShown:!1})},r.toggleDeleteDialog=function(e){e&&e.preventDefault(),r.setState({isDeleteDialogOpen:!r.state.isDeleteDialogOpen})},r.deleteGroup=function(){r.toggleDeleteDialog(),r.props.deleteGroup(r.props.item.group_id)},r.state={isOpIconShown:!1,isDeleteDialogOpen:!1},r}return Object(r.a)(a,[{key:"render",value:function(){var e=this.props.item,t=this.state,a=t.isOpIconShown,n=t.isDeleteDialogOpen,r='<span class="op-target">'+E.a.HTMLescape(e.group_name)+"</span>",i=Object(d.mb)("Are you sure you want to delete {placeholder} ?").replace("{placeholder}",r),o=0==e.parent_group_id?"".concat(d.ic,"sys/groups/").concat(e.group_id,"/libraries/"):"".concat(d.ic,"sysadmin/#address-book/groups/").concat(e.group_id,"/");return l.a.createElement(s.Fragment,null,l.a.createElement("tr",{onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave},l.a.createElement("td",null,l.a.createElement("a",{href:o},e.group_name)),l.a.createElement("td",null,l.a.createElement(ue,{email:e.creator_email,name:e.creator_name})),l.a.createElement("td",null,w()(e.created_at).format("YYYY-MM-DD HH:mm:ss")),l.a.createElement("td",null,l.a.createElement("a",{href:"#",className:"action-icon sf2-icon-delete ".concat(a?"":"invisible"),title:Object(d.mb)("Delete"),onClick:this.toggleDeleteDialog}))),n&&l.a.createElement(xe,{title:Object(d.mb)("Delete Group"),message:i,executeOperation:this.deleteGroup,confirmBtnText:Object(d.mb)("Delete"),toggleDialog:this.toggleDeleteDialog}))}}]),a}(s.Component),Ka=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).deleteGroup=function(e){b.a.sysAdminDismissGroupByID(e).then((function(t){var a=r.state.groupList.filter((function(t){return t.group_id!=e}));r.setState({groupList:a}),v.a.success(Object(d.mb)("Successfully deleted 1 item."))})).catch((function(e){var t=E.a.getErrorMsg(e);v.a.danger(t)}))},r.state={loading:!0,errorMsg:"",orgName:"",groupList:[]},r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this;b.a.sysAdminGetOrg(this.props.orgID).then((function(t){e.setState({orgName:t.data.org_name})})),b.a.sysAdminListOrgGroups(this.props.orgID).then((function(t){e.setState({loading:!1,groupList:t.data.group_list})})).catch((function(t){e.setState({loading:!1,errorMsg:E.a.getErrorMsg(t,!0)})}))}},{key:"render",value:function(){return l.a.createElement(s.Fragment,null,l.a.createElement(x,null),l.a.createElement("div",{className:"main-panel-center flex-row"},l.a.createElement("div",{className:"cur-view-container"},l.a.createElement(za,{currentItem:"groups",orgID:this.props.orgID,orgName:this.state.orgName}),l.a.createElement("div",{className:"cur-view-content"},l.a.createElement(Ya,{loading:this.state.loading,errorMsg:this.state.errorMsg,items:this.state.groupList,deleteGroup:this.deleteGroup})))))}}]),a}(s.Component),Xa=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){return Object(n.a)(this,a),t.call(this,e)}return Object(r.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.loading,n=t.errorMsg,r=t.items;if(a)return l.a.createElement(y.a,null);if(n)return l.a.createElement("p",{className:"error text-center mt-4"},n);var i=l.a.createElement(ne.a,null,l.a.createElement("h2",null,Object(d.mb)("No libraries"))),o=l.a.createElement(s.Fragment,null,l.a.createElement("table",{className:"table-hover"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",{width:"5%"}),l.a.createElement("th",{width:"30%"},Object(d.mb)("Name")),l.a.createElement("th",{width:"35%"},Object(d.mb)("ID")),l.a.createElement("th",{width:"20%"},Object(d.mb)("Owner")),l.a.createElement("th",{width:"10%"}))),l.a.createElement("tbody",null,r.map((function(t,a){return l.a.createElement($a,{key:a,item:t,deleteRepo:e.props.deleteRepo})})))));return r.length?o:i}}]),a}(s.Component),$a=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).handleMouseEnter=function(){r.setState({isOpIconShown:!0})},r.handleMouseLeave=function(){r.setState({isOpIconShown:!1})},r.toggleDeleteDialog=function(e){e&&e.preventDefault(),r.setState({isDeleteDialogOpen:!r.state.isDeleteDialogOpen})},r.deleteRepo=function(){r.props.deleteRepo(r.props.item.repo_id)},r.state={isOpIconShown:!1,isDeleteDialogOpen:!1},r}return Object(r.a)(a,[{key:"render",value:function(){var e=this.props.item,t=this.state,a=t.isOpIconShown,n=t.isDeleteDialogOpen,r=E.a.getLibIconUrl(e),i=E.a.getLibIconTitle(e),o='<span class="op-target">'+E.a.HTMLescape(e.repo_name)+"</span>",c=Object(d.mb)("Are you sure you want to delete {placeholder} ?").replace("{placeholder}",o);return l.a.createElement(s.Fragment,null,l.a.createElement("tr",{onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave},l.a.createElement("td",null,l.a.createElement("img",{src:r,title:i,alt:i,width:"24"})),l.a.createElement("td",null,e.repo_name),l.a.createElement("td",null,e.repo_id),l.a.createElement("td",null,e.owner_email?l.a.createElement(ue,{email:e.owner_email,name:e.owner_name}):"--"),l.a.createElement("td",null,l.a.createElement("a",{href:"#",className:"action-icon sf2-icon-delete ".concat(a?"":"invisible"),title:Object(d.mb)("Delete"),onClick:this.toggleDeleteDialog}))),n&&l.a.createElement(xe,{title:Object(d.mb)("Delete Library"),message:c,executeOperation:this.deleteRepo,confirmBtnText:Object(d.mb)("Delete"),toggleDialog:this.toggleDeleteDialog}))}}]),a}(s.Component),Ja=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).deleteRepo=function(e){b.a.sysAdminDeleteRepo(e).then((function(t){var a=r.state.repoList.filter((function(t){return t.repo_id!=e}));r.setState({repoList:a}),v.a.success(Object(d.mb)("Successfully deleted 1 item."))})).catch((function(e){var t=E.a.getErrorMsg(e);v.a.danger(t)}))},r.state={loading:!0,errorMsg:"",orgName:"",repoList:[]},r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this;b.a.sysAdminGetOrg(this.props.orgID).then((function(t){e.setState({orgName:t.data.org_name})})),b.a.sysAdminListOrgRepos(this.props.orgID).then((function(t){e.setState({loading:!1,repoList:t.data.repo_list})})).catch((function(t){e.setState({loading:!1,errorMsg:E.a.getErrorMsg(t,!0)})}))}},{key:"render",value:function(){return l.a.createElement(s.Fragment,null,l.a.createElement(x,null),l.a.createElement("div",{className:"main-panel-center flex-row"},l.a.createElement("div",{className:"cur-view-container"},l.a.createElement(za,{currentItem:"repos",orgID:this.props.orgID,orgName:this.state.orgName}),l.a.createElement("div",{className:"cur-view-content"},l.a.createElement(Xa,{loading:this.state.loading,errorMsg:this.state.errorMsg,items:this.state.repoList,deleteRepo:this.deleteRepo})))))}}]),a}(s.Component),Za=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).handleChange=function(e){var t=e.target.value;r.setState({value:t,isSubmitBtnActive:""!=t.trim()})},r.handleSubmit=function(){r.toggle(),r.props.addInstitution(r.state.value.trim())},r.toggle=function(){r.props.toggle()},r.state={value:"",isSubmitBtnActive:!1},r}return Object(r.a)(a,[{key:"render",value:function(){return l.a.createElement(f.x,{isOpen:!0,toggle:this.toggle},l.a.createElement(f.A,{toggle:this.toggle},Object(d.mb)("Add institution")),l.a.createElement(f.y,null,l.a.createElement(f.p,null,l.a.createElement("p",null,Object(d.mb)("Name")),l.a.createElement(f.q,null,l.a.createElement(f.s,{value:this.state.value,onChange:this.handleChange})))),l.a.createElement(f.z,null,l.a.createElement(f.c,{color:"primary",onClick:this.handleSubmit,disabled:!this.state.isSubmitBtnActive},Object(d.mb)("Submit"))))}}]),a}(l.a.Component),en=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).getPreviousPage=function(){r.props.getInstitutionsByPage(r.props.currentPage-1)},r.getNextPage=function(){r.props.getInstitutionsByPage(r.props.currentPage+1)},r}return Object(r.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.loading,n=t.errorMsg,r=t.items,i=t.perPage,o=t.currentPage,c=t.hasNextPage;if(a)return l.a.createElement(y.a,null);if(n)return l.a.createElement("p",{className:"error text-center mt-4"},n);var u=l.a.createElement(ne.a,null,l.a.createElement("h2",null,Object(d.mb)("No institutions"))),m=l.a.createElement(s.Fragment,null,l.a.createElement("table",{className:"table-hover"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",{width:"75%"},Object(d.mb)("Name")),l.a.createElement("th",{width:"20%"},Object(d.mb)("Created At")),l.a.createElement("th",{width:"5%"}))),l.a.createElement("tbody",null,r.map((function(t,a){return l.a.createElement(tn,{key:a,item:t,deleteInstitution:e.props.deleteInstitution})})))),l.a.createElement(X.a,{gotoPreviousPage:this.getPreviousPage,gotoNextPage:this.getNextPage,currentPage:o,hasNextPage:c,curPerPage:i,resetPerPage:this.props.resetPerPage}));return r.length?m:u}}]),a}(s.Component),tn=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).handleMouseEnter=function(){r.setState({isOpIconShown:!0})},r.handleMouseLeave=function(){r.setState({isOpIconShown:!1})},r.toggleDeleteDialog=function(e){e&&e.preventDefault(),r.setState({isDeleteDialogOpen:!r.state.isDeleteDialogOpen})},r.deleteInstitution=function(){r.props.deleteInstitution(r.props.item.id)},r.state={isOpIconShown:!1,isDeleteDialogOpen:!1},r}return Object(r.a)(a,[{key:"render",value:function(){var e=this.props.item,t=this.state,a=t.isOpIconShown,n=t.isDeleteDialogOpen,r='<span class="op-target">'+E.a.HTMLescape(e.name)+"</span>",i=Object(d.mb)("Are you sure you want to delete {placeholder} ?").replace("{placeholder}",r);return l.a.createElement(s.Fragment,null,l.a.createElement("tr",{onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave},l.a.createElement("td",null,l.a.createElement(m.a,{to:"".concat(d.ic,"sys/institutions/").concat(e.id,"/info/")},e.name)),l.a.createElement("td",null,w()(e.ctime).fromNow()),l.a.createElement("td",null,l.a.createElement("a",{href:"#",className:"action-icon sf2-icon-delete ".concat(a?"":"invisible"),title:Object(d.mb)("Delete"),onClick:this.toggleDeleteDialog}))),n&&l.a.createElement(xe,{title:Object(d.mb)("Delete Institution"),message:i,executeOperation:this.deleteInstitution,confirmBtnText:Object(d.mb)("Delete"),toggleDialog:this.toggleDeleteDialog}))}}]),a}(s.Component),an=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).getInstitutionsByPage=function(e){var t=r.state.perPage;b.a.sysAdminListInstitutions(e,t).then((function(a){r.setState({loading:!1,institutionList:a.data.institution_list,currentPage:e,hasNextPage:E.a.hasNextPage(e,t,a.data.total_count)})})).catch((function(e){r.setState({loading:!1,errorMsg:E.a.getErrorMsg(e,!0)})}))},r.resetPerPage=function(e){r.setState({perPage:e},(function(){return r.getInstitutionsByPage(r.initPage)}))},r.toggleAddInstitutionDialog=function(){r.setState({isAddInstitutionDialogOpen:!r.state.isAddInstitutionDialogOpen})},r.addInstitution=function(e){b.a.sysAdminAddInstitution(e).then((function(e){var t=r.state.institutionList;t.push(e.data),r.setState({institutionList:t})})).catch((function(e){var t=E.a.getErrorMsg(e);v.a.danger(t)}))},r.deleteInstitution=function(e){b.a.sysAdminDeleteInstitution(e).then((function(t){var a=r.state.institutionList.filter((function(t){return t.id!=e}));r.setState({institutionList:a}),v.a.success(Object(d.mb)("Successfully deleted 1 item."))})).catch((function(e){var t=E.a.getErrorMsg(e);v.a.danger(t)}))},r.state={loading:!0,errorMsg:"",institutionList:[],perPage:25,currentPage:1,hasNextPage:!1,isAddInstitutionDialogOpen:!1},r.initPage=1,r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=new URL(window.location).searchParams,a=this.state,n=a.currentPage,r=a.perPage;this.setState({perPage:parseInt(t.get("per_page")||r),currentPage:parseInt(t.get("page")||n)},(function(){e.getInstitutionsByPage(e.state.currentPage)}))}},{key:"render",value:function(){var e=this.state,t=e.isAddInstitutionDialogOpen,a=e.hasNextPage,n=e.currentPage,r=e.perPage;return l.a.createElement(s.Fragment,null,l.a.createElement(x,null,l.a.createElement(f.c,{className:"btn btn-secondary operation-item",onClick:this.toggleAddInstitutionDialog},Object(d.mb)("Add Institution"))),l.a.createElement("div",{className:"main-panel-center flex-row"},l.a.createElement("div",{className:"cur-view-container"},l.a.createElement("div",{className:"cur-view-path"},l.a.createElement("h3",{className:"sf-heading"},Object(d.mb)("Institutions"))),l.a.createElement("div",{className:"cur-view-content"},l.a.createElement(en,{loading:this.state.loading,errorMsg:this.state.errorMsg,items:this.state.institutionList,deleteInstitution:this.deleteInstitution,currentPage:n,perPage:r,hasNextPage:a,getInstitutionsByPage:this.getInstitutionsByPage,resetPerPage:this.resetPerPage})))),t&&l.a.createElement(Za,{addInstitution:this.addInstitution,toggle:this.toggleAddInstitutionDialog}))}}]),a}(s.Component),nn=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).navItems=[{name:"info",urlPart:"info",text:Object(d.mb)("Info")},{name:"members",urlPart:"members",text:Object(d.mb)("Members")},{name:"admins",urlPart:"admins",text:Object(d.mb)("Admins")}],r}return Object(r.a)(a,[{key:"render",value:function(){var e=this.props,t=e.currentItem,a=e.institutionID,n=e.institutionName;return l.a.createElement("div",null,l.a.createElement("div",{className:"cur-view-path"},l.a.createElement("h3",{className:"sf-heading"},l.a.createElement(m.a,{to:"".concat(d.ic,"sys/institutions/")},Object(d.mb)("Institutions"))," / ",n)),l.a.createElement("ul",{className:"nav border-bottom mx-4"},this.navItems.map((function(e,n){return l.a.createElement("li",{className:"nav-item mr-2",key:n},l.a.createElement(m.a,{to:"".concat(d.ic,"sys/institutions/").concat(a,"/").concat(e.urlPart,"/"),className:"nav-link ".concat(t==e.name?" active":"")},e.text))}))))}}]),a}(l.a.Component),rn=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).toggleSetQuotaDialog=function(){r.setState({isSetQuotaDialogOpen:!r.state.isSetQuotaDialogOpen})},r.showEditIcon=function(e){return l.a.createElement("span",{title:Object(d.mb)("Edit"),className:"fa fa-pencil-alt attr-action-icon",onClick:e})},r.state={isSetQuotaDialogOpen:!1},r}return Object(r.a)(a,[{key:"render",value:function(){var e=this.props,t=e.loading,a=e.errorMsg,n=e.institutionInfo;if(t)return l.a.createElement(y.a,null);if(a)return l.a.createElement("p",{className:"error text-center"},a);var r=n.name,i=n.user_count,o=n.quota_total,c=n.quota_used,u=this.state.isSetQuotaDialogOpen;return l.a.createElement(s.Fragment,null,l.a.createElement("dl",{className:"m-0"},l.a.createElement("dt",{className:"info-item-heading"},Object(d.mb)("Name")),l.a.createElement("dd",{className:"info-item-content"},r),l.a.createElement("dt",{className:"info-item-heading"},Object(d.mb)("Number of members")),l.a.createElement("dd",{className:"info-item-content"},i),l.a.createElement("dt",{className:"info-item-heading"},Object(d.mb)("Space Used")),l.a.createElement("dd",{className:"info-item-content"},"".concat(E.a.bytesToSize(c)," / ").concat(o>0?E.a.bytesToSize(o):"--"),this.showEditIcon(this.toggleSetQuotaDialog))),u&&l.a.createElement(ge,{updateQuota:this.props.updateQuota,toggle:this.toggleSetQuotaDialog}))}}]),a}(s.Component),on=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).updateQuota=function(e){b.a.sysAdminUpdateInstitution(r.props.institutionID,e).then((function(e){var t=Object.assign(r.state.institutionInfo,{quota_total:e.data.quota_total});r.setState({institutionInfo:t}),v.a.success(Object(d.mb)("Successfully set quota."))})).catch((function(e){var t=E.a.getErrorMsg(e);v.a.danger(t)}))},r.state={loading:!0,errorMsg:"",institutionInfo:{}},r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this;b.a.sysAdminGetInstitution(this.props.institutionID).then((function(t){e.setState({loading:!1,institutionInfo:t.data})})).catch((function(t){e.setState({loading:!1,errorMsg:E.a.getErrorMsg(t,!0)})}))}},{key:"render",value:function(){var e=this.state.institutionInfo;return l.a.createElement(s.Fragment,null,l.a.createElement(x,null),l.a.createElement("div",{className:"main-panel-center flex-row"},l.a.createElement("div",{className:"cur-view-container"},l.a.createElement(nn,{currentItem:"info",institutionID:this.props.institutionID,institutionName:e.name}),l.a.createElement("div",{className:"cur-view-content"},l.a.createElement(rn,{loading:this.state.loading,errorMsg:this.state.errorMsg,institutionInfo:this.state.institutionInfo,updateQuota:this.updateQuota})))))}}]),a}(s.Component),sn=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).handleSelectChange=function(e){r.setState({selectedOption:e})},r.handleSubmit=function(){if(r.state.selectedOption){var e=r.state.selectedOption.map((function(e){return e.email}));r.props.addUser(e)}},r.state={selectedOption:[]},r}return Object(r.a)(a,[{key:"render",value:function(){return l.a.createElement(f.x,{isOpen:!0,toggle:this.props.toggle},l.a.createElement(f.A,{toggle:this.props.toggle},Object(d.mb)("Add Member")),l.a.createElement(f.y,null,l.a.createElement(ye.a,{placeholder:Object(d.mb)("Search users..."),onSelectChange:this.handleSelectChange,isMulti:!0,className:"org-add-member-select"})),l.a.createElement(f.z,null,l.a.createElement(f.c,{color:"primary",onClick:this.handleSubmit},Object(d.mb)("Submit")),l.a.createElement(f.c,{color:"secondary",onClick:this.props.toggle},Object(d.mb)("Cancel"))))}}]),a}(l.a.Component),ln=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).onFreezedItem=function(){r.setState({isItemFreezed:!0})},r.onUnfreezedItem=function(){r.setState({isItemFreezed:!1})},r.getPreviousPage=function(){r.props.getInstitutionUsersByPage(r.props.currentPage-1)},r.getNextPage=function(){r.props.getInstitutionUsersByPage(r.props.currentPage+1)},r.state={isItemFreezed:!1},r}return Object(r.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.loading,n=t.errorMsg,r=t.items,i=t.perPage,o=t.currentPage,c=t.hasNextPage;if(a)return l.a.createElement(y.a,null);if(n)return l.a.createElement("p",{className:"error text-center mt-4"},n);var u=l.a.createElement(ne.a,null,l.a.createElement("h2",null,Object(d.mb)("No members"))),m=l.a.createElement(s.Fragment,null,l.a.createElement("table",null,l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",{width:"25%"},Object(d.mb)("Name")),l.a.createElement("th",{width:"10%"},Object(d.mb)("Status")),l.a.createElement("th",{width:"20%"},Object(d.mb)("Space Used")),l.a.createElement("th",{width:"40%"},Object(d.mb)("Created At")," / ",Object(d.mb)("Last Login")),l.a.createElement("th",{width:"5%"}))),l.a.createElement("tbody",null,r.map((function(t,a){return l.a.createElement(cn,{key:a,item:t,isItemFreezed:e.state.isItemFreezed,onFreezedItem:e.onFreezedItem,onUnfreezedItem:e.onUnfreezedItem,setAdmin:e.props.setAdmin,deleteUser:e.props.deleteUser})})))),l.a.createElement(X.a,{gotoPreviousPage:this.getPreviousPage,gotoNextPage:this.getNextPage,currentPage:o,hasNextPage:c,curPerPage:i,resetPerPage:this.props.resetPerPage}));return r.length?m:u}}]),a}(s.Component),cn=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).handleMouseEnter=function(){r.props.isItemFreezed||r.setState({isOpIconShown:!0,highlight:!0})},r.handleMouseLeave=function(){r.props.isItemFreezed||r.setState({isOpIconShown:!1,highlight:!1})},r.onUnfreezedItem=function(){r.setState({highlight:!1,isOpIconShow:!1}),r.props.onUnfreezedItem()},r.toggleSetAdminDialog=function(e){e&&e.preventDefault(),r.setState({isSetAdminDialogOpen:!r.state.isSetAdminDialogOpen})},r.setAdmin=function(){r.props.setAdmin(r.props.item.email)},r.onMenuItemClick=function(e){switch(e){case"Delete":r.props.deleteUser(r.props.item.email);break;case"Set Admin":r.toggleSetAdminDialog()}},r.getOperations=function(){var e=[];return r.props.item.is_institution_admin||e.push("Set Admin"),e.push("Delete"),e},r.translateOperations=function(e){var t="";switch(e){case"Delete":t=Object(d.mb)("Delete");break;case"Set Admin":t=Object(d.mb)("Set Admin")}return t},r.state={isOpIconShown:!1,highlight:!1,isSetAdminDialogOpen:!1},r}return Object(r.a)(a,[{key:"render",value:function(){var e=this.props.item,t=this.state,a=t.isOpIconShown,n=t.isSetAdminDialogOpen,r='<span class="op-target">'+E.a.HTMLescape(e.name)+"</span>",i=Object(d.mb)("Are you sure you want to set {placeholder} as Admin?").replace("{placeholder}",r);return l.a.createElement(s.Fragment,null,l.a.createElement("tr",{className:this.state.highlight?"tr-highlight":"",onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave},l.a.createElement("td",null,l.a.createElement(ue,{email:e.email,name:e.name})),l.a.createElement("td",null,e.is_active?Object(d.mb)("Active"):Object(d.mb)("Inactive")),l.a.createElement("td",null,"".concat(E.a.bytesToSize(e.quota_usage)," / ").concat(e.quota_total>0?E.a.bytesToSize(e.quota_total):"--")),l.a.createElement("td",null,w()(e.create_time).format("YYYY-MM-DD HH:mm:ss")," / ",e.last_login?w()(e.last_login).fromNow():"--"),l.a.createElement("td",null,a&&l.a.createElement(Ce,{operations:this.getOperations(),translateOperations:this.translateOperations,onMenuItemClick:this.onMenuItemClick,onFreezedItem:this.props.onFreezedItem,onUnfreezedItem:this.onUnfreezedItem}))),n&&l.a.createElement(xe,{title:Object(d.mb)("Set Admin"),message:i,executeOperation:this.setAdmin,toggleDialog:this.toggleSetAdminDialog,confirmBtnText:Object(d.mb)("Set Admin")}))}}]),a}(s.Component),un=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).getInstitutionUsersByPage=function(e){var t=r.state.perPage;b.a.sysAdminListInstitutionUsers(r.props.institutionID,e,t).then((function(a){r.setState({loading:!1,userList:a.data.user_list,currentPage:e,hasNextPage:E.a.hasNextPage(e,t,a.data.total_count)})})).catch((function(e){r.setState({loading:!1,errorMsg:E.a.getErrorMsg(e,!0)})}))},r.setAdmin=function(e){b.a.sysAdminUpdateInstitutionUser(r.props.institutionID,e,!0).then((function(t){var a=r.state.userList.map((function(t){return t.email==e&&(t.is_institution_admin=!0),t}));r.setState({userList:a}),v.a.success(Object(d.mb)("Success"))})).catch((function(e){var t=E.a.getErrorMsg(e);v.a.danger(t)}))},r.toggleAddUserDialog=function(){r.setState({isAddUserDialogOpen:!r.state.isAddUserDialogOpen})},r.resetPerPage=function(e){r.setState({perPage:e},(function(){return r.getInstitutionUsersByPage(r.initPage)}))},r.addUser=function(e){b.a.sysAdminAddInstitutionUserBatch(r.props.institutionID,e).then((function(e){r.toggleAddUserDialog();var t=e.data.success,a=e.data.failed;if(t.length){var n=r.state.userList.concat(t);r.setState({userList:n})}a.map((function(e){v.a.danger(e.error_msg)}))})).catch((function(e){var t=E.a.getErrorMsg(e);v.a.danger(t)}))},r.deleteUser=function(e){b.a.sysAdminDeleteInstitutionUser(r.props.institutionID,e).then((function(t){var a=r.state.userList.filter((function(t){return t.email!=e}));r.setState({userList:a}),v.a.success("success")})).catch((function(e){var t=E.a.getErrorMsg(e);v.a.danger(t)}))},r.state={loading:!0,errorMsg:"",institutionName:"",userList:[],perPage:25,currentPage:1,hasNextPage:!1,isAddUserDialogOpen:!1},r.initPage=1,r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this;b.a.sysAdminGetInstitution(this.props.institutionID).then((function(t){e.setState({institutionName:t.data.name})}));var t=new URL(window.location).searchParams,a=this.state,n=a.currentPage,r=a.perPage;this.setState({perPage:parseInt(t.get("per_page")||r),currentPage:parseInt(t.get("page")||n)},(function(){e.getInstitutionUsersByPage(e.state.currentPage)}))}},{key:"render",value:function(){var e=this.state,t=e.isAddUserDialogOpen,a=e.institutionName,n=e.hasNextPage,r=e.currentPage,i=e.perPage;return l.a.createElement(s.Fragment,null,l.a.createElement(x,null,l.a.createElement(f.c,{className:"btn btn-secondary operation-item",onClick:this.toggleAddUserDialog},Object(d.mb)("Add Member"))),l.a.createElement("div",{className:"main-panel-center flex-row"},l.a.createElement("div",{className:"cur-view-container"},l.a.createElement(nn,{currentItem:"members",institutionID:this.props.institutionID,institutionName:a}),l.a.createElement("div",{className:"cur-view-content"},l.a.createElement(ln,{loading:this.state.loading,errorMsg:this.state.errorMsg,items:this.state.userList,setAdmin:this.setAdmin,deleteUser:this.deleteUser,currentPage:r,perPage:i,hasNextPage:n,getInstitutionUsersByPage:this.getInstitutionUsersByPage,resetPerPage:this.resetPerPage})))),t&&l.a.createElement(sn,{addUser:this.addUser,toggle:this.toggleAddUserDialog}))}}]),a}(s.Component),mn=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).onFreezedItem=function(){r.setState({isItemFreezed:!0})},r.onUnfreezedItem=function(){r.setState({isItemFreezed:!1})},r.state={isItemFreezed:!1},r}return Object(r.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.loading,n=t.errorMsg,r=t.items;if(a)return l.a.createElement(y.a,null);if(n)return l.a.createElement("p",{className:"error text-center mt-4"},n);var i=l.a.createElement(ne.a,null,l.a.createElement("h2",null,Object(d.mb)("No admins"))),o=l.a.createElement(s.Fragment,null,l.a.createElement("table",null,l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",{width:"25%"},Object(d.mb)("Name")),l.a.createElement("th",{width:"10%"},Object(d.mb)("Status")),l.a.createElement("th",{width:"20%"},Object(d.mb)("Space Used")),l.a.createElement("th",{width:"40%"},Object(d.mb)("Created At")," / ",Object(d.mb)("Last Login")),l.a.createElement("th",{width:"5%"}))),l.a.createElement("tbody",null,r.map((function(t,a){return l.a.createElement(dn,{key:a,item:t,isItemFreezed:e.state.isItemFreezed,onFreezedItem:e.onFreezedItem,onUnfreezedItem:e.onUnfreezedItem,revokeAdmin:e.props.revokeAdmin,deleteUser:e.props.deleteUser})})))));return r.length?o:i}}]),a}(s.Component),dn=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).handleMouseEnter=function(){r.props.isItemFreezed||r.setState({isOpIconShown:!0,highlight:!0})},r.handleMouseLeave=function(){r.props.isItemFreezed||r.setState({isOpIconShown:!1,highlight:!1})},r.onUnfreezedItem=function(){r.setState({highlight:!1,isOpIconShow:!1}),r.props.onUnfreezedItem()},r.toggleRevokeAdminDialog=function(e){e&&e.preventDefault(),r.setState({isRevokeAdminDialogOpen:!r.state.isRevokeAdminDialogOpen})},r.revokeAdmin=function(){r.props.revokeAdmin(r.props.item)},r.onMenuItemClick=function(e){switch(e){case"Revoke Admin":r.toggleRevokeAdminDialog()}},r.translateOperations=function(e){var t="";switch(e){case"Revoke Admin":t=Object(d.mb)("Revoke Admin")}return t},r.state={isOpIconShown:!1,highlight:!1,isRevokeAdminDialogOpen:!1},r}return Object(r.a)(a,[{key:"render",value:function(){var e=this.props.item,t=this.state,a=t.isOpIconShown,n=t.isRevokeAdminDialogOpen,r='<span class="op-target">'+E.a.HTMLescape(e.name)+"</span>",i=Object(d.mb)("Are you sure you want to revoke the admin permission of {placeholder} ?").replace("{placeholder}",r);return l.a.createElement(s.Fragment,null,l.a.createElement("tr",{className:this.state.highlight?"tr-highlight":"",onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave},l.a.createElement("td",null,l.a.createElement(ue,{email:e.email,name:e.name})),l.a.createElement("td",null,e.is_active?Object(d.mb)("Active"):Object(d.mb)("Inactive")),l.a.createElement("td",null,"".concat(E.a.bytesToSize(e.quota_usage)," / ").concat(e.quota_total>0?E.a.bytesToSize(e.quota_total):"--")),l.a.createElement("td",null,w()(e.create_time).format("YYYY-MM-DD HH:mm:ss")," / ",e.last_login?w()(e.last_login).fromNow():"--"),l.a.createElement("td",null,a&&l.a.createElement(Ce,{operations:["Revoke Admin"],translateOperations:this.translateOperations,onMenuItemClick:this.onMenuItemClick,onFreezedItem:this.props.onFreezedItem,onUnfreezedItem:this.onUnfreezedItem}))),n&&l.a.createElement(xe,{title:Object(d.mb)("Revoke Admin"),message:i,executeOperation:this.revokeAdmin,confirmBtnText:Object(d.mb)("Revoke"),toggleDialog:this.toggleRevokeAdminDialog}))}}]),a}(s.Component),pn=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).revokeAdmin=function(e){var t=e.email,a=e.name;b.a.sysAdminUpdateInstitutionUser(r.props.institutionID,t,!1).then((function(e){var n=r.state.userList.filter((function(e){return e.email!=t}));r.setState({userList:n}),v.a.success(Object(d.mb)("Successfully revoked the admin permission of {placeholder}.").replace("{placeholder}",a))})).catch((function(e){var t=E.a.getErrorMsg(e);v.a.danger(t)}))},r.deleteUser=function(e){b.a.sysAdminDeleteInstitutionUser(r.props.institutionID,e).then((function(t){var a=r.state.userList.filter((function(t){return t.email!=e}));r.setState({userList:a}),v.a.success("success")})).catch((function(e){var t=E.a.getErrorMsg(e);v.a.danger(t)}))},r.state={loading:!0,errorMsg:"",institutionName:"",userList:[],isAddUserDialogOpen:!1},r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this;b.a.sysAdminGetInstitution(this.props.institutionID).then((function(t){e.setState({institutionName:t.data.name})})),b.a.sysAdminListInstitutionAdmins(this.props.institutionID).then((function(t){e.setState({loading:!1,userList:t.data.user_list})})).catch((function(t){e.setState({loading:!1,errorMsg:E.a.getErrorMsg(t,!0)})}))}},{key:"render",value:function(){var e=this.state.institutionName;return l.a.createElement(s.Fragment,null,l.a.createElement(x,null),l.a.createElement("div",{className:"main-panel-center flex-row"},l.a.createElement("div",{className:"cur-view-container"},l.a.createElement(nn,{currentItem:"admins",institutionID:this.props.institutionID,institutionName:e}),l.a.createElement("div",{className:"cur-view-content"},l.a.createElement(mn,{loading:this.state.loading,errorMsg:this.state.errorMsg,items:this.state.userList,revokeAdmin:this.revokeAdmin,deleteUser:this.deleteUser})))))}}]),a}(s.Component),hn=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).navItems=[{name:"loginLogs",urlPart:"logs/login",text:Object(d.mb)("Login")},{name:"fileAccessLogs",urlPart:"logs/file-access",text:Object(d.mb)("File Access")},{name:"fileUpdateLogs",urlPart:"logs/file-update",text:Object(d.mb)("File Update")},{name:"sharePermissionLogs",urlPart:"logs/share-permission",text:Object(d.mb)("Permission")}],r}return Object(r.a)(a,[{key:"render",value:function(){var e=this.props.currentItem;return l.a.createElement("div",{className:"cur-view-path tab-nav-container"},l.a.createElement("ul",{className:"nav"},this.navItems.map((function(t,a){return l.a.createElement("li",{className:"nav-item",key:a},l.a.createElement(m.a,{to:"".concat(d.ic,"sys/").concat(t.urlPart,"/"),className:"nav-link".concat(e==t.name?" active":"")},t.text))}))))}}]),a}(l.a.Component),gn=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).downloadExcel=function(){if(r.isValidDateStr()){var e=r.state,t=e.startDateStr,a=e.endDateStr,n=d.ic;switch(r.props.logType){case"login":n+="sys/loginadmin/export-excel/";break;case"fileAccess":n+="sys/log/fileaudit/export-excel/";break;case"fileUpdate":n+="sys/log/fileupdate/export-excel/";break;case"sharePermission":n+="sys/log/permaudit/export-excel/"}location.href=n+"?start="+t+"&end="+a,r.props.toggle()}},r.isValidDateStr=function(){var e=r.state,t=e.startDateStr,a=e.endDateStr;return!!(w()(t,"YYYY-MM-DD",!0).isValid()&&w()(a,"YYYY-MM-DD",!0).isValid()&&w()(t).isBefore(a))||(r.setState({errMsg:Object(d.mb)("Date Invalid.")}),!1)},r.handleStartChange=function(e){var t=e.target.value.trim();r.setState({startDateStr:t,errMsg:""})},r.handleEndChange=function(e){var t=e.target.value.trim();r.setState({endDateStr:t,errMsg:""})},r.state={loading:!0,startDateStr:"",endDateStr:"",errMsg:""},r.newInput=l.a.createRef(),r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){this.newInput.focus()}},{key:"render",value:function(){var e=this;return l.a.createElement(f.x,{isOpen:!0,toggle:this.props.toggle},l.a.createElement(f.A,{toggle:this.props.toggle},Object(d.mb)("Choose date")),l.a.createElement(f.y,null,l.a.createElement(f.q,null,l.a.createElement(f.w,null,Object(d.mb)("Start date")),l.a.createElement(f.s,{value:this.state.startDateStr,onChange:this.handleStartChange,placeholder:"yyyy-mm-dd",innerRef:function(t){e.newInput=t}})),l.a.createElement(f.q,null,l.a.createElement(f.w,null,Object(d.mb)("End date")),l.a.createElement(f.s,{value:this.state.endDateStr,onChange:this.handleEndChange,placeholder:"yyyy-mm-dd"})),this.state.errMsg&&l.a.createElement(f.a,{className:"mt-2",color:"danger"},Object(d.mb)(this.state.errMsg))),l.a.createElement(f.z,null,l.a.createElement(f.c,{color:"secondary",onClick:this.props.toggle},Object(d.mb)("Cancel")),l.a.createElement(f.c,{color:"primary",onClick:this.downloadExcel},Object(d.mb)("Submit"))))}}]),a}(l.a.Component),fn=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).getPreviousPage=function(){r.props.getLogsByPage(r.props.currentPage-1)},r.getNextPage=function(){r.props.getLogsByPage(r.props.currentPage+1)},r}return Object(r.a)(a,[{key:"render",value:function(){var e=this.props,t=e.loading,a=e.errorMsg,n=e.items,r=e.perPage,i=e.currentPage,o=e.hasNextPage;if(t)return l.a.createElement(y.a,null);if(a)return l.a.createElement("p",{className:"error text-center"},a);var c=l.a.createElement(ne.a,null,l.a.createElement("h2",null,Object(d.mb)("No login logs"))),u=l.a.createElement(s.Fragment,null,l.a.createElement("table",{className:"table-hover"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",{width:"25%"},Object(d.mb)("Name")),l.a.createElement("th",{width:"25%"},Object(d.mb)("IP")),l.a.createElement("th",{width:"25%"},Object(d.mb)("Status")),l.a.createElement("th",{width:"25%"},Object(d.mb)("Time")))),n&&l.a.createElement("tbody",null,n.map((function(e,t){return l.a.createElement(bn,{key:t,item:e})})))),l.a.createElement(X.a,{gotoPreviousPage:this.getPreviousPage,gotoNextPage:this.getNextPage,currentPage:i,hasNextPage:o,curPerPage:r,resetPerPage:this.props.resetPerPage}));return n.length?u:c}}]),a}(s.Component),bn=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).handleMouseOver=function(){r.setState({isOpIconShown:!0})},r.handleMouseOut=function(){r.setState({isOpIconShown:!1})},r.state={isOpIconShown:!1},r}return Object(r.a)(a,[{key:"render",value:function(){var e=this.props.item;return l.a.createElement("tr",{onMouseOver:this.handleMouseOver,onMouseOut:this.handleMouseOut},l.a.createElement("td",null,l.a.createElement(ue,{email:e.email,name:e.name})),l.a.createElement("td",null,e.login_ip),l.a.createElement("td",null,e.log_success?Object(d.mb)("Success"):Object(d.mb)("Failed")),l.a.createElement("td",null,w()(e.login_time).fromNow()))}}]),a}(s.Component),vn=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).toggleExportExcelDialog=function(){r.setState({isExportExcelDialogOpen:!r.state.isExportExcelDialogOpen})},r.getLogsByPage=function(e){var t=r.state.perPage;b.a.sysAdminListLoginLogs(e,t).then((function(a){r.setState({logList:a.data.login_log_list,loading:!1,currentPage:e,hasNextPage:E.a.hasNextPage(e,t,a.data.total_count)})})).catch((function(e){r.setState({loading:!1,errorMsg:E.a.getErrorMsg(e,!0)})}))},r.resetPerPage=function(e){r.setState({perPage:e},(function(){return r.getLogsByPage(r.initPage)}))},r.state={loading:!0,errorMsg:"",logList:[],perPage:25,currentPage:1,hasNextPage:!1,isExportExcelDialogOpen:!1},r.initPage=1,r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=new URL(window.location).searchParams,a=this.state,n=a.currentPage,r=a.perPage;this.setState({perPage:parseInt(t.get("per_page")||r),currentPage:parseInt(t.get("page")||n)},(function(){e.getLogsByPage(e.state.currentPage)}))}},{key:"render",value:function(){var e=this.state,t=e.logList,a=e.currentPage,n=e.perPage,r=e.hasNextPage,i=e.isExportExcelDialogOpen;return l.a.createElement(s.Fragment,null,l.a.createElement(x,null,l.a.createElement(f.c,{className:"btn btn-secondary operation-item",onClick:this.toggleExportExcelDialog},Object(d.mb)("Export Excel"))),l.a.createElement("div",{className:"main-panel-center flex-row"},l.a.createElement("div",{className:"cur-view-container"},l.a.createElement(hn,{currentItem:"loginLogs"}),l.a.createElement("div",{className:"cur-view-content"},l.a.createElement(fn,{loading:this.state.loading,errorMsg:this.state.errorMsg,items:t,currentPage:a,perPage:n,hasNextPage:r,getLogsByPage:this.getLogsByPage,resetPerPage:this.resetPerPage})))),i&&l.a.createElement(pt.a,null,l.a.createElement(gn,{logType:"login",toggle:this.toggleExportExcelDialog})))}}]),a}(s.Component),En=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).getPreviousPage=function(){r.props.getLogsByPage(r.props.currentPage-1)},r.getNextPage=function(){r.props.getLogsByPage(r.props.currentPage+1)},r}return Object(r.a)(a,[{key:"render",value:function(){var e=this.props,t=e.loading,a=e.errorMsg,n=e.items,r=e.perPage,i=e.currentPage,o=e.hasNextPage;if(t)return l.a.createElement(y.a,null);if(a)return l.a.createElement("p",{className:"error text-center"},a);var c=l.a.createElement(ne.a,null,l.a.createElement("h2",null,Object(d.mb)("No file access logs"))),u=l.a.createElement(s.Fragment,null,l.a.createElement("table",{className:"table-hover"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",{width:"20%"},Object(d.mb)("Name")),l.a.createElement("th",{width:"10%"},Object(d.mb)("Type")),l.a.createElement("th",{width:"20%"},Object(d.mb)("IP")," / ",Object(d.mb)("Device")),l.a.createElement("th",{width:"20%"},Object(d.mb)("Date")),l.a.createElement("th",{width:"15%"},Object(d.mb)("Library")),l.a.createElement("th",{width:"15%"},Object(d.mb)("File")," / ",Object(d.mb)("Folder")))),n&&l.a.createElement("tbody",null,n.map((function(e,t){return l.a.createElement(yn,{key:t,item:e})})))),l.a.createElement(X.a,{gotoPreviousPage:this.getPreviousPage,gotoNextPage:this.getNextPage,currentPage:i,hasNextPage:o,curPerPage:r,resetPerPage:this.props.resetPerPage}));return n.length?u:c}}]),a}(s.Component),yn=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).handleMouseOver=function(){r.setState({isOpIconShown:!0})},r.handleMouseOut=function(){r.setState({isOpIconShown:!1})},r.state={isOpIconShown:!1},r}return Object(r.a)(a,[{key:"render",value:function(){var e=this.props.item;return l.a.createElement("tr",{onMouseOver:this.handleMouseOver,onMouseOut:this.handleMouseOut},l.a.createElement("td",null,l.a.createElement(ue,{email:e.email,name:e.name})),l.a.createElement("td",null,e.event_type),l.a.createElement("td",null,e.ip," / ",e.device),l.a.createElement("td",null,w()(e.time).fromNow()),l.a.createElement("td",null,e.repo_name?e.repo_name:Object(d.mb)("Deleted")),l.a.createElement("td",null,e.file_or_dir_name))}}]),a}(s.Component),On=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).toggleExportExcelDialog=function(){r.setState({isExportExcelDialogOpen:!r.state.isExportExcelDialogOpen})},r.getLogsByPage=function(e){var t=r.state.perPage;b.a.sysAdminListFileAccessLogs(e,t).then((function(t){r.setState({logList:t.data.file_access_log_list,loading:!1,currentPage:e,hasNextPage:t.data.has_next_page})})).catch((function(e){r.setState({loading:!1,errorMsg:E.a.getErrorMsg(e,!0)})}))},r.resetPerPage=function(e){r.setState({perPage:e},(function(){return r.getLogsByPage(r.initPage)}))},r.state={loading:!0,errorMsg:"",logList:[],perPage:25,currentPage:1,hasNextPage:!1,isExportExcelDialogOpen:!1},r.initPage=1,r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=new URL(window.location).searchParams,a=this.state,n=a.currentPage,r=a.perPage;this.setState({perPage:parseInt(t.get("per_page")||r),currentPage:parseInt(t.get("page")||n)},(function(){e.getLogsByPage(e.state.currentPage)}))}},{key:"render",value:function(){var e=this.state,t=e.logList,a=e.currentPage,n=e.perPage,r=e.hasNextPage,i=e.isExportExcelDialogOpen;return l.a.createElement(s.Fragment,null,l.a.createElement(x,null,l.a.createElement(f.c,{className:"btn btn-secondary operation-item",onClick:this.toggleExportExcelDialog},Object(d.mb)("Export Excel"))),l.a.createElement("div",{className:"main-panel-center flex-row"},l.a.createElement("div",{className:"cur-view-container"},l.a.createElement(hn,{currentItem:"fileAccessLogs"}),l.a.createElement("div",{className:"cur-view-content"},l.a.createElement(En,{loading:this.state.loading,errorMsg:this.state.errorMsg,items:t,currentPage:a,perPage:n,hasNextPage:r,getLogsByPage:this.getLogsByPage,resetPerPage:this.resetPerPage})))),i&&l.a.createElement(pt.a,null,l.a.createElement(gn,{logType:"fileAccess",toggle:this.toggleExportExcelDialog})))}}]),a}(s.Component),xn=a(251),kn=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).getPreviousPage=function(){r.props.getLogsByPage(r.props.currentPage-1)},r.getNextPage=function(){r.props.getLogsByPage(r.props.currentPage+1)},r}return Object(r.a)(a,[{key:"render",value:function(){var e=this.props,t=e.loading,a=e.errorMsg,n=e.items,r=e.perPage,i=e.currentPage,o=e.hasNextPage;if(t)return l.a.createElement(y.a,null);if(a)return l.a.createElement("p",{className:"error text-center"},a);var c=l.a.createElement(ne.a,null,l.a.createElement("h2",null,Object(d.mb)("No file update logs"))),u=l.a.createElement(s.Fragment,null,l.a.createElement("table",{className:"table-hover"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",{width:"25%"},Object(d.mb)("Name")),l.a.createElement("th",{width:"25%"},Object(d.mb)("Date")),l.a.createElement("th",{width:"25%"},Object(d.mb)("Library")),l.a.createElement("th",{width:"25%"},Object(d.mb)("Action")))),n&&l.a.createElement("tbody",null,n.map((function(e,t){return l.a.createElement(Sn,{key:t,item:e})})))),l.a.createElement(X.a,{gotoPreviousPage:this.getPreviousPage,gotoNextPage:this.getNextPage,currentPage:i,hasNextPage:o,curPerPage:r,resetPerPage:this.props.resetPerPage}));return n.length?u:c}}]),a}(s.Component),Sn=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).handleMouseOver=function(){r.setState({isOpIconShown:!0})},r.handleMouseOut=function(){r.setState({isOpIconShown:!1})},r.toggleCommitDetailsDialog=function(){r.setState({isCommitDetailsDialogOpen:!r.state.isCommitDetailsDialogOpen})},r.showCommitDetails=function(e){e.preventDefault(),r.setState({isCommitDetailsDialogOpen:!r.state.isCommitDetailsDialogOpen})},r.state={isOpIconShown:!1,isCommitDetailsDialogOpen:!1},r}return Object(r.a)(a,[{key:"render",value:function(){var e=this.props.item;return l.a.createElement(s.Fragment,null,l.a.createElement("tr",{onMouseOver:this.handleMouseOver,onMouseOut:this.handleMouseOut},l.a.createElement("td",null,l.a.createElement(ue,{email:e.email,name:e.name})),l.a.createElement("td",null,w()(e.time).fromNow()),l.a.createElement("td",null,e.repo_name?e.repo_name:Object(d.mb)("Deleted")),l.a.createElement("td",null,e.file_operation,e.repo_name&&!e.repo_encrypted&&l.a.createElement("a",{className:"ml-1",href:"#",onClick:this.showCommitDetails},Object(d.mb)("Details")))),this.state.isCommitDetailsDialogOpen&&l.a.createElement(pt.a,null,l.a.createElement(xn.a,{repoID:e.repo_id,commitID:e.commit_id,commitTime:e.time,toggleDialog:this.toggleCommitDetailsDialog})))}}]),a}(s.Component),wn=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).toggleExportExcelDialog=function(){r.setState({isExportExcelDialogOpen:!r.state.isExportExcelDialogOpen})},r.getLogsByPage=function(e){var t=r.state.perPage;b.a.sysAdminListFileUpdateLogs(e,t).then((function(t){r.setState({logList:t.data.file_update_log_list,loading:!1,currentPage:e,hasNextPage:t.data.has_next_page})})).catch((function(e){r.setState({loading:!1,errorMsg:E.a.getErrorMsg(e,!0)})}))},r.resetPerPage=function(e){r.setState({perPage:e},(function(){return r.getLogsByPage(r.initPage)}))},r.state={loading:!0,errorMsg:"",logList:[],perPage:25,currentPage:1,hasNextPage:!1,isExportExcelDialogOpen:!1},r.initPage=1,r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=new URL(window.location).searchParams,a=this.state,n=a.currentPage,r=a.perPage;this.setState({perPage:parseInt(t.get("per_page")||r),currentPage:parseInt(t.get("page")||n)},(function(){e.getLogsByPage(e.state.currentPage)}))}},{key:"render",value:function(){var e=this.state,t=e.logList,a=e.currentPage,n=e.perPage,r=e.hasNextPage,i=e.isExportExcelDialogOpen;return l.a.createElement(s.Fragment,null,l.a.createElement(x,null,l.a.createElement(f.c,{className:"btn btn-secondary operation-item",onClick:this.toggleExportExcelDialog},Object(d.mb)("Export Excel"))),l.a.createElement("div",{className:"main-panel-center flex-row"},l.a.createElement("div",{className:"cur-view-container"},l.a.createElement(hn,{currentItem:"fileUpdateLogs"}),l.a.createElement("div",{className:"cur-view-content"},l.a.createElement(kn,{loading:this.state.loading,errorMsg:this.state.errorMsg,items:t,currentPage:a,perPage:n,hasNextPage:r,getLogsByPage:this.getLogsByPage,resetPerPage:this.resetPerPage})))),i&&l.a.createElement(pt.a,null,l.a.createElement(gn,{logType:"fileUpdate",toggle:this.toggleExportExcelDialog})))}}]),a}(s.Component),Dn=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).getPreviousPage=function(){r.props.getLogsByPage(r.props.currentPage-1)},r.getNextPage=function(){r.props.getLogsByPage(r.props.currentPage+1)},r}return Object(r.a)(a,[{key:"render",value:function(){var e=this.props,t=e.loading,a=e.errorMsg,n=e.items,r=e.perPage,i=e.currentPage,o=e.hasNextPage;if(t)return l.a.createElement(y.a,null);if(a)return l.a.createElement("p",{className:"error text-center"},a);var c=l.a.createElement(ne.a,null,l.a.createElement("h2",null,Object(d.mb)("No permission logs"))),u=l.a.createElement(s.Fragment,null,l.a.createElement("table",{className:"table-hover"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",{width:"15%"},Object(d.mb)("Share From")),l.a.createElement("th",{width:"15%"},Object(d.mb)("Share To")),l.a.createElement("th",{width:"10%"},Object(d.mb)("Actions")),l.a.createElement("th",{width:"13%"},Object(d.mb)("Permission")),l.a.createElement("th",{width:"20%"},Object(d.mb)("Library")),l.a.createElement("th",{width:"12%"},Object(d.mb)("Folder")),l.a.createElement("th",{width:"15%"},Object(d.mb)("Date")))),n&&l.a.createElement("tbody",null,n.map((function(e,t){return l.a.createElement(jn,{key:t,item:e})})))),l.a.createElement(X.a,{gotoPreviousPage:this.getPreviousPage,gotoNextPage:this.getNextPage,currentPage:i,hasNextPage:o,curPerPage:r,resetPerPage:this.props.resetPerPage}));return n.length?u:c}}]),a}(s.Component),jn=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).handleMouseOver=function(){r.setState({isOpIconShown:!0})},r.handleMouseOut=function(){r.setState({isOpIconShown:!1})},r.getActionTextByEType=function(e){return-1!=e.indexOf("add")?Object(d.mb)("Add"):-1!=e.indexOf("modify")?Object(d.mb)("Modify"):-1!=e.indexOf("delete")?Object(d.mb)("Delete"):""},r.getShareTo=function(e){switch(e.share_type){case"user":return l.a.createElement(ue,{email:e.to_user_email,name:e.to_user_name});case"group":return l.a.createElement(m.a,{to:"".concat(d.ic,"sys/groups/").concat(e.to_group_id,"/libraries/")},e.to_group_name);case"department":return l.a.createElement(m.a,{to:"".concat(d.ic,"sys/departments/").concat(e.to_group_id,"/")},e.to_group_name);case"all":return l.a.createElement(m.a,{to:"".concat(d.ic,"org/")},Object(d.mb)("All"));default:return Object(d.mb)("Deleted")}},r.state={isOpIconShown:!1},r}return Object(r.a)(a,[{key:"render",value:function(){var e=this.props.item;return l.a.createElement("tr",{onMouseOver:this.handleMouseOver,onMouseOut:this.handleMouseOut},l.a.createElement("td",null,l.a.createElement(ue,{email:e.from_user_email,name:e.from_user_name})),l.a.createElement("td",null,this.getShareTo(e)),l.a.createElement("td",null,this.getActionTextByEType(e.etype)),l.a.createElement("td",null,E.a.sharePerms(e.permission)),l.a.createElement("td",null,e.repo_name?e.repo_name:Object(d.mb)("Deleted")),l.a.createElement("td",null,e.folder),l.a.createElement("td",null,w()(e.date).fromNow()))}}]),a}(s.Component),Cn=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).toggleExportExcelDialog=function(){r.setState({isExportExcelDialogOpen:!r.state.isExportExcelDialogOpen})},r.getLogsByPage=function(e){var t=r.state.perPage;b.a.sysAdminListSharePermissionLogs(e,t).then((function(t){r.setState({logList:t.data.share_permission_log_list,loading:!1,currentPage:e,hasNextPage:t.data.has_next_page})})).catch((function(e){r.setState({loading:!1,errorMsg:E.a.getErrorMsg(e,!0)})}))},r.resetPerPage=function(e){r.setState({perPage:e},(function(){return r.getLogsByPage(r.initPage)}))},r.state={loading:!0,errorMsg:"",logList:[],perPage:25,currentPage:1,hasNextPage:!1,isExportExcelDialogOpen:!1},r.initPage=1,r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=new URL(window.location).searchParams,a=this.state,n=a.currentPage,r=a.perPage;this.setState({perPage:parseInt(t.get("per_page")||r),currentPage:parseInt(t.get("page")||n)},(function(){e.getLogsByPage(e.state.currentPage)}))}},{key:"render",value:function(){var e=this.state,t=e.logList,a=e.currentPage,n=e.perPage,r=e.hasNextPage,i=e.isExportExcelDialogOpen;return l.a.createElement(s.Fragment,null,l.a.createElement(x,null,l.a.createElement(f.c,{className:"btn btn-secondary operation-item",onClick:this.toggleExportExcelDialog},Object(d.mb)("Export Excel"))),l.a.createElement("div",{className:"main-panel-center flex-row"},l.a.createElement("div",{className:"cur-view-container"},l.a.createElement(hn,{currentItem:"sharePermissionLogs"}),l.a.createElement("div",{className:"cur-view-content"},l.a.createElement(Dn,{loading:this.state.loading,errorMsg:this.state.errorMsg,items:t,currentPage:a,perPage:n,hasNextPage:r,getLogsByPage:this.getLogsByPage,resetPerPage:this.resetPerPage})))),i&&l.a.createElement(pt.a,null,l.a.createElement(gn,{logType:"sharePermission",toggle:this.toggleExportExcelDialog})))}}]),a}(s.Component),Nn=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){return Object(n.a)(this,a),t.call(this,e)}return Object(r.a)(a,[{key:"render",value:function(){var e=this.props,t=e.headingText,a=e.children;return l.a.createElement("div",{className:"mb-4"},l.a.createElement("h4",{className:"border-bottom font-weight-normal mb-2 pb-1"},t),a)}}]),a}(s.Component),Pn=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){return Object(n.a)(this,a),t.call(this,e)}return Object(r.a)(a,[{key:"render",value:function(){var e=this.props,t=e.helpTip,a=e.displayName,n=e.mainContent,r=e.extraContent;return l.a.createElement(s.Fragment,null,l.a.createElement(f.F,{className:"my-4"},l.a.createElement(f.i,{md:"3"},l.a.createElement(f.w,{className:"web-setting-label"},a)),l.a.createElement(f.i,{md:"5"},n,t&&l.a.createElement("p",{className:"small text-secondary mt-1"},t)),l.a.createElement(f.i,{md:"4"},r)))}}]),a}(s.Component),_n=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).toggleBtns=function(){r.setState({isBtnsShown:!r.state.isBtnsShown})},r.hideBtns=function(e){r.state.isBtnsShown&&(r.props.value!=r.state.value&&r.setState({value:r.props.value}),r.toggleBtns())},r.onInputChange=function(e){r.setState({value:e.target.value})},r.onSubmit=function(e){var t=r.state.value.trim();t!=r.props.value&&r.props.saveSetting(r.props.keyText,t),r.toggleBtns()},r.state={isBtnsShown:!1,value:r.props.value},r}return Object(r.a)(a,[{key:"render",value:function(){var e=this.state,t=e.isBtnsShown,a=e.value,n=this.props,r=n.helpTip,i=n.displayName,o=n.inputType;return l.a.createElement(Pn,{displayName:i,helpTip:r,mainContent:l.a.createElement(f.s,{type:o||"text",className:"textarea"==o?"web-setting-textarea":"",onChange:this.onInputChange,onFocus:this.toggleBtns,onBlur:this.hideBtns,value:a}),extraContent:t?l.a.createElement(s.Fragment,null,l.a.createElement(f.c,{className:"sf2-icon-tick web-setting-icon-btn web-setting-icon-btn-submit",onMouseDown:this.onSubmit,title:Object(d.mb)("Submit")}),l.a.createElement(f.c,{className:"ml-1 sf2-icon-x2 web-setting-icon-btn web-setting-icon-btn-cancel",title:Object(d.mb)("Cancel")})):null})}}]),a}(s.Component),Mn=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).uploadFile=function(){if(r.fileInput.current.files.length){var e=r.fileInput.current.files[0];r.props.postFile(e,r.props.keyText)}},r.openFileInput=function(){r.fileInput.current.click()},r.fileInput=l.a.createRef(),r}return Object(r.a)(a,[{key:"render",value:function(){var e=this.props,t=e.helpTip,a=e.filePath,n=e.fileWidth,r=e.fileHeight,i=e.displayName;return l.a.createElement(Pn,{displayName:i,helpTip:t,mainContent:l.a.createElement("img",{src:a+"?t="+(new Date).getTime(),alt:i,width:n,height:r,className:"mb-1"}),extraContent:l.a.createElement(s.Fragment,null,l.a.createElement(f.c,{color:"secondary",onClick:this.openFileInput},Object(d.mb)("Change")),l.a.createElement("input",{className:"d-none",type:"file",onChange:this.uploadFile,ref:this.fileInput}))})}}]),a}(s.Component),In=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).onInputChange=function(e){var t=e.target.checked,a=t?1:0;r.setState({inputChecked:t}),r.props.saveSetting(r.props.keyText,a)},r.state={inputChecked:r.props.value},r}return Object(r.a)(a,[{key:"render",value:function(){var e=this.state.inputChecked,t=this.props,a=t.helpTip,n=t.displayName;return l.a.createElement(Pn,{displayName:n,mainContent:l.a.createElement(s.Fragment,null,l.a.createElement(f.s,{className:"ml-0",checked:e,type:"checkbox",onChange:this.onInputChange}),l.a.createElement("p",{className:"ml-4"},a))})}}]),a}(s.Component),Tn=(a(1258),function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).saveSetting=function(e,t){b.a.sysAdminSetSysSettingInfo(e,t).then((function(e){r.setState({config_dict:e.data}),v.a.success(Object(d.mb)("Success"))})).catch((function(e){var t=E.a.getErrorMsg(e);v.a.danger(t)}))},r.postFile=function(e,t){var a;"Logo"==t?a=b.a.sysAdminUpdateLogo(e):"Favicon"==t?a=b.a.sysAdminUpdateFavicon(e):"loginBGImage"==t&&(a=b.a.sysAdminUpdateLoginBG(e)),a.then((function(e){"Logo"==t?r.setState({logoPath:e.data.logo_path}):"Favicon"==t?r.setState({faviconPath:e.data.favicon_path}):"loginBGImage"==t&&r.setState({loginBGPath:e.data.login_bg_image_path}),v.a.success(Object(d.mb)("Success"))})).catch((function(e){var t=E.a.getErrorMsg(e);v.a.danger(t)}))},r.state={loading:!0,errorMsg:"",config_dict:null,logoPath:d.Jb+d.Eb,faviconPath:d.Jb+d.fb,loginBGPath:d.Jb+d.Bb},r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this;b.a.sysAdminGetSysSettingInfo().then((function(t){e.setState({loading:!1,config_dict:t.data})})).catch((function(t){e.setState({loading:!1,errorMsg:E.a.getErrorMsg(t,!0)})}))}},{key:"render",value:function(){var e=this.state,t=e.loading,a=e.errorMsg,n=e.config_dict,r=e.logoPath,i=e.faviconPath,o=e.loginBGPath;return l.a.createElement(s.Fragment,null,l.a.createElement(x,null),l.a.createElement("div",{className:"main-panel-center flex-row"},l.a.createElement("div",{className:"cur-view-container"},l.a.createElement("div",{className:"cur-view-path"},l.a.createElement("h3",{className:"sf-heading"},Object(d.mb)("Settings"))),l.a.createElement("div",{className:"cur-view-content container mw-100"},t&&l.a.createElement(y.a,null),a&&l.a.createElement("p",{className:"error text-center mt-4"},a),!t&&!a&&n&&l.a.createElement(s.Fragment,null,l.a.createElement("p",{className:"small text-secondary my-4"},Object(d.mb)("Note: Settings via web interface are saved in database table (seahub-db/constance_config). They have a higher priority over the settings in config files.")),l.a.createElement(Nn,{headingText:"URL"},l.a.createElement(s.Fragment,null,l.a.createElement(_n,{saveSetting:this.saveSetting,displayName:"SERVICE_URL",keyText:"SERVICE_URL",value:n.SERVICE_URL,helpTip:Object(d.mb)("The URL of the server, like https://seafile.example.com or http://192.168.1.2:8000")}),l.a.createElement(_n,{saveSetting:this.saveSetting,displayName:"FILE_SERVER_ROOT",keyText:"FILE_SERVER_ROOT",value:n.FILE_SERVER_ROOT,helpTip:Object(d.mb)("The internal URL for downloading/uploading files. Users will not be able to download/upload files if this is not set correctly. If you config Seafile behind Nginx/Apache, it should be SERVICE_URL/seafhttp, like https://seafile.example.com/seafhttp .")}))),l.a.createElement(Nn,{headingText:Object(d.mb)("Branding")},l.a.createElement(s.Fragment,null,l.a.createElement(_n,{saveSetting:this.saveSetting,displayName:"SITE_TITLE",keyText:"SITE_TITLE",value:n.SITE_TITLE,helpTip:Object(d.mb)("Site title shown in a browser tab")}),l.a.createElement(_n,{saveSetting:this.saveSetting,displayName:"SITE_NAME",keyText:"SITE_NAME",value:n.SITE_NAME,helpTip:Object(d.mb)("Site name used in email sending")}),l.a.createElement(Mn,{postFile:this.postFile,displayName:"Logo",keyText:"Logo",filePath:r,fileWidth:256,fileHeight:64,helpTip:"logo.png, 256px * 64px"}),l.a.createElement(Mn,{postFile:this.postFile,displayName:"Favicon",keyText:"Favicon",filePath:i,fileWidth:32,fileHeight:32,helpTip:"favicon.ico, 32px * 32px"}),l.a.createElement(Mn,{postFile:this.postFile,displayName:Object(d.mb)("Login Background Image"),keyText:"loginBGImage",filePath:o,fileWidth:240,fileHeight:160,helpTip:"login-bg.jpg, 2400px * 1600px"}),l.a.createElement(In,{saveSetting:this.saveSetting,displayName:"ENABLE_BRANDING_CSS",keyText:"ENABLE_BRANDING_CSS",value:n.ENABLE_BRANDING_CSS,helpTip:Object(d.mb)("Use custom CSS")}),l.a.createElement(_n,{inputType:"textarea",saveSetting:this.saveSetting,displayName:Object(d.mb)("Custom CSS"),keyText:"CUSTOM_CSS",value:n.CUSTOM_CSS,helpTip:""}))),l.a.createElement(Nn,{headingText:Object(d.mb)("User")},l.a.createElement(s.Fragment,null,l.a.createElement(In,{saveSetting:this.saveSetting,displayName:Object(d.mb)("allow new registrations"),keyText:"ENABLE_SIGNUP",value:n.ENABLE_SIGNUP,helpTip:Object(d.mb)("Allow new user registrations. Uncheck this to prevent anyone from creating a new account.")}),l.a.createElement(In,{saveSetting:this.saveSetting,displayName:Object(d.mb)("activate after registration"),keyText:"ACTIVATE_AFTER_REGISTRATION",value:n.ACTIVATE_AFTER_REGISTRATION,helpTip:Object(d.mb)("Activate user immediately after registration. If unchecked, a user need to be activated by administrator or via activation email")}),l.a.createElement(In,{saveSetting:this.saveSetting,displayName:Object(d.mb)("send activation email"),keyText:"REGISTRATION_SEND_MAIL",value:n.REGISTRATION_SEND_MAIL,helpTip:Object(d.mb)("Send activation Email after user registration.")}),l.a.createElement(_n,{saveSetting:this.saveSetting,displayName:Object(d.mb)("keep sign in"),keyText:"LOGIN_REMEMBER_DAYS",value:n.LOGIN_REMEMBER_DAYS,helpTip:Object(d.mb)("Number of days that keep user sign in.")}),l.a.createElement(_n,{saveSetting:this.saveSetting,displayName:"LOGIN_ATTEMPT_LIMIT",keyText:"LOGIN_ATTEMPT_LIMIT",value:n.LOGIN_ATTEMPT_LIMIT,helpTip:Object(d.mb)("The maximum number of failed login attempts before showing CAPTCHA.")}),l.a.createElement(In,{saveSetting:this.saveSetting,displayName:"FREEZE_USER_ON_LOGIN_FAILED",keyText:"FREEZE_USER_ON_LOGIN_FAILED",value:n.FREEZE_USER_ON_LOGIN_FAILED,helpTip:Object(d.mb)("Freeze user account when failed login attempts exceed limit.")}))),l.a.createElement(Nn,{headingText:Object(d.mb)("Groups")},l.a.createElement(In,{saveSetting:this.saveSetting,displayName:"ENABLE_SHARE_TO_ALL_GROUPS",keyText:"ENABLE_SHARE_TO_ALL_GROUPS",value:n.ENABLE_SHARE_TO_ALL_GROUPS,helpTip:Object(d.mb)("Enable users to share libraries to any groups in the system.")})),l.a.createElement(Nn,{headingText:Object(d.mb)("Password")},l.a.createElement(s.Fragment,null,l.a.createElement(In,{saveSetting:this.saveSetting,displayName:"strong password",keyText:"USER_STRONG_PASSWORD_REQUIRED",value:n.USER_STRONG_PASSWORD_REQUIRED,helpTip:Object(d.mb)("Force user to use a strong password when sign up or change password.")}),l.a.createElement(In,{saveSetting:this.saveSetting,displayName:"force password change",keyText:"FORCE_PASSWORD_CHANGE",value:n.FORCE_PASSWORD_CHANGE,helpTip:Object(d.mb)("Force user to change password when account is newly added or reset by admin")}),l.a.createElement(_n,{saveSetting:this.saveSetting,displayName:Object(d.mb)("password minimum length"),keyText:"USER_PASSWORD_MIN_LENGTH",value:n.USER_PASSWORD_MIN_LENGTH,helpTip:Object(d.mb)("The least number of characters an account password should include.")}),l.a.createElement(_n,{saveSetting:this.saveSetting,displayName:Object(d.mb)("password strength level"),keyText:"USER_PASSWORD_STRENGTH_LEVEL",value:n.USER_PASSWORD_STRENGTH_LEVEL,helpTip:Object(d.mb)("The level(1-4) of an account password's strength. For example, '3' means password must have at least 3 of the following: num, upper letter, lower letter and other symbols")}),l.a.createElement(In,{saveSetting:this.saveSetting,displayName:"enable two factor authentication",keyText:"ENABLE_TWO_FACTOR_AUTH",value:n.ENABLE_TWO_FACTOR_AUTH,helpTip:Object(d.mb)("Enable two factor authentication")}))),l.a.createElement(Nn,{headingText:Object(d.mb)("Library")},l.a.createElement(s.Fragment,null,l.a.createElement(In,{saveSetting:this.saveSetting,displayName:"library history",keyText:"ENABLE_REPO_HISTORY_SETTING",value:n.ENABLE_REPO_HISTORY_SETTING,helpTip:Object(d.mb)("Allow user to change library history settings")}),l.a.createElement(In,{saveSetting:this.saveSetting,displayName:"encrypted library",keyText:"ENABLE_ENCRYPTED_LIBRARY",value:n.ENABLE_ENCRYPTED_LIBRARY,helpTip:Object(d.mb)("Allow user to create encrypted libraries")}),l.a.createElement(_n,{saveSetting:this.saveSetting,displayName:Object(d.mb)("library password minimum length"),keyText:"REPO_PASSWORD_MIN_LENGTH",value:n.REPO_PASSWORD_MIN_LENGTH,helpTip:Object(d.mb)("The least number of characters an encrypted library password should include.")}),l.a.createElement(_n,{saveSetting:this.saveSetting,displayName:Object(d.mb)("download/upload link password minimum length"),keyText:"SHARE_LINK_PASSWORD_MIN_LENGTH",value:n.SHARE_LINK_PASSWORD_MIN_LENGTH,helpTip:Object(d.mb)("The least number of characters a download/upload link password should include.")}),l.a.createElement(In,{saveSetting:this.saveSetting,displayName:"ENABLE_USER_CREATE_ORG_REPO",keyText:"ENABLE_USER_CREATE_ORG_REPO",value:n.ENABLE_USER_CREATE_ORG_REPO,helpTip:Object(d.mb)("Allow user to add organization libraries. Otherwise, only system admin can add organization libraries.")}),l.a.createElement(In,{saveSetting:this.saveSetting,displayName:"ENABLE_USER_CLEAN_TRASH",keyText:"ENABLE_USER_CLEAN_TRASH",value:n.ENABLE_USER_CLEAN_TRASH,helpTip:Object(d.mb)("Allow user to clean library trash")}))),l.a.createElement(Nn,{headingText:Object(d.mb)("Online Preview")},l.a.createElement(_n,{inputType:"textarea",saveSetting:this.saveSetting,displayName:Object(d.mb)("text file extensions"),keyText:"TEXT_PREVIEW_EXT",value:n.TEXT_PREVIEW_EXT,helpTip:Object(d.mb)("Extensions of text files that can be online previewed, each suffix is separated by a comma.")})),l.a.createElement(Nn,{headingText:Object(d.mb)("Sync")},l.a.createElement(In,{saveSetting:this.saveSetting,displayName:"DISABLE_SYNC_WITH_ANY_FOLDER",keyText:"DISABLE_SYNC_WITH_ANY_FOLDER",value:n.DISABLE_SYNC_WITH_ANY_FOLDER,helpTip:Object(d.mb)("If turn on, the desktop clients will not be able to sync a folder outside the default Seafile folder.")})),d.wb&&l.a.createElement(Nn,{headingText:Object(d.mb)("Terms")},l.a.createElement(In,{saveSetting:this.saveSetting,displayName:"ENABLE_TERMS_AND_CONDITIONS",keyText:"ENABLE_TERMS_AND_CONDITIONS",value:n.ENABLE_TERMS_AND_CONDITIONS,helpTip:Object(d.mb)("Enable system admin to add Terms and Conditions, and all users will have to accept the terms.")})))))))}}]),a}(s.Component)),An=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).handleChange=function(e){var t=e.target.value;r.setState({value:t,isSubmitBtnActive:""!=t.trim()})},r.handleSubmit=function(){r.toggle(),r.props.addNotification(r.state.value.trim())},r.toggle=function(){r.props.toggle()},r.state={value:"",isSubmitBtnActive:!1},r}return Object(r.a)(a,[{key:"render",value:function(){return l.a.createElement(f.x,{isOpen:!0,toggle:this.toggle},l.a.createElement(f.A,{toggle:this.toggle},Object(d.mb)("Add new notification")),l.a.createElement(f.y,null,l.a.createElement(f.p,null,l.a.createElement(f.q,null,l.a.createElement(f.s,{type:"textarea",value:this.state.value,onChange:this.handleChange})))),l.a.createElement(f.z,null,l.a.createElement(f.c,{color:"secondary",onClick:this.toggle},Object(d.mb)("Cancel")),l.a.createElement(f.c,{color:"primary",onClick:this.handleSubmit,disabled:!this.state.isSubmitBtnActive},Object(d.mb)("Submit"))))}}]),a}(l.a.Component),Ln=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).onFreezedItem=function(){r.setState({isItemFreezed:!0})},r.onUnfreezedItem=function(){r.setState({isItemFreezed:!1})},r.state={isItemFreezed:!1},r}return Object(r.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.loading,n=t.errorMsg,r=t.items;if(a)return l.a.createElement(y.a,null);if(n)return l.a.createElement("p",{className:"error text-center mt-4"},n);var i=l.a.createElement(ne.a,null,l.a.createElement("h2",null,Object(d.mb)("No notifications"))),o=l.a.createElement("table",null,l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",{width:"95%"},Object(d.mb)("Notification Detail")),l.a.createElement("th",{width:"5%"}))),l.a.createElement("tbody",null,r.map((function(t,a){return l.a.createElement(Rn,{key:a,item:t,isItemFreezed:e.state.isItemFreezed,onFreezedItem:e.onFreezedItem,onUnfreezedItem:e.onUnfreezedItem,deleteNotification:e.props.deleteNotification,setToCurrent:e.props.setToCurrent})}))));return r.length?o:i}}]),a}(s.Component),Rn=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).handleMouseEnter=function(){r.props.isItemFreezed||r.setState({isOpIconShown:!0,highlight:!0})},r.handleMouseLeave=function(){r.props.isItemFreezed||r.setState({isOpIconShown:!1,highlight:!1})},r.onUnfreezedItem=function(){r.setState({highlight:!1,isOpIconShow:!1}),r.props.onUnfreezedItem()},r.toggleDeleteDialog=function(e){e&&e.preventDefault(),r.setState({isDeleteDialogOpen:!r.state.isDeleteDialogOpen})},r.deleteNotification=function(){r.props.deleteNotification(r.props.item.id),r.toggleDeleteDialog()},r.setToCurrent=function(){r.props.setToCurrent(r.props.item.id)},r.onMenuItemClick=function(e){switch(e){case"Set to current":r.setToCurrent();break;case"Delete":r.toggleDeleteDialog()}},r.translateOperations=function(e){var t="";switch(e){case"Set to current":t=Object(d.mb)("Set to current");break;case"Delete":t=Object(d.mb)("Delete")}return t},r.getOperations=function(){var e=[];return r.props.item.is_current||e.push("Set to current"),e.push("Delete"),e},r.state={isOpIconShown:!1,highlight:!1,isDeleteDialogOpen:!1},r}return Object(r.a)(a,[{key:"render",value:function(){var e=this.props.item,t=this.state,a=t.isOpIconShown,n=t.isDeleteDialogOpen;return l.a.createElement(s.Fragment,null,l.a.createElement("tr",{className:this.state.highlight?"tr-highlight":"",onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave},l.a.createElement("td",null,e.msg,e.is_current&&l.a.createElement("span",{className:"small text-orange"},Object(d.mb)("(current notification)"))),l.a.createElement("td",null,a&&l.a.createElement(Ce,{operations:this.getOperations(),translateOperations:this.translateOperations,onMenuItemClick:this.onMenuItemClick,onFreezedItem:this.props.onFreezedItem,onUnfreezedItem:this.onUnfreezedItem}))),n&&l.a.createElement(xe,{title:Object(d.mb)("Delete Notification"),message:Object(d.mb)("Are you sure you want to delete the notification ?"),toggleDialog:this.toggleDeleteDialog,executeOperation:this.deleteNotification,confirmBtnText:Object(d.mb)("Delete")}))}}]),a}(s.Component),Fn=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).toggleAddNotificationDialog=function(){r.setState({isAddNotificationDialogOpen:!r.state.isAddNotificationDialogOpen})},r.addNotification=function(e){b.a.sysAdminAddSysNotification(e).then((function(e){var t=r.state.notificationList;t.unshift(e.data.notification),r.setState({notificationList:t})})).catch((function(e){var t=E.a.getErrorMsg(e);v.a.danger(t)}))},r.deleteNotification=function(e){b.a.sysAdminDeleteSysNotification(e).then((function(t){var a=r.state.notificationList.filter((function(t){return t.id!=e}));r.setState({notificationList:a}),v.a.success(Object(d.mb)("Successfully deleted 1 item."))})).catch((function(e){var t=E.a.getErrorMsg(e);v.a.danger(t)}))},r.setToCurrent=function(e){b.a.sysAdminSetSysNotificationToCurrent(e).then((function(t){var a=r.state.notificationList.map((function(t){return t.id==e?t.is_current=!0:t.is_current=!1,t}));r.setState({notificationList:a})})).catch((function(e){var t=E.a.getErrorMsg(e);v.a.danger(t)}))},r.state={loading:!0,errorMsg:"",notificationList:[],isAddNotificationDialogOpen:!1},r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this;b.a.sysAdminListAllSysNotifications().then((function(t){e.setState({loading:!1,notificationList:t.data.notifications})})).catch((function(t){e.setState({loading:!1,errorMsg:E.a.getErrorMsg(t,!0)})}))}},{key:"render",value:function(){var e=this.state.isAddNotificationDialogOpen;return l.a.createElement(s.Fragment,null,l.a.createElement(x,null,l.a.createElement(f.c,{className:"btn btn-secondary operation-item",onClick:this.toggleAddNotificationDialog},Object(d.mb)("Add new notification"))),l.a.createElement("div",{className:"main-panel-center flex-row"},l.a.createElement("div",{className:"cur-view-container"},l.a.createElement("div",{className:"cur-view-path"},l.a.createElement("h3",{className:"sf-heading"},Object(d.mb)("All Notifications"))),l.a.createElement("div",{className:"cur-view-content"},l.a.createElement(Ln,{loading:this.state.loading,errorMsg:this.state.errorMsg,items:this.state.notificationList,deleteNotification:this.deleteNotification,setToCurrent:this.setToCurrent})))),e&&l.a.createElement(An,{addNotification:this.addNotification,toggle:this.toggleAddNotificationDialog}))}}]),a}(s.Component),Un=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(r.a)(a,[{key:"render",value:function(){var e=this.props,t=e.loading,a=e.errorMsg,n=e.records;return t?l.a.createElement("span",{className:"loading-icon loading-tip"}):a?l.a.createElement("p",{className:"error text-center"},a):l.a.createElement("table",{width:"100%",className:"table table-hover table-vcenter"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",{width:"16%"},Object(d.mb)("Library")),l.a.createElement("th",{width:"30%"},"ID"),l.a.createElement("th",{width:"30%"},Object(d.mb)("Path")),l.a.createElement("th",{width:"12%"},Object(d.mb)("Label")),l.a.createElement("th",{width:"12%"},Object(d.mb)("Suggestion")))),l.a.createElement("tbody",null,n.map((function(e,t){return l.a.createElement(Bn,{key:t,record:e})}))))}}]),a}(s.Component),Bn=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).state={},r}return Object(r.a)(a,[{key:"render",value:function(){var e=this.props.record;return l.a.createElement("tr",null,l.a.createElement("td",null,e.repo_name),l.a.createElement("td",null,e.repo_id),l.a.createElement("td",null,e.path),l.a.createElement("td",null,e.detail.label),l.a.createElement("td",null,e.detail.suggestion))}}]),a}(s.Component),zn=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).state={loading:!0,errorMsg:"",records:[]},r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this;b.a.listFileScanRecords().then((function(t){e.setState({loading:!1,records:t.data.record_list})})).catch((function(t){e.setState({loading:!1,errorMsg:E.a.getErrorMsg(t,!0)})}))}},{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"main-panel-north border-left-show"},l.a.createElement("div",{className:"cur-view-toolbar"},l.a.createElement("span",{className:"sf2-icon-menu side-nav-toggle hidden-md-up d-md-none",title:"Side Nav Menu"})),l.a.createElement("div",{className:"common-toolbar"},l.a.createElement(O.a,{isAdminPanel:!0}))),l.a.createElement("div",{className:"main-panel-center"},l.a.createElement("div",{className:"cur-view-container",id:"content-scan-records"},l.a.createElement("div",{className:"cur-view-path"},l.a.createElement("h3",{className:"sf-heading"},Object(d.mb)("Content Scan Records"))),l.a.createElement("div",{className:"cur-view-content"},l.a.createElement(Un,{loading:this.state.loading,errorMsg:this.state.errorMsg,records:this.state.records})))))}}]),a}(s.Component),Hn=a(81),qn=a.n(Hn),Wn=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){return Object(n.a)(this,a),t.call(this,e)}return Object(r.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.newUsersTempObj,n=t.checkedDepartmentId,r=t.isMembersListLoading,i=t.canCheckUserIds,o=this.props.membersList.map((function(t,r){var i=t.avatar;return i=t.avatar.length>0?t.avatar.substring(0,t.avatar.length-1)+"100":d.ic+"media/avatars/default.png",l.a.createElement("tr",{key:n.toString()+t.userid},l.a.createElement("td",null,!t.email&&l.a.createElement("input",{type:"checkbox",className:"vam",onChange:function(){return e.props.onUserChecked(t)},checked:t.userid in a?"checked":""})),l.a.createElement("td",null,l.a.createElement("img",{className:"avatar",src:i,alt:""})),l.a.createElement("td",null,t.name),l.a.createElement("td",null,t.mobile),l.a.createElement("td",null,t.contact_email),l.a.createElement("td",null,t.email&&l.a.createElement("i",{className:"sf2-icon-tick"})))}));return l.a.createElement("div",{className:"dir-content-main"},r&&l.a.createElement(y.a,null),!r&&this.props.membersList.length>0&&l.a.createElement(f.I,{hover:!0},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",{width:"5%"},i.length>0&&l.a.createElement("input",{type:"checkbox",className:"vam",checked:this.props.isCheckedAll,onChange:function(){return e.props.onAllUsersChecked()}})),l.a.createElement("th",{width:"10%"}),l.a.createElement("th",{width:"20%"},"\u540d\u79f0"),l.a.createElement("th",{width:"20%"},"\u624b\u673a\u53f7"),l.a.createElement("th",{width:"30%"},"\u90ae\u7bb1"),l.a.createElement("th",{width:"15%"},"\u5df2\u6dfb\u52a0"))),l.a.createElement("tbody",null,o)),!r&&0===this.props.membersList.length&&l.a.createElement("div",{className:"message empty-tip text-center"},l.a.createElement("img",{src:"".concat(d.ic,"media/img/member-list-empty-2x.png"),alt:""}),l.a.createElement("h4",null,"\u6210\u5458\u5217\u8868\u4e3a\u7a7a")))}}]),a}(s.Component),Vn=a(13),Gn=a.n(Vn),Yn=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).toggleChildren=function(e){e.preventDefault(),e.stopPropagation(),r.setState({isChildrenShow:!r.state.isChildrenShow})},r.dropdownToggle=function(e){e.stopPropagation(),r.setState({dropdownOpen:!r.state.dropdownOpen})},r.onMouseEnter=function(){r.setState({active:!0})},r.onMouseLeave=function(){r.state.dropdownOpen||r.setState({active:!1})},r.importDepartmentDialogToggle=function(e){r.setState({active:!1}),r.props.importDepartmentDialogToggle(e)},r.renderTreeNodes=function(e){if(e.length>0)return e.map((function(e){return l.a.createElement(a,{key:e.id,department:e,isChildrenShow:r.state.isChildrenShow,onChangeDepartment:r.props.onChangeDepartment,checkedDepartmentId:r.props.checkedDepartmentId,importDepartmentDialogToggle:r.importDepartmentDialogToggle})}))},r.changeDept=function(e){var t=r.props,a=t.department,n=t.checkedDepartmentId;r.props.onChangeDepartment(e),n!==a.id||r.state.isChildrenShow||r.setState({isChildrenShow:!0})},r.state={isChildrenShow:!1,dropdownOpen:!1,active:!1},r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){0===this.props.index&&(this.setState({isChildrenShow:!0}),this.props.onChangeDepartment(this.props.department.id))}},{key:"render",value:function(){var e=this,t=this.props,a=t.isChildrenShow,n=t.department,r=t.checkedDepartmentId,i=Gn()({"folder-toggle-icon fa fa-caret-down":n.children&&this.state.isChildrenShow,"folder-toggle-icon fa fa-caret-right":n.children&&!this.state.isChildrenShow}),o=Gn()({"tree-node-inner":!0,"tree-node-inner-hover":this.state.active,"tree-node-hight-light":r===n.id});return l.a.createElement(s.Fragment,null,a&&l.a.createElement("div",{className:o,onClick:function(){return e.changeDept(n.id)},onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave},l.a.createElement("span",{className:"tree-node-icon",onClick:function(t){return e.toggleChildren(t)}},l.a.createElement("i",{className:i})),l.a.createElement("span",{className:"tree-node-text"},n.name),d.wb&&l.a.createElement(f.l,{isOpen:this.state.dropdownOpen,toggle:function(t){return e.dropdownToggle(t)},direction:"down",style:this.state.active?{}:{opacity:0}},l.a.createElement(f.o,{tag:"i",className:"fa fa-ellipsis-v cursor-pointer attr-action-icon",title:Object(d.mb)("More Operations"),"data-toggle":"dropdown","aria-expanded":this.state.dropdownOpen}),l.a.createElement(f.n,{className:"drop-list",right:!0},l.a.createElement(f.m,{onClick:this.importDepartmentDialogToggle.bind(this,n),id:n.id},"\u5bfc\u5165\u90e8\u95e8")))),this.state.isChildrenShow&&l.a.createElement("div",{className:"department-children"},n.children&&this.renderTreeNodes(n.children)))}}]),a}(s.Component),Qn=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){return Object(n.a)(this,a),t.call(this,e)}return Object(r.a)(a,[{key:"render",value:function(){var e=this,t=this.props.departmentsTree;return l.a.createElement("div",{className:"dir-content-nav"},l.a.createElement("div",{className:"tree-view tree"},this.props.isTreeLoading?l.a.createElement(y.a,null):l.a.createElement("div",{className:"tree-node"},t.length>0&&t.map((function(t,a){return l.a.createElement(Yn,{key:t.id,index:a,department:t,isChildrenShow:!0,onChangeDepartment:e.props.onChangeDepartment,checkedDepartmentId:e.props.checkedDepartmentId,importDepartmentDialogToggle:e.props.importDepartmentDialogToggle})})))))}}]),a}(s.Component),Kn=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).toggle=function(){r.props.importDepartmentDialogToggle(null)},r.handleSubmit=function(){r.props.onImportDepartmentSubmit(),r.setState({isLoading:!0})},r.state={isLoading:!1},r}return Object(r.a)(a,[{key:"render",value:function(){var e=this.props,t=e.departmentsCount,a=e.membersCount,n=e.departmentName;return l.a.createElement(f.x,{isOpen:!0,toggle:this.toggle},l.a.createElement(f.A,{toggle:this.toggle},l.a.createElement("span",null,"\u5bfc\u5165\u90e8\u95e8 "),l.a.createElement("span",{className:"op-target",title:n},n)),l.a.createElement(f.y,null,l.a.createElement("p",null,"\u5c06\u8981\u5bfc\u5165 ",l.a.createElement("strong",null,t)," \u4e2a\u90e8\u95e8\uff0c\u5176\u4e2d\u5305\u62ec ",l.a.createElement("strong",null,a)," \u4e2a\u6210\u5458"),this.state.isLoading&&l.a.createElement(y.a,null)),l.a.createElement(f.z,null,l.a.createElement(f.c,{color:"secondary",onClick:this.toggle},"\u53d6\u6d88"),l.a.createElement(f.c,{color:"primary",onClick:this.handleSubmit},"\u5bfc\u5165")))}}]),a}(l.a.Component),Xn=(a(601),function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).getDepartmentsTree=function(e){for(var t=[],a=[],n=0;n<e.length;n++)-1===t.indexOf(e[n].id)&&t.push(e[n].id),-1===a.indexOf(e[n].parentid)&&a.push(e[n].parentid);var r=a.filter((function(e){return-1!==t.indexOf(e)})),i=a.concat(r).filter((function(e){return-1===a.indexOf(e)||-1===r.indexOf(e)})),o=qn.a.cloneDeep(e);return o.filter((function(e){var t=o.filter((function(t){return e.id===t.parentid}));return t.length>0&&(e.children=t),-1!==i.indexOf(e.parentid)}))},r.getWorkWeixinDepartmentsList=function(e){b.a.adminListWorkWeixinDepartments(e).then((function(t){if(e)r.setState({importDepartmentChildrenCount:t.data.department.length,importDepartmentMembersCount:r.state.membersTempObj[e].length});else{var a=r.getDepartmentsTree(t.data.department);r.setState({isTreeLoading:!1,departmentsTree:a})}})).catch((function(e){r.handleError(e),r.setState({isTreeLoading:!1,isMembersListLoading:!1}),e.response&&403===e.response.status&&(window.location=d.ic+"sys/useradmin/")}))},r.getWorkWeixinDepartmentMembersList=function(e){r.setState({isMembersListLoading:!0}),b.a.adminListWorkWeixinDepartmentMembers(e,{fetch_child:!0}).then((function(t){var a=r.state.membersTempObj;a[e]=t.data.userlist;var n=r.getCanCheckUserIds(t.data.userlist);r.setState({membersTempObj:a,membersList:t.data.userlist,isMembersListLoading:!1,canCheckUserIds:n})})).catch((function(e){r.setState({isMembersListLoading:!1}),r.handleError(e)}))},r.getCanCheckUserIds=function(e){var t=[];return e.forEach((function(e){e.email||t.push(e.userid)})),t},r.onChangeDepartment=function(e){if(r.setState({newUsersTempObj:{},isCheckedAll:!1,checkedDepartmentId:e}),e in r.state.membersTempObj){var t=r.getCanCheckUserIds(r.state.membersTempObj[e]);r.setState({membersList:r.state.membersTempObj[e],canCheckUserIds:t})}else r.getWorkWeixinDepartmentMembersList(e)},r.onUserChecked=function(e){if(-1!==r.state.canCheckUserIds.indexOf(e.userid)){var t=r.state.newUsersTempObj;e.userid in t?(delete t[e.userid],r.state.isCheckedAll&&r.setState({isCheckedAll:!1})):(t[e.userid]=e,Object.keys(t).length===r.state.canCheckUserIds.length&&r.setState({isCheckedAll:!0})),r.setState({newUsersTempObj:t})}},r.onAllUsersChecked=function(){r.setState({isCheckedAll:!r.state.isCheckedAll},(function(){if(r.state.isCheckedAll){for(var e={},t=r.state.membersList.filter((function(e){return-1!==r.state.canCheckUserIds.indexOf(e.userid)})),a=0;a<t.length;a++)e[t[a].userid]=t[a];r.setState({newUsersTempObj:e})}else r.setState({newUsersTempObj:{}})}))},r.onSubmit=function(){var e=r.state.newUsersTempObj;if("{}"!==JSON.stringify(e)){var t=[];for(var a in e)t.push(e[a]);0!==t.length?b.a.adminAddWorkWeixinUsersBatch(t).then((function(e){if(r.setState({newUsersTempObj:{},isCheckedAll:!1}),e.data.success&&r.handleSubmitSuccess(e.data.success),e.data.failed)for(var t=e.data.failed,a=0;a<t.length;a++)v.a.danger(t[a].name+" "+t[a].error_msg,{duration:3})})).catch((function(e){r.handleError(e)})):v.a.danger("\u672a\u9009\u62e9\u6210\u5458",{duration:3})}},r.handleSubmitSuccess=function(e){for(var t=r.state,a=t.membersTempObj,n=t.membersList,i=t.canCheckUserIds,o=0;o<e.length;o++){var s=e[o],l=s.userid,c=s.name,u=s.email;v.a.success(c+" \u6210\u529f\u5bfc\u5165",{duration:1}),-1!==i.indexOf(l)&&i.splice(i.indexOf(l),1);for(var m=0;m<n.length;m++)if(n[m].userid===l){n[m].email=u;break}for(var d in a)for(var p=0;p<a[d].length;p++)if(a[d][p].userid===l){a[d][p].email=u;break}}r.setState({membersTempObj:a,membersList:n,canCheckUserIds:i})},r.importDepartmentDialogToggle=function(e){r.setState({isImportDepartmentDialogShow:!r.state.isImportDepartmentDialogShow,importDepartment:e},(function(){e&&r.getWorkWeixinDepartmentsList(e.id)}))},r.onImportDepartmentSubmit=function(){var e=r.state.importDepartment;e&&b.a.adminImportWorkWeixinDepartment(e.id).then((function(t){r.setState({isMembersListLoading:!0,checkedDepartmentId:e.id,membersTempObj:{},membersList:[],newUsersTempObj:{},isCheckedAll:!1,canCheckUserIds:[]}),r.getWorkWeixinDepartmentMembersList(e.id),r.importDepartmentDialogToggle(null),t.data.success&&r.handleImportDepartmentSubmitSuccess(t.data.success),t.data.failed&&r.handleImportDepartmentSubmitFailed(t.data.failed)})).catch((function(e){r.handleError(e)}))},r.handleImportDepartmentSubmitSuccess=function(e){for(var t=0,a=e.length;t<a;t++){var n=e[t],r="department"===n.type?"\u90e8\u95e8 "+n.department_name+" \u5bfc\u5165\u6210\u529f":n.api_user_name+" \u5bfc\u5165\u6210\u529f";v.a.success(r,{duration:3})}},r.handleImportDepartmentSubmitFailed=function(e){for(var t=0,a=e.length;t<a;t++){var n=e[t],r="department"===n.type?n.department_name:n.api_user_name;v.a.danger(r+" "+n.msg,{duration:3})}},r.handleError=function(e){var t=E.a.getErrorMsg(e);v.a.danger(t)},r.state={isTreeLoading:!0,isMembersListLoading:!0,departmentsTree:[],checkedDepartmentId:0,membersTempObj:{},membersList:[],newUsersTempObj:{},isCheckedAll:!1,canCheckUserIds:[],isImportDepartmentDialogShow:!1,importDepartment:null,importDepartmentChildrenCount:0,importDepartmentMembersCount:0},r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){this.getWorkWeixinDepartmentsList(null)}},{key:"renderNav",value:function(){var e="btn btn-secondary operation-item ";return l.a.createElement("div",{className:"main-panel-north border-left-show"},l.a.createElement("div",{className:"cur-view-toolbar"},l.a.createElement("span",{className:"sf2-icon-menu side-nav-toggle hidden-md-up d-md-none",title:"Side Nav Menu"}),l.a.createElement(f.c,{className:e+"my-1 d-md-none",onClick:this.onSubmit},"\u5bfc\u5165\u7528\u6237"),l.a.createElement(f.c,{className:e+"hidden-md-up",onClick:this.onSubmit},"\u5bfc\u5165\u7528\u6237")),l.a.createElement("div",{className:"common-toolbar"},l.a.createElement(O.a,{isAdminPanel:!0})))}},{key:"render",value:function(){var e=this.state,t=e.isImportDepartmentDialogShow,a=e.isTreeLoading,n=e.importDepartment,r=e.importDepartmentChildrenCount,i=e.importDepartmentMembersCount,o=!(!d.wb||!t||a||!n);return l.a.createElement(s.Fragment,null,this.renderNav(),l.a.createElement("div",{className:"main-panel-center"},l.a.createElement("div",{className:"cur-view-container"},l.a.createElement("div",{className:"cur-view-path"},l.a.createElement("h3",{className:"sf-heading"},"\u4f01\u4e1a\u5fae\u4fe1\u96c6\u6210")),l.a.createElement("div",{className:"cur-view-content d-flex flex-row"},l.a.createElement(Qn,{departmentsTree:this.state.departmentsTree,isTreeLoading:this.state.isTreeLoading,onChangeDepartment:this.onChangeDepartment,checkedDepartmentId:this.state.checkedDepartmentId,importDepartmentDialogToggle:this.importDepartmentDialogToggle}),l.a.createElement("div",{className:"dir-content-resize"}),l.a.createElement(Wn,{isMembersListLoading:this.state.isMembersListLoading,membersList:this.state.membersList,checkedDepartmentId:this.state.checkedDepartmentId,newUsersTempObj:this.state.newUsersTempObj,onUserChecked:this.onUserChecked,onAllUsersChecked:this.onAllUsersChecked,isCheckedAll:this.state.isCheckedAll,canCheckUserIds:this.state.canCheckUserIds})))),o&&l.a.createElement(Kn,{importDepartmentDialogToggle:this.importDepartmentDialogToggle,onImportDepartmentSubmit:this.onImportDepartmentSubmit,departmentsCount:r,membersCount:i,departmentName:n.name}))}}]),a}(s.Component)),$n=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){return Object(n.a)(this,a),t.call(this,e)}return Object(r.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.newUsersTempObj,n=t.checkedDepartmentId,r=t.isMembersListLoading,i=t.canCheckUserIds,o=this.props.membersList.map((function(t,r){var i=t.avatar;return i=t.avatar.length>0?t.avatar:d.ic+"media/avatars/default.png",l.a.createElement("tr",{key:n.toString()+t.userid},l.a.createElement("td",null,!t.email&&l.a.createElement("input",{type:"checkbox",className:"vam",onChange:function(){return e.props.onUserChecked(t)},checked:t.userid in a?"checked":""})),l.a.createElement("td",null,l.a.createElement("img",{className:"avatar",src:i,alt:""})),l.a.createElement("td",null,t.name),l.a.createElement("td",null,t.mobile),l.a.createElement("td",null,t.contact_email),l.a.createElement("td",null,t.email&&l.a.createElement("i",{className:"sf2-icon-tick"})))}));return l.a.createElement("div",{className:"dir-content-main"},r&&l.a.createElement(y.a,null),!r&&this.props.membersList.length>0&&l.a.createElement(f.I,{hover:!0},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",{width:"5%"},i.length>0&&l.a.createElement("input",{type:"checkbox",className:"vam",checked:this.props.isCheckedAll,onChange:function(){return e.props.onAllUsersChecked()}})),l.a.createElement("th",{width:"10%"}),l.a.createElement("th",{width:"20%"},"\u540d\u79f0"),l.a.createElement("th",{width:"20%"},"\u624b\u673a\u53f7"),l.a.createElement("th",{width:"30%"},"\u90ae\u7bb1"),l.a.createElement("th",{width:"15%"},"\u5df2\u6dfb\u52a0"))),l.a.createElement("tbody",null,o)),!r&&0===this.props.membersList.length&&l.a.createElement("div",{className:"message empty-tip text-center"},l.a.createElement("img",{src:"".concat(d.ic,"media/img/member-list-empty-2x.png"),alt:""}),l.a.createElement("h4",null,"\u6210\u5458\u5217\u8868\u4e3a\u7a7a")))}}]),a}(s.Component),Jn=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).toggleChildren=function(e){e.preventDefault(),e.stopPropagation(),r.setState({isChildrenShow:!r.state.isChildrenShow})},r.dropdownToggle=function(e){e.stopPropagation(),r.setState({dropdownOpen:!r.state.dropdownOpen})},r.onMouseEnter=function(){r.setState({active:!0})},r.onMouseLeave=function(){r.state.dropdownOpen||r.setState({active:!1})},r.importDepartmentDialogToggle=function(e){r.setState({active:!1}),r.props.importDepartmentDialogToggle(e)},r.renderTreeNodes=function(e){if(e.length>0)return e.map((function(e){return l.a.createElement(a,{key:e.id,department:e,isChildrenShow:r.state.isChildrenShow,onChangeDepartment:r.props.onChangeDepartment,checkedDepartmentId:r.props.checkedDepartmentId,importDepartmentDialogToggle:r.importDepartmentDialogToggle})}))},r.changeDept=function(e){var t=r.props,a=t.department,n=t.checkedDepartmentId;r.props.onChangeDepartment(e),n!==a.id||r.state.isChildrenShow||r.setState({isChildrenShow:!0})},r.state={isChildrenShow:!1,dropdownOpen:!1,active:!1},r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){0===this.props.index&&(this.setState({isChildrenShow:!0}),this.props.onChangeDepartment(this.props.department.id))}},{key:"render",value:function(){var e=this,t=this.props,a=t.isChildrenShow,n=t.department,r=t.checkedDepartmentId,i=Gn()({"folder-toggle-icon fa fa-caret-down":n.children&&this.state.isChildrenShow,"folder-toggle-icon fa fa-caret-right":n.children&&!this.state.isChildrenShow}),o=Gn()({"tree-node-inner":!0,"tree-node-inner-hover":this.state.active,"tree-node-hight-light":r===n.id});return l.a.createElement(s.Fragment,null,a&&l.a.createElement("div",{className:o,onClick:function(){return e.changeDept(n.id)},onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave},l.a.createElement("span",{className:"tree-node-icon",onClick:function(t){return e.toggleChildren(t)}},l.a.createElement("i",{className:i})),l.a.createElement("span",{className:"tree-node-text"},n.name),d.wb&&l.a.createElement(f.l,{isOpen:this.state.dropdownOpen,toggle:function(t){return e.dropdownToggle(t)},direction:"down",style:this.state.active?{}:{opacity:0}},l.a.createElement(f.o,{tag:"i",className:"fa fa-ellipsis-v cursor-pointer attr-action-icon",title:Object(d.mb)("More Operations"),"data-toggle":"dropdown","aria-expanded":this.state.dropdownOpen}),l.a.createElement(f.n,{className:"drop-list",right:!0},l.a.createElement(f.m,{onClick:this.importDepartmentDialogToggle.bind(this,n),id:n.id},"\u5bfc\u5165\u90e8\u95e8")))),this.state.isChildrenShow&&l.a.createElement("div",{className:"department-children"},n.children&&this.renderTreeNodes(n.children)))}}]),a}(s.Component),Zn=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){return Object(n.a)(this,a),t.call(this,e)}return Object(r.a)(a,[{key:"render",value:function(){var e=this,t=this.props.departmentsTree;return l.a.createElement("div",{className:"dir-content-nav"},l.a.createElement("div",{className:"tree-view tree"},this.props.isTreeLoading?l.a.createElement(y.a,null):l.a.createElement("div",{className:"tree-node"},t.length>0&&t.map((function(t,a){return l.a.createElement(Jn,{key:t.id,index:a,department:t,isChildrenShow:!0,onChangeDepartment:e.props.onChangeDepartment,checkedDepartmentId:e.props.checkedDepartmentId,importDepartmentDialogToggle:e.props.importDepartmentDialogToggle})})))))}}]),a}(s.Component),er=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).toggle=function(){r.props.importDepartmentDialogToggle(null)},r.handleSubmit=function(){r.props.onImportDepartmentSubmit(),r.setState({isLoading:!0})},r.state={isLoading:!1},r}return Object(r.a)(a,[{key:"render",value:function(){var e=this.props,t=e.departmentsCount,a=e.membersCount,n=e.departmentName;return l.a.createElement(f.x,{isOpen:!0,toggle:this.toggle},l.a.createElement(f.A,{toggle:this.toggle},l.a.createElement("span",null,"\u5bfc\u5165\u90e8\u95e8 "),l.a.createElement("span",{className:"op-target",title:n},n)),l.a.createElement(f.y,null,l.a.createElement("p",null,"\u5c06\u8981\u5bfc\u5165 ",l.a.createElement("strong",null,t)," \u4e2a\u90e8\u95e8\uff0c\u5176\u4e2d\u5305\u62ec ",l.a.createElement("strong",null,a)," \u4e2a\u6210\u5458"),this.state.isLoading&&l.a.createElement(y.a,null)),l.a.createElement(f.z,null,l.a.createElement(f.c,{color:"secondary",onClick:this.toggle},"\u53d6\u6d88"),l.a.createElement(f.c,{color:"primary",onClick:this.handleSubmit},"\u5bfc\u5165")))}}]),a}(l.a.Component),tr=(a(1259),function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).getDepartmentsTree=function(e){for(var t=[],a=[],n=0;n<e.length;n++)-1===t.indexOf(e[n].id)&&t.push(e[n].id),-1===a.indexOf(e[n].parentid)&&a.push(e[n].parentid);var r=a.filter((function(e){return-1!==t.indexOf(e)})),i=a.concat(r).filter((function(e){return-1===a.indexOf(e)||-1===r.indexOf(e)})),o=qn.a.cloneDeep(e);return o.filter((function(e){var t=o.filter((function(t){return e.id===t.parentid}));return t.length>0&&(e.children=t),-1!==i.indexOf(e.parentid)}))},r.getDingtalkDepartmentsList=function(e){b.a.adminListDingtalkDepartments(e).then((function(t){if(e)r.setState({importDepartmentChildrenCount:t.data.department.length,importDepartmentMembersCount:r.state.membersTempObj[e].length});else{var a=r.getDepartmentsTree(t.data.department);r.setState({isTreeLoading:!1,departmentsTree:a})}})).catch((function(e){r.handleError(e),r.setState({isTreeLoading:!1,isMembersListLoading:!1}),e.response&&403===e.response.status&&(window.location=d.ic+"sys/useradmin/")}))},r.getDingtalkDepartmentMembersList=function(e){r.setState({isMembersListLoading:!0}),b.a.adminListDingtalkDepartmentMembers(e).then((function(t){var a=r.state.membersTempObj;a[e]=t.data.userlist;var n=r.getCanCheckUserIds(t.data.userlist);r.setState({membersTempObj:a,membersList:t.data.userlist,isMembersListLoading:!1,canCheckUserIds:n})})).catch((function(e){r.setState({isMembersListLoading:!1}),r.handleError(e)}))},r.getCanCheckUserIds=function(e){var t=[];return e.forEach((function(e){e.email||t.push(e.userid)})),t},r.onChangeDepartment=function(e){if(r.setState({newUsersTempObj:{},isCheckedAll:!1,checkedDepartmentId:e}),e in r.state.membersTempObj){var t=r.getCanCheckUserIds(r.state.membersTempObj[e]);r.setState({membersList:r.state.membersTempObj[e],canCheckUserIds:t})}else r.getDingtalkDepartmentMembersList(e)},r.onUserChecked=function(e){if(-1!==r.state.canCheckUserIds.indexOf(e.userid)){var t=r.state.newUsersTempObj;e.userid in t?(delete t[e.userid],r.state.isCheckedAll&&r.setState({isCheckedAll:!1})):(t[e.userid]=e,Object.keys(t).length===r.state.canCheckUserIds.length&&r.setState({isCheckedAll:!0})),r.setState({newUsersTempObj:t})}},r.onAllUsersChecked=function(){r.setState({isCheckedAll:!r.state.isCheckedAll},(function(){if(r.state.isCheckedAll){for(var e={},t=r.state.membersList.filter((function(e){return-1!==r.state.canCheckUserIds.indexOf(e.userid)})),a=0;a<t.length;a++)e[t[a].userid]=t[a];r.setState({newUsersTempObj:e})}else r.setState({newUsersTempObj:{}})}))},r.onSubmit=function(){var e=r.state.newUsersTempObj;if("{}"!==JSON.stringify(e)){var t=[];for(var a in e)t.push(e[a]);0!==t.length?b.a.adminAddDingtalkUsersBatch(t).then((function(e){if(r.setState({newUsersTempObj:{},isCheckedAll:!1}),e.data.success&&r.handleSubmitSuccess(e.data.success),e.data.failed)for(var t=e.data.failed,a=0;a<t.length;a++)v.a.danger(t[a].name+" "+t[a].error_msg,{duration:3})})).catch((function(e){r.handleError(e)})):v.a.danger("\u672a\u9009\u62e9\u6210\u5458",{duration:3})}},r.handleSubmitSuccess=function(e){for(var t=r.state,a=t.membersTempObj,n=t.membersList,i=t.canCheckUserIds,o=0;o<e.length;o++){var s=e[o],l=s.userid,c=s.name,u=s.email;v.a.success(c+" \u6210\u529f\u5bfc\u5165",{duration:1}),-1!==i.indexOf(l)&&i.splice(i.indexOf(l),1);for(var m=0;m<n.length;m++)if(n[m].userid===l){n[m].email=u;break}for(var d in a)for(var p=0;p<a[d].length;p++)if(a[d][p].userid===l){a[d][p].email=u;break}}r.setState({membersTempObj:a,membersList:n,canCheckUserIds:i})},r.importDepartmentDialogToggle=function(e){r.setState({isImportDepartmentDialogShow:!r.state.isImportDepartmentDialogShow,importDepartment:e},(function(){e&&r.getDingtalkDepartmentsList(e.id)}))},r.onImportDepartmentSubmit=function(){var e=r.state.importDepartment;e&&b.a.adminImportDingtalkDepartment(e.id).then((function(t){r.setState({isMembersListLoading:!0,checkedDepartmentId:e.id,membersTempObj:{},membersList:[],newUsersTempObj:{},isCheckedAll:!1,canCheckUserIds:[]}),r.getDingtalkDepartmentMembersList(e.id),r.importDepartmentDialogToggle(null),t.data.success&&r.handleImportDepartmentSubmitSuccess(t.data.success),t.data.failed&&r.handleImportDepartmentSubmitFailed(t.data.failed)})).catch((function(e){r.handleError(e)}))},r.handleImportDepartmentSubmitSuccess=function(e){for(var t=0,a=e.length;t<a;t++){var n=e[t],r="department"===n.type?"\u90e8\u95e8 "+n.department_name+" \u5bfc\u5165\u6210\u529f":n.api_user_name+" \u5bfc\u5165\u6210\u529f";v.a.success(r,{duration:3})}},r.handleImportDepartmentSubmitFailed=function(e){for(var t=0,a=e.length;t<a;t++){var n=e[t],r="department"===n.type?n.department_name:n.api_user_name;v.a.danger(r+" "+n.msg,{duration:3})}},r.handleError=function(e){var t=E.a.getErrorMsg(e);v.a.danger(t)},r.state={isTreeLoading:!0,isMembersListLoading:!0,departmentsTree:[],checkedDepartmentId:0,membersTempObj:{},membersList:[],newUsersTempObj:{},isCheckedAll:!1,canCheckUserIds:[],isImportDepartmentDialogShow:!1,importDepartment:null,importDepartmentChildrenCount:0,importDepartmentMembersCount:0},r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){this.getDingtalkDepartmentsList(null)}},{key:"renderNav",value:function(){var e="btn btn-secondary operation-item ";return l.a.createElement("div",{className:"main-panel-north border-left-show"},l.a.createElement("div",{className:"cur-view-toolbar"},l.a.createElement("span",{className:"sf2-icon-menu side-nav-toggle hidden-md-up d-md-none",title:"Side Nav Menu"}),l.a.createElement(f.c,{className:e+"my-1 d-md-none",onClick:this.onSubmit},"\u5bfc\u5165\u7528\u6237"),l.a.createElement(f.c,{className:e+"hidden-md-up",onClick:this.onSubmit},"\u5bfc\u5165\u7528\u6237")),l.a.createElement("div",{className:"common-toolbar"},l.a.createElement(O.a,{isAdminPanel:!0})))}},{key:"render",value:function(){var e=this.state,t=e.isImportDepartmentDialogShow,a=e.isTreeLoading,n=e.importDepartment,r=e.importDepartmentChildrenCount,i=e.importDepartmentMembersCount,o=!(!d.wb||!t||a||!n);return l.a.createElement(s.Fragment,null,this.renderNav(),l.a.createElement("div",{className:"main-panel-center"},l.a.createElement("div",{className:"cur-view-container"},l.a.createElement("div",{className:"cur-view-path"},l.a.createElement("h3",{className:"sf-heading"},"\u9489\u9489\u96c6\u6210")),l.a.createElement("div",{className:"cur-view-content d-flex flex-row"},l.a.createElement(Zn,{departmentsTree:this.state.departmentsTree,isTreeLoading:this.state.isTreeLoading,onChangeDepartment:this.onChangeDepartment,checkedDepartmentId:this.state.checkedDepartmentId,importDepartmentDialogToggle:this.importDepartmentDialogToggle}),l.a.createElement("div",{className:"dir-content-resize"}),l.a.createElement($n,{isMembersListLoading:this.state.isMembersListLoading,membersList:this.state.membersList,checkedDepartmentId:this.state.checkedDepartmentId,newUsersTempObj:this.state.newUsersTempObj,onUserChecked:this.onUserChecked,onAllUsersChecked:this.onAllUsersChecked,isCheckedAll:this.state.isCheckedAll,canCheckUserIds:this.state.canCheckUserIds})))),o&&l.a.createElement(er,{importDepartmentDialogToggle:this.importDepartmentDialogToggle,onImportDepartmentSubmit:this.onImportDepartmentSubmit,departmentsCount:r,membersCount:i,departmentName:n.name}))}}]),a}(s.Component)),ar=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).onFreezedItem=function(){r.setState({isItemFreezed:!0})},r.onUnfreezedItem=function(){r.setState({isItemFreezed:!1})},r.getPreviousPage=function(){r.props.getItemsByPage(r.props.currentPage-1)},r.getNextPage=function(){r.props.getItemsByPage(r.props.currentPage+1)},r.state={isItemFreezed:!1},r}return Object(r.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.loading,n=t.errorMsg,r=t.items,i=(t.pageInfo,t.curPerPage),o=t.hasNextPage,c=t.currentPage;if(a)return l.a.createElement(y.a,null);if(n)return l.a.createElement("p",{className:"error text-center mt-4"},n);var u=l.a.createElement(ne.a,null,l.a.createElement("h2",null,Object(d.mb)("No invitations"))),m=l.a.createElement(s.Fragment,null,l.a.createElement("table",null,l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",{width:"20%"},Object(d.mb)("Inviter")),l.a.createElement("th",{width:"20%"},Object(d.mb)("Accepter")),l.a.createElement("th",{width:"9%"},Object(d.mb)("Type")),l.a.createElement("th",{width:"14%"},Object(d.mb)("Invited at")),l.a.createElement("th",{width:"14%"},Object(d.mb)("Accepted at")),l.a.createElement("th",{width:"18%"},Object(d.mb)("Expired at")),l.a.createElement("th",{width:"5%"}))),l.a.createElement("tbody",null,r.map((function(t,a){return l.a.createElement(nr,{key:a,item:t,isItemFreezed:e.state.isItemFreezed,onFreezedItem:e.onFreezedItem,onUnfreezedItem:e.onUnfreezedItem,deleteItem:e.props.deleteItem})})))),l.a.createElement(X.a,{gotoPreviousPage:this.getPreviousPage,gotoNextPage:this.getNextPage,currentPage:c,hasNextPage:o,curPerPage:i,resetPerPage:this.props.resetPerPage}));return r.length?m:u}}]),a}(s.Component),nr=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).handleMouseEnter=function(){r.props.isItemFreezed||r.setState({isOpIconShown:!0,highlight:!0})},r.handleMouseLeave=function(){r.props.isItemFreezed||r.setState({isOpIconShown:!1,highlight:!1})},r.onUnfreezedItem=function(){r.setState({highlight:!1,isOpIconShow:!1}),r.props.onUnfreezedItem()},r.deleteItem=function(){r.props.deleteItem(r.props.item)},r.translateOperations=function(e){var t="";switch(e){case"Delete":t=Object(d.mb)("Delete")}return t},r.onMenuItemClick=function(e){switch(e){case"Delete":r.deleteItem()}},r.getInviteTypeText=function(){var e="";switch(r.props.item.invite_type){case"Guest":e=Object(d.mb)("Guest")}return e},r.state={isOpIconShown:!1,highlight:!1},r}return Object(r.a)(a,[{key:"render",value:function(){var e=this.props.item,t=this.state.isOpIconShown;return l.a.createElement(s.Fragment,null,l.a.createElement("tr",{className:this.state.highlight?"tr-highlight":"",onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave},l.a.createElement("td",null,l.a.createElement(ue,{email:e.inviter_email,name:e.inviter_name})),l.a.createElement("td",null,e.accept_time?l.a.createElement(ue,{email:e.accepter_email,name:e.accepter_name}):e.accepter_email),l.a.createElement("td",null,this.getInviteTypeText()),l.a.createElement("td",null,l.a.createElement("span",{title:w()(e.invite_time).format("llll")},w()(e.invite_time).fromNow())),l.a.createElement("td",null,e.accept_time?l.a.createElement("span",{title:w()(e.accept_time).format("llll")},w()(e.accept_time).fromNow()):"--"),l.a.createElement("td",null,e.is_expired?l.a.createElement("span",{className:"text-red"},w()(e.expire_time).format("YYYY-MM-DD HH:mm")):w()(e.expire_time).format("YYYY-MM-DD HH:mm")),l.a.createElement("td",null,t&&l.a.createElement(Ce,{operations:["Delete"],translateOperations:this.translateOperations,onMenuItemClick:this.onMenuItemClick,onFreezedItem:this.props.onFreezedItem,onUnfreezedItem:this.onUnfreezedItem}))))}}]),a}(s.Component),rr=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).getItemsByPage=function(e){var t=r.state.perPage;b.a.sysAdminListInvitations(e,t).then((function(a){r.setState({loading:!1,items:a.data.invitation_list,hasNextPage:E.a.hasNextPage(e,t,a.data.total_count),currentPage:e})})).catch((function(e){r.setState({loading:!1,errorMsg:E.a.getErrorMsg(e,!0)})}))},r.deleteItem=function(e){var t=e.token;b.a.sysAdminDeleteInvitation(t).then((function(e){var a=r.state.items.filter((function(e){return e.token!=t}));r.setState({items:a}),v.a.success(Object(d.mb)("Successfully deleted 1 item."))})).catch((function(e){var t=E.a.getErrorMsg(e);v.a.danger(t)}))},r.deleteItemInBatch=function(){b.a.sysAdminDeleteExpiredInvitations().then((function(e){var t=r.state.items,a=r.state.items.filter((function(e){return!e.is_expired||e.accept_time}));a.length<t.length&&(r.setState({items:a}),v.a.success(Object(d.mb)("Operation succeeded.")))})).catch((function(e){var t=E.a.getErrorMsg(e);v.a.danger(t)}))},r.resetPerPage=function(e){r.setState({perPage:e},(function(){r.getItemsByPage(1)}))},r.state={loading:!0,errorMsg:"",items:[],totalItemCount:0,hasNextPage:!1,currentPage:1,perPage:25},r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=new URL(window.location).searchParams,a=this.state,n=a.currentPage,r=a.perPage;this.setState({perPage:parseInt(t.get("per_page")||r),currentPage:parseInt(t.get("page")||n)},(function(){e.getItemsByPage(e.state.currentPage)}))}},{key:"render",value:function(){return l.a.createElement(s.Fragment,null,l.a.createElement(x,null,l.a.createElement(f.c,{className:"btn btn-secondary operation-item",onClick:this.deleteItemInBatch},Object(d.mb)("Delete Expired Invitations"))),l.a.createElement("div",{className:"main-panel-center flex-row"},l.a.createElement("div",{className:"cur-view-container"},l.a.createElement("div",{className:"cur-view-path"},l.a.createElement("h3",{className:"sf-heading"},Object(d.mb)("Invitations"))),l.a.createElement("div",{className:"cur-view-content"},l.a.createElement(ar,{loading:this.state.loading,errorMsg:this.state.errorMsg,items:this.state.items,currentPage:this.state.currentPage,hasNextPage:this.state.hasNextPage,curPerPage:this.state.perPage,resetPerPage:this.resetPerPage,getItemsByPage:this.getItemsByPage,deleteItem:this.deleteItem})))))}}]),a}(s.Component),ir=a(138),or=a(252),sr=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(){var e;Object(n.a)(this,a);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).onKeyDown=function(e){e.stopPropagation()},e.toggle=function(){if(e.isContentChanged()){var t=e.getCurrentContent();e.props.onCommit(t)}e.props.onCloseEditorDialog()},e.isContentChanged=function(){return e.simpleEditor.hasContentChange()},e.getCurrentContent=function(){return e.simpleEditor.getMarkdown()},e.setSimpleEditorRef=function(t){e.simpleEditor=t},e}return Object(r.a)(a,[{key:"render",value:function(){var e=this.props,t=e.content,a=e.title;return l.a.createElement(f.x,{isOpen:!0,toggle:this.toggle,onKeyDown:this.onKeyDown,wrapClassName:"conditions-editor-dialog-wrapper",className:"conditions-editor-dialog",contentClassName:"conditions-editor-dialog-content",size:"lg",style:{width:770}},l.a.createElement(f.A,{className:"conditions-editor-dialog-title",toggle:this.toggle},a),l.a.createElement(f.y,{className:"conditions-editor-dialog-main"},l.a.createElement(or.b,{onRef:this.setSimpleEditorRef.bind(this),value:t||""})))}}]),a}(l.a.Component);sr.defaultProps={title:Object(d.mb)("Terms")};var lr=sr,cr=(a(1260),function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).handleNameChange=function(e){r.setState({name:e.target.value.trim()})},r.handleVersionNumberChange=function(e){r.setState({versionNumber:e.target.value.trim()})},r.handleTextChange=function(e){r.setState({text:e.target.value.trim()})},r.setActive=function(){r.setState({isActive:!0})},r.setInActive=function(){r.setState({isActive:!1})},r.addTerm=function(){var e=r.state,t=e.name,a=e.versionNumber,n=e.text,i=e.isActive;""!==t?""!==a?isNaN(a)?r.setState({errMsg:Object(d.mb)("Version Number must be a number.")}):""!==n?r.props.isUpdate?r.props.updateTerm(t,a,n,i):r.props.addTerm(t,a,n,i):r.setState({errMsg:Object(d.mb)("Text is required.")}):r.setState({errMsg:Object(d.mb)("Version Number is required.")}):r.setState({errMsg:Object(d.mb)("Name is required.")})},r.onContentClick=function(){r.setState({isConditionsEditorDialogShow:!r.state.isConditionsEditorDialogShow})},r.onCloseEditorDialog=function(){r.setState({isConditionsEditorDialogShow:!1})},r.onUpdateContent=function(e){r.setState({text:e})},r.state={name:"",versionNumber:"",text:"",isActive:!0,errorMsg:"",isConditionsEditorDialogShow:!1},r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.oldTermObj;e&&this.setState({name:e.name,versionNumber:e.version_number,text:e.text,isActive:!(""===e.activate_time)})}},{key:"render",value:function(){var e=this.props.isUpdate?Object(d.mb)("Update Terms and Conditions"):Object(d.mb)("Add Terms and Conditions");return l.a.createElement(s.Fragment,null,l.a.createElement(f.x,{isOpen:!0,toggle:this.props.toggle},l.a.createElement(f.A,{toggle:this.props.toggle},e),l.a.createElement(f.y,null,l.a.createElement(f.q,null,l.a.createElement(f.w,{for:"name"},Object(d.mb)("Name")),l.a.createElement(f.s,{id:"name",value:this.state.name,onChange:this.handleNameChange})),l.a.createElement(f.q,null,l.a.createElement(f.w,null,Object(d.mb)("Version Number")),l.a.createElement(f.s,{value:this.state.versionNumber,onChange:this.handleVersionNumberChange})),l.a.createElement(f.q,{className:"form-content"},l.a.createElement(f.w,null,Object(d.mb)("Text")),l.a.createElement(ir.a,{content:this.state.text,onContentClick:this.onContentClick})),l.a.createElement(f.q,{tag:"fieldset"},l.a.createElement(f.w,null,Object(d.mb)("Activated")),l.a.createElement(f.q,{check:!0},l.a.createElement(f.w,{check:!0},l.a.createElement(f.s,{type:"radio",checked:this.state.isActive,onChange:this.setActive})," ",Object(d.mb)("On"))),l.a.createElement(f.q,{check:!0},l.a.createElement(f.w,{check:!0},l.a.createElement(f.s,{type:"radio",checked:!this.state.isActive,onChange:this.setInActive})," ",Object(d.mb)("Off")))),this.state.errMsg&&l.a.createElement(f.a,{color:"danger"},this.state.errMsg)),l.a.createElement(f.z,null,l.a.createElement(f.c,{color:"primary",onClick:this.addTerm},Object(d.mb)("Submit")))),this.state.isConditionsEditorDialogShow&&l.a.createElement(lr,{content:this.state.text,onCommit:this.onUpdateContent,onCloseEditorDialog:this.onCloseEditorDialog}))}}]),a}(l.a.Component)),ur=a(59),mr=/\[.+\]\(\S+\)|<img src=(\S+).+\/>|!\[\]\(\S+\)|<\S+>/g,dr=/^<img src="(\S+)" .+\/>/,pr=/^!\[\]\((\S+)\)/,hr=/^\[.+\]\(\S+\)/,gr=/^<\S+>$/,fr=function(e){for(var t="",a=e.replace(mr,""),n=0;n<a.length&&("#"===a[n]||("\n"===a[n]?t+=" ":t+=a[n],30!==t.length));n++);var r=e.match(mr);if(r){var i=function(e){var t={links:[],images:[]};return e.forEach((function(e){if(e.search(hr)>=0||e.search(gr)>=0)t.links.push(e);else{var a=e.match(dr),n=e.match(pr);a?t.images.push(a[1]):n&&t.images.push(n[1])}})),t}(r);return{previewText:t,images:i.images,links:i.links}}return{previewText:t,images:[],links:[]}},br=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(){var e;Object(n.a)(this,a);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).toggle=function(){e.props.onClosePreviewDialog()},e}return Object(r.a)(a,[{key:"render",value:function(){var e=this.props,t=e.title,a=e.content;return l.a.createElement(f.x,{isOpen:!0,size:"lg",style:{width:600},wrapClassName:"conditions-perview-wrapper",toggle:this.toggle},l.a.createElement(f.A,{toggle:this.toggle},t),l.a.createElement(f.y,null,l.a.createElement(ir.a,{content:a})))}}]),a}(l.a.Component);br.defaultProps={title:Object(d.mb)("Terms")};var vr=br,Er=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).handleMouseEnter=function(){r.props.isItemFreezed||r.setState({isOpIconShown:!0,highlight:!0})},r.handleMouseLeave=function(){r.props.isItemFreezed||r.setState({isOpIconShown:!1,highlight:!1})},r.toggleUpdateDialog=function(e){r.setState({isUpdateDialogOpen:!r.state.isUpdateDialogOpen})},r.toggleDeleteDialog=function(e){r.setState({isDeleteDialogOpen:!r.state.isDeleteDialogOpen})},r.toggleTermsContentDialog=function(e){r.setState({isTermsPerviewDialogOpen:!r.state.isTermsPerviewDialogOpen})},r.onMenuItemClick=function(e){switch(e){case"Update":r.toggleUpdateDialog();break;case"Delete":r.toggleDeleteDialog()}},r.onUnfreezedItem=function(){r.setState({highlight:!1,isOpIconShow:!1}),r.props.onUnfreezedItem()},r.deleteTerm=function(){r.props.deleteTerm(r.props.item.id),r.toggleDeleteDialog()},r.updateTerm=function(e,t,a,n){r.props.updateTerm(r.props.item.id,e,t,a,n),r.toggleUpdateDialog()},r.translateOperations=function(e){var t="";switch(e){case"Update":t=Object(d.mb)("Update");break;case"Delete":t=Object(d.mb)("Delete")}return t},r.state={itemContent:"...",isOpIconShown:!1,isUpdateDialogOpen:!1,isDeleteDialogOpen:!1,isTermsPerviewDialogOpen:!1},r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.item.text;ur.a.process(t).then((function(t){var a=String(t);e.setState({itemContent:a})}))}},{key:"componentWillReceiveProps",value:function(e){var t=this;if(e.item.text!==this.props.item.text){var a=e.item.text;ur.a.process(a).then((function(e){var a=String(e);t.setState({itemContent:a})}))}}},{key:"render",value:function(){var e=this.props.item,t=this.state,a=t.isDeleteDialogOpen,n=t.isUpdateDialogOpen,r=t.isTermsPerviewDialogOpen,i=fr(e.text),o='<span class="op-target">'+E.a.HTMLescape(e.name)+"</span>",c=Object(d.mb)("Are you sure you want to delete {placeholder} ?").replace("{placeholder}",o);return l.a.createElement(s.Fragment,null,l.a.createElement("tr",{onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave},l.a.createElement("td",null,e.name),l.a.createElement("td",null,e.version_number),l.a.createElement("td",{className:"ellipsis"},l.a.createElement("a",{href:"#",onClick:this.toggleTermsContentDialog},i.previewText)),l.a.createElement("td",null,w()(e.ctime).fromNow()),l.a.createElement("td",null,e.activate_time?w()(e.activate_time).fromNow():"--"),l.a.createElement("td",null,this.state.isOpIconShown&&l.a.createElement(Ce,{operations:["Update","Delete"],translateOperations:this.translateOperations,onMenuItemClick:this.onMenuItemClick,onFreezedItem:this.props.onFreezedItem,onUnfreezedItem:this.onUnfreezedItem}))),a&&l.a.createElement(pt.a,null,l.a.createElement(xe,{title:Object(d.mb)("Delete T&C"),message:c,toggleDialog:this.toggleDeleteDialog,executeOperation:this.deleteTerm,confirmBtnText:Object(d.mb)("Delete")})),n&&l.a.createElement(pt.a,null,l.a.createElement(cr,{updateTerm:this.updateTerm,toggle:this.toggleUpdateDialog,isUpdate:!0,oldTermObj:e})),r&&l.a.createElement(pt.a,null,l.a.createElement(vr,{content:e.text,onClosePreviewDialog:this.toggleTermsContentDialog})))}}]),a}(s.Component),yr=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).onFreezedItem=function(){r.setState({isItemFreezed:!0})},r.onUnfreezedItem=function(){r.setState({isItemFreezed:!1})},r.state={isItemFreezed:!1},r}return Object(r.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.loading,n=t.errorMsg,r=t.items;if(a)return l.a.createElement(y.a,null);if(n)return l.a.createElement("p",{className:"error text-center"},n);var i=l.a.createElement(ne.a,null,l.a.createElement("h2",null,Object(d.mb)("No terms and conditions"))),o=l.a.createElement(s.Fragment,null,l.a.createElement("table",{className:"table-hover"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",{width:"20%"},Object(d.mb)("Name")),l.a.createElement("th",{width:"10%"},Object(d.mb)("Version")),l.a.createElement("th",{width:"25%"},Object(d.mb)("Text")),l.a.createElement("th",{width:"20%"},Object(d.mb)("Created")),l.a.createElement("th",{width:"20%"},Object(d.mb)("Activated")),l.a.createElement("th",{width:"5%"}))),r&&l.a.createElement("tbody",null,r.map((function(t,a){return l.a.createElement(Er,{key:a,item:t,isItemFreezed:e.state.isItemFreezed,onFreezedItem:e.onFreezedItem,onUnfreezedItem:e.onUnfreezedItem,deleteTerm:e.props.deleteTerm,updateTerm:e.props.updateTerm})})))));return r.length?o:i}}]),a}(s.Component),Or=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).toggleAddTermDialog=function(){r.setState({isAddTermDialogOpen:!r.state.isAddTermDialogOpen})},r.addTerm=function(e,t,a,n){b.a.sysAdminAddTermAndCondition(e,t,a,n).then((function(e){location.reload()})).catch((function(e){var t=E.a.getErrorMsg(e);v.a.danger(t)}))},r.updateTerm=function(e,t,a,n,i){b.a.sysAdminUpdateTermAndCondition(e,t,a,n,i).then((function(t){var a=r.state.termList.map((function(a){return a.id==e?t.data:a}));r.setState({termList:a}),v.a.success(Object(d.mb)("Update succeeded."))})).catch((function(e){var t=E.a.getErrorMsg(e);v.a.danger(t)}))},r.deleteTerm=function(e){b.a.sysAdminDeleteTermAndCondition(e).then((function(t){var a=r.state.termList.filter((function(t){return t.id!=e}));r.setState({termList:a}),v.a.success(Object(d.mb)("Successfully deleted 1 item."))})).catch((function(e){var t=E.a.getErrorMsg(e);v.a.danger(t)}))},r.state={loading:!0,errorMsg:"",termList:[],isAddTermDialogOpen:!1},r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this;b.a.sysAdminListTermsAndConditions().then((function(t){e.setState({termList:t.data.term_and_condition_list,loading:!1})})).catch((function(t){e.setState({loading:!1,errorMsg:E.a.getErrorMsg(t,!0)})}))}},{key:"render",value:function(){var e=this.state,t=e.termList,a=e.isAddTermDialogOpen;return l.a.createElement(s.Fragment,null,l.a.createElement(x,null,l.a.createElement(f.c,{className:"btn btn-secondary operation-item",onClick:this.toggleAddTermDialog},Object(d.mb)("Add"))),l.a.createElement("div",{className:"main-panel-center flex-row"},l.a.createElement("div",{className:"cur-view-container"},l.a.createElement("div",{className:"cur-view-path"},l.a.createElement("h3",{className:"sf-heading"},Object(d.mb)("Terms and Conditions"))),l.a.createElement("div",{className:"cur-view-content"},l.a.createElement(yr,{loading:this.state.loading,errorMsg:this.state.errorMsg,items:t,deleteTerm:this.deleteTerm,updateTerm:this.updateTerm})))),a&&l.a.createElement(pt.a,null,l.a.createElement(cr,{isUpdate:!1,addTerm:this.addTerm,toggle:this.toggleAddTermDialog})))}}]),a}(s.Component),xr=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).navItems=[{name:"all",urlPart:"all",text:Object(d.mb)("All")},{name:"unhandled",urlPart:"unhandled",text:Object(d.mb)("Unhandled")}],r}return Object(r.a)(a,[{key:"render",value:function(){var e=this.props.currentItem;return l.a.createElement("div",{className:"cur-view-path tab-nav-container"},l.a.createElement("ul",{className:"nav"},this.navItems.map((function(t,a){return l.a.createElement("li",{className:"nav-item",key:a},l.a.createElement(m.a,{to:"".concat(d.ic,"sys/virus-files/").concat(t.urlPart,"/"),className:"nav-link".concat(e==t.name?" active":"")},t.text))}))))}}]),a}(l.a.Component),kr=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).handleMouseEnter=function(){r.props.isItemFreezed||r.setState({isOpIconShown:!0,highlight:!0})},r.handleMouseLeave=function(){r.props.isItemFreezed||r.setState({isOpIconShown:!1,highlight:!1})},r.onUnfreezedItem=function(){r.setState({highlight:!1,isOpIconShow:!1}),r.props.onUnfreezedItem()},r.onMenuItemClick=function(e){r.props.handleFile(r.props.virusFile.virus_id,e)},r.translateOperations=function(e){var t="";switch(e){case"delete":t=Object(d.mb)("Delete");break;case"ignore":t=Object(d.mb)("Ignore");break;case"do-not-ignore":t=Object(d.mb)("Don't ignore")}return t},r.state={highlight:!1,isOpIconShown:!1},r}return Object(r.a)(a,[{key:"render",value:function(){var e=this.props.virusFile,t="",a=[];return e.has_deleted?t=l.a.createElement("span",{className:"text-green"},Object(d.mb)("Deleted")):e.has_ignored?(t=l.a.createElement("span",{className:"text-orange"},Object(d.mb)("Ignored")),a=["do-not-ignore"]):(t=l.a.createElement("span",{className:"text-red"},Object(d.mb)("Unhandled")),a=["delete","ignore"]),l.a.createElement("tr",{className:this.state.highlight?"tr-highlight":"",onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave},l.a.createElement("td",null,e.repo_name),l.a.createElement("td",null,e.repo_owner),l.a.createElement("td",null,e.file_path),l.a.createElement("td",null,t),l.a.createElement("td",null,a.length>0&&this.state.isOpIconShown&&l.a.createElement(Ce,{operations:a,translateOperations:this.translateOperations,onMenuItemClick:this.onMenuItemClick,onFreezedItem:this.props.onFreezedItem,onUnfreezedItem:this.onUnfreezedItem})))}}]),a}(s.Component),Sr=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).onFreezedItem=function(){r.setState({isItemFreezed:!0})},r.onUnfreezedItem=function(){r.setState({isItemFreezed:!1})},r.getPreviousPage=function(){r.props.getListByPage(r.props.currentPage-1)},r.getNextPage=function(){r.props.getListByPage(r.props.currentPage+1)},r.state={isItemFreezed:!1},r}return Object(r.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.loading,n=t.errorMsg,r=t.virusFiles,i=t.curPerPage,o=t.hasNextPage,c=t.currentPage;return a?l.a.createElement(y.a,null):n?l.a.createElement("p",{className:"error text-center mt-4"},n):l.a.createElement(s.Fragment,null,l.a.createElement("table",null,l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",{width:"27%"},Object(d.mb)("Library")),l.a.createElement("th",{width:"25%"},Object(d.mb)("Owner")),l.a.createElement("th",{width:"28%"},Object(d.mb)("Virus File")),l.a.createElement("th",{width:"15%"},Object(d.mb)("Status")),l.a.createElement("th",{width:"5%"}))),l.a.createElement("tbody",null,r.map((function(t,a){return l.a.createElement(kr,{key:a,virusFile:t,isItemFreezed:e.state.isItemFreezed,onFreezedItem:e.onFreezedItem,onUnfreezedItem:e.onUnfreezedItem,handleFile:e.props.handleFile})})))),r.length>0&&l.a.createElement(X.a,{gotoPreviousPage:this.getPreviousPage,gotoNextPage:this.getNextPage,currentPage:c,hasNextPage:o,curPerPage:i,resetPerPage:this.props.resetPerPage}))}}]),a}(s.Component),wr=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).getListByPage=function(e){var t=r.state.perPage;b.a.listVirusFiles(e,t).then((function(e){var t=e.data;r.setState({loading:!1,virusFiles:t.virus_file_list,hasNextPage:t.has_next_page})})).catch((function(e){r.setState({loading:!1,errorMsg:E.a.getErrorMsg(e,!0)})}))},r.resetPerPage=function(e){r.setState({perPage:e},(function(){r.getListByPage(1)}))},r.handleFile=function(e,t){var a;switch(t){case"delete":a=b.a.deleteVirusFile(e);break;case"ignore":a=b.a.toggleIgnoreVirusFile(e,!0);break;case"do-not-ignore":a=b.a.toggleIgnoreVirusFile(e,!1)}a.then((function(a){r.setState({virusFiles:r.state.virusFiles.map((function(n){return n.virus_id==e&&("delete"==t?n.has_deleted=!0:n=a.data.virus_file),n}))})})).catch((function(e){v.a.danger(E.a.getErrorMsg(e))}))},r.state={loading:!0,errorMsg:"",virusFiles:[],currentPage:1,perPage:25,hasNextPage:!1},r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=new URL(window.location).searchParams,a=this.state,n=a.currentPage,r=a.perPage;this.setState({perPage:parseInt(t.get("per_page")||r),currentPage:parseInt(t.get("page")||n)},(function(){e.getListByPage(e.state.currentPage)}))}},{key:"render",value:function(){return l.a.createElement(s.Fragment,null,l.a.createElement(x,null),l.a.createElement("div",{className:"main-panel-center"},l.a.createElement("div",{className:"cur-view-container"},l.a.createElement(xr,{currentItem:"all"}),l.a.createElement("div",{className:"cur-view-content"},l.a.createElement(Sr,{loading:this.state.loading,errorMsg:this.state.errorMsg,virusFiles:this.state.virusFiles,currentPage:this.state.currentPage,hasNextPage:this.state.hasNextPage,curPerPage:this.state.perPage,resetPerPage:this.resetPerPage,getListByPage:this.getListByPage,handleFile:this.handleFile})))))}}]),a}(s.Component),Dr=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).handleMouseEnter=function(){r.props.isItemFreezed||r.setState({isOpIconShown:!0,highlight:!0})},r.handleMouseLeave=function(){r.props.isItemFreezed||r.setState({isOpIconShown:!1,highlight:!1})},r.onUnfreezedItem=function(){r.setState({highlight:!1,isOpIconShow:!1}),r.props.onUnfreezedItem()},r.onMenuItemClick=function(e){r.props.handleFile(r.props.virusFile.virus_id,e)},r.translateOperations=function(e){var t="";switch(e){case"delete":t=Object(d.mb)("Delete");break;case"ignore":t=Object(d.mb)("Ignore");break;case"do-not-ignore":t=Object(d.mb)("Don't ignore")}return t},r.toggleItemSelected=function(e){r.props.toggleItemSelected(r.props.virusFile,e.target.checked)},r.state={highlight:!1,isOpIconShown:!1},r}return Object(r.a)(a,[{key:"render",value:function(){var e=this.props.virusFile,t="",a=[];return e.has_deleted?t=l.a.createElement("span",{className:"text-green"},Object(d.mb)("Deleted")):e.has_ignored?(t=l.a.createElement("span",{className:"text-orange"},Object(d.mb)("Ignored")),a=["do-not-ignore"]):(t=l.a.createElement("span",{className:"text-red"},Object(d.mb)("Unhandled")),a=["delete","ignore"]),l.a.createElement("tr",{className:this.state.highlight?"tr-highlight":"",onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave},l.a.createElement("td",{className:"text-center"},l.a.createElement("input",{type:"checkbox",checked:e.isSelected,onChange:this.toggleItemSelected})),l.a.createElement("td",null,e.repo_name),l.a.createElement("td",null,e.repo_owner),l.a.createElement("td",null,e.file_path),l.a.createElement("td",null,t),l.a.createElement("td",null,a.length>0&&this.state.isOpIconShown&&l.a.createElement(Ce,{operations:a,translateOperations:this.translateOperations,onMenuItemClick:this.onMenuItemClick,onFreezedItem:this.props.onFreezedItem,onUnfreezedItem:this.onUnfreezedItem})))}}]),a}(s.Component),jr=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).onFreezedItem=function(){r.setState({isItemFreezed:!0})},r.onUnfreezedItem=function(){r.setState({isItemFreezed:!1})},r.getPreviousPage=function(){r.props.getListByPage(r.props.currentPage-1)},r.getNextPage=function(){r.props.getListByPage(r.props.currentPage+1)},r.state={isItemFreezed:!1},r}return Object(r.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.loading,n=t.errorMsg,r=t.virusFiles,i=t.curPerPage,o=t.hasNextPage,c=t.currentPage,u=t.isAllItemsSelected;return a?l.a.createElement(y.a,null):n?l.a.createElement("p",{className:"error text-center mt-4"},n):l.a.createElement(s.Fragment,null,l.a.createElement("table",null,l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",{width:"3%",className:"text-center"},l.a.createElement("input",{type:"checkbox",checked:u,onChange:this.props.toggleAllSelected})),l.a.createElement("th",{width:"24%"},Object(d.mb)("Library")),l.a.createElement("th",{width:"25%"},Object(d.mb)("Owner")),l.a.createElement("th",{width:"28%"},Object(d.mb)("Virus File")),l.a.createElement("th",{width:"15%"},Object(d.mb)("Status")),l.a.createElement("th",{width:"5%"}))),l.a.createElement("tbody",null,r.map((function(t,a){return l.a.createElement(Dr,{key:a,virusFile:t,isItemFreezed:e.state.isItemFreezed,onFreezedItem:e.onFreezedItem,onUnfreezedItem:e.onUnfreezedItem,handleFile:e.props.handleFile,toggleItemSelected:e.props.toggleItemSelected})})))),r.length>0&&l.a.createElement(X.a,{gotoPreviousPage:this.getPreviousPage,gotoNextPage:this.getNextPage,currentPage:c,hasNextPage:o,curPerPage:i,resetPerPage:this.props.resetPerPage}))}}]),a}(s.Component),Cr=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).getListByPage=function(e){var t=r.state.perPage;b.a.listVirusFiles(e,t,!1).then((function(e){var t=e.data,a=t.virus_file_list.map((function(e){return e.isSelected=!1,e}));r.setState({loading:!1,virusFiles:a,hasNextPage:t.has_next_page})})).catch((function(e){r.setState({loading:!1,errorMsg:E.a.getErrorMsg(e,!0)})}))},r.resetPerPage=function(e){r.setState({perPage:e},(function(){r.getListByPage(1)}))},r.handleFile=function(e,t){var a;switch(t){case"delete":a=b.a.deleteVirusFile(e);break;case"ignore":a=b.a.toggleIgnoreVirusFile(e,!0);break;case"do-not-ignore":a=b.a.toggleIgnoreVirusFile(e,!1)}a.then((function(a){r.setState({virusFiles:r.state.virusFiles.map((function(n){return n.virus_id==e&&("delete"==t?n.has_deleted=!0:n=a.data.virus_file),n}))})})).catch((function(e){v.a.danger(E.a.getErrorMsg(e))}))},r.toggleAllSelected=function(){r.setState((function(e){return{isAllItemsSelected:!e.isAllItemsSelected,virusFiles:r.state.virusFiles.map((function(t){return t.isSelected=!e.isAllItemsSelected,t}))}}))},r.toggleItemSelected=function(e,t){r.setState({virusFiles:r.state.virusFiles.map((function(a){return a===e&&(a.isSelected=t),a}))},(function(){r.setState({isAllItemsSelected:!r.state.virusFiles.some((function(e){return!e.isSelected}))})}))},r.handleSelectedItems=function(e){var t=r.state.virusFiles.filter((function(t){return"delete-virus"==e?t.isSelected&&!t.has_deleted:t.isSelected&&!t.has_ignored})).map((function(e){return e.virus_id}));b.a.batchProcessVirusFiles(t,e).then((function(t){var a=r.state.virusFiles;t.data.success.forEach((function(t){var n=a.find((function(e){return e.virus_id==t.virus_id}));"delete-virus"==e?n.has_deleted=!0:n.has_ignored=!0})),r.setState({virusFiles:a}),t.data.failed.forEach((function(t){var n=a.find((function(e){return e.virus_id==t.virus_id})),r="delete-virus"==e?Object(d.mb)("Failed to delete %(virus_file) from library %(library): %(error_msg)"):Object(d.mb)("Failed to ignore %(virus_file) from library %(library): %(error_msg)");r=r.replace("%(virus_file)",n.file_path).replace("%(library)",n.repo_name).replace("%(error_msg)",t.error_msg),v.a.danger(r)}))})).catch((function(e){v.a.danger(E.a.getErrorMsg(e))}))},r.deleteSelectedItems=function(){r.handleSelectedItems("delete-virus")},r.ignoreSelectedItems=function(){r.handleSelectedItems("ignore-virus")},r.state={loading:!0,errorMsg:"",virusFiles:[],isAllItemsSelected:!1,selectedItems:[],currentPage:1,perPage:25,hasNextPage:!1},r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=new URL(window.location).searchParams,a=this.state,n=a.currentPage,r=a.perPage;this.setState({perPage:parseInt(t.get("per_page")||r),currentPage:parseInt(t.get("page")||n)},(function(){e.getListByPage(e.state.currentPage)}))}},{key:"render",value:function(){return l.a.createElement(s.Fragment,null,this.state.virusFiles.some((function(e){return e.isSelected}))?l.a.createElement(x,null,l.a.createElement(s.Fragment,null,l.a.createElement(f.c,{onClick:this.deleteSelectedItems,className:"operation-item"},Object(d.mb)("Delete")),l.a.createElement(f.c,{onClick:this.ignoreSelectedItems,className:"operation-item"},Object(d.mb)("Ignore")))):l.a.createElement(x,null),l.a.createElement("div",{className:"main-panel-center"},l.a.createElement("div",{className:"cur-view-container"},l.a.createElement(xr,{currentItem:"unhandled"}),l.a.createElement("div",{className:"cur-view-content"},l.a.createElement(jr,{loading:this.state.loading,errorMsg:this.state.errorMsg,virusFiles:this.state.virusFiles,currentPage:this.state.currentPage,hasNextPage:this.state.hasNextPage,curPerPage:this.state.perPage,resetPerPage:this.resetPerPage,getListByPage:this.getListByPage,handleFile:this.handleFile,isAllItemsSelected:this.state.isAllItemsSelected,toggleAllSelected:this.toggleAllSelected,toggleItemSelected:this.toggleItemSelected})))))}}]),a}(s.Component),Nr=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).navItems=[{name:"adminOperationLogs",urlPart:"admin-logs/operation",text:Object(d.mb)("Admin Operation Logs")},{name:"adminLoginLogs",urlPart:"admin-logs/login",text:Object(d.mb)("Admin Login Logs")}],r}return Object(r.a)(a,[{key:"render",value:function(){var e=this.props.currentItem;return l.a.createElement("div",{className:"cur-view-path tab-nav-container"},l.a.createElement("ul",{className:"nav"},this.navItems.map((function(t,a){return l.a.createElement("li",{className:"nav-item",key:a},l.a.createElement(m.a,{to:"".concat(d.ic,"sys/").concat(t.urlPart,"/"),className:"nav-link".concat(e==t.name?" active":"")},t.text))}))))}}]),a}(l.a.Component),Pr=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).getPreviousPage=function(){r.props.getLogsByPage(r.props.currentPage-1)},r.getNextPage=function(){r.props.getLogsByPage(r.props.currentPage+1)},r}return Object(r.a)(a,[{key:"render",value:function(){var e=this.props,t=e.loading,a=e.errorMsg,n=e.items,r=e.perPage,i=e.currentPage,o=e.hasNextPage;if(t)return l.a.createElement(y.a,null);if(a)return l.a.createElement("p",{className:"error text-center"},a);var c=l.a.createElement(ne.a,null,l.a.createElement("h2",null,Object(d.mb)("No Admin operation logs"))),u=l.a.createElement(s.Fragment,null,l.a.createElement("table",{className:"table-hover"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",{width:"20%"},Object(d.mb)("Name")),l.a.createElement("th",{width:"15%"},Object(d.mb)("Operation")),l.a.createElement("th",{width:"50%"},Object(d.mb)("Detail")),l.a.createElement("th",{width:"15%"},Object(d.mb)("Time")))),n&&l.a.createElement("tbody",null,n.map((function(e,t){return l.a.createElement(_r,{key:t,item:e})})))),l.a.createElement(X.a,{gotoPreviousPage:this.getPreviousPage,gotoNextPage:this.getNextPage,currentPage:i,hasNextPage:o,curPerPage:r,resetPerPage:this.props.resetPerPage}));return n.length?u:c}}]),a}(s.Component),_r=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).getOperationText=function(e){switch(e){case"repo_create":return Object(d.mb)("Create Library");case"repo_delete":return Object(d.mb)("Delete Library");case"repo_transfer":return Object(d.mb)("Transfer Library");case"group_create":return Object(d.mb)("Create Group");case"group_transfer":return Object(d.mb)("Transfer Group");case"group_delete":return Object(d.mb)("Delete Group");case"user_add":return Object(d.mb)("Add User");case"user_delete":return Object(d.mb)("Delete User");default:return""}},r.getOperationDetail=function(e){var t=e.detail,a="";t.owner&&(a=d.ic+"sys/users/"+encodeURIComponent(t.owner)+"/");var n="";t.email&&(n=d.ic+"sys/users/"+encodeURIComponent(t.email)+"/");var r="",i="",o="";switch("repo_create"!=e.operation&&"repo_delete"!=e.operation&&"repo_transfer"!=e.operation||(i=d.ic+"sys/libraries/"+t.id+"/"+encodeURIComponent(t.name)+"/"),"group_create"!=e.operation&&"group_delete"!=e.operation&&"group_transfer"!=e.operation||(o=d.ic+"sys/groups/"+t.id+"/libraries/"),e.operation){case"repo_create":return r=Object(d.mb)("Created library {library_name} with {owner} as its owner").replace("{owner}",'<a href="'+a+'">'+t.owner+"</a>"),r=d.wb&&d.bb?r.replace("{library_name}",'<a href="'+i+'">'+t.name+"</a>"):r.replace("{library_name}",'<span class="font-weight-bold">'+t.name+"</span>");case"repo_delete":return r=Object(d.mb)("Deleted library {library_name}").replace("{library_name}",'<span class="font-weight-bold">'+t.name+"</span>");case"repo_transfer":return r=Object(d.mb)("Transferred library {library_name} from {user_from} to {user_to}").replace("{user_from}",'<span class="font-weight-bold">'+t.from+"</span>").replace("{user_to}",'<span class="font-weight-bold">'+t.to+"</span>"),r=d.wb&&d.bb?r.replace("{library_name}",'<a href="'+i+'">'+t.name+"</a>"):r.replace("{library_name}",'<span class="font-weight-bold">'+t.name+"</span>");case"group_create":return r=Object(d.mb)("Created group {group_name}").replace("{group_name}",'<a href="'+o+'">'+t.name+"</a>");case"group_transfer":return r=Object(d.mb)("Transferred group {group_name} from {user_from} to {user_to}").replace("{user_from}",'<span class="font-weight-bold">'+t.from+"</span>").replace("{user_to}",'<span class="font-weight-bold">'+t.to+"</span>").replace("{group_name}",'<a href="'+o+'">'+t.name+"</a>");case"group_delete":return r=Object(d.mb)("Deleted group {group_name}").replace("{group_name}",'<span class="font-weight-bold">'+t.name+"</span>");case"user_add":return r=Object(d.mb)("Added user {user}").replace("{user}",'<a href="'+n+'">'+t.email+"</a>");case"user_delete":return r=Object(d.mb)("Deleted user {user}").replace("{user}",'<span class="font-weight-bold">'+t.email+"</span>");default:return""}},r.state={isOpIconShown:!1},r}return Object(r.a)(a,[{key:"render",value:function(){var e=this.props.item;return l.a.createElement("tr",{onMouseOver:this.handleMouseOver,onMouseOut:this.handleMouseOut},l.a.createElement("td",null,l.a.createElement(ue,{email:e.email,name:e.name})),l.a.createElement("td",null,this.getOperationText(e.operation)),l.a.createElement("td",null,l.a.createElement("span",{dangerouslySetInnerHTML:{__html:this.getOperationDetail(e)}})),l.a.createElement("td",null,w()(e.datetime).fromNow()))}}]),a}(s.Component),Mr=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).getLogsByPage=function(e){var t=r.state.perPage;b.a.sysAdminListAdminLogs(e,t).then((function(a){r.setState({logList:a.data.data,loading:!1,currentPage:e,hasNextPage:E.a.hasNextPage(e,t,a.data.total_count)})})).catch((function(e){r.setState({loading:!1,errorMsg:E.a.getErrorMsg(e,!0)})}))},r.resetPerPage=function(e){r.setState({perPage:e},(function(){return r.getLogsByPage(r.initPage)}))},r.state={loading:!0,errorMsg:"",logList:[],perPage:25,currentPage:1,hasNextPage:!1},r.initPage=1,r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=new URL(window.location).searchParams,a=this.state,n=a.currentPage,r=a.perPage;this.setState({perPage:parseInt(t.get("per_page")||r),currentPage:parseInt(t.get("page")||n)},(function(){e.getLogsByPage(e.state.currentPage)}))}},{key:"render",value:function(){var e=this.state,t=e.logList,a=e.currentPage,n=e.perPage,r=e.hasNextPage;return l.a.createElement(s.Fragment,null,l.a.createElement(x,null),l.a.createElement("div",{className:"main-panel-center flex-row"},l.a.createElement("div",{className:"cur-view-container"},l.a.createElement(Nr,{currentItem:"adminOperationLogs"}),l.a.createElement("div",{className:"cur-view-content"},l.a.createElement(Pr,{loading:this.state.loading,errorMsg:this.state.errorMsg,items:t,currentPage:a,perPage:n,hasNextPage:r,getLogsByPage:this.getLogsByPage,resetPerPage:this.resetPerPage})))))}}]),a}(s.Component),Ir=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).getPreviousPage=function(){r.props.getLogsByPage(r.props.currentPage-1)},r.getNextPage=function(){r.props.getLogsByPage(r.props.currentPage+1)},r}return Object(r.a)(a,[{key:"render",value:function(){var e=this.props,t=e.loading,a=e.errorMsg,n=e.items,r=e.perPage,i=e.currentPage,o=e.hasNextPage;if(t)return l.a.createElement(y.a,null);if(a)return l.a.createElement("p",{className:"error text-center"},a);var c=l.a.createElement(ne.a,null,l.a.createElement("h2",null,Object(d.mb)("No Admin login logs"))),u=l.a.createElement(s.Fragment,null,l.a.createElement("table",{className:"table-hover"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",{width:"25%"},Object(d.mb)("Name")),l.a.createElement("th",{width:"25%"},Object(d.mb)("IP")),l.a.createElement("th",{width:"25%"},Object(d.mb)("Status")),l.a.createElement("th",{width:"25%"},Object(d.mb)("Time")))),n&&l.a.createElement("tbody",null,n.map((function(e,t){return l.a.createElement(Tr,{key:t,item:e})})))),l.a.createElement(X.a,{gotoPreviousPage:this.getPreviousPage,gotoNextPage:this.getNextPage,currentPage:i,hasNextPage:o,curPerPage:r,resetPerPage:this.props.resetPerPage}));return n.length?u:c}}]),a}(s.Component),Tr=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){return Object(n.a)(this,a),t.call(this,e)}return Object(r.a)(a,[{key:"render",value:function(){var e=this.props.item;return l.a.createElement("tr",{onMouseOver:this.handleMouseOver,onMouseOut:this.handleMouseOut},l.a.createElement("td",null,l.a.createElement(ue,{email:e.email,name:e.name})),l.a.createElement("td",null,e.login_ip),l.a.createElement("td",null,e.login_success?Object(d.mb)("Success"):Object(d.mb)("Failed")),l.a.createElement("td",null,w()(e.login_time).fromNow()))}}]),a}(s.Component),Ar=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).getLogsByPage=function(e){var t=r.state.perPage;b.a.sysAdminListAdminLoginLogs(e,t).then((function(a){r.setState({logList:a.data.data,loading:!1,currentPage:e,hasNextPage:E.a.hasNextPage(e,t,a.data.total_count)})})).catch((function(e){r.setState({loading:!1,errorMsg:E.a.getErrorMsg(e,!0)})}))},r.resetPerPage=function(e){r.setState({perPage:e},(function(){return r.getLogsByPage(r.initPage)}))},r.state={loading:!0,errorMsg:"",logList:[],perPage:25,currentPage:1,hasNextPage:!1},r.initPage=1,r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=new URL(window.location).searchParams,a=this.state,n=a.currentPage,r=a.perPage;this.setState({perPage:parseInt(t.get("per_page")||r),currentPage:parseInt(t.get("page")||n)},(function(){e.getLogsByPage(e.state.currentPage)}))}},{key:"render",value:function(){var e=this.state,t=e.logList,a=e.currentPage,n=e.perPage,r=e.hasNextPage;return l.a.createElement(s.Fragment,null,l.a.createElement(x,null),l.a.createElement("div",{className:"main-panel-center flex-row"},l.a.createElement("div",{className:"cur-view-container"},l.a.createElement(Nr,{currentItem:"adminLoginLogs"}),l.a.createElement("div",{className:"cur-view-content"},l.a.createElement(Ir,{loading:this.state.loading,errorMsg:this.state.errorMsg,items:t,currentPage:a,perPage:n,hasNextPage:r,getLogsByPage:this.getLogsByPage,resetPerPage:this.resetPerPage})))))}}]),a}(s.Component),Lr=(a(135),a(93),function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).getCurrentTabForPageList=function(e){for(var t,a,n="".concat(d.ic,"sys/"),r=0,i=e.length;r<i;r++){t=e[r].urlPartList,a=e[r].tab;for(var o=0,s=t.length;o<s;o++)if(-1!=location.href.indexOf("".concat(n).concat(t[o])))return a}},r.onCloseSidePanel=function(){r.setState({isSidePanelClosed:!r.state.isSidePanelClosed})},r.tabItemClick=function(e){r.setState({currentTab:e})},r.state={isSidePanelClosed:!1,currentTab:"file-scan"},r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=window.location.href.split("/"),t=e[e.length-2],a=this.getCurrentTabForPageList([{tab:"devices",urlPartList:["desktop-devices","mobile-devices","device-errors"]},{tab:"libraries",urlPartList:["all-libraries","search-libraries","system-library","trash-libraries","libraries/"]},{tab:"statistic",urlPartList:["statistics/file","statistics/storage","statistics/user","statistics/traffic","statistics/reports"]},{tab:"users",urlPartList:["users/","search-users/"]},{tab:"groups",urlPartList:["groups/","search-groups/"]},{tab:"organizations",urlPartList:["organizations/","search-organizations/"]},{tab:"links",urlPartList:["share-links/","upload-links/"]},{tab:"institutions",urlPartList:["institutions/"]},{tab:"termsandconditions",urlPartList:["terms-and-conditions/"]},{tab:"departments",urlPartList:["departments/"]},{tab:"logs",urlPartList:["logs/"]},{tab:"virus-files",urlPartList:["virus-files/"]},{tab:"adminLogs",urlPartList:["admin-logs/"]}]);t=a||t,this.setState({currentTab:t})}},{key:"render",value:function(){var e=this.state,t=e.currentTab,a=e.isSidePanelClosed;return l.a.createElement("div",{id:"main"},l.a.createElement(h,{isSidePanelClosed:a,onCloseSidePanel:this.onCloseSidePanel,currentTab:t,tabItemClick:this.tabItemClick}),l.a.createElement(g,null,l.a.createElement(m.b,{className:"reach-router"},l.a.createElement(k,{path:d.ic+"sys/info"}),l.a.createElement(W,{path:d.ic+"sys/statistics/file"}),l.a.createElement(G,{path:d.ic+"sys/statistics/storage"}),l.a.createElement(ee,{path:d.ic+"sys/statistics/user"}),l.a.createElement(Z,{path:d.ic+"sys/statistics/traffic"}),l.a.createElement(te,{path:d.ic+"sys/statistics/reports"}),l.a.createElement(le,{path:d.ic+"sys/desktop-devices"}),l.a.createElement(ce,{path:d.ic+"sys/mobile-devices"}),l.a.createElement(pe,{path:d.ic+"sys/device-errors"}),l.a.createElement(Mt,{path:d.ic+"sys/all-libraries"}),l.a.createElement(At,{path:d.ic+"sys/system-library"}),l.a.createElement(Ut,{path:d.ic+"sys/trash-libraries"}),l.a.createElement(Bt,{path:d.ic+"sys/search-libraries"}),l.a.createElement(Yt,{path:d.ic+"sys/libraries/:repoID/*"}),l.a.createElement(Tn,{path:d.ic+"sys/web-settings"}),l.a.createElement(Fn,{path:d.ic+"sys/notifications"}),l.a.createElement(Zt,{path:d.ic+"sys/groups"}),l.a.createElement(ea,{path:d.ic+"sys/search-groups"}),l.a.createElement(ia,{path:d.ic+"sys/groups/:groupID/libraries"}),l.a.createElement(ua,{path:d.ic+"sys/groups/:groupID/members"}),l.a.createElement(ma,{path:d.ic+"sys/departments"},l.a.createElement(fa,{path:"/"}),l.a.createElement(Sa,{path:"/:groupID"})),l.a.createElement(Ca,{path:d.ic+"sys/share-links"}),l.a.createElement(_a,{path:d.ic+"sys/upload-links"}),l.a.createElement(Ra,{path:d.ic+"sys/organizations"}),l.a.createElement(Fa,{path:d.ic+"sys/search-organizations"}),l.a.createElement(qa,{path:d.ic+"sys/organizations/:orgID/info"}),l.a.createElement(Ga,{path:d.ic+"sys/organizations/:orgID/users"}),l.a.createElement(Ka,{path:d.ic+"sys/organizations/:orgID/groups"}),l.a.createElement(Ja,{path:d.ic+"sys/organizations/:orgID/libraries"}),l.a.createElement(an,{path:d.ic+"sys/institutions"}),l.a.createElement(on,{path:d.ic+"sys/institutions/:institutionID/info"}),l.a.createElement(un,{path:d.ic+"sys/institutions/:institutionID/members"}),l.a.createElement(pn,{path:d.ic+"sys/institutions/:institutionID/admins"}),l.a.createElement(vn,{path:d.ic+"sys/logs/login"}),l.a.createElement(On,{path:d.ic+"sys/logs/file-access"}),l.a.createElement(wn,{path:d.ic+"sys/logs/file-update"}),l.a.createElement(Cn,{path:d.ic+"sys/logs/share-permission"}),l.a.createElement(Mr,{path:d.ic+"sys/admin-logs/operation"}),l.a.createElement(Ar,{path:d.ic+"sys/admin-logs/login"}),l.a.createElement(Re,{path:d.ic+"sys/users"}),l.a.createElement(Fe,{path:d.ic+"sys/users/admins"}),l.a.createElement(Ue,{path:d.ic+"sys/users/ldap-imported"}),l.a.createElement(He,{path:d.ic+"sys/users/ldap"}),l.a.createElement(qe,{path:d.ic+"sys/search-users"}),l.a.createElement(Qe,{path:d.ic+"sys/users/:email"}),l.a.createElement(Ze,{path:d.ic+"sys/users/:email/owned-libraries"}),l.a.createElement(nt,{path:d.ic+"sys/users/:email/shared-libraries"}),l.a.createElement(st,{path:d.ic+"sys/users/:email/shared-links"}),l.a.createElement(ut,{path:d.ic+"sys/users/:email/groups"}),l.a.createElement(rr,{path:d.ic+"sys/invitations"}),l.a.createElement(Or,{path:d.ic+"sys/terms-and-conditions/"}),l.a.createElement(wr,{path:d.ic+"sys/virus-files/all"}),l.a.createElement(Cr,{path:d.ic+"sys/virus-files/unhandled"}),l.a.createElement(zn,{path:d.ic+"sys/file-scan-records",currentTab:t,tabItemClick:this.tabItemClick}),l.a.createElement(Xn,{path:d.ic+"sys/work-weixin",currentTab:t,tabItemClick:this.tabItemClick}),l.a.createElement(tr,{path:d.ic+"sys/dingtalk",currentTab:t,tabItemClick:this.tabItemClick}),l.a.createElement(he,{path:d.ic+"sys/abuse-reports"}))))}}]),a}(l.a.Component));u.a.render(l.a.createElement(Lr,null),document.getElementById("wrapper"))},159:function(e,t,a){},161:function(e,t,a){"use strict";var n=a(5),r=a(6),i=a(8),o=a(7),s=a(0),l=a.n(s),c=a(3),u=a(100),m=a(1),d=a(10),p=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).copyToClipboard=function(){Object(u.a)(r.props.link),r.props.toggleDialog(),d.a.success(Object(m.mb)("The link is copied to the clipboard."))},r}return Object(r.a)(a,[{key:"render",value:function(){var e=this.props,t=e.link,a=e.toggleDialog;return l.a.createElement(c.x,{isOpen:!0,toggle:a},l.a.createElement(c.A,{toggle:a},Object(m.mb)("Link")),l.a.createElement(c.y,null,l.a.createElement("a",{href:t},t)),l.a.createElement(c.z,null,l.a.createElement(c.c,{color:"primary",onClick:this.copyToClipboard},Object(m.mb)("Copy")),l.a.createElement(c.c,{color:"secondary",onClick:a},Object(m.mb)("Close"))))}}]),a}(l.a.Component);t.a=p},202:function(e,t,a){e.exports=function(e){"use strict";function t(e,t){return e(t={exports:{}},t.exports),t.exports}function a(e){return e&&e.default||e}e=e&&e.hasOwnProperty("default")?e.default:e;var n={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},r=t((function(e){var t={};for(var a in n)n.hasOwnProperty(a)&&(t[n[a]]=a);var r=e.exports={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};for(var i in r)if(r.hasOwnProperty(i)){if(!("channels"in r[i]))throw new Error("missing channels property: "+i);if(!("labels"in r[i]))throw new Error("missing channel labels property: "+i);if(r[i].labels.length!==r[i].channels)throw new Error("channel and label counts mismatch: "+i);var o=r[i].channels,s=r[i].labels;delete r[i].channels,delete r[i].labels,Object.defineProperty(r[i],"channels",{value:o}),Object.defineProperty(r[i],"labels",{value:s})}function l(e,t){return Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2)+Math.pow(e[2]-t[2],2)}r.rgb.hsl=function(e){var t,a,n=e[0]/255,r=e[1]/255,i=e[2]/255,o=Math.min(n,r,i),s=Math.max(n,r,i),l=s-o;return s===o?t=0:n===s?t=(r-i)/l:r===s?t=2+(i-n)/l:i===s&&(t=4+(n-r)/l),(t=Math.min(60*t,360))<0&&(t+=360),a=(o+s)/2,[t,100*(s===o?0:a<=.5?l/(s+o):l/(2-s-o)),100*a]},r.rgb.hsv=function(e){var t,a,n,r,i,o=e[0]/255,s=e[1]/255,l=e[2]/255,c=Math.max(o,s,l),u=c-Math.min(o,s,l),m=function(e){return(c-e)/6/u+.5};return 0===u?r=i=0:(i=u/c,t=m(o),a=m(s),n=m(l),o===c?r=n-a:s===c?r=1/3+t-n:l===c&&(r=2/3+a-t),r<0?r+=1:r>1&&(r-=1)),[360*r,100*i,100*c]},r.rgb.hwb=function(e){var t=e[0],a=e[1],n=e[2];return[r.rgb.hsl(e)[0],1/255*Math.min(t,Math.min(a,n))*100,100*(n=1-1/255*Math.max(t,Math.max(a,n)))]},r.rgb.cmyk=function(e){var t,a=e[0]/255,n=e[1]/255,r=e[2]/255;return[100*((1-a-(t=Math.min(1-a,1-n,1-r)))/(1-t)||0),100*((1-n-t)/(1-t)||0),100*((1-r-t)/(1-t)||0),100*t]},r.rgb.keyword=function(e){var a=t[e];if(a)return a;var r,i=1/0;for(var o in n)if(n.hasOwnProperty(o)){var s=l(e,n[o]);s<i&&(i=s,r=o)}return r},r.keyword.rgb=function(e){return n[e]},r.rgb.xyz=function(e){var t=e[0]/255,a=e[1]/255,n=e[2]/255;return[100*(.4124*(t=t>.04045?Math.pow((t+.055)/1.055,2.4):t/12.92)+.3576*(a=a>.04045?Math.pow((a+.055)/1.055,2.4):a/12.92)+.1805*(n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92)),100*(.2126*t+.7152*a+.0722*n),100*(.0193*t+.1192*a+.9505*n)]},r.rgb.lab=function(e){var t=r.rgb.xyz(e),a=t[0],n=t[1],i=t[2];return n/=100,i/=108.883,a=(a/=95.047)>.008856?Math.pow(a,1/3):7.787*a+16/116,[116*(n=n>.008856?Math.pow(n,1/3):7.787*n+16/116)-16,500*(a-n),200*(n-(i=i>.008856?Math.pow(i,1/3):7.787*i+16/116))]},r.hsl.rgb=function(e){var t,a,n,r,i,o=e[0]/360,s=e[1]/100,l=e[2]/100;if(0===s)return[i=255*l,i,i];t=2*l-(a=l<.5?l*(1+s):l+s-l*s),r=[0,0,0];for(var c=0;c<3;c++)(n=o+1/3*-(c-1))<0&&n++,n>1&&n--,i=6*n<1?t+6*(a-t)*n:2*n<1?a:3*n<2?t+(a-t)*(2/3-n)*6:t,r[c]=255*i;return r},r.hsl.hsv=function(e){var t=e[0],a=e[1]/100,n=e[2]/100,r=a,i=Math.max(n,.01);return a*=(n*=2)<=1?n:2-n,r*=i<=1?i:2-i,[t,100*(0===n?2*r/(i+r):2*a/(n+a)),(n+a)/2*100]},r.hsv.rgb=function(e){var t=e[0]/60,a=e[1]/100,n=e[2]/100,r=Math.floor(t)%6,i=t-Math.floor(t),o=255*n*(1-a),s=255*n*(1-a*i),l=255*n*(1-a*(1-i));switch(n*=255,r){case 0:return[n,l,o];case 1:return[s,n,o];case 2:return[o,n,l];case 3:return[o,s,n];case 4:return[l,o,n];case 5:return[n,o,s]}},r.hsv.hsl=function(e){var t,a,n,r=e[0],i=e[1]/100,o=e[2]/100,s=Math.max(o,.01);return n=(2-i)*o,a=i*s,[r,100*(a=(a/=(t=(2-i)*s)<=1?t:2-t)||0),100*(n/=2)]},r.hwb.rgb=function(e){var t,a,n,r,i,o,s,l=e[0]/360,c=e[1]/100,u=e[2]/100,m=c+u;switch(m>1&&(c/=m,u/=m),n=6*l-(t=Math.floor(6*l)),0!==(1&t)&&(n=1-n),r=c+n*((a=1-u)-c),t){default:case 6:case 0:i=a,o=r,s=c;break;case 1:i=r,o=a,s=c;break;case 2:i=c,o=a,s=r;break;case 3:i=c,o=r,s=a;break;case 4:i=r,o=c,s=a;break;case 5:i=a,o=c,s=r}return[255*i,255*o,255*s]},r.cmyk.rgb=function(e){var t=e[0]/100,a=e[1]/100,n=e[2]/100,r=e[3]/100;return[255*(1-Math.min(1,t*(1-r)+r)),255*(1-Math.min(1,a*(1-r)+r)),255*(1-Math.min(1,n*(1-r)+r))]},r.xyz.rgb=function(e){var t,a,n,r=e[0]/100,i=e[1]/100,o=e[2]/100;return a=-.9689*r+1.8758*i+.0415*o,n=.0557*r+-.204*i+1.057*o,t=(t=3.2406*r+-1.5372*i+-.4986*o)>.0031308?1.055*Math.pow(t,1/2.4)-.055:12.92*t,a=a>.0031308?1.055*Math.pow(a,1/2.4)-.055:12.92*a,n=n>.0031308?1.055*Math.pow(n,1/2.4)-.055:12.92*n,[255*(t=Math.min(Math.max(0,t),1)),255*(a=Math.min(Math.max(0,a),1)),255*(n=Math.min(Math.max(0,n),1))]},r.xyz.lab=function(e){var t=e[0],a=e[1],n=e[2];return a/=100,n/=108.883,t=(t/=95.047)>.008856?Math.pow(t,1/3):7.787*t+16/116,[116*(a=a>.008856?Math.pow(a,1/3):7.787*a+16/116)-16,500*(t-a),200*(a-(n=n>.008856?Math.pow(n,1/3):7.787*n+16/116))]},r.lab.xyz=function(e){var t,a,n,r=e[0];t=e[1]/500+(a=(r+16)/116),n=a-e[2]/200;var i=Math.pow(a,3),o=Math.pow(t,3),s=Math.pow(n,3);return a=i>.008856?i:(a-16/116)/7.787,t=o>.008856?o:(t-16/116)/7.787,n=s>.008856?s:(n-16/116)/7.787,[t*=95.047,a*=100,n*=108.883]},r.lab.lch=function(e){var t,a=e[0],n=e[1],r=e[2];return(t=360*Math.atan2(r,n)/2/Math.PI)<0&&(t+=360),[a,Math.sqrt(n*n+r*r),t]},r.lch.lab=function(e){var t,a=e[0],n=e[1];return t=e[2]/360*2*Math.PI,[a,n*Math.cos(t),n*Math.sin(t)]},r.rgb.ansi16=function(e){var t=e[0],a=e[1],n=e[2],i=1 in arguments?arguments[1]:r.rgb.hsv(e)[2];if(0===(i=Math.round(i/50)))return 30;var o=30+(Math.round(n/255)<<2|Math.round(a/255)<<1|Math.round(t/255));return 2===i&&(o+=60),o},r.hsv.ansi16=function(e){return r.rgb.ansi16(r.hsv.rgb(e),e[2])},r.rgb.ansi256=function(e){var t=e[0],a=e[1],n=e[2];return t===a&&a===n?t<8?16:t>248?231:Math.round((t-8)/247*24)+232:16+36*Math.round(t/255*5)+6*Math.round(a/255*5)+Math.round(n/255*5)},r.ansi16.rgb=function(e){var t=e%10;if(0===t||7===t)return e>50&&(t+=3.5),[t=t/10.5*255,t,t];var a=.5*(1+~~(e>50));return[(1&t)*a*255,(t>>1&1)*a*255,(t>>2&1)*a*255]},r.ansi256.rgb=function(e){if(e>=232){var t=10*(e-232)+8;return[t,t,t]}var a;return e-=16,[Math.floor(e/36)/5*255,Math.floor((a=e%36)/6)/5*255,a%6/5*255]},r.rgb.hex=function(e){var t=(((255&Math.round(e[0]))<<16)+((255&Math.round(e[1]))<<8)+(255&Math.round(e[2]))).toString(16).toUpperCase();return"000000".substring(t.length)+t},r.hex.rgb=function(e){var t=e.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!t)return[0,0,0];var a=t[0];3===t[0].length&&(a=a.split("").map((function(e){return e+e})).join(""));var n=parseInt(a,16);return[n>>16&255,n>>8&255,255&n]},r.rgb.hcg=function(e){var t,a=e[0]/255,n=e[1]/255,r=e[2]/255,i=Math.max(Math.max(a,n),r),o=Math.min(Math.min(a,n),r),s=i-o;return t=s<=0?0:i===a?(n-r)/s%6:i===n?2+(r-a)/s:4+(a-n)/s+4,t/=6,[360*(t%=1),100*s,100*(s<1?o/(1-s):0)]},r.hsl.hcg=function(e){var t=e[1]/100,a=e[2]/100,n=1,r=0;return(n=a<.5?2*t*a:2*t*(1-a))<1&&(r=(a-.5*n)/(1-n)),[e[0],100*n,100*r]},r.hsv.hcg=function(e){var t=e[1]/100,a=e[2]/100,n=t*a,r=0;return n<1&&(r=(a-n)/(1-n)),[e[0],100*n,100*r]},r.hcg.rgb=function(e){var t=e[0]/360,a=e[1]/100,n=e[2]/100;if(0===a)return[255*n,255*n,255*n];var r=[0,0,0],i=t%1*6,o=i%1,s=1-o,l=0;switch(Math.floor(i)){case 0:r[0]=1,r[1]=o,r[2]=0;break;case 1:r[0]=s,r[1]=1,r[2]=0;break;case 2:r[0]=0,r[1]=1,r[2]=o;break;case 3:r[0]=0,r[1]=s,r[2]=1;break;case 4:r[0]=o,r[1]=0,r[2]=1;break;default:r[0]=1,r[1]=0,r[2]=s}return l=(1-a)*n,[255*(a*r[0]+l),255*(a*r[1]+l),255*(a*r[2]+l)]},r.hcg.hsv=function(e){var t=e[1]/100,a=t+e[2]/100*(1-t),n=0;return a>0&&(n=t/a),[e[0],100*n,100*a]},r.hcg.hsl=function(e){var t=e[1]/100,a=e[2]/100*(1-t)+.5*t,n=0;return a>0&&a<.5?n=t/(2*a):a>=.5&&a<1&&(n=t/(2*(1-a))),[e[0],100*n,100*a]},r.hcg.hwb=function(e){var t=e[1]/100,a=t+e[2]/100*(1-t);return[e[0],100*(a-t),100*(1-a)]},r.hwb.hcg=function(e){var t=e[1]/100,a=1-e[2]/100,n=a-t,r=0;return n<1&&(r=(a-n)/(1-n)),[e[0],100*n,100*r]},r.apple.rgb=function(e){return[e[0]/65535*255,e[1]/65535*255,e[2]/65535*255]},r.rgb.apple=function(e){return[e[0]/255*65535,e[1]/255*65535,e[2]/255*65535]},r.gray.rgb=function(e){return[e[0]/100*255,e[0]/100*255,e[0]/100*255]},r.gray.hsl=r.gray.hsv=function(e){return[0,0,e[0]]},r.gray.hwb=function(e){return[0,100,e[0]]},r.gray.cmyk=function(e){return[0,0,0,e[0]]},r.gray.lab=function(e){return[e[0],0,0]},r.gray.hex=function(e){var t=255&Math.round(e[0]/100*255),a=((t<<16)+(t<<8)+t).toString(16).toUpperCase();return"000000".substring(a.length)+a},r.rgb.gray=function(e){return[(e[0]+e[1]+e[2])/3/255*100]}}));function i(){for(var e={},t=Object.keys(r),a=t.length,n=0;n<a;n++)e[t[n]]={distance:-1,parent:null};return e}function o(e){var t=i(),a=[e];for(t[e].distance=0;a.length;)for(var n=a.pop(),o=Object.keys(r[n]),s=o.length,l=0;l<s;l++){var c=o[l],u=t[c];-1===u.distance&&(u.distance=t[n].distance+1,u.parent=n,a.unshift(c))}return t}function s(e,t){return function(a){return t(e(a))}}function l(e,t){for(var a=[t[e].parent,e],n=r[t[e].parent][e],i=t[e].parent;t[i].parent;)a.unshift(t[i].parent),n=s(r[t[i].parent][i],n),i=t[i].parent;return n.conversion=a,n}r.rgb,r.hsl,r.hsv,r.hwb,r.cmyk,r.xyz,r.lab,r.lch,r.hex,r.keyword,r.ansi16,r.ansi256,r.hcg,r.apple,r.gray;var c=function(e){for(var t=o(e),a={},n=Object.keys(t),r=n.length,i=0;i<r;i++){var s=n[i];null!==t[s].parent&&(a[s]=l(s,t))}return a},u={};function m(e){var t=function(t){return void 0===t||null===t?t:(arguments.length>1&&(t=Array.prototype.slice.call(arguments)),e(t))};return"conversion"in e&&(t.conversion=e.conversion),t}function d(e){var t=function(t){if(void 0===t||null===t)return t;arguments.length>1&&(t=Array.prototype.slice.call(arguments));var a=e(t);if("object"===typeof a)for(var n=a.length,r=0;r<n;r++)a[r]=Math.round(a[r]);return a};return"conversion"in e&&(t.conversion=e.conversion),t}Object.keys(r).forEach((function(e){u[e]={},Object.defineProperty(u[e],"channels",{value:r[e].channels}),Object.defineProperty(u[e],"labels",{value:r[e].labels});var t=c(e);Object.keys(t).forEach((function(a){var n=t[a];u[e][a]=d(n),u[e][a].raw=m(n)}))}));var p=u,h={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},g={getRgba:f,getHsla:b,getRgb:E,getHsl:y,getHwb:v,getAlpha:O,hexString:x,rgbString:k,rgbaString:S,percentString:w,percentaString:D,hslString:j,hslaString:C,hwbString:N,keyword:P};function f(e){if(e){var t=/^#([a-fA-F0-9]{3,4})$/i,a=/^#([a-fA-F0-9]{6}([a-fA-F0-9]{2})?)$/i,n=/^rgba?\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/i,r=/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/i,i=/(\w+)/,o=[0,0,0],s=1,l=e.match(t),c="";if(l){c=(l=l[1])[3];for(var u=0;u<o.length;u++)o[u]=parseInt(l[u]+l[u],16);c&&(s=Math.round(parseInt(c+c,16)/255*100)/100)}else if(l=e.match(a)){for(c=l[2],l=l[1],u=0;u<o.length;u++)o[u]=parseInt(l.slice(2*u,2*u+2),16);c&&(s=Math.round(parseInt(c,16)/255*100)/100)}else if(l=e.match(n)){for(u=0;u<o.length;u++)o[u]=parseInt(l[u+1]);s=parseFloat(l[4])}else if(l=e.match(r)){for(u=0;u<o.length;u++)o[u]=Math.round(2.55*parseFloat(l[u+1]));s=parseFloat(l[4])}else if(l=e.match(i)){if("transparent"==l[1])return[0,0,0,0];if(!(o=h[l[1]]))return}for(u=0;u<o.length;u++)o[u]=_(o[u],0,255);return s=s||0==s?_(s,0,1):1,o[3]=s,o}}function b(e){if(e){var t=/^hsla?\(\s*([+-]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)/,a=e.match(t);if(a){var n=parseFloat(a[4]);return[_(parseInt(a[1]),0,360),_(parseFloat(a[2]),0,100),_(parseFloat(a[3]),0,100),_(isNaN(n)?1:n,0,1)]}}}function v(e){if(e){var t=/^hwb\(\s*([+-]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)/,a=e.match(t);if(a){var n=parseFloat(a[4]);return[_(parseInt(a[1]),0,360),_(parseFloat(a[2]),0,100),_(parseFloat(a[3]),0,100),_(isNaN(n)?1:n,0,1)]}}}function E(e){var t=f(e);return t&&t.slice(0,3)}function y(e){var t=b(e);return t&&t.slice(0,3)}function O(e){var t=f(e);return t||(t=b(e))||(t=v(e))?t[3]:void 0}function x(e,t){return t=void 0!==t&&3===e.length?t:e[3],"#"+M(e[0])+M(e[1])+M(e[2])+(t>=0&&t<1?M(Math.round(255*t)):"")}function k(e,t){return t<1||e[3]&&e[3]<1?S(e,t):"rgb("+e[0]+", "+e[1]+", "+e[2]+")"}function S(e,t){return void 0===t&&(t=void 0!==e[3]?e[3]:1),"rgba("+e[0]+", "+e[1]+", "+e[2]+", "+t+")"}function w(e,t){return t<1||e[3]&&e[3]<1?D(e,t):"rgb("+Math.round(e[0]/255*100)+"%, "+Math.round(e[1]/255*100)+"%, "+Math.round(e[2]/255*100)+"%)"}function D(e,t){return"rgba("+Math.round(e[0]/255*100)+"%, "+Math.round(e[1]/255*100)+"%, "+Math.round(e[2]/255*100)+"%, "+(t||e[3]||1)+")"}function j(e,t){return t<1||e[3]&&e[3]<1?C(e,t):"hsl("+e[0]+", "+e[1]+"%, "+e[2]+"%)"}function C(e,t){return void 0===t&&(t=void 0!==e[3]?e[3]:1),"hsla("+e[0]+", "+e[1]+"%, "+e[2]+"%, "+t+")"}function N(e,t){return void 0===t&&(t=void 0!==e[3]?e[3]:1),"hwb("+e[0]+", "+e[1]+"%, "+e[2]+"%"+(void 0!==t&&1!==t?", "+t:"")+")"}function P(e){return I[e.slice(0,3)]}function _(e,t,a){return Math.min(Math.max(t,e),a)}function M(e){var t=e.toString(16).toUpperCase();return t.length<2?"0"+t:t}var I={};for(var T in h)I[h[T]]=T;var A=function e(t){return t instanceof e?t:this instanceof e?(this.valid=!1,this.values={rgb:[0,0,0],hsl:[0,0,0],hsv:[0,0,0],hwb:[0,0,0],cmyk:[0,0,0,0],alpha:1},void("string"===typeof t?(a=g.getRgba(t))?this.setValues("rgb",a):(a=g.getHsla(t))?this.setValues("hsl",a):(a=g.getHwb(t))&&this.setValues("hwb",a):"object"===typeof t&&(void 0!==(a=t).r||void 0!==a.red?this.setValues("rgb",a):void 0!==a.l||void 0!==a.lightness?this.setValues("hsl",a):void 0!==a.v||void 0!==a.value?this.setValues("hsv",a):void 0!==a.w||void 0!==a.whiteness?this.setValues("hwb",a):void 0===a.c&&void 0===a.cyan||this.setValues("cmyk",a)))):new e(t);var a};A.prototype={isValid:function(){return this.valid},rgb:function(){return this.setSpace("rgb",arguments)},hsl:function(){return this.setSpace("hsl",arguments)},hsv:function(){return this.setSpace("hsv",arguments)},hwb:function(){return this.setSpace("hwb",arguments)},cmyk:function(){return this.setSpace("cmyk",arguments)},rgbArray:function(){return this.values.rgb},hslArray:function(){return this.values.hsl},hsvArray:function(){return this.values.hsv},hwbArray:function(){var e=this.values;return 1!==e.alpha?e.hwb.concat([e.alpha]):e.hwb},cmykArray:function(){return this.values.cmyk},rgbaArray:function(){var e=this.values;return e.rgb.concat([e.alpha])},hslaArray:function(){var e=this.values;return e.hsl.concat([e.alpha])},alpha:function(e){return void 0===e?this.values.alpha:(this.setValues("alpha",e),this)},red:function(e){return this.setChannel("rgb",0,e)},green:function(e){return this.setChannel("rgb",1,e)},blue:function(e){return this.setChannel("rgb",2,e)},hue:function(e){return e&&(e=(e%=360)<0?360+e:e),this.setChannel("hsl",0,e)},saturation:function(e){return this.setChannel("hsl",1,e)},lightness:function(e){return this.setChannel("hsl",2,e)},saturationv:function(e){return this.setChannel("hsv",1,e)},whiteness:function(e){return this.setChannel("hwb",1,e)},blackness:function(e){return this.setChannel("hwb",2,e)},value:function(e){return this.setChannel("hsv",2,e)},cyan:function(e){return this.setChannel("cmyk",0,e)},magenta:function(e){return this.setChannel("cmyk",1,e)},yellow:function(e){return this.setChannel("cmyk",2,e)},black:function(e){return this.setChannel("cmyk",3,e)},hexString:function(){return g.hexString(this.values.rgb)},rgbString:function(){return g.rgbString(this.values.rgb,this.values.alpha)},rgbaString:function(){return g.rgbaString(this.values.rgb,this.values.alpha)},percentString:function(){return g.percentString(this.values.rgb,this.values.alpha)},hslString:function(){return g.hslString(this.values.hsl,this.values.alpha)},hslaString:function(){return g.hslaString(this.values.hsl,this.values.alpha)},hwbString:function(){return g.hwbString(this.values.hwb,this.values.alpha)},keyword:function(){return g.keyword(this.values.rgb,this.values.alpha)},rgbNumber:function(){var e=this.values.rgb;return e[0]<<16|e[1]<<8|e[2]},luminosity:function(){for(var e=this.values.rgb,t=[],a=0;a<e.length;a++){var n=e[a]/255;t[a]=n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4)}return.2126*t[0]+.7152*t[1]+.0722*t[2]},contrast:function(e){var t=this.luminosity(),a=e.luminosity();return t>a?(t+.05)/(a+.05):(a+.05)/(t+.05)},level:function(e){var t=this.contrast(e);return t>=7.1?"AAA":t>=4.5?"AA":""},dark:function(){var e=this.values.rgb;return(299*e[0]+587*e[1]+114*e[2])/1e3<128},light:function(){return!this.dark()},negate:function(){for(var e=[],t=0;t<3;t++)e[t]=255-this.values.rgb[t];return this.setValues("rgb",e),this},lighten:function(e){var t=this.values.hsl;return t[2]+=t[2]*e,this.setValues("hsl",t),this},darken:function(e){var t=this.values.hsl;return t[2]-=t[2]*e,this.setValues("hsl",t),this},saturate:function(e){var t=this.values.hsl;return t[1]+=t[1]*e,this.setValues("hsl",t),this},desaturate:function(e){var t=this.values.hsl;return t[1]-=t[1]*e,this.setValues("hsl",t),this},whiten:function(e){var t=this.values.hwb;return t[1]+=t[1]*e,this.setValues("hwb",t),this},blacken:function(e){var t=this.values.hwb;return t[2]+=t[2]*e,this.setValues("hwb",t),this},greyscale:function(){var e=this.values.rgb,t=.3*e[0]+.59*e[1]+.11*e[2];return this.setValues("rgb",[t,t,t]),this},clearer:function(e){var t=this.values.alpha;return this.setValues("alpha",t-t*e),this},opaquer:function(e){var t=this.values.alpha;return this.setValues("alpha",t+t*e),this},rotate:function(e){var t=this.values.hsl,a=(t[0]+e)%360;return t[0]=a<0?360+a:a,this.setValues("hsl",t),this},mix:function(e,t){var a=this,n=e,r=void 0===t?.5:t,i=2*r-1,o=a.alpha()-n.alpha(),s=((i*o===-1?i:(i+o)/(1+i*o))+1)/2,l=1-s;return this.rgb(s*a.red()+l*n.red(),s*a.green()+l*n.green(),s*a.blue()+l*n.blue()).alpha(a.alpha()*r+n.alpha()*(1-r))},toJSON:function(){return this.rgb()},clone:function(){var e,t,a=new A,n=this.values,r=a.values;for(var i in n)n.hasOwnProperty(i)&&(e=n[i],"[object Array]"===(t={}.toString.call(e))?r[i]=e.slice(0):"[object Number]"===t?r[i]=e:console.error("unexpected color value:",e));return a}},A.prototype.spaces={rgb:["red","green","blue"],hsl:["hue","saturation","lightness"],hsv:["hue","saturation","value"],hwb:["hue","whiteness","blackness"],cmyk:["cyan","magenta","yellow","black"]},A.prototype.maxes={rgb:[255,255,255],hsl:[360,100,100],hsv:[360,100,100],hwb:[360,100,100],cmyk:[100,100,100,100]},A.prototype.getValues=function(e){for(var t=this.values,a={},n=0;n<e.length;n++)a[e.charAt(n)]=t[e][n];return 1!==t.alpha&&(a.a=t.alpha),a},A.prototype.setValues=function(e,t){var a,n,r=this.values,i=this.spaces,o=this.maxes,s=1;if(this.valid=!0,"alpha"===e)s=t;else if(t.length)r[e]=t.slice(0,e.length),s=t[e.length];else if(void 0!==t[e.charAt(0)]){for(a=0;a<e.length;a++)r[e][a]=t[e.charAt(a)];s=t.a}else if(void 0!==t[i[e][0]]){var l=i[e];for(a=0;a<e.length;a++)r[e][a]=t[l[a]];s=t.alpha}if(r.alpha=Math.max(0,Math.min(1,void 0===s?r.alpha:s)),"alpha"===e)return!1;for(a=0;a<e.length;a++)n=Math.max(0,Math.min(o[e][a],r[e][a])),r[e][a]=Math.round(n);for(var c in i)c!==e&&(r[c]=p[e][c](r[e]));return!0},A.prototype.setSpace=function(e,t){var a=t[0];return void 0===a?this.getValues(e):("number"===typeof a&&(a=Array.prototype.slice.call(t)),this.setValues(e,a),this)},A.prototype.setChannel=function(e,t,a){var n=this.values[e];return void 0===a?n[t]:(a===n[t]||(n[t]=a,this.setValues(e,n)),this)},"undefined"!==typeof window&&(window.Color=A);var L=A;function R(e){return-1===["__proto__","prototype","constructor"].indexOf(e)}var F={noop:function(){},uid:function(){var e=0;return function(){return e++}}(),isNullOrUndef:function(e){return null===e||"undefined"===typeof e},isArray:function(e){if(Array.isArray&&Array.isArray(e))return!0;var t=Object.prototype.toString.call(e);return"[object"===t.substr(0,7)&&"Array]"===t.substr(-6)},isObject:function(e){return null!==e&&"[object Object]"===Object.prototype.toString.call(e)},isFinite:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return("number"===typeof e||e instanceof Number)&&isFinite(e)})),valueOrDefault:function(e,t){return"undefined"===typeof e?t:e},valueAtIndexOrDefault:function(e,t,a){return F.valueOrDefault(F.isArray(e)?e[t]:e,a)},callback:function(e,t,a){if(e&&"function"===typeof e.call)return e.apply(a,t)},each:function(e,t,a,n){var r,i,o;if(F.isArray(e))if(i=e.length,n)for(r=i-1;r>=0;r--)t.call(a,e[r],r);else for(r=0;r<i;r++)t.call(a,e[r],r);else if(F.isObject(e))for(i=(o=Object.keys(e)).length,r=0;r<i;r++)t.call(a,e[o[r]],o[r])},arrayEquals:function(e,t){var a,n,r,i;if(!e||!t||e.length!==t.length)return!1;for(a=0,n=e.length;a<n;++a)if(r=e[a],i=t[a],r instanceof Array&&i instanceof Array){if(!F.arrayEquals(r,i))return!1}else if(r!==i)return!1;return!0},clone:function(e){if(F.isArray(e))return e.map(F.clone);if(F.isObject(e)){for(var t=Object.create(e),a=Object.keys(e),n=a.length,r=0;r<n;++r)t[a[r]]=F.clone(e[a[r]]);return t}return e},_merger:function(e,t,a,n){if(R(e)){var r=t[e],i=a[e];F.isObject(r)&&F.isObject(i)?F.merge(r,i,n):t[e]=F.clone(i)}},_mergerIf:function(e,t,a){if(R(e)){var n=t[e],r=a[e];F.isObject(n)&&F.isObject(r)?F.mergeIf(n,r):t.hasOwnProperty(e)||(t[e]=F.clone(r))}},merge:function(e,t,a){var n,r,i,o,s,l=F.isArray(t)?t:[t],c=l.length;if(!F.isObject(e))return e;for(n=(a=a||{}).merger||F._merger,r=0;r<c;++r)if(t=l[r],F.isObject(t))for(s=0,o=(i=Object.keys(t)).length;s<o;++s)n(i[s],e,t,a);return e},mergeIf:function(e,t){return F.merge(e,t,{merger:F._mergerIf})},extend:Object.assign||function(e){return F.merge(e,[].slice.call(arguments,1),{merger:function(e,t,a){t[e]=a[e]}})},inherits:function(e){var t=this,a=e&&e.hasOwnProperty("constructor")?e.constructor:function(){return t.apply(this,arguments)},n=function(){this.constructor=a};return n.prototype=t.prototype,a.prototype=new n,a.extend=F.inherits,e&&F.extend(a.prototype,e),a.__super__=t.prototype,a},_deprecated:function(e,t,a,n){void 0!==t&&console.warn(e+': "'+a+'" is deprecated. Please use "'+n+'" instead')}},U=F;F.callCallback=F.callback,F.indexOf=function(e,t,a){return Array.prototype.indexOf.call(e,t,a)},F.getValueOrDefault=F.valueOrDefault,F.getValueAtIndexOrDefault=F.valueAtIndexOrDefault;var B={linear:function(e){return e},easeInQuad:function(e){return e*e},easeOutQuad:function(e){return-e*(e-2)},easeInOutQuad:function(e){return(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1)},easeInCubic:function(e){return e*e*e},easeOutCubic:function(e){return(e-=1)*e*e+1},easeInOutCubic:function(e){return(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2)},easeInQuart:function(e){return e*e*e*e},easeOutQuart:function(e){return-((e-=1)*e*e*e-1)},easeInOutQuart:function(e){return(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)},easeInQuint:function(e){return e*e*e*e*e},easeOutQuint:function(e){return(e-=1)*e*e*e*e+1},easeInOutQuint:function(e){return(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)},easeInSine:function(e){return 1-Math.cos(e*(Math.PI/2))},easeOutSine:function(e){return Math.sin(e*(Math.PI/2))},easeInOutSine:function(e){return-.5*(Math.cos(Math.PI*e)-1)},easeInExpo:function(e){return 0===e?0:Math.pow(2,10*(e-1))},easeOutExpo:function(e){return 1===e?1:1-Math.pow(2,-10*e)},easeInOutExpo:function(e){return 0===e?0:1===e?1:(e/=.5)<1?.5*Math.pow(2,10*(e-1)):.5*(2-Math.pow(2,-10*--e))},easeInCirc:function(e){return e>=1?e:-(Math.sqrt(1-e*e)-1)},easeOutCirc:function(e){return Math.sqrt(1-(e-=1)*e)},easeInOutCirc:function(e){return(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)},easeInElastic:function(e){var t=1.70158,a=0,n=1;return 0===e?0:1===e?1:(a||(a=.3),n<1?(n=1,t=a/4):t=a/(2*Math.PI)*Math.asin(1/n),-n*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/a))},easeOutElastic:function(e){var t=1.70158,a=0,n=1;return 0===e?0:1===e?1:(a||(a=.3),n<1?(n=1,t=a/4):t=a/(2*Math.PI)*Math.asin(1/n),n*Math.pow(2,-10*e)*Math.sin((e-t)*(2*Math.PI)/a)+1)},easeInOutElastic:function(e){var t=1.70158,a=0,n=1;return 0===e?0:2===(e/=.5)?1:(a||(a=.45),n<1?(n=1,t=a/4):t=a/(2*Math.PI)*Math.asin(1/n),e<1?n*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/a)*-.5:n*Math.pow(2,-10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/a)*.5+1)},easeInBack:function(e){var t=1.70158;return e*e*((t+1)*e-t)},easeOutBack:function(e){var t=1.70158;return(e-=1)*e*((t+1)*e+t)+1},easeInOutBack:function(e){var t=1.70158;return(e/=.5)<1?e*e*((1+(t*=1.525))*e-t)*.5:.5*((e-=2)*e*((1+(t*=1.525))*e+t)+2)},easeInBounce:function(e){return 1-B.easeOutBounce(1-e)},easeOutBounce:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},easeInOutBounce:function(e){return e<.5?.5*B.easeInBounce(2*e):.5*B.easeOutBounce(2*e-1)+.5}},z={effects:B};U.easingEffects=B;var H=Math.PI,q=H/180,W=2*H,V=H/2,G=H/4,Y=2*H/3,Q={clear:function(e){e.ctx.clearRect(0,0,e.width,e.height)},roundedRect:function(e,t,a,n,r,i){if(i){var o=Math.min(i,r/2,n/2),s=t+o,l=a+o,c=t+n-o,u=a+r-o;e.moveTo(t,l),s<c&&l<u?(e.arc(s,l,o,-H,-V),e.arc(c,l,o,-V,0),e.arc(c,u,o,0,V),e.arc(s,u,o,V,H)):s<c?(e.moveTo(s,a),e.arc(c,l,o,-V,V),e.arc(s,l,o,V,H+V)):l<u?(e.arc(s,l,o,-H,0),e.arc(s,u,o,0,H)):e.arc(s,l,o,-H,H),e.closePath(),e.moveTo(t,a)}else e.rect(t,a,n,r)},drawPoint:function(e,t,a,n,r,i){var o,s,l,c,u,m=(i||0)*q;if(t&&"object"===typeof t&&("[object HTMLImageElement]"===(o=t.toString())||"[object HTMLCanvasElement]"===o))return e.save(),e.translate(n,r),e.rotate(m),e.drawImage(t,-t.width/2,-t.height/2,t.width,t.height),void e.restore();if(!(isNaN(a)||a<=0)){switch(e.beginPath(),t){default:e.arc(n,r,a,0,W),e.closePath();break;case"triangle":e.moveTo(n+Math.sin(m)*a,r-Math.cos(m)*a),m+=Y,e.lineTo(n+Math.sin(m)*a,r-Math.cos(m)*a),m+=Y,e.lineTo(n+Math.sin(m)*a,r-Math.cos(m)*a),e.closePath();break;case"rectRounded":c=a-(u=.516*a),s=Math.cos(m+G)*c,l=Math.sin(m+G)*c,e.arc(n-s,r-l,u,m-H,m-V),e.arc(n+l,r-s,u,m-V,m),e.arc(n+s,r+l,u,m,m+V),e.arc(n-l,r+s,u,m+V,m+H),e.closePath();break;case"rect":if(!i){c=Math.SQRT1_2*a,e.rect(n-c,r-c,2*c,2*c);break}m+=G;case"rectRot":s=Math.cos(m)*a,l=Math.sin(m)*a,e.moveTo(n-s,r-l),e.lineTo(n+l,r-s),e.lineTo(n+s,r+l),e.lineTo(n-l,r+s),e.closePath();break;case"crossRot":m+=G;case"cross":s=Math.cos(m)*a,l=Math.sin(m)*a,e.moveTo(n-s,r-l),e.lineTo(n+s,r+l),e.moveTo(n+l,r-s),e.lineTo(n-l,r+s);break;case"star":s=Math.cos(m)*a,l=Math.sin(m)*a,e.moveTo(n-s,r-l),e.lineTo(n+s,r+l),e.moveTo(n+l,r-s),e.lineTo(n-l,r+s),m+=G,s=Math.cos(m)*a,l=Math.sin(m)*a,e.moveTo(n-s,r-l),e.lineTo(n+s,r+l),e.moveTo(n+l,r-s),e.lineTo(n-l,r+s);break;case"line":s=Math.cos(m)*a,l=Math.sin(m)*a,e.moveTo(n-s,r-l),e.lineTo(n+s,r+l);break;case"dash":e.moveTo(n,r),e.lineTo(n+Math.cos(m)*a,r+Math.sin(m)*a)}e.fill(),e.stroke()}},_isPointInArea:function(e,t){var a=1e-6;return e.x>t.left-a&&e.x<t.right+a&&e.y>t.top-a&&e.y<t.bottom+a},clipArea:function(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()},unclipArea:function(e){e.restore()},lineTo:function(e,t,a,n){var r=a.steppedLine;if(r){if("middle"===r){var i=(t.x+a.x)/2;e.lineTo(i,n?a.y:t.y),e.lineTo(i,n?t.y:a.y)}else"after"===r&&!n||"after"!==r&&n?e.lineTo(t.x,a.y):e.lineTo(a.x,t.y);e.lineTo(a.x,a.y)}else a.tension?e.bezierCurveTo(n?t.controlPointPreviousX:t.controlPointNextX,n?t.controlPointPreviousY:t.controlPointNextY,n?a.controlPointNextX:a.controlPointPreviousX,n?a.controlPointNextY:a.controlPointPreviousY,a.x,a.y):e.lineTo(a.x,a.y)}},K=Q;U.clear=Q.clear,U.drawRoundedRectangle=function(e){e.beginPath(),Q.roundedRect.apply(Q,arguments)};var X={_set:function(e,t){return U.merge(this[e]||(this[e]={}),t)}};X._set("global",{defaultColor:"rgba(0,0,0,0.1)",defaultFontColor:"#666",defaultFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",defaultFontSize:12,defaultFontStyle:"normal",defaultLineHeight:1.2,showLines:!0});var $=X,J=U.valueOrDefault;function Z(e){return!e||U.isNullOrUndef(e.size)||U.isNullOrUndef(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}var ee={toLineHeight:function(e,t){var a=(""+e).match(/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/);if(!a||"normal"===a[1])return 1.2*t;switch(e=+a[2],a[3]){case"px":return e;case"%":e/=100}return t*e},toPadding:function(e){var t,a,n,r;return U.isObject(e)?(t=+e.top||0,a=+e.right||0,n=+e.bottom||0,r=+e.left||0):t=a=n=r=+e||0,{top:t,right:a,bottom:n,left:r,height:t+n,width:r+a}},_parseFont:function(e){var t=$.global,a=J(e.fontSize,t.defaultFontSize),n={family:J(e.fontFamily,t.defaultFontFamily),lineHeight:U.options.toLineHeight(J(e.lineHeight,t.defaultLineHeight),a),size:a,style:J(e.fontStyle,t.defaultFontStyle),weight:null,string:""};return n.string=Z(n),n},resolve:function(e,t,a,n){var r,i,o,s=!0;for(r=0,i=e.length;r<i;++r)if(void 0!==(o=e[r])&&(void 0!==t&&"function"===typeof o&&(o=o(t),s=!1),void 0!==a&&U.isArray(o)&&(o=o[a],s=!1),void 0!==o))return n&&!s&&(n.cacheable=!1),o}},te={_factorize:function(e){var t,a=[],n=Math.sqrt(e);for(t=1;t<n;t++)e%t===0&&(a.push(t),a.push(e/t));return n===(0|n)&&a.push(n),a.sort((function(e,t){return e-t})).pop(),a},log10:Math.log10||function(e){var t=Math.log(e)*Math.LOG10E,a=Math.round(t);return e===Math.pow(10,a)?a:t}},ae=te;U.log10=te.log10;var ne=function(e,t){return{x:function(a){return e+e+t-a},setWidth:function(e){t=e},textAlign:function(e){return"center"===e?e:"right"===e?"left":"right"},xPlus:function(e,t){return e-t},leftForLtr:function(e,t){return e-t}}},re=function(){return{x:function(e){return e},setWidth:function(e){},textAlign:function(e){return e},xPlus:function(e,t){return e+t},leftForLtr:function(e,t){return e}}},ie=U,oe=z,se=K,le=ee,ce=ae,ue={getRtlAdapter:function(e,t,a){return e?ne(t,a):re()},overrideTextDirection:function(e,t){var a,n;"ltr"!==t&&"rtl"!==t||(n=[(a=e.canvas.style).getPropertyValue("direction"),a.getPropertyPriority("direction")],a.setProperty("direction",t,"important"),e.prevTextDirection=n)},restoreTextDirection:function(e){var t=e.prevTextDirection;void 0!==t&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}};function me(e,t,a,n){var r,i,o,s,l,c,u,m,d,p=Object.keys(a);for(r=0,i=p.length;r<i;++r)if(c=a[o=p[r]],t.hasOwnProperty(o)||(t[o]=c),(s=t[o])!==c&&"_"!==o[0]){if(e.hasOwnProperty(o)||(e[o]=s),(u=typeof c)===typeof(l=e[o]))if("string"===u){if((m=L(l)).valid&&(d=L(c)).valid){t[o]=d.mix(m,n).rgbString();continue}}else if(ie.isFinite(l)&&ie.isFinite(c)){t[o]=l+(c-l)*n;continue}t[o]=c}}ie.easing=oe,ie.canvas=se,ie.options=le,ie.math=ce,ie.rtl=ue;var de=function(e){ie.extend(this,e),this.initialize.apply(this,arguments)};ie.extend(de.prototype,{_type:void 0,initialize:function(){this.hidden=!1},pivot:function(){var e=this;return e._view||(e._view=ie.extend({},e._model)),e._start={},e},transition:function(e){var t=this,a=t._model,n=t._start,r=t._view;return a&&1!==e?(r||(r=t._view={}),n||(n=t._start={}),me(n,r,a,e),t):(t._view=ie.extend({},a),t._start=null,t)},tooltipPosition:function(){return{x:this._model.x,y:this._model.y}},hasValue:function(){return ie.isNumber(this._model.x)&&ie.isNumber(this._model.y)}}),de.extend=ie.inherits;var pe=de,he=pe.extend({chart:null,currentStep:0,numSteps:60,easing:"",render:null,onAnimationProgress:null,onAnimationComplete:null}),ge=he;Object.defineProperty(he.prototype,"animationObject",{get:function(){return this}}),Object.defineProperty(he.prototype,"chartInstance",{get:function(){return this.chart},set:function(e){this.chart=e}}),$._set("global",{animation:{duration:1e3,easing:"easeOutQuart",onProgress:ie.noop,onComplete:ie.noop}});var fe={animations:[],request:null,addAnimation:function(e,t,a,n){var r,i,o=this.animations;for(t.chart=e,t.startTime=Date.now(),t.duration=a,n||(e.animating=!0),r=0,i=o.length;r<i;++r)if(o[r].chart===e)return void(o[r]=t);o.push(t),1===o.length&&this.requestAnimationFrame()},cancelAnimation:function(e){var t=ie.findIndex(this.animations,(function(t){return t.chart===e}));-1!==t&&(this.animations.splice(t,1),e.animating=!1)},requestAnimationFrame:function(){var e=this;null===e.request&&(e.request=ie.requestAnimFrame.call(window,(function(){e.request=null,e.startDigest()})))},startDigest:function(){var e=this;e.advance(),e.animations.length>0&&e.requestAnimationFrame()},advance:function(){for(var e,t,a,n,r=this.animations,i=0;i<r.length;)t=(e=r[i]).chart,a=e.numSteps,n=Math.floor((Date.now()-e.startTime)/e.duration*a)+1,e.currentStep=Math.min(n,a),ie.callback(e.render,[t,e],t),ie.callback(e.onAnimationProgress,[e],t),e.currentStep>=a?(ie.callback(e.onAnimationComplete,[e],t),t.animating=!1,r.splice(i,1)):++i}},be=ie.options.resolve,ve=["push","pop","shift","splice","unshift"];function Ee(e,t){e._chartjs?e._chartjs.listeners.push(t):(Object.defineProperty(e,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),ve.forEach((function(t){var a="onData"+t.charAt(0).toUpperCase()+t.slice(1),n=e[t];Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:function(){var t=Array.prototype.slice.call(arguments),r=n.apply(this,t);return ie.each(e._chartjs.listeners,(function(e){"function"===typeof e[a]&&e[a].apply(e,t)})),r}})})))}function ye(e,t){var a=e._chartjs;if(a){var n=a.listeners,r=n.indexOf(t);-1!==r&&n.splice(r,1),n.length>0||(ve.forEach((function(t){delete e[t]})),delete e._chartjs)}}var Oe=function(e,t){this.initialize(e,t)};ie.extend(Oe.prototype,{datasetElementType:null,dataElementType:null,_datasetElementOptions:["backgroundColor","borderCapStyle","borderColor","borderDash","borderDashOffset","borderJoinStyle","borderWidth"],_dataElementOptions:["backgroundColor","borderColor","borderWidth","pointStyle"],initialize:function(e,t){var a=this;a.chart=e,a.index=t,a.linkScales(),a.addElements(),a._type=a.getMeta().type},updateIndex:function(e){this.index=e},linkScales:function(){var e=this,t=e.getMeta(),a=e.chart,n=a.scales,r=e.getDataset(),i=a.options.scales;null!==t.xAxisID&&t.xAxisID in n&&!r.xAxisID||(t.xAxisID=r.xAxisID||i.xAxes[0].id),null!==t.yAxisID&&t.yAxisID in n&&!r.yAxisID||(t.yAxisID=r.yAxisID||i.yAxes[0].id)},getDataset:function(){return this.chart.data.datasets[this.index]},getMeta:function(){return this.chart.getDatasetMeta(this.index)},getScaleForId:function(e){return this.chart.scales[e]},_getValueScaleId:function(){return this.getMeta().yAxisID},_getIndexScaleId:function(){return this.getMeta().xAxisID},_getValueScale:function(){return this.getScaleForId(this._getValueScaleId())},_getIndexScale:function(){return this.getScaleForId(this._getIndexScaleId())},reset:function(){this._update(!0)},destroy:function(){this._data&&ye(this._data,this)},createMetaDataset:function(){var e=this,t=e.datasetElementType;return t&&new t({_chart:e.chart,_datasetIndex:e.index})},createMetaData:function(e){var t=this,a=t.dataElementType;return a&&new a({_chart:t.chart,_datasetIndex:t.index,_index:e})},addElements:function(){var e,t,a=this,n=a.getMeta(),r=a.getDataset().data||[],i=n.data;for(e=0,t=r.length;e<t;++e)i[e]=i[e]||a.createMetaData(e);n.dataset=n.dataset||a.createMetaDataset()},addElementAndReset:function(e){var t=this.createMetaData(e);this.getMeta().data.splice(e,0,t),this.updateElement(t,e,!0)},buildOrUpdateElements:function(){var e=this,t=e.getDataset(),a=t.data||(t.data=[]);e._data!==a&&(e._data&&ye(e._data,e),a&&Object.isExtensible(a)&&Ee(a,e),e._data=a),e.resyncElements()},_configure:function(){var e=this;e._config=ie.merge(Object.create(null),[e.chart.options.datasets[e._type],e.getDataset()],{merger:function(e,t,a){"_meta"!==e&&"data"!==e&&ie._merger(e,t,a)}})},_update:function(e){var t=this;t._configure(),t._cachedDataOpts=null,t.update(e)},update:ie.noop,transition:function(e){for(var t=this.getMeta(),a=t.data||[],n=a.length,r=0;r<n;++r)a[r].transition(e);t.dataset&&t.dataset.transition(e)},draw:function(){var e=this.getMeta(),t=e.data||[],a=t.length,n=0;for(e.dataset&&e.dataset.draw();n<a;++n)t[n].draw()},getStyle:function(e){var t,a=this,n=a.getMeta(),r=n.dataset;return a._configure(),r&&void 0===e?t=a._resolveDatasetElementOptions(r||{}):(e=e||0,t=a._resolveDataElementOptions(n.data[e]||{},e)),!1!==t.fill&&null!==t.fill||(t.backgroundColor=t.borderColor),t},_resolveDatasetElementOptions:function(e,t){var a,n,r,i,o=this,s=o.chart,l=o._config,c=e.custom||{},u=s.options.elements[o.datasetElementType.prototype._type]||{},m=o._datasetElementOptions,d={},p={chart:s,dataset:o.getDataset(),datasetIndex:o.index,hover:t};for(a=0,n=m.length;a<n;++a)r=m[a],i=t?"hover"+r.charAt(0).toUpperCase()+r.slice(1):r,d[r]=be([c[i],l[i],u[i]],p);return d},_resolveDataElementOptions:function(e,t){var a=this,n=e&&e.custom,r=a._cachedDataOpts;if(r&&!n)return r;var i,o,s,l,c=a.chart,u=a._config,m=c.options.elements[a.dataElementType.prototype._type]||{},d=a._dataElementOptions,p={},h={chart:c,dataIndex:t,dataset:a.getDataset(),datasetIndex:a.index},g={cacheable:!n};if(n=n||{},ie.isArray(d))for(o=0,s=d.length;o<s;++o)p[l=d[o]]=be([n[l],u[l],m[l]],h,t,g);else for(o=0,s=(i=Object.keys(d)).length;o<s;++o)p[l=i[o]]=be([n[l],u[d[l]],u[l],m[l]],h,t,g);return g.cacheable&&(a._cachedDataOpts=Object.freeze(p)),p},removeHoverStyle:function(e){ie.merge(e._model,e.$previousStyle||{}),delete e.$previousStyle},setHoverStyle:function(e){var t=this.chart.data.datasets[e._datasetIndex],a=e._index,n=e.custom||{},r=e._model,i=ie.getHoverColor;e.$previousStyle={backgroundColor:r.backgroundColor,borderColor:r.borderColor,borderWidth:r.borderWidth},r.backgroundColor=be([n.hoverBackgroundColor,t.hoverBackgroundColor,i(r.backgroundColor)],void 0,a),r.borderColor=be([n.hoverBorderColor,t.hoverBorderColor,i(r.borderColor)],void 0,a),r.borderWidth=be([n.hoverBorderWidth,t.hoverBorderWidth,r.borderWidth],void 0,a)},_removeDatasetHoverStyle:function(){var e=this.getMeta().dataset;e&&this.removeHoverStyle(e)},_setDatasetHoverStyle:function(){var e,t,a,n,r,i,o=this.getMeta().dataset,s={};if(o){for(i=o._model,r=this._resolveDatasetElementOptions(o,!0),e=0,t=(n=Object.keys(r)).length;e<t;++e)s[a=n[e]]=i[a],i[a]=r[a];o.$previousStyle=s}},resyncElements:function(){var e=this,t=e.getMeta(),a=e.getDataset().data,n=t.data.length,r=a.length;r<n?t.data.splice(r,n-r):r>n&&e.insertElements(n,r-n)},insertElements:function(e,t){for(var a=0;a<t;++a)this.addElementAndReset(e+a)},onDataPush:function(){var e=arguments.length;this.insertElements(this.getDataset().data.length-e,e)},onDataPop:function(){this.getMeta().data.pop()},onDataShift:function(){this.getMeta().data.shift()},onDataSplice:function(e,t){this.getMeta().data.splice(e,t),this.insertElements(e,arguments.length-2)},onDataUnshift:function(){this.insertElements(0,arguments.length)}}),Oe.extend=ie.inherits;var xe=Oe,ke=2*Math.PI;function Se(e,t){var a=t.startAngle,n=t.endAngle,r=t.pixelMargin,i=r/t.outerRadius,o=t.x,s=t.y;e.beginPath(),e.arc(o,s,t.outerRadius,a-i,n+i),t.innerRadius>r?(i=r/t.innerRadius,e.arc(o,s,t.innerRadius-r,n+i,a-i,!0)):e.arc(o,s,r,n+Math.PI/2,a-Math.PI/2),e.closePath(),e.clip()}function we(e,t,a,n){var r,i=a.endAngle;for(n&&(a.endAngle=a.startAngle+ke,Se(e,a),a.endAngle=i,a.endAngle===a.startAngle&&a.fullCircles&&(a.endAngle+=ke,a.fullCircles--)),e.beginPath(),e.arc(a.x,a.y,a.innerRadius,a.startAngle+ke,a.startAngle,!0),r=0;r<a.fullCircles;++r)e.stroke();for(e.beginPath(),e.arc(a.x,a.y,t.outerRadius,a.startAngle,a.startAngle+ke),r=0;r<a.fullCircles;++r)e.stroke()}function De(e,t,a){var n="inner"===t.borderAlign;n?(e.lineWidth=2*t.borderWidth,e.lineJoin="round"):(e.lineWidth=t.borderWidth,e.lineJoin="bevel"),a.fullCircles&&we(e,t,a,n),n&&Se(e,a),e.beginPath(),e.arc(a.x,a.y,t.outerRadius,a.startAngle,a.endAngle),e.arc(a.x,a.y,a.innerRadius,a.endAngle,a.startAngle,!0),e.closePath(),e.stroke()}$._set("global",{elements:{arc:{backgroundColor:$.global.defaultColor,borderColor:"#fff",borderWidth:2,borderAlign:"center"}}});var je=pe.extend({_type:"arc",inLabelRange:function(e){var t=this._view;return!!t&&Math.pow(e-t.x,2)<Math.pow(t.radius+t.hoverRadius,2)},inRange:function(e,t){var a=this._view;if(a){for(var n=ie.getAngleFromPoint(a,{x:e,y:t}),r=n.angle,i=n.distance,o=a.startAngle,s=a.endAngle;s<o;)s+=ke;for(;r>s;)r-=ke;for(;r<o;)r+=ke;var l=r>=o&&r<=s,c=i>=a.innerRadius&&i<=a.outerRadius;return l&&c}return!1},getCenterPoint:function(){var e=this._view,t=(e.startAngle+e.endAngle)/2,a=(e.innerRadius+e.outerRadius)/2;return{x:e.x+Math.cos(t)*a,y:e.y+Math.sin(t)*a}},getArea:function(){var e=this._view;return Math.PI*((e.endAngle-e.startAngle)/(2*Math.PI))*(Math.pow(e.outerRadius,2)-Math.pow(e.innerRadius,2))},tooltipPosition:function(){var e=this._view,t=e.startAngle+(e.endAngle-e.startAngle)/2,a=(e.outerRadius-e.innerRadius)/2+e.innerRadius;return{x:e.x+Math.cos(t)*a,y:e.y+Math.sin(t)*a}},draw:function(){var e,t=this._chart.ctx,a=this._view,n="inner"===a.borderAlign?.33:0,r={x:a.x,y:a.y,innerRadius:a.innerRadius,outerRadius:Math.max(a.outerRadius-n,0),pixelMargin:n,startAngle:a.startAngle,endAngle:a.endAngle,fullCircles:Math.floor(a.circumference/ke)};if(t.save(),t.fillStyle=a.backgroundColor,t.strokeStyle=a.borderColor,r.fullCircles){for(r.endAngle=r.startAngle+ke,t.beginPath(),t.arc(r.x,r.y,r.outerRadius,r.startAngle,r.endAngle),t.arc(r.x,r.y,r.innerRadius,r.endAngle,r.startAngle,!0),t.closePath(),e=0;e<r.fullCircles;++e)t.fill();r.endAngle=r.startAngle+a.circumference%ke}t.beginPath(),t.arc(r.x,r.y,r.outerRadius,r.startAngle,r.endAngle),t.arc(r.x,r.y,r.innerRadius,r.endAngle,r.startAngle,!0),t.closePath(),t.fill(),a.borderWidth&&De(t,a,r),t.restore()}}),Ce=ie.valueOrDefault,Ne=$.global.defaultColor;$._set("global",{elements:{line:{tension:.4,backgroundColor:Ne,borderWidth:3,borderColor:Ne,borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",capBezierPoints:!0,fill:!0}}});var Pe=pe.extend({_type:"line",draw:function(){var e,t,a,n=this,r=n._view,i=n._chart.ctx,o=r.spanGaps,s=n._children.slice(),l=$.global,c=l.elements.line,u=-1,m=n._loop;if(s.length){if(n._loop){for(e=0;e<s.length;++e)if(t=ie.previousItem(s,e),!s[e]._view.skip&&t._view.skip){s=s.slice(e).concat(s.slice(0,e)),m=o;break}m&&s.push(s[0])}for(i.save(),i.lineCap=r.borderCapStyle||c.borderCapStyle,i.setLineDash&&i.setLineDash(r.borderDash||c.borderDash),i.lineDashOffset=Ce(r.borderDashOffset,c.borderDashOffset),i.lineJoin=r.borderJoinStyle||c.borderJoinStyle,i.lineWidth=Ce(r.borderWidth,c.borderWidth),i.strokeStyle=r.borderColor||l.defaultColor,i.beginPath(),(a=s[0]._view).skip||(i.moveTo(a.x,a.y),u=0),e=1;e<s.length;++e)a=s[e]._view,t=-1===u?ie.previousItem(s,e):s[u],a.skip||(u!==e-1&&!o||-1===u?i.moveTo(a.x,a.y):ie.canvas.lineTo(i,t._view,a),u=e);m&&i.closePath(),i.stroke(),i.restore()}}}),_e=ie.valueOrDefault,Me=$.global.defaultColor;function Ie(e){var t=this._view;return!!t&&Math.abs(e-t.x)<t.radius+t.hitRadius}function Te(e){var t=this._view;return!!t&&Math.abs(e-t.y)<t.radius+t.hitRadius}$._set("global",{elements:{point:{radius:3,pointStyle:"circle",backgroundColor:Me,borderColor:Me,borderWidth:1,hitRadius:1,hoverRadius:4,hoverBorderWidth:1}}});var Ae=pe.extend({_type:"point",inRange:function(e,t){var a=this._view;return!!a&&Math.pow(e-a.x,2)+Math.pow(t-a.y,2)<Math.pow(a.hitRadius+a.radius,2)},inLabelRange:Ie,inXRange:Ie,inYRange:Te,getCenterPoint:function(){var e=this._view;return{x:e.x,y:e.y}},getArea:function(){return Math.PI*Math.pow(this._view.radius,2)},tooltipPosition:function(){var e=this._view;return{x:e.x,y:e.y,padding:e.radius+e.borderWidth}},draw:function(e){var t=this._view,a=this._chart.ctx,n=t.pointStyle,r=t.rotation,i=t.radius,o=t.x,s=t.y,l=$.global,c=l.defaultColor;t.skip||(void 0===e||ie.canvas._isPointInArea(t,e))&&(a.strokeStyle=t.borderColor||c,a.lineWidth=_e(t.borderWidth,l.elements.point.borderWidth),a.fillStyle=t.backgroundColor||c,ie.canvas.drawPoint(a,n,i,o,s,r))}}),Le=$.global.defaultColor;function Re(e){return e&&void 0!==e.width}function Fe(e){var t,a,n,r,i;return Re(e)?(i=e.width/2,t=e.x-i,a=e.x+i,n=Math.min(e.y,e.base),r=Math.max(e.y,e.base)):(i=e.height/2,t=Math.min(e.x,e.base),a=Math.max(e.x,e.base),n=e.y-i,r=e.y+i),{left:t,top:n,right:a,bottom:r}}function Ue(e,t,a){return e===t?a:e===a?t:e}function Be(e){var t=e.borderSkipped,a={};return t?(e.horizontal?e.base>e.x&&(t=Ue(t,"left","right")):e.base<e.y&&(t=Ue(t,"bottom","top")),a[t]=!0,a):a}function ze(e,t,a){var n,r,i,o,s=e.borderWidth,l=Be(e);return ie.isObject(s)?(n=+s.top||0,r=+s.right||0,i=+s.bottom||0,o=+s.left||0):n=r=i=o=+s||0,{t:l.top||n<0?0:n>a?a:n,r:l.right||r<0?0:r>t?t:r,b:l.bottom||i<0?0:i>a?a:i,l:l.left||o<0?0:o>t?t:o}}function He(e){var t=Fe(e),a=t.right-t.left,n=t.bottom-t.top,r=ze(e,a/2,n/2);return{outer:{x:t.left,y:t.top,w:a,h:n},inner:{x:t.left+r.l,y:t.top+r.t,w:a-r.l-r.r,h:n-r.t-r.b}}}function qe(e,t,a){var n=null===t,r=null===a,i=!(!e||n&&r)&&Fe(e);return i&&(n||t>=i.left&&t<=i.right)&&(r||a>=i.top&&a<=i.bottom)}$._set("global",{elements:{rectangle:{backgroundColor:Le,borderColor:Le,borderSkipped:"bottom",borderWidth:0}}});var We=pe.extend({_type:"rectangle",draw:function(){var e=this._chart.ctx,t=this._view,a=He(t),n=a.outer,r=a.inner;e.fillStyle=t.backgroundColor,e.fillRect(n.x,n.y,n.w,n.h),n.w===r.w&&n.h===r.h||(e.save(),e.beginPath(),e.rect(n.x,n.y,n.w,n.h),e.clip(),e.fillStyle=t.borderColor,e.rect(r.x,r.y,r.w,r.h),e.fill("evenodd"),e.restore())},height:function(){var e=this._view;return e.base-e.y},inRange:function(e,t){return qe(this._view,e,t)},inLabelRange:function(e,t){var a=this._view;return Re(a)?qe(a,e,null):qe(a,null,t)},inXRange:function(e){return qe(this._view,e,null)},inYRange:function(e){return qe(this._view,null,e)},getCenterPoint:function(){var e,t,a=this._view;return Re(a)?(e=a.x,t=(a.y+a.base)/2):(e=(a.x+a.base)/2,t=a.y),{x:e,y:t}},getArea:function(){var e=this._view;return Re(e)?e.width*Math.abs(e.y-e.base):e.height*Math.abs(e.x-e.base)},tooltipPosition:function(){var e=this._view;return{x:e.x,y:e.y}}}),Ve={},Ge=je,Ye=Pe,Qe=Ae,Ke=We;Ve.Arc=Ge,Ve.Line=Ye,Ve.Point=Qe,Ve.Rectangle=Ke;var Xe=ie._deprecated,$e=ie.valueOrDefault;function Je(e,t){var a,n,r,i,o=e._length;for(r=1,i=t.length;r<i;++r)o=Math.min(o,Math.abs(t[r]-t[r-1]));for(r=0,i=e.getTicks().length;r<i;++r)n=e.getPixelForTick(r),o=r>0?Math.min(o,Math.abs(n-a)):o,a=n;return o}function Ze(e,t,a){var n,r,i=a.barThickness,o=t.stackCount,s=t.pixels[e],l=ie.isNullOrUndef(i)?Je(t.scale,t.pixels):-1;return ie.isNullOrUndef(i)?(n=l*a.categoryPercentage,r=a.barPercentage):(n=i*o,r=1),{chunk:n/o,ratio:r,start:s-n/2}}function et(e,t,a){var n,r=t.pixels,i=r[e],o=e>0?r[e-1]:null,s=e<r.length-1?r[e+1]:null,l=a.categoryPercentage;return null===o&&(o=i-(null===s?t.end-t.start:s-i)),null===s&&(s=i+i-o),n=i-(i-Math.min(o,s))/2*l,{chunk:Math.abs(s-o)/2*l/t.stackCount,ratio:a.barPercentage,start:n}}$._set("bar",{hover:{mode:"label"},scales:{xAxes:[{type:"category",offset:!0,gridLines:{offsetGridLines:!0}}],yAxes:[{type:"linear"}]}}),$._set("global",{datasets:{bar:{categoryPercentage:.8,barPercentage:.9}}});var tt=xe.extend({dataElementType:Ve.Rectangle,_dataElementOptions:["backgroundColor","borderColor","borderSkipped","borderWidth","barPercentage","barThickness","categoryPercentage","maxBarThickness","minBarLength"],initialize:function(){var e,t,a=this;xe.prototype.initialize.apply(a,arguments),(e=a.getMeta()).stack=a.getDataset().stack,e.bar=!0,t=a._getIndexScale().options,Xe("bar chart",t.barPercentage,"scales.[x/y]Axes.barPercentage","dataset.barPercentage"),Xe("bar chart",t.barThickness,"scales.[x/y]Axes.barThickness","dataset.barThickness"),Xe("bar chart",t.categoryPercentage,"scales.[x/y]Axes.categoryPercentage","dataset.categoryPercentage"),Xe("bar chart",a._getValueScale().options.minBarLength,"scales.[x/y]Axes.minBarLength","dataset.minBarLength"),Xe("bar chart",t.maxBarThickness,"scales.[x/y]Axes.maxBarThickness","dataset.maxBarThickness")},update:function(e){var t,a,n=this,r=n.getMeta().data;for(n._ruler=n.getRuler(),t=0,a=r.length;t<a;++t)n.updateElement(r[t],t,e)},updateElement:function(e,t,a){var n=this,r=n.getMeta(),i=n.getDataset(),o=n._resolveDataElementOptions(e,t);e._xScale=n.getScaleForId(r.xAxisID),e._yScale=n.getScaleForId(r.yAxisID),e._datasetIndex=n.index,e._index=t,e._model={backgroundColor:o.backgroundColor,borderColor:o.borderColor,borderSkipped:o.borderSkipped,borderWidth:o.borderWidth,datasetLabel:i.label,label:n.chart.data.labels[t]},ie.isArray(i.data[t])&&(e._model.borderSkipped=null),n._updateElementGeometry(e,t,a,o),e.pivot()},_updateElementGeometry:function(e,t,a,n){var r=this,i=e._model,o=r._getValueScale(),s=o.getBasePixel(),l=o.isHorizontal(),c=r._ruler||r.getRuler(),u=r.calculateBarValuePixels(r.index,t,n),m=r.calculateBarIndexPixels(r.index,t,c,n);i.horizontal=l,i.base=a?s:u.base,i.x=l?a?s:u.head:m.center,i.y=l?m.center:a?s:u.head,i.height=l?m.size:void 0,i.width=l?void 0:m.size},_getStacks:function(e){var t,a,n=this,r=n._getIndexScale(),i=r._getMatchingVisibleMetas(n._type),o=r.options.stacked,s=i.length,l=[];for(t=0;t<s&&(a=i[t],(!1===o||-1===l.indexOf(a.stack)||void 0===o&&void 0===a.stack)&&l.push(a.stack),a.index!==e);++t);return l},getStackCount:function(){return this._getStacks().length},getStackIndex:function(e,t){var a=this._getStacks(e),n=void 0!==t?a.indexOf(t):-1;return-1===n?a.length-1:n},getRuler:function(){var e,t,a=this,n=a._getIndexScale(),r=[];for(e=0,t=a.getMeta().data.length;e<t;++e)r.push(n.getPixelForValue(null,e,a.index));return{pixels:r,start:n._startPixel,end:n._endPixel,stackCount:a.getStackCount(),scale:n}},calculateBarValuePixels:function(e,t,a){var n,r,i,o,s,l,c,u=this,m=u.chart,d=u._getValueScale(),p=d.isHorizontal(),h=m.data.datasets,g=d._getMatchingVisibleMetas(u._type),f=d._parseValue(h[e].data[t]),b=a.minBarLength,v=d.options.stacked,E=u.getMeta().stack,y=void 0===f.start?0:f.max>=0&&f.min>=0?f.min:f.max,O=void 0===f.start?f.end:f.max>=0&&f.min>=0?f.max-f.min:f.min-f.max,x=g.length;if(v||void 0===v&&void 0!==E)for(n=0;n<x&&(r=g[n]).index!==e;++n)r.stack===E&&(i=void 0===(c=d._parseValue(h[r.index].data[t])).start?c.end:c.min>=0&&c.max>=0?c.max:c.min,(f.min<0&&i<0||f.max>=0&&i>0)&&(y+=i));return o=d.getPixelForValue(y),l=(s=d.getPixelForValue(y+O))-o,void 0!==b&&Math.abs(l)<b&&(l=b,s=O>=0&&!p||O<0&&p?o-b:o+b),{size:l,base:o,head:s,center:s+l/2}},calculateBarIndexPixels:function(e,t,a,n){var r=this,i="flex"===n.barThickness?et(t,a,n):Ze(t,a,n),o=r.getStackIndex(e,r.getMeta().stack),s=i.start+i.chunk*o+i.chunk/2,l=Math.min($e(n.maxBarThickness,1/0),i.chunk*i.ratio);return{base:s-l/2,head:s+l/2,center:s,size:l}},draw:function(){var e=this,t=e.chart,a=e._getValueScale(),n=e.getMeta().data,r=e.getDataset(),i=n.length,o=0;for(ie.canvas.clipArea(t.ctx,t.chartArea);o<i;++o){var s=a._parseValue(r.data[o]);isNaN(s.min)||isNaN(s.max)||n[o].draw()}ie.canvas.unclipArea(t.ctx)},_resolveDataElementOptions:function(){var e=this,t=ie.extend({},xe.prototype._resolveDataElementOptions.apply(e,arguments)),a=e._getIndexScale().options,n=e._getValueScale().options;return t.barPercentage=$e(a.barPercentage,t.barPercentage),t.barThickness=$e(a.barThickness,t.barThickness),t.categoryPercentage=$e(a.categoryPercentage,t.categoryPercentage),t.maxBarThickness=$e(a.maxBarThickness,t.maxBarThickness),t.minBarLength=$e(n.minBarLength,t.minBarLength),t}}),at=ie.valueOrDefault,nt=ie.options.resolve;$._set("bubble",{hover:{mode:"single"},scales:{xAxes:[{type:"linear",position:"bottom",id:"x-axis-0"}],yAxes:[{type:"linear",position:"left",id:"y-axis-0"}]},tooltips:{callbacks:{title:function(){return""},label:function(e,t){var a=t.datasets[e.datasetIndex].label||"",n=t.datasets[e.datasetIndex].data[e.index];return a+": ("+e.xLabel+", "+e.yLabel+", "+n.r+")"}}}});var rt=xe.extend({dataElementType:Ve.Point,_dataElementOptions:["backgroundColor","borderColor","borderWidth","hoverBackgroundColor","hoverBorderColor","hoverBorderWidth","hoverRadius","hitRadius","pointStyle","rotation"],update:function(e){var t=this,a=t.getMeta().data;ie.each(a,(function(a,n){t.updateElement(a,n,e)}))},updateElement:function(e,t,a){var n=this,r=n.getMeta(),i=e.custom||{},o=n.getScaleForId(r.xAxisID),s=n.getScaleForId(r.yAxisID),l=n._resolveDataElementOptions(e,t),c=n.getDataset().data[t],u=n.index,m=a?o.getPixelForDecimal(.5):o.getPixelForValue("object"===typeof c?c:NaN,t,u),d=a?s.getBasePixel():s.getPixelForValue(c,t,u);e._xScale=o,e._yScale=s,e._options=l,e._datasetIndex=u,e._index=t,e._model={backgroundColor:l.backgroundColor,borderColor:l.borderColor,borderWidth:l.borderWidth,hitRadius:l.hitRadius,pointStyle:l.pointStyle,rotation:l.rotation,radius:a?0:l.radius,skip:i.skip||isNaN(m)||isNaN(d),x:m,y:d},e.pivot()},setHoverStyle:function(e){var t=e._model,a=e._options,n=ie.getHoverColor;e.$previousStyle={backgroundColor:t.backgroundColor,borderColor:t.borderColor,borderWidth:t.borderWidth,radius:t.radius},t.backgroundColor=at(a.hoverBackgroundColor,n(a.backgroundColor)),t.borderColor=at(a.hoverBorderColor,n(a.borderColor)),t.borderWidth=at(a.hoverBorderWidth,a.borderWidth),t.radius=a.radius+a.hoverRadius},_resolveDataElementOptions:function(e,t){var a=this,n=a.chart,r=a.getDataset(),i=e.custom||{},o=r.data[t]||{},s=xe.prototype._resolveDataElementOptions.apply(a,arguments),l={chart:n,dataIndex:t,dataset:r,datasetIndex:a.index};return a._cachedDataOpts===s&&(s=ie.extend({},s)),s.radius=nt([i.radius,o.r,a._config.radius,n.options.elements.point.radius],l,t),s}}),it=ie.valueOrDefault,ot=Math.PI,st=2*ot,lt=ot/2;$._set("doughnut",{animation:{animateRotate:!0,animateScale:!1},hover:{mode:"single"},legendCallback:function(e){var t,a,n,r=document.createElement("ul"),i=e.data,o=i.datasets,s=i.labels;if(r.setAttribute("class",e.id+"-legend"),o.length)for(t=0,a=o[0].data.length;t<a;++t)(n=r.appendChild(document.createElement("li"))).appendChild(document.createElement("span")).style.backgroundColor=o[0].backgroundColor[t],s[t]&&n.appendChild(document.createTextNode(s[t]));return r.outerHTML},legend:{labels:{generateLabels:function(e){var t=e.data;return t.labels.length&&t.datasets.length?t.labels.map((function(a,n){var r=e.getDatasetMeta(0),i=r.controller.getStyle(n);return{text:a,fillStyle:i.backgroundColor,strokeStyle:i.borderColor,lineWidth:i.borderWidth,hidden:isNaN(t.datasets[0].data[n])||r.data[n].hidden,index:n}})):[]}},onClick:function(e,t){var a,n,r,i=t.index,o=this.chart;for(a=0,n=(o.data.datasets||[]).length;a<n;++a)(r=o.getDatasetMeta(a)).data[i]&&(r.data[i].hidden=!r.data[i].hidden);o.update()}},cutoutPercentage:50,rotation:-lt,circumference:st,tooltips:{callbacks:{title:function(){return""},label:function(e,t){var a=t.labels[e.index],n=": "+t.datasets[e.datasetIndex].data[e.index];return ie.isArray(a)?(a=a.slice())[0]+=n:a+=n,a}}}});var ct=xe.extend({dataElementType:Ve.Arc,linkScales:ie.noop,_dataElementOptions:["backgroundColor","borderColor","borderWidth","borderAlign","hoverBackgroundColor","hoverBorderColor","hoverBorderWidth"],getRingIndex:function(e){for(var t=0,a=0;a<e;++a)this.chart.isDatasetVisible(a)&&++t;return t},update:function(e){var t,a,n,r,i=this,o=i.chart,s=o.chartArea,l=o.options,c=1,u=1,m=0,d=0,p=i.getMeta(),h=p.data,g=l.cutoutPercentage/100||0,f=l.circumference,b=i._getRingWeight(i.index);if(f<st){var v=l.rotation%st,E=(v+=v>=ot?-st:v<-ot?st:0)+f,y=Math.cos(v),O=Math.sin(v),x=Math.cos(E),k=Math.sin(E),S=v<=0&&E>=0||E>=st,w=v<=lt&&E>=lt||E>=st+lt,D=v<=-lt&&E>=-lt||E>=ot+lt,j=v===-ot||E>=ot?-1:Math.min(y,y*g,x,x*g),C=D?-1:Math.min(O,O*g,k,k*g),N=S?1:Math.max(y,y*g,x,x*g),P=w?1:Math.max(O,O*g,k,k*g);c=(N-j)/2,u=(P-C)/2,m=-(N+j)/2,d=-(P+C)/2}for(n=0,r=h.length;n<r;++n)h[n]._options=i._resolveDataElementOptions(h[n],n);for(o.borderWidth=i.getMaxBorderWidth(),t=(s.right-s.left-o.borderWidth)/c,a=(s.bottom-s.top-o.borderWidth)/u,o.outerRadius=Math.max(Math.min(t,a)/2,0),o.innerRadius=Math.max(o.outerRadius*g,0),o.radiusLength=(o.outerRadius-o.innerRadius)/(i._getVisibleDatasetWeightTotal()||1),o.offsetX=m*o.outerRadius,o.offsetY=d*o.outerRadius,p.total=i.calculateTotal(),i.outerRadius=o.outerRadius-o.radiusLength*i._getRingWeightOffset(i.index),i.innerRadius=Math.max(i.outerRadius-o.radiusLength*b,0),n=0,r=h.length;n<r;++n)i.updateElement(h[n],n,e)},updateElement:function(e,t,a){var n=this,r=n.chart,i=r.chartArea,o=r.options,s=o.animation,l=(i.left+i.right)/2,c=(i.top+i.bottom)/2,u=o.rotation,m=o.rotation,d=n.getDataset(),p=a&&s.animateRotate||e.hidden?0:n.calculateCircumference(d.data[t])*(o.circumference/st),h=a&&s.animateScale?0:n.innerRadius,g=a&&s.animateScale?0:n.outerRadius,f=e._options||{};ie.extend(e,{_datasetIndex:n.index,_index:t,_model:{backgroundColor:f.backgroundColor,borderColor:f.borderColor,borderWidth:f.borderWidth,borderAlign:f.borderAlign,x:l+r.offsetX,y:c+r.offsetY,startAngle:u,endAngle:m,circumference:p,outerRadius:g,innerRadius:h,label:ie.valueAtIndexOrDefault(d.label,t,r.data.labels[t])}});var b=e._model;a&&s.animateRotate||(b.startAngle=0===t?o.rotation:n.getMeta().data[t-1]._model.endAngle,b.endAngle=b.startAngle+b.circumference),e.pivot()},calculateTotal:function(){var e,t=this.getDataset(),a=this.getMeta(),n=0;return ie.each(a.data,(function(a,r){e=t.data[r],isNaN(e)||a.hidden||(n+=Math.abs(e))})),n},calculateCircumference:function(e){var t=this.getMeta().total;return t>0&&!isNaN(e)?st*(Math.abs(e)/t):0},getMaxBorderWidth:function(e){var t,a,n,r,i,o,s,l,c=this,u=0,m=c.chart;if(!e)for(t=0,a=m.data.datasets.length;t<a;++t)if(m.isDatasetVisible(t)){e=(n=m.getDatasetMeta(t)).data,t!==c.index&&(i=n.controller);break}if(!e)return 0;for(t=0,a=e.length;t<a;++t)r=e[t],i?(i._configure(),o=i._resolveDataElementOptions(r,t)):o=r._options,"inner"!==o.borderAlign&&(s=o.borderWidth,u=(l=o.hoverBorderWidth)>(u=s>u?s:u)?l:u);return u},setHoverStyle:function(e){var t=e._model,a=e._options,n=ie.getHoverColor;e.$previousStyle={backgroundColor:t.backgroundColor,borderColor:t.borderColor,borderWidth:t.borderWidth},t.backgroundColor=it(a.hoverBackgroundColor,n(a.backgroundColor)),t.borderColor=it(a.hoverBorderColor,n(a.borderColor)),t.borderWidth=it(a.hoverBorderWidth,a.borderWidth)},_getRingWeightOffset:function(e){for(var t=0,a=0;a<e;++a)this.chart.isDatasetVisible(a)&&(t+=this._getRingWeight(a));return t},_getRingWeight:function(e){return Math.max(it(this.chart.data.datasets[e].weight,1),0)},_getVisibleDatasetWeightTotal:function(){return this._getRingWeightOffset(this.chart.data.datasets.length)}});$._set("horizontalBar",{hover:{mode:"index",axis:"y"},scales:{xAxes:[{type:"linear",position:"bottom"}],yAxes:[{type:"category",position:"left",offset:!0,gridLines:{offsetGridLines:!0}}]},elements:{rectangle:{borderSkipped:"left"}},tooltips:{mode:"index",axis:"y"}}),$._set("global",{datasets:{horizontalBar:{categoryPercentage:.8,barPercentage:.9}}});var ut=tt.extend({_getValueScaleId:function(){return this.getMeta().xAxisID},_getIndexScaleId:function(){return this.getMeta().yAxisID}}),mt=ie.valueOrDefault,dt=ie.options.resolve,pt=ie.canvas._isPointInArea;function ht(e,t){var a=e&&e.options.ticks||{},n=a.reverse,r=void 0===a.min?t:0,i=void 0===a.max?t:0;return{start:n?i:r,end:n?r:i}}function gt(e,t,a){var n=a/2,r=ht(e,n),i=ht(t,n);return{top:i.end,right:r.end,bottom:i.start,left:r.start}}function ft(e){var t,a,n,r;return ie.isObject(e)?(t=e.top,a=e.right,n=e.bottom,r=e.left):t=a=n=r=e,{top:t,right:a,bottom:n,left:r}}$._set("line",{showLines:!0,spanGaps:!1,hover:{mode:"label"},scales:{xAxes:[{type:"category",id:"x-axis-0"}],yAxes:[{type:"linear",id:"y-axis-0"}]}});var bt=xe.extend({datasetElementType:Ve.Line,dataElementType:Ve.Point,_datasetElementOptions:["backgroundColor","borderCapStyle","borderColor","borderDash","borderDashOffset","borderJoinStyle","borderWidth","cubicInterpolationMode","fill"],_dataElementOptions:{backgroundColor:"pointBackgroundColor",borderColor:"pointBorderColor",borderWidth:"pointBorderWidth",hitRadius:"pointHitRadius",hoverBackgroundColor:"pointHoverBackgroundColor",hoverBorderColor:"pointHoverBorderColor",hoverBorderWidth:"pointHoverBorderWidth",hoverRadius:"pointHoverRadius",pointStyle:"pointStyle",radius:"pointRadius",rotation:"pointRotation"},update:function(e){var t,a,n=this,r=n.getMeta(),i=r.dataset,o=r.data||[],s=n.chart.options,l=n._config,c=n._showLine=mt(l.showLine,s.showLines);for(n._xScale=n.getScaleForId(r.xAxisID),n._yScale=n.getScaleForId(r.yAxisID),c&&(void 0!==l.tension&&void 0===l.lineTension&&(l.lineTension=l.tension),i._scale=n._yScale,i._datasetIndex=n.index,i._children=o,i._model=n._resolveDatasetElementOptions(i),i.pivot()),t=0,a=o.length;t<a;++t)n.updateElement(o[t],t,e);for(c&&0!==i._model.tension&&n.updateBezierControlPoints(),t=0,a=o.length;t<a;++t)o[t].pivot()},updateElement:function(e,t,a){var n,r,i=this,o=i.getMeta(),s=e.custom||{},l=i.getDataset(),c=i.index,u=l.data[t],m=i._xScale,d=i._yScale,p=o.dataset._model,h=i._resolveDataElementOptions(e,t);n=m.getPixelForValue("object"===typeof u?u:NaN,t,c),r=a?d.getBasePixel():i.calculatePointY(u,t,c),e._xScale=m,e._yScale=d,e._options=h,e._datasetIndex=c,e._index=t,e._model={x:n,y:r,skip:s.skip||isNaN(n)||isNaN(r),radius:h.radius,pointStyle:h.pointStyle,rotation:h.rotation,backgroundColor:h.backgroundColor,borderColor:h.borderColor,borderWidth:h.borderWidth,tension:mt(s.tension,p?p.tension:0),steppedLine:!!p&&p.steppedLine,hitRadius:h.hitRadius}},_resolveDatasetElementOptions:function(e){var t=this,a=t._config,n=e.custom||{},r=t.chart.options,i=r.elements.line,o=xe.prototype._resolveDatasetElementOptions.apply(t,arguments);return o.spanGaps=mt(a.spanGaps,r.spanGaps),o.tension=mt(a.lineTension,i.tension),o.steppedLine=dt([n.steppedLine,a.steppedLine,i.stepped]),o.clip=ft(mt(a.clip,gt(t._xScale,t._yScale,o.borderWidth))),o},calculatePointY:function(e,t,a){var n,r,i,o,s,l,c,u=this,m=u.chart,d=u._yScale,p=0,h=0;if(d.options.stacked){for(s=+d.getRightValue(e),c=(l=m._getSortedVisibleDatasetMetas()).length,n=0;n<c&&(i=l[n]).index!==a;++n)r=m.data.datasets[i.index],"line"===i.type&&i.yAxisID===d.id&&((o=+d.getRightValue(r.data[t]))<0?h+=o||0:p+=o||0);return s<0?d.getPixelForValue(h+s):d.getPixelForValue(p+s)}return d.getPixelForValue(e)},updateBezierControlPoints:function(){var e,t,a,n,r=this,i=r.chart,o=r.getMeta(),s=o.dataset._model,l=i.chartArea,c=o.data||[];function u(e,t,a){return Math.max(Math.min(e,a),t)}if(s.spanGaps&&(c=c.filter((function(e){return!e._model.skip}))),"monotone"===s.cubicInterpolationMode)ie.splineCurveMonotone(c);else for(e=0,t=c.length;e<t;++e)a=c[e]._model,n=ie.splineCurve(ie.previousItem(c,e)._model,a,ie.nextItem(c,e)._model,s.tension),a.controlPointPreviousX=n.previous.x,a.controlPointPreviousY=n.previous.y,a.controlPointNextX=n.next.x,a.controlPointNextY=n.next.y;if(i.options.elements.line.capBezierPoints)for(e=0,t=c.length;e<t;++e)a=c[e]._model,pt(a,l)&&(e>0&&pt(c[e-1]._model,l)&&(a.controlPointPreviousX=u(a.controlPointPreviousX,l.left,l.right),a.controlPointPreviousY=u(a.controlPointPreviousY,l.top,l.bottom)),e<c.length-1&&pt(c[e+1]._model,l)&&(a.controlPointNextX=u(a.controlPointNextX,l.left,l.right),a.controlPointNextY=u(a.controlPointNextY,l.top,l.bottom)))},draw:function(){var e,t=this,a=t.chart,n=t.getMeta(),r=n.data||[],i=a.chartArea,o=a.canvas,s=0,l=r.length;for(t._showLine&&(e=n.dataset._model.clip,ie.canvas.clipArea(a.ctx,{left:!1===e.left?0:i.left-e.left,right:!1===e.right?o.width:i.right+e.right,top:!1===e.top?0:i.top-e.top,bottom:!1===e.bottom?o.height:i.bottom+e.bottom}),n.dataset.draw(),ie.canvas.unclipArea(a.ctx));s<l;++s)r[s].draw(i)},setHoverStyle:function(e){var t=e._model,a=e._options,n=ie.getHoverColor;e.$previousStyle={backgroundColor:t.backgroundColor,borderColor:t.borderColor,borderWidth:t.borderWidth,radius:t.radius},t.backgroundColor=mt(a.hoverBackgroundColor,n(a.backgroundColor)),t.borderColor=mt(a.hoverBorderColor,n(a.borderColor)),t.borderWidth=mt(a.hoverBorderWidth,a.borderWidth),t.radius=mt(a.hoverRadius,a.radius)}}),vt=ie.options.resolve;$._set("polarArea",{scale:{type:"radialLinear",angleLines:{display:!1},gridLines:{circular:!0},pointLabels:{display:!1},ticks:{beginAtZero:!0}},animation:{animateRotate:!0,animateScale:!0},startAngle:-.5*Math.PI,legendCallback:function(e){var t,a,n,r=document.createElement("ul"),i=e.data,o=i.datasets,s=i.labels;if(r.setAttribute("class",e.id+"-legend"),o.length)for(t=0,a=o[0].data.length;t<a;++t)(n=r.appendChild(document.createElement("li"))).appendChild(document.createElement("span")).style.backgroundColor=o[0].backgroundColor[t],s[t]&&n.appendChild(document.createTextNode(s[t]));return r.outerHTML},legend:{labels:{generateLabels:function(e){var t=e.data;return t.labels.length&&t.datasets.length?t.labels.map((function(a,n){var r=e.getDatasetMeta(0),i=r.controller.getStyle(n);return{text:a,fillStyle:i.backgroundColor,strokeStyle:i.borderColor,lineWidth:i.borderWidth,hidden:isNaN(t.datasets[0].data[n])||r.data[n].hidden,index:n}})):[]}},onClick:function(e,t){var a,n,r,i=t.index,o=this.chart;for(a=0,n=(o.data.datasets||[]).length;a<n;++a)(r=o.getDatasetMeta(a)).data[i].hidden=!r.data[i].hidden;o.update()}},tooltips:{callbacks:{title:function(){return""},label:function(e,t){return t.labels[e.index]+": "+e.yLabel}}}});var Et=xe.extend({dataElementType:Ve.Arc,linkScales:ie.noop,_dataElementOptions:["backgroundColor","borderColor","borderWidth","borderAlign","hoverBackgroundColor","hoverBorderColor","hoverBorderWidth"],_getIndexScaleId:function(){return this.chart.scale.id},_getValueScaleId:function(){return this.chart.scale.id},update:function(e){var t,a,n,r=this,i=r.getDataset(),o=r.getMeta(),s=r.chart.options.startAngle||0,l=r._starts=[],c=r._angles=[],u=o.data;for(r._updateRadius(),o.count=r.countVisibleElements(),t=0,a=i.data.length;t<a;t++)l[t]=s,n=r._computeAngle(t),c[t]=n,s+=n;for(t=0,a=u.length;t<a;++t)u[t]._options=r._resolveDataElementOptions(u[t],t),r.updateElement(u[t],t,e)},_updateRadius:function(){var e=this,t=e.chart,a=t.chartArea,n=t.options,r=Math.min(a.right-a.left,a.bottom-a.top);t.outerRadius=Math.max(r/2,0),t.innerRadius=Math.max(n.cutoutPercentage?t.outerRadius/100*n.cutoutPercentage:1,0),t.radiusLength=(t.outerRadius-t.innerRadius)/t.getVisibleDatasetCount(),e.outerRadius=t.outerRadius-t.radiusLength*e.index,e.innerRadius=e.outerRadius-t.radiusLength},updateElement:function(e,t,a){var n=this,r=n.chart,i=n.getDataset(),o=r.options,s=o.animation,l=r.scale,c=r.data.labels,u=l.xCenter,m=l.yCenter,d=o.startAngle,p=e.hidden?0:l.getDistanceFromCenterForValue(i.data[t]),h=n._starts[t],g=h+(e.hidden?0:n._angles[t]),f=s.animateScale?0:l.getDistanceFromCenterForValue(i.data[t]),b=e._options||{};ie.extend(e,{_datasetIndex:n.index,_index:t,_scale:l,_model:{backgroundColor:b.backgroundColor,borderColor:b.borderColor,borderWidth:b.borderWidth,borderAlign:b.borderAlign,x:u,y:m,innerRadius:0,outerRadius:a?f:p,startAngle:a&&s.animateRotate?d:h,endAngle:a&&s.animateRotate?d:g,label:ie.valueAtIndexOrDefault(c,t,c[t])}}),e.pivot()},countVisibleElements:function(){var e=this.getDataset(),t=this.getMeta(),a=0;return ie.each(t.data,(function(t,n){isNaN(e.data[n])||t.hidden||a++})),a},setHoverStyle:function(e){var t=e._model,a=e._options,n=ie.getHoverColor,r=ie.valueOrDefault;e.$previousStyle={backgroundColor:t.backgroundColor,borderColor:t.borderColor,borderWidth:t.borderWidth},t.backgroundColor=r(a.hoverBackgroundColor,n(a.backgroundColor)),t.borderColor=r(a.hoverBorderColor,n(a.borderColor)),t.borderWidth=r(a.hoverBorderWidth,a.borderWidth)},_computeAngle:function(e){var t=this,a=this.getMeta().count,n=t.getDataset(),r=t.getMeta();if(isNaN(n.data[e])||r.data[e].hidden)return 0;var i={chart:t.chart,dataIndex:e,dataset:n,datasetIndex:t.index};return vt([t.chart.options.elements.arc.angle,2*Math.PI/a],i,e)}});$._set("pie",ie.clone($.doughnut)),$._set("pie",{cutoutPercentage:0});var yt=ct,Ot=ie.valueOrDefault;$._set("radar",{spanGaps:!1,scale:{type:"radialLinear"},elements:{line:{fill:"start",tension:0}}});var xt=xe.extend({datasetElementType:Ve.Line,dataElementType:Ve.Point,linkScales:ie.noop,_datasetElementOptions:["backgroundColor","borderWidth","borderColor","borderCapStyle","borderDash","borderDashOffset","borderJoinStyle","fill"],_dataElementOptions:{backgroundColor:"pointBackgroundColor",borderColor:"pointBorderColor",borderWidth:"pointBorderWidth",hitRadius:"pointHitRadius",hoverBackgroundColor:"pointHoverBackgroundColor",hoverBorderColor:"pointHoverBorderColor",hoverBorderWidth:"pointHoverBorderWidth",hoverRadius:"pointHoverRadius",pointStyle:"pointStyle",radius:"pointRadius",rotation:"pointRotation"},_getIndexScaleId:function(){return this.chart.scale.id},_getValueScaleId:function(){return this.chart.scale.id},update:function(e){var t,a,n=this,r=n.getMeta(),i=r.dataset,o=r.data||[],s=n.chart.scale,l=n._config;for(void 0!==l.tension&&void 0===l.lineTension&&(l.lineTension=l.tension),i._scale=s,i._datasetIndex=n.index,i._children=o,i._loop=!0,i._model=n._resolveDatasetElementOptions(i),i.pivot(),t=0,a=o.length;t<a;++t)n.updateElement(o[t],t,e);for(n.updateBezierControlPoints(),t=0,a=o.length;t<a;++t)o[t].pivot()},updateElement:function(e,t,a){var n=this,r=e.custom||{},i=n.getDataset(),o=n.chart.scale,s=o.getPointPositionForValue(t,i.data[t]),l=n._resolveDataElementOptions(e,t),c=n.getMeta().dataset._model,u=a?o.xCenter:s.x,m=a?o.yCenter:s.y;e._scale=o,e._options=l,e._datasetIndex=n.index,e._index=t,e._model={x:u,y:m,skip:r.skip||isNaN(u)||isNaN(m),radius:l.radius,pointStyle:l.pointStyle,rotation:l.rotation,backgroundColor:l.backgroundColor,borderColor:l.borderColor,borderWidth:l.borderWidth,tension:Ot(r.tension,c?c.tension:0),hitRadius:l.hitRadius}},_resolveDatasetElementOptions:function(){var e=this,t=e._config,a=e.chart.options,n=xe.prototype._resolveDatasetElementOptions.apply(e,arguments);return n.spanGaps=Ot(t.spanGaps,a.spanGaps),n.tension=Ot(t.lineTension,a.elements.line.tension),n},updateBezierControlPoints:function(){var e,t,a,n,r=this,i=r.getMeta(),o=r.chart.chartArea,s=i.data||[];function l(e,t,a){return Math.max(Math.min(e,a),t)}for(i.dataset._model.spanGaps&&(s=s.filter((function(e){return!e._model.skip}))),e=0,t=s.length;e<t;++e)a=s[e]._model,n=ie.splineCurve(ie.previousItem(s,e,!0)._model,a,ie.nextItem(s,e,!0)._model,a.tension),a.controlPointPreviousX=l(n.previous.x,o.left,o.right),a.controlPointPreviousY=l(n.previous.y,o.top,o.bottom),a.controlPointNextX=l(n.next.x,o.left,o.right),a.controlPointNextY=l(n.next.y,o.top,o.bottom)},setHoverStyle:function(e){var t=e._model,a=e._options,n=ie.getHoverColor;e.$previousStyle={backgroundColor:t.backgroundColor,borderColor:t.borderColor,borderWidth:t.borderWidth,radius:t.radius},t.backgroundColor=Ot(a.hoverBackgroundColor,n(a.backgroundColor)),t.borderColor=Ot(a.hoverBorderColor,n(a.borderColor)),t.borderWidth=Ot(a.hoverBorderWidth,a.borderWidth),t.radius=Ot(a.hoverRadius,a.radius)}});$._set("scatter",{hover:{mode:"single"},scales:{xAxes:[{id:"x-axis-1",type:"linear",position:"bottom"}],yAxes:[{id:"y-axis-1",type:"linear",position:"left"}]},tooltips:{callbacks:{title:function(){return""},label:function(e){return"("+e.xLabel+", "+e.yLabel+")"}}}}),$._set("global",{datasets:{scatter:{showLine:!1}}});var kt={bar:tt,bubble:rt,doughnut:ct,horizontalBar:ut,line:bt,polarArea:Et,pie:yt,radar:xt,scatter:bt};function St(e,t){return e.native?{x:e.x,y:e.y}:ie.getRelativePosition(e,t)}function wt(e,t){var a,n,r,i,o,s,l=e._getSortedVisibleDatasetMetas();for(n=0,i=l.length;n<i;++n)for(r=0,o=(a=l[n].data).length;r<o;++r)(s=a[r])._view.skip||t(s)}function Dt(e,t){var a=[];return wt(e,(function(e){e.inRange(t.x,t.y)&&a.push(e)})),a}function jt(e,t,a,n){var r=Number.POSITIVE_INFINITY,i=[];return wt(e,(function(e){if(!a||e.inRange(t.x,t.y)){var o=e.getCenterPoint(),s=n(t,o);s<r?(i=[e],r=s):s===r&&i.push(e)}})),i}function Ct(e){var t=-1!==e.indexOf("x"),a=-1!==e.indexOf("y");return function(e,n){var r=t?Math.abs(e.x-n.x):0,i=a?Math.abs(e.y-n.y):0;return Math.sqrt(Math.pow(r,2)+Math.pow(i,2))}}function Nt(e,t,a){var n=St(t,e);a.axis=a.axis||"x";var r=Ct(a.axis),i=a.intersect?Dt(e,n):jt(e,n,!1,r),o=[];return i.length?(e._getSortedVisibleDatasetMetas().forEach((function(e){var t=e.data[i[0]._index];t&&!t._view.skip&&o.push(t)})),o):[]}var Pt={modes:{single:function(e,t){var a=St(t,e),n=[];return wt(e,(function(e){if(e.inRange(a.x,a.y))return n.push(e),n})),n.slice(0,1)},label:Nt,index:Nt,dataset:function(e,t,a){var n=St(t,e);a.axis=a.axis||"xy";var r=Ct(a.axis),i=a.intersect?Dt(e,n):jt(e,n,!1,r);return i.length>0&&(i=e.getDatasetMeta(i[0]._datasetIndex).data),i},"x-axis":function(e,t){return Nt(e,t,{intersect:!1})},point:function(e,t){return Dt(e,St(t,e))},nearest:function(e,t,a){var n=St(t,e);a.axis=a.axis||"xy";var r=Ct(a.axis);return jt(e,n,a.intersect,r)},x:function(e,t,a){var n=St(t,e),r=[],i=!1;return wt(e,(function(e){e.inXRange(n.x)&&r.push(e),e.inRange(n.x,n.y)&&(i=!0)})),a.intersect&&!i&&(r=[]),r},y:function(e,t,a){var n=St(t,e),r=[],i=!1;return wt(e,(function(e){e.inYRange(n.y)&&r.push(e),e.inRange(n.x,n.y)&&(i=!0)})),a.intersect&&!i&&(r=[]),r}}},_t=ie.extend;function Mt(e,t){return ie.where(e,(function(e){return e.pos===t}))}function It(e,t){return e.sort((function(e,a){var n=t?a:e,r=t?e:a;return n.weight===r.weight?n.index-r.index:n.weight-r.weight}))}function Tt(e){var t,a,n,r=[];for(t=0,a=(e||[]).length;t<a;++t)n=e[t],r.push({index:t,box:n,pos:n.position,horizontal:n.isHorizontal(),weight:n.weight});return r}function At(e,t){var a,n,r;for(a=0,n=e.length;a<n;++a)(r=e[a]).width=r.horizontal?r.box.fullWidth&&t.availableWidth:t.vBoxMaxWidth,r.height=r.horizontal&&t.hBoxMaxHeight}function Lt(e){var t=Tt(e),a=It(Mt(t,"left"),!0),n=It(Mt(t,"right")),r=It(Mt(t,"top"),!0),i=It(Mt(t,"bottom"));return{leftAndTop:a.concat(r),rightAndBottom:n.concat(i),chartArea:Mt(t,"chartArea"),vertical:a.concat(n),horizontal:r.concat(i)}}function Rt(e,t,a,n){return Math.max(e[a],t[a])+Math.max(e[n],t[n])}function Ft(e,t,a){var n,r,i=a.box,o=e.maxPadding;if(a.size&&(e[a.pos]-=a.size),a.size=a.horizontal?i.height:i.width,e[a.pos]+=a.size,i.getPadding){var s=i.getPadding();o.top=Math.max(o.top,s.top),o.left=Math.max(o.left,s.left),o.bottom=Math.max(o.bottom,s.bottom),o.right=Math.max(o.right,s.right)}if(n=t.outerWidth-Rt(o,e,"left","right"),r=t.outerHeight-Rt(o,e,"top","bottom"),n!==e.w||r!==e.h){e.w=n,e.h=r;var l=a.horizontal?[n,e.w]:[r,e.h];return l[0]!==l[1]&&(!isNaN(l[0])||!isNaN(l[1]))}}function Ut(e){var t=e.maxPadding;function a(a){var n=Math.max(t[a]-e[a],0);return e[a]+=n,n}e.y+=a("top"),e.x+=a("left"),a("right"),a("bottom")}function Bt(e,t){var a=t.maxPadding;function n(e){var n={left:0,top:0,right:0,bottom:0};return e.forEach((function(e){n[e]=Math.max(t[e],a[e])})),n}return n(e?["left","right"]:["top","bottom"])}function zt(e,t,a){var n,r,i,o,s,l,c=[];for(n=0,r=e.length;n<r;++n)(o=(i=e[n]).box).update(i.width||t.w,i.height||t.h,Bt(i.horizontal,t)),Ft(t,a,i)&&(l=!0,c.length&&(s=!0)),o.fullWidth||c.push(i);return s&&zt(c,t,a)||l}function Ht(e,t,a){var n,r,i,o,s=a.padding,l=t.x,c=t.y;for(n=0,r=e.length;n<r;++n)o=(i=e[n]).box,i.horizontal?(o.left=o.fullWidth?s.left:t.left,o.right=o.fullWidth?a.outerWidth-s.right:t.left+t.w,o.top=c,o.bottom=c+o.height,o.width=o.right-o.left,c=o.bottom):(o.left=l,o.right=l+o.width,o.top=t.top,o.bottom=t.top+t.h,o.height=o.bottom-o.top,l=o.right);t.x=l,t.y=c}$._set("global",{layout:{padding:{top:0,right:0,bottom:0,left:0}}});var qt={defaults:{},addBox:function(e,t){e.boxes||(e.boxes=[]),t.fullWidth=t.fullWidth||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw:function(){t.draw.apply(t,arguments)}}]},e.boxes.push(t)},removeBox:function(e,t){var a=e.boxes?e.boxes.indexOf(t):-1;-1!==a&&e.boxes.splice(a,1)},configure:function(e,t,a){for(var n,r=["fullWidth","position","weight"],i=r.length,o=0;o<i;++o)n=r[o],a.hasOwnProperty(n)&&(t[n]=a[n])},update:function(e,t,a){if(e){var n=e.options.layout||{},r=ie.options.toPadding(n.padding),i=t-r.width,o=a-r.height,s=Lt(e.boxes),l=s.vertical,c=s.horizontal,u=Object.freeze({outerWidth:t,outerHeight:a,padding:r,availableWidth:i,vBoxMaxWidth:i/2/l.length,hBoxMaxHeight:o/2}),m=_t({maxPadding:_t({},r),w:i,h:o,x:r.left,y:r.top},r);At(l.concat(c),u),zt(l,m,u),zt(c,m,u)&&zt(l,m,u),Ut(m),Ht(s.leftAndTop,m,u),m.x+=m.w,m.y+=m.h,Ht(s.rightAndBottom,m,u),e.chartArea={left:m.left,top:m.top,right:m.left+m.w,bottom:m.top+m.h},ie.each(s.chartArea,(function(t){var a=t.box;_t(a,e.chartArea),a.update(m.w,m.h)}))}}},Wt={acquireContext:function(e){return e&&e.canvas&&(e=e.canvas),e&&e.getContext("2d")||null}},Vt="/*\r\n * DOM element rendering detection\r\n * https://davidwalsh.name/detect-node-insertion\r\n */\r\n@keyframes chartjs-render-animation {\r\n\tfrom { opacity: 0.99; }\r\n\tto { opacity: 1; }\r\n}\r\n\r\n.chartjs-render-monitor {\r\n\tanimation: chartjs-render-animation 0.001s;\r\n}\r\n\r\n/*\r\n * DOM element resizing detection\r\n * https://github.com/marcj/css-element-queries\r\n */\r\n.chartjs-size-monitor,\r\n.chartjs-size-monitor-expand,\r\n.chartjs-size-monitor-shrink {\r\n\tposition: absolute;\r\n\tdirection: ltr;\r\n\tleft: 0;\r\n\ttop: 0;\r\n\tright: 0;\r\n\tbottom: 0;\r\n\toverflow: hidden;\r\n\tpointer-events: none;\r\n\tvisibility: hidden;\r\n\tz-index: -1;\r\n}\r\n\r\n.chartjs-size-monitor-expand > div {\r\n\tposition: absolute;\r\n\twidth: 1000000px;\r\n\theight: 1000000px;\r\n\tleft: 0;\r\n\ttop: 0;\r\n}\r\n\r\n.chartjs-size-monitor-shrink > div {\r\n\tposition: absolute;\r\n\twidth: 200%;\r\n\theight: 200%;\r\n\tleft: 0;\r\n\ttop: 0;\r\n}\r\n",Gt=a(Object.freeze({__proto__:null,default:Vt})),Yt="$chartjs",Qt="chartjs-",Kt=Qt+"size-monitor",Xt=Qt+"render-monitor",$t=Qt+"render-animation",Jt=["animationstart","webkitAnimationStart"],Zt={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"};function ea(e,t){var a=ie.getStyle(e,t),n=a&&a.match(/^(\d+)(\.\d+)?px$/);return n?Number(n[1]):void 0}function ta(e,t){var a=e.style,n=e.getAttribute("height"),r=e.getAttribute("width");if(e[Yt]={initial:{height:n,width:r,style:{display:a.display,height:a.height,width:a.width}}},a.display=a.display||"block",null===r||""===r){var i=ea(e,"width");void 0!==i&&(e.width=i)}if(null===n||""===n)if(""===e.style.height)e.height=e.width/(t.options.aspectRatio||2);else{var o=ea(e,"height");void 0!==i&&(e.height=o)}return e}var aa=!!function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("e",null,t)}catch(a){}return e}()&&{passive:!0};function na(e,t,a){e.addEventListener(t,a,aa)}function ra(e,t,a){e.removeEventListener(t,a,aa)}function ia(e,t,a,n,r){return{type:e,chart:t,native:r||null,x:void 0!==a?a:null,y:void 0!==n?n:null}}function oa(e,t){var a=Zt[e.type]||e.type,n=ie.getRelativePosition(e,t);return ia(a,t,n.x,n.y,e)}function sa(e,t){var a=!1,n=[];return function(){n=Array.prototype.slice.call(arguments),t=t||this,a||(a=!0,ie.requestAnimFrame.call(window,(function(){a=!1,e.apply(t,n)})))}}function la(e){var t=document.createElement("div");return t.className=e||"",t}function ca(e){var t=1e6,a=la(Kt),n=la(Kt+"-expand"),r=la(Kt+"-shrink");n.appendChild(la()),r.appendChild(la()),a.appendChild(n),a.appendChild(r),a._reset=function(){n.scrollLeft=t,n.scrollTop=t,r.scrollLeft=t,r.scrollTop=t};var i=function(){a._reset(),e()};return na(n,"scroll",i.bind(n,"expand")),na(r,"scroll",i.bind(r,"shrink")),a}function ua(e,t){var a=e[Yt]||(e[Yt]={}),n=a.renderProxy=function(e){e.animationName===$t&&t()};ie.each(Jt,(function(t){na(e,t,n)})),a.reflow=!!e.offsetParent,e.classList.add(Xt)}function ma(e){var t=e[Yt]||{},a=t.renderProxy;a&&(ie.each(Jt,(function(t){ra(e,t,a)})),delete t.renderProxy),e.classList.remove(Xt)}function da(e,t,a){var n=e[Yt]||(e[Yt]={}),r=n.resizer=ca(sa((function(){if(n.resizer){var r=a.options.maintainAspectRatio&&e.parentNode,i=r?r.clientWidth:0;t(ia("resize",a)),r&&r.clientWidth<i&&a.canvas&&t(ia("resize",a))}})));ua(e,(function(){if(n.resizer){var t=e.parentNode;t&&t!==r.parentNode&&t.insertBefore(r,t.firstChild),r._reset()}}))}function pa(e){var t=e[Yt]||{},a=t.resizer;delete t.resizer,ma(e),a&&a.parentNode&&a.parentNode.removeChild(a)}function ha(e,t){var a=e[Yt]||(e[Yt]={});if(!a.containsStyles){a.containsStyles=!0,t="/* Chart.js */\n"+t;var n=document.createElement("style");n.setAttribute("type","text/css"),n.appendChild(document.createTextNode(t)),e.appendChild(n)}}var ga={disableCSSInjection:!1,_enabled:"undefined"!==typeof window&&"undefined"!==typeof document,_ensureLoaded:function(e){if(!this.disableCSSInjection){var t=e.getRootNode?e.getRootNode():document;ha(t.host?t:document.head,Gt)}},acquireContext:function(e,t){"string"===typeof e?e=document.getElementById(e):e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas);var a=e&&e.getContext&&e.getContext("2d");return a&&a.canvas===e?(this._ensureLoaded(e),ta(e,t),a):null},releaseContext:function(e){var t=e.canvas;if(t[Yt]){var a=t[Yt].initial;["height","width"].forEach((function(e){var n=a[e];ie.isNullOrUndef(n)?t.removeAttribute(e):t.setAttribute(e,n)})),ie.each(a.style||{},(function(e,a){t.style[a]=e})),t.width=t.width,delete t[Yt]}},addEventListener:function(e,t,a){var n=e.canvas;if("resize"!==t){var r=a[Yt]||(a[Yt]={});na(n,t,(r.proxies||(r.proxies={}))[e.id+"_"+t]=function(t){a(oa(t,e))})}else da(n,a,e)},removeEventListener:function(e,t,a){var n=e.canvas;if("resize"!==t){var r=((a[Yt]||{}).proxies||{})[e.id+"_"+t];r&&ra(n,t,r)}else pa(n)}};ie.addEvent=na,ie.removeEvent=ra;var fa=ga._enabled?ga:Wt,ba=ie.extend({initialize:function(){},acquireContext:function(){},releaseContext:function(){},addEventListener:function(){},removeEventListener:function(){}},fa);$._set("global",{plugins:{}});var va={_plugins:[],_cacheId:0,register:function(e){var t=this._plugins;[].concat(e).forEach((function(e){-1===t.indexOf(e)&&t.push(e)})),this._cacheId++},unregister:function(e){var t=this._plugins;[].concat(e).forEach((function(e){var a=t.indexOf(e);-1!==a&&t.splice(a,1)})),this._cacheId++},clear:function(){this._plugins=[],this._cacheId++},count:function(){return this._plugins.length},getAll:function(){return this._plugins},notify:function(e,t,a){var n,r,i,o,s,l=this.descriptors(e),c=l.length;for(n=0;n<c;++n)if("function"===typeof(s=(i=(r=l[n]).plugin)[t])&&((o=[e].concat(a||[])).push(r.options),!1===s.apply(i,o)))return!1;return!0},descriptors:function(e){var t=e.$plugins||(e.$plugins={});if(t.id===this._cacheId)return t.descriptors;var a=[],n=[],r=e&&e.config||{},i=r.options&&r.options.plugins||{};return this._plugins.concat(r.plugins||[]).forEach((function(e){if(-1===a.indexOf(e)){var t=e.id,r=i[t];!1!==r&&(!0===r&&(r=ie.clone($.global.plugins[t])),a.push(e),n.push({plugin:e,options:r||{}}))}})),t.descriptors=n,t.id=this._cacheId,n},_invalidate:function(e){delete e.$plugins}},Ea={constructors:{},defaults:{},registerScaleType:function(e,t,a){this.constructors[e]=t,this.defaults[e]=ie.clone(a)},getScaleConstructor:function(e){return this.constructors.hasOwnProperty(e)?this.constructors[e]:void 0},getScaleDefaults:function(e){return this.defaults.hasOwnProperty(e)?ie.merge(Object.create(null),[$.scale,this.defaults[e]]):{}},updateScaleDefaults:function(e,t){var a=this;a.defaults.hasOwnProperty(e)&&(a.defaults[e]=ie.extend(a.defaults[e],t))},addScalesToLayout:function(e){ie.each(e.scales,(function(t){t.fullWidth=t.options.fullWidth,t.position=t.options.position,t.weight=t.options.weight,qt.addBox(e,t)}))}},ya=ie.valueOrDefault,Oa=ie.rtl.getRtlAdapter;$._set("global",{tooltips:{enabled:!0,custom:null,mode:"nearest",position:"average",intersect:!0,backgroundColor:"rgba(0,0,0,0.8)",titleFontStyle:"bold",titleSpacing:2,titleMarginBottom:6,titleFontColor:"#fff",titleAlign:"left",bodySpacing:2,bodyFontColor:"#fff",bodyAlign:"left",footerFontStyle:"bold",footerSpacing:2,footerMarginTop:6,footerFontColor:"#fff",footerAlign:"left",yPadding:6,xPadding:6,caretPadding:2,caretSize:5,cornerRadius:6,multiKeyBackground:"#fff",displayColors:!0,borderColor:"rgba(0,0,0,0)",borderWidth:0,callbacks:{beforeTitle:ie.noop,title:function(e,t){var a="",n=t.labels,r=n?n.length:0;if(e.length>0){var i=e[0];i.label?a=i.label:i.xLabel?a=i.xLabel:r>0&&i.index<r&&(a=n[i.index])}return a},afterTitle:ie.noop,beforeBody:ie.noop,beforeLabel:ie.noop,label:function(e,t){var a=t.datasets[e.datasetIndex].label||"";return a&&(a+=": "),ie.isNullOrUndef(e.value)?a+=e.yLabel:a+=e.value,a},labelColor:function(e,t){var a=t.getDatasetMeta(e.datasetIndex).data[e.index]._view;return{borderColor:a.borderColor,backgroundColor:a.backgroundColor}},labelTextColor:function(){return this._options.bodyFontColor},afterLabel:ie.noop,afterBody:ie.noop,beforeFooter:ie.noop,footer:ie.noop,afterFooter:ie.noop}}});var xa={average:function(e){if(!e.length)return!1;var t,a,n=0,r=0,i=0;for(t=0,a=e.length;t<a;++t){var o=e[t];if(o&&o.hasValue()){var s=o.tooltipPosition();n+=s.x,r+=s.y,++i}}return{x:n/i,y:r/i}},nearest:function(e,t){var a,n,r,i=t.x,o=t.y,s=Number.POSITIVE_INFINITY;for(a=0,n=e.length;a<n;++a){var l=e[a];if(l&&l.hasValue()){var c=l.getCenterPoint(),u=ie.distanceBetweenPoints(t,c);u<s&&(s=u,r=l)}}if(r){var m=r.tooltipPosition();i=m.x,o=m.y}return{x:i,y:o}}};function ka(e,t){return t&&(ie.isArray(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function Sa(e){return("string"===typeof e||e instanceof String)&&e.indexOf("\n")>-1?e.split("\n"):e}function wa(e){var t=e._xScale,a=e._yScale||e._scale,n=e._index,r=e._datasetIndex,i=e._chart.getDatasetMeta(r).controller,o=i._getIndexScale(),s=i._getValueScale();return{xLabel:t?t.getLabelForIndex(n,r):"",yLabel:a?a.getLabelForIndex(n,r):"",label:o?""+o.getLabelForIndex(n,r):"",value:s?""+s.getLabelForIndex(n,r):"",index:n,datasetIndex:r,x:e._model.x,y:e._model.y}}function Da(e){var t=$.global;return{xPadding:e.xPadding,yPadding:e.yPadding,xAlign:e.xAlign,yAlign:e.yAlign,rtl:e.rtl,textDirection:e.textDirection,bodyFontColor:e.bodyFontColor,_bodyFontFamily:ya(e.bodyFontFamily,t.defaultFontFamily),_bodyFontStyle:ya(e.bodyFontStyle,t.defaultFontStyle),_bodyAlign:e.bodyAlign,bodyFontSize:ya(e.bodyFontSize,t.defaultFontSize),bodySpacing:e.bodySpacing,titleFontColor:e.titleFontColor,_titleFontFamily:ya(e.titleFontFamily,t.defaultFontFamily),_titleFontStyle:ya(e.titleFontStyle,t.defaultFontStyle),titleFontSize:ya(e.titleFontSize,t.defaultFontSize),_titleAlign:e.titleAlign,titleSpacing:e.titleSpacing,titleMarginBottom:e.titleMarginBottom,footerFontColor:e.footerFontColor,_footerFontFamily:ya(e.footerFontFamily,t.defaultFontFamily),_footerFontStyle:ya(e.footerFontStyle,t.defaultFontStyle),footerFontSize:ya(e.footerFontSize,t.defaultFontSize),_footerAlign:e.footerAlign,footerSpacing:e.footerSpacing,footerMarginTop:e.footerMarginTop,caretSize:e.caretSize,cornerRadius:e.cornerRadius,backgroundColor:e.backgroundColor,opacity:0,legendColorBackground:e.multiKeyBackground,displayColors:e.displayColors,borderColor:e.borderColor,borderWidth:e.borderWidth}}function ja(e,t){var a=e._chart.ctx,n=2*t.yPadding,r=0,i=t.body,o=i.reduce((function(e,t){return e+t.before.length+t.lines.length+t.after.length}),0);o+=t.beforeBody.length+t.afterBody.length;var s=t.title.length,l=t.footer.length,c=t.titleFontSize,u=t.bodyFontSize,m=t.footerFontSize;n+=s*c,n+=s?(s-1)*t.titleSpacing:0,n+=s?t.titleMarginBottom:0,n+=o*u,n+=o?(o-1)*t.bodySpacing:0,n+=l?t.footerMarginTop:0,n+=l*m,n+=l?(l-1)*t.footerSpacing:0;var d=0,p=function(e){r=Math.max(r,a.measureText(e).width+d)};return a.font=ie.fontString(c,t._titleFontStyle,t._titleFontFamily),ie.each(t.title,p),a.font=ie.fontString(u,t._bodyFontStyle,t._bodyFontFamily),ie.each(t.beforeBody.concat(t.afterBody),p),d=t.displayColors?u+2:0,ie.each(i,(function(e){ie.each(e.before,p),ie.each(e.lines,p),ie.each(e.after,p)})),d=0,a.font=ie.fontString(m,t._footerFontStyle,t._footerFontFamily),ie.each(t.footer,p),{width:r+=2*t.xPadding,height:n}}function Ca(e,t){var a,n,r,i,o,s=e._model,l=e._chart,c=e._chart.chartArea,u="center",m="center";s.y<t.height?m="top":s.y>l.height-t.height&&(m="bottom");var d=(c.left+c.right)/2,p=(c.top+c.bottom)/2;"center"===m?(a=function(e){return e<=d},n=function(e){return e>d}):(a=function(e){return e<=t.width/2},n=function(e){return e>=l.width-t.width/2}),r=function(e){return e+t.width+s.caretSize+s.caretPadding>l.width},i=function(e){return e-t.width-s.caretSize-s.caretPadding<0},o=function(e){return e<=p?"top":"bottom"},a(s.x)?(u="left",r(s.x)&&(u="center",m=o(s.y))):n(s.x)&&(u="right",i(s.x)&&(u="center",m=o(s.y)));var h=e._options;return{xAlign:h.xAlign?h.xAlign:u,yAlign:h.yAlign?h.yAlign:m}}function Na(e,t,a,n){var r=e.x,i=e.y,o=e.caretSize,s=e.caretPadding,l=e.cornerRadius,c=a.xAlign,u=a.yAlign,m=o+s,d=l+s;return"right"===c?r-=t.width:"center"===c&&((r-=t.width/2)+t.width>n.width&&(r=n.width-t.width),r<0&&(r=0)),"top"===u?i+=m:i-="bottom"===u?t.height+m:t.height/2,"center"===u?"left"===c?r+=m:"right"===c&&(r-=m):"left"===c?r-=d:"right"===c&&(r+=d),{x:r,y:i}}function Pa(e,t){return"center"===t?e.x+e.width/2:"right"===t?e.x+e.width-e.xPadding:e.x+e.xPadding}function _a(e){return ka([],Sa(e))}var Ma=pe.extend({initialize:function(){this._model=Da(this._options),this._lastActive=[]},getTitle:function(){var e=this,t=e._options.callbacks,a=t.beforeTitle.apply(e,arguments),n=t.title.apply(e,arguments),r=t.afterTitle.apply(e,arguments),i=[];return i=ka(i,Sa(a)),i=ka(i,Sa(n)),i=ka(i,Sa(r))},getBeforeBody:function(){return _a(this._options.callbacks.beforeBody.apply(this,arguments))},getBody:function(e,t){var a=this,n=a._options.callbacks,r=[];return ie.each(e,(function(e){var i={before:[],lines:[],after:[]};ka(i.before,Sa(n.beforeLabel.call(a,e,t))),ka(i.lines,n.label.call(a,e,t)),ka(i.after,Sa(n.afterLabel.call(a,e,t))),r.push(i)})),r},getAfterBody:function(){return _a(this._options.callbacks.afterBody.apply(this,arguments))},getFooter:function(){var e=this,t=e._options.callbacks,a=t.beforeFooter.apply(e,arguments),n=t.footer.apply(e,arguments),r=t.afterFooter.apply(e,arguments),i=[];return i=ka(i,Sa(a)),i=ka(i,Sa(n)),i=ka(i,Sa(r))},update:function(e){var t,a,n=this,r=n._options,i=n._model,o=n._model=Da(r),s=n._active,l=n._data,c={xAlign:i.xAlign,yAlign:i.yAlign},u={x:i.x,y:i.y},m={width:i.width,height:i.height},d={x:i.caretX,y:i.caretY};if(s.length){o.opacity=1;var p=[],h=[];d=xa[r.position].call(n,s,n._eventPosition);var g=[];for(t=0,a=s.length;t<a;++t)g.push(wa(s[t]));r.filter&&(g=g.filter((function(e){return r.filter(e,l)}))),r.itemSort&&(g=g.sort((function(e,t){return r.itemSort(e,t,l)}))),ie.each(g,(function(e){p.push(r.callbacks.labelColor.call(n,e,n._chart)),h.push(r.callbacks.labelTextColor.call(n,e,n._chart))})),o.title=n.getTitle(g,l),o.beforeBody=n.getBeforeBody(g,l),o.body=n.getBody(g,l),o.afterBody=n.getAfterBody(g,l),o.footer=n.getFooter(g,l),o.x=d.x,o.y=d.y,o.caretPadding=r.caretPadding,o.labelColors=p,o.labelTextColors=h,o.dataPoints=g,u=Na(o,m=ja(this,o),c=Ca(this,m),n._chart)}else o.opacity=0;return o.xAlign=c.xAlign,o.yAlign=c.yAlign,o.x=u.x,o.y=u.y,o.width=m.width,o.height=m.height,o.caretX=d.x,o.caretY=d.y,n._model=o,e&&r.custom&&r.custom.call(n,o),n},drawCaret:function(e,t){var a=this._chart.ctx,n=this._view,r=this.getCaretPosition(e,t,n);a.lineTo(r.x1,r.y1),a.lineTo(r.x2,r.y2),a.lineTo(r.x3,r.y3)},getCaretPosition:function(e,t,a){var n,r,i,o,s,l,c=a.caretSize,u=a.cornerRadius,m=a.xAlign,d=a.yAlign,p=e.x,h=e.y,g=t.width,f=t.height;if("center"===d)s=h+f/2,"left"===m?(r=(n=p)-c,i=n,o=s+c,l=s-c):(r=(n=p+g)+c,i=n,o=s-c,l=s+c);else if("left"===m?(n=(r=p+u+c)-c,i=r+c):"right"===m?(n=(r=p+g-u-c)-c,i=r+c):(n=(r=a.caretX)-c,i=r+c),"top"===d)s=(o=h)-c,l=o;else{s=(o=h+f)+c,l=o;var b=i;i=n,n=b}return{x1:n,x2:r,x3:i,y1:o,y2:s,y3:l}},drawTitle:function(e,t,a){var n,r,i,o=t.title,s=o.length;if(s){var l=Oa(t.rtl,t.x,t.width);for(e.x=Pa(t,t._titleAlign),a.textAlign=l.textAlign(t._titleAlign),a.textBaseline="middle",n=t.titleFontSize,r=t.titleSpacing,a.fillStyle=t.titleFontColor,a.font=ie.fontString(n,t._titleFontStyle,t._titleFontFamily),i=0;i<s;++i)a.fillText(o[i],l.x(e.x),e.y+n/2),e.y+=n+r,i+1===s&&(e.y+=t.titleMarginBottom-r)}},drawBody:function(e,t,a){var n,r,i,o,s,l,c,u,m=t.bodyFontSize,d=t.bodySpacing,p=t._bodyAlign,h=t.body,g=t.displayColors,f=0,b=g?Pa(t,"left"):0,v=Oa(t.rtl,t.x,t.width),E=function(t){a.fillText(t,v.x(e.x+f),e.y+m/2),e.y+=m+d},y=v.textAlign(p);for(a.textAlign=p,a.textBaseline="middle",a.font=ie.fontString(m,t._bodyFontStyle,t._bodyFontFamily),e.x=Pa(t,y),a.fillStyle=t.bodyFontColor,ie.each(t.beforeBody,E),f=g&&"right"!==y?"center"===p?m/2+1:m+2:0,s=0,c=h.length;s<c;++s){for(n=h[s],r=t.labelTextColors[s],i=t.labelColors[s],a.fillStyle=r,ie.each(n.before,E),l=0,u=(o=n.lines).length;l<u;++l){if(g){var O=v.x(b);a.fillStyle=t.legendColorBackground,a.fillRect(v.leftForLtr(O,m),e.y,m,m),a.lineWidth=1,a.strokeStyle=i.borderColor,a.strokeRect(v.leftForLtr(O,m),e.y,m,m),a.fillStyle=i.backgroundColor,a.fillRect(v.leftForLtr(v.xPlus(O,1),m-2),e.y+1,m-2,m-2),a.fillStyle=r}E(o[l])}ie.each(n.after,E)}f=0,ie.each(t.afterBody,E),e.y-=d},drawFooter:function(e,t,a){var n,r,i=t.footer,o=i.length;if(o){var s=Oa(t.rtl,t.x,t.width);for(e.x=Pa(t,t._footerAlign),e.y+=t.footerMarginTop,a.textAlign=s.textAlign(t._footerAlign),a.textBaseline="middle",n=t.footerFontSize,a.fillStyle=t.footerFontColor,a.font=ie.fontString(n,t._footerFontStyle,t._footerFontFamily),r=0;r<o;++r)a.fillText(i[r],s.x(e.x),e.y+n/2),e.y+=n+t.footerSpacing}},drawBackground:function(e,t,a,n){a.fillStyle=t.backgroundColor,a.strokeStyle=t.borderColor,a.lineWidth=t.borderWidth;var r=t.xAlign,i=t.yAlign,o=e.x,s=e.y,l=n.width,c=n.height,u=t.cornerRadius;a.beginPath(),a.moveTo(o+u,s),"top"===i&&this.drawCaret(e,n),a.lineTo(o+l-u,s),a.quadraticCurveTo(o+l,s,o+l,s+u),"center"===i&&"right"===r&&this.drawCaret(e,n),a.lineTo(o+l,s+c-u),a.quadraticCurveTo(o+l,s+c,o+l-u,s+c),"bottom"===i&&this.drawCaret(e,n),a.lineTo(o+u,s+c),a.quadraticCurveTo(o,s+c,o,s+c-u),"center"===i&&"left"===r&&this.drawCaret(e,n),a.lineTo(o,s+u),a.quadraticCurveTo(o,s,o+u,s),a.closePath(),a.fill(),t.borderWidth>0&&a.stroke()},draw:function(){var e=this._chart.ctx,t=this._view;if(0!==t.opacity){var a={width:t.width,height:t.height},n={x:t.x,y:t.y},r=Math.abs(t.opacity<.001)?0:t.opacity,i=t.title.length||t.beforeBody.length||t.body.length||t.afterBody.length||t.footer.length;this._options.enabled&&i&&(e.save(),e.globalAlpha=r,this.drawBackground(n,t,e,a),n.y+=t.yPadding,ie.rtl.overrideTextDirection(e,t.textDirection),this.drawTitle(n,t,e),this.drawBody(n,t,e),this.drawFooter(n,t,e),ie.rtl.restoreTextDirection(e,t.textDirection),e.restore())}},handleEvent:function(e){var t=this,a=t._options,n=!1;return t._lastActive=t._lastActive||[],"mouseout"===e.type?t._active=[]:(t._active=t._chart.getElementsAtEventForMode(e,a.mode,a),a.reverse&&t._active.reverse()),(n=!ie.arrayEquals(t._active,t._lastActive))&&(t._lastActive=t._active,(a.enabled||a.custom)&&(t._eventPosition={x:e.x,y:e.y},t.update(!0),t.pivot())),n}}),Ia=xa,Ta=Ma;Ta.positioners=Ia;var Aa=ie.valueOrDefault;function La(){return ie.merge(Object.create(null),[].slice.call(arguments),{merger:function(e,t,a,n){if("xAxes"===e||"yAxes"===e){var r,i,o,s=a[e].length;for(t[e]||(t[e]=[]),r=0;r<s;++r)o=a[e][r],i=Aa(o.type,"xAxes"===e?"category":"linear"),r>=t[e].length&&t[e].push({}),!t[e][r].type||o.type&&o.type!==t[e][r].type?ie.merge(t[e][r],[Ea.getScaleDefaults(i),o]):ie.merge(t[e][r],o)}else ie._merger(e,t,a,n)}})}function Ra(){return ie.merge(Object.create(null),[].slice.call(arguments),{merger:function(e,t,a,n){var r=t[e]||Object.create(null),i=a[e];"scales"===e?t[e]=La(r,i):"scale"===e?t[e]=ie.merge(r,[Ea.getScaleDefaults(i.type),i]):ie._merger(e,t,a,n)}})}function Fa(e){var t=(e=e||Object.create(null)).data=e.data||{};return t.datasets=t.datasets||[],t.labels=t.labels||[],e.options=Ra($.global,$[e.type],e.options||{}),e}function Ua(e){var t=e.options;ie.each(e.scales,(function(t){qt.removeBox(e,t)})),t=Ra($.global,$[e.config.type],t),e.options=e.config.options=t,e.ensureScalesHaveIDs(),e.buildOrUpdateScales(),e.tooltip._options=t.tooltips,e.tooltip.initialize()}function Ba(e,t,a){var n,r=function(e){return e.id===n};do{n=t+a++}while(ie.findIndex(e,r)>=0);return n}function za(e){return"top"===e||"bottom"===e}function Ha(e,t){return function(a,n){return a[e]===n[e]?a[t]-n[t]:a[e]-n[e]}}$._set("global",{elements:{},events:["mousemove","mouseout","click","touchstart","touchmove"],hover:{onHover:null,mode:"nearest",intersect:!0,animationDuration:400},onClick:null,maintainAspectRatio:!0,responsive:!0,responsiveAnimationDuration:0});var qa=function(e,t){return this.construct(e,t),this};ie.extend(qa.prototype,{construct:function(e,t){var a=this;t=Fa(t);var n=ba.acquireContext(e,t),r=n&&n.canvas,i=r&&r.height,o=r&&r.width;a.id=ie.uid(),a.ctx=n,a.canvas=r,a.config=t,a.width=o,a.height=i,a.aspectRatio=i?o/i:null,a.options=t.options,a._bufferedRender=!1,a._layers=[],a.chart=a,a.controller=a,qa.instances[a.id]=a,Object.defineProperty(a,"data",{get:function(){return a.config.data},set:function(e){a.config.data=e}}),n&&r?(a.initialize(),a.update()):console.error("Failed to create chart: can't acquire context from the given item")},initialize:function(){var e=this;return va.notify(e,"beforeInit"),ie.retinaScale(e,e.options.devicePixelRatio),e.bindEvents(),e.options.responsive&&e.resize(!0),e.initToolTip(),va.notify(e,"afterInit"),e},clear:function(){return ie.canvas.clear(this),this},stop:function(){return fe.cancelAnimation(this),this},resize:function(e){var t=this,a=t.options,n=t.canvas,r=a.maintainAspectRatio&&t.aspectRatio||null,i=Math.max(0,Math.floor(ie.getMaximumWidth(n))),o=Math.max(0,Math.floor(r?i/r:ie.getMaximumHeight(n)));if((t.width!==i||t.height!==o)&&(n.width=t.width=i,n.height=t.height=o,n.style.width=i+"px",n.style.height=o+"px",ie.retinaScale(t,a.devicePixelRatio),!e)){var s={width:i,height:o};va.notify(t,"resize",[s]),a.onResize&&a.onResize(t,s),t.stop(),t.update({duration:a.responsiveAnimationDuration})}},ensureScalesHaveIDs:function(){var e=this.options,t=e.scales||{},a=e.scale;ie.each(t.xAxes,(function(e,a){e.id||(e.id=Ba(t.xAxes,"x-axis-",a))})),ie.each(t.yAxes,(function(e,a){e.id||(e.id=Ba(t.yAxes,"y-axis-",a))})),a&&(a.id=a.id||"scale")},buildOrUpdateScales:function(){var e=this,t=e.options,a=e.scales||{},n=[],r=Object.keys(a).reduce((function(e,t){return e[t]=!1,e}),{});t.scales&&(n=n.concat((t.scales.xAxes||[]).map((function(e){return{options:e,dtype:"category",dposition:"bottom"}})),(t.scales.yAxes||[]).map((function(e){return{options:e,dtype:"linear",dposition:"left"}})))),t.scale&&n.push({options:t.scale,dtype:"radialLinear",isDefault:!0,dposition:"chartArea"}),ie.each(n,(function(t){var n=t.options,i=n.id,o=Aa(n.type,t.dtype);za(n.position)!==za(t.dposition)&&(n.position=t.dposition),r[i]=!0;var s=null;if(i in a&&a[i].type===o)(s=a[i]).options=n,s.ctx=e.ctx,s.chart=e;else{var l=Ea.getScaleConstructor(o);if(!l)return;s=new l({id:i,type:o,options:n,ctx:e.ctx,chart:e}),a[s.id]=s}s.mergeTicksOptions(),t.isDefault&&(e.scale=s)})),ie.each(r,(function(e,t){e||delete a[t]})),e.scales=a,Ea.addScalesToLayout(this)},buildOrUpdateControllers:function(){var e,t,a=this,n=[],r=a.data.datasets;for(e=0,t=r.length;e<t;e++){var i=r[e],o=a.getDatasetMeta(e),s=i.type||a.config.type;if(o.type&&o.type!==s&&(a.destroyDatasetMeta(e),o=a.getDatasetMeta(e)),o.type=s,o.order=i.order||0,o.index=e,o.controller)o.controller.updateIndex(e),o.controller.linkScales();else{var l=kt[o.type];if(void 0===l)throw new Error('"'+o.type+'" is not a chart type.');o.controller=new l(a,e),n.push(o.controller)}}return n},resetElements:function(){var e=this;ie.each(e.data.datasets,(function(t,a){e.getDatasetMeta(a).controller.reset()}),e)},reset:function(){this.resetElements(),this.tooltip.initialize()},update:function(e){var t,a,n=this;if(e&&"object"===typeof e||(e={duration:e,lazy:arguments[1]}),Ua(n),va._invalidate(n),!1!==va.notify(n,"beforeUpdate")){n.tooltip._data=n.data;var r=n.buildOrUpdateControllers();for(t=0,a=n.data.datasets.length;t<a;t++)n.getDatasetMeta(t).controller.buildOrUpdateElements();n.updateLayout(),n.options.animation&&n.options.animation.duration&&ie.each(r,(function(e){e.reset()})),n.updateDatasets(),n.tooltip.initialize(),n.lastActive=[],va.notify(n,"afterUpdate"),n._layers.sort(Ha("z","_idx")),n._bufferedRender?n._bufferedRequest={duration:e.duration,easing:e.easing,lazy:e.lazy}:n.render(e)}},updateLayout:function(){var e=this;!1!==va.notify(e,"beforeLayout")&&(qt.update(this,this.width,this.height),e._layers=[],ie.each(e.boxes,(function(t){t._configure&&t._configure(),e._layers.push.apply(e._layers,t._layers())}),e),e._layers.forEach((function(e,t){e._idx=t})),va.notify(e,"afterScaleUpdate"),va.notify(e,"afterLayout"))},updateDatasets:function(){var e=this;if(!1!==va.notify(e,"beforeDatasetsUpdate")){for(var t=0,a=e.data.datasets.length;t<a;++t)e.updateDataset(t);va.notify(e,"afterDatasetsUpdate")}},updateDataset:function(e){var t=this,a=t.getDatasetMeta(e),n={meta:a,index:e};!1!==va.notify(t,"beforeDatasetUpdate",[n])&&(a.controller._update(),va.notify(t,"afterDatasetUpdate",[n]))},render:function(e){var t=this;e&&"object"===typeof e||(e={duration:e,lazy:arguments[1]});var a=t.options.animation,n=Aa(e.duration,a&&a.duration),r=e.lazy;if(!1!==va.notify(t,"beforeRender")){var i=function(e){va.notify(t,"afterRender"),ie.callback(a&&a.onComplete,[e],t)};if(a&&n){var o=new ge({numSteps:n/16.66,easing:e.easing||a.easing,render:function(e,t){var a=ie.easing.effects[t.easing],n=t.currentStep,r=n/t.numSteps;e.draw(a(r),r,n)},onAnimationProgress:a.onProgress,onAnimationComplete:i});fe.addAnimation(t,o,n,r)}else t.draw(),i(new ge({numSteps:0,chart:t}));return t}},draw:function(e){var t,a,n=this;if(n.clear(),ie.isNullOrUndef(e)&&(e=1),n.transition(e),!(n.width<=0||n.height<=0)&&!1!==va.notify(n,"beforeDraw",[e])){for(a=n._layers,t=0;t<a.length&&a[t].z<=0;++t)a[t].draw(n.chartArea);for(n.drawDatasets(e);t<a.length;++t)a[t].draw(n.chartArea);n._drawTooltip(e),va.notify(n,"afterDraw",[e])}},transition:function(e){for(var t=this,a=0,n=(t.data.datasets||[]).length;a<n;++a)t.isDatasetVisible(a)&&t.getDatasetMeta(a).controller.transition(e);t.tooltip.transition(e)},_getSortedDatasetMetas:function(e){var t,a,n=this,r=[];for(t=0,a=(n.data.datasets||[]).length;t<a;++t)e&&!n.isDatasetVisible(t)||r.push(n.getDatasetMeta(t));return r.sort(Ha("order","index")),r},_getSortedVisibleDatasetMetas:function(){return this._getSortedDatasetMetas(!0)},drawDatasets:function(e){var t,a,n=this;if(!1!==va.notify(n,"beforeDatasetsDraw",[e])){for(a=(t=n._getSortedVisibleDatasetMetas()).length-1;a>=0;--a)n.drawDataset(t[a],e);va.notify(n,"afterDatasetsDraw",[e])}},drawDataset:function(e,t){var a=this,n={meta:e,index:e.index,easingValue:t};!1!==va.notify(a,"beforeDatasetDraw",[n])&&(e.controller.draw(t),va.notify(a,"afterDatasetDraw",[n]))},_drawTooltip:function(e){var t=this,a=t.tooltip,n={tooltip:a,easingValue:e};!1!==va.notify(t,"beforeTooltipDraw",[n])&&(a.draw(),va.notify(t,"afterTooltipDraw",[n]))},getElementAtEvent:function(e){return Pt.modes.single(this,e)},getElementsAtEvent:function(e){return Pt.modes.label(this,e,{intersect:!0})},getElementsAtXAxis:function(e){return Pt.modes["x-axis"](this,e,{intersect:!0})},getElementsAtEventForMode:function(e,t,a){var n=Pt.modes[t];return"function"===typeof n?n(this,e,a):[]},getDatasetAtEvent:function(e){return Pt.modes.dataset(this,e,{intersect:!0})},getDatasetMeta:function(e){var t=this,a=t.data.datasets[e];a._meta||(a._meta={});var n=a._meta[t.id];return n||(n=a._meta[t.id]={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:a.order||0,index:e}),n},getVisibleDatasetCount:function(){for(var e=0,t=0,a=this.data.datasets.length;t<a;++t)this.isDatasetVisible(t)&&e++;return e},isDatasetVisible:function(e){var t=this.getDatasetMeta(e);return"boolean"===typeof t.hidden?!t.hidden:!this.data.datasets[e].hidden},generateLegend:function(){return this.options.legendCallback(this)},destroyDatasetMeta:function(e){var t=this.id,a=this.data.datasets[e],n=a._meta&&a._meta[t];n&&(n.controller.destroy(),delete a._meta[t])},destroy:function(){var e,t,a=this,n=a.canvas;for(a.stop(),e=0,t=a.data.datasets.length;e<t;++e)a.destroyDatasetMeta(e);n&&(a.unbindEvents(),ie.canvas.clear(a),ba.releaseContext(a.ctx),a.canvas=null,a.ctx=null),va.notify(a,"destroy"),delete qa.instances[a.id]},toBase64Image:function(){return this.canvas.toDataURL.apply(this.canvas,arguments)},initToolTip:function(){var e=this;e.tooltip=new Ta({_chart:e,_chartInstance:e,_data:e.data,_options:e.options.tooltips},e)},bindEvents:function(){var e=this,t=e._listeners={},a=function(){e.eventHandler.apply(e,arguments)};ie.each(e.options.events,(function(n){ba.addEventListener(e,n,a),t[n]=a})),e.options.responsive&&(a=function(){e.resize()},ba.addEventListener(e,"resize",a),t.resize=a)},unbindEvents:function(){var e=this,t=e._listeners;t&&(delete e._listeners,ie.each(t,(function(t,a){ba.removeEventListener(e,a,t)})))},updateHoverStyle:function(e,t,a){var n,r,i,o=a?"set":"remove";for(r=0,i=e.length;r<i;++r)(n=e[r])&&this.getDatasetMeta(n._datasetIndex).controller[o+"HoverStyle"](n);"dataset"===t&&this.getDatasetMeta(e[0]._datasetIndex).controller["_"+o+"DatasetHoverStyle"]()},eventHandler:function(e){var t=this,a=t.tooltip;if(!1!==va.notify(t,"beforeEvent",[e])){t._bufferedRender=!0,t._bufferedRequest=null;var n=t.handleEvent(e);a&&(n=a._start?a.handleEvent(e):n|a.handleEvent(e)),va.notify(t,"afterEvent",[e]);var r=t._bufferedRequest;return r?t.render(r):n&&!t.animating&&(t.stop(),t.render({duration:t.options.hover.animationDuration,lazy:!0})),t._bufferedRender=!1,t._bufferedRequest=null,t}},handleEvent:function(e){var t=this,a=t.options||{},n=a.hover,r=!1;return t.lastActive=t.lastActive||[],"mouseout"===e.type?t.active=[]:t.active=t.getElementsAtEventForMode(e,n.mode,n),ie.callback(a.onHover||a.hover.onHover,[e.native,t.active],t),"mouseup"!==e.type&&"click"!==e.type||a.onClick&&a.onClick.call(t,e.native,t.active),t.lastActive.length&&t.updateHoverStyle(t.lastActive,n.mode,!1),t.active.length&&n.mode&&t.updateHoverStyle(t.active,n.mode,!0),r=!ie.arrayEquals(t.active,t.lastActive),t.lastActive=t.active,r}}),qa.instances={};var Wa=qa;qa.Controller=qa,qa.types={},ie.configMerge=Ra,ie.scaleMerge=La;var Va=function(){function e(e,t,a){var n;return"string"===typeof e?(n=parseInt(e,10),-1!==e.indexOf("%")&&(n=n/100*t.parentNode[a])):n=e,n}function t(e){return void 0!==e&&null!==e&&"none"!==e}function a(a,n,r){var i=document.defaultView,o=ie._getParentNode(a),s=i.getComputedStyle(a)[n],l=i.getComputedStyle(o)[n],c=t(s),u=t(l),m=Number.POSITIVE_INFINITY;return c||u?Math.min(c?e(s,a,r):m,u?e(l,o,r):m):"none"}ie.where=function(e,t){if(ie.isArray(e)&&Array.prototype.filter)return e.filter(t);var a=[];return ie.each(e,(function(e){t(e)&&a.push(e)})),a},ie.findIndex=Array.prototype.findIndex?function(e,t,a){return e.findIndex(t,a)}:function(e,t,a){a=void 0===a?e:a;for(var n=0,r=e.length;n<r;++n)if(t.call(a,e[n],n,e))return n;return-1},ie.findNextWhere=function(e,t,a){ie.isNullOrUndef(a)&&(a=-1);for(var n=a+1;n<e.length;n++){var r=e[n];if(t(r))return r}},ie.findPreviousWhere=function(e,t,a){ie.isNullOrUndef(a)&&(a=e.length);for(var n=a-1;n>=0;n--){var r=e[n];if(t(r))return r}},ie.isNumber=function(e){return!isNaN(parseFloat(e))&&isFinite(e)},ie.almostEquals=function(e,t,a){return Math.abs(e-t)<a},ie.almostWhole=function(e,t){var a=Math.round(e);return a-t<=e&&a+t>=e},ie.max=function(e){return e.reduce((function(e,t){return isNaN(t)?e:Math.max(e,t)}),Number.NEGATIVE_INFINITY)},ie.min=function(e){return e.reduce((function(e,t){return isNaN(t)?e:Math.min(e,t)}),Number.POSITIVE_INFINITY)},ie.sign=Math.sign?function(e){return Math.sign(e)}:function(e){return 0===(e=+e)||isNaN(e)?e:e>0?1:-1},ie.toRadians=function(e){return e*(Math.PI/180)},ie.toDegrees=function(e){return e*(180/Math.PI)},ie._decimalPlaces=function(e){if(ie.isFinite(e)){for(var t=1,a=0;Math.round(e*t)/t!==e;)t*=10,a++;return a}},ie.getAngleFromPoint=function(e,t){var a=t.x-e.x,n=t.y-e.y,r=Math.sqrt(a*a+n*n),i=Math.atan2(n,a);return i<-.5*Math.PI&&(i+=2*Math.PI),{angle:i,distance:r}},ie.distanceBetweenPoints=function(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))},ie.aliasPixel=function(e){return e%2===0?0:.5},ie._alignPixel=function(e,t,a){var n=e.currentDevicePixelRatio,r=a/2;return Math.round((t-r)*n)/n+r},ie.splineCurve=function(e,t,a,n){var r=e.skip?t:e,i=t,o=a.skip?t:a,s=Math.sqrt(Math.pow(i.x-r.x,2)+Math.pow(i.y-r.y,2)),l=Math.sqrt(Math.pow(o.x-i.x,2)+Math.pow(o.y-i.y,2)),c=s/(s+l),u=l/(s+l),m=n*(c=isNaN(c)?0:c),d=n*(u=isNaN(u)?0:u);return{previous:{x:i.x-m*(o.x-r.x),y:i.y-m*(o.y-r.y)},next:{x:i.x+d*(o.x-r.x),y:i.y+d*(o.y-r.y)}}},ie.EPSILON=Number.EPSILON||1e-14,ie.splineCurveMonotone=function(e){var t,a,n,r,i,o,s,l,c,u=(e||[]).map((function(e){return{model:e._model,deltaK:0,mK:0}})),m=u.length;for(t=0;t<m;++t)if(!(n=u[t]).model.skip){if(a=t>0?u[t-1]:null,(r=t<m-1?u[t+1]:null)&&!r.model.skip){var d=r.model.x-n.model.x;n.deltaK=0!==d?(r.model.y-n.model.y)/d:0}!a||a.model.skip?n.mK=n.deltaK:!r||r.model.skip?n.mK=a.deltaK:this.sign(a.deltaK)!==this.sign(n.deltaK)?n.mK=0:n.mK=(a.deltaK+n.deltaK)/2}for(t=0;t<m-1;++t)n=u[t],r=u[t+1],n.model.skip||r.model.skip||(ie.almostEquals(n.deltaK,0,this.EPSILON)?n.mK=r.mK=0:(i=n.mK/n.deltaK,o=r.mK/n.deltaK,(l=Math.pow(i,2)+Math.pow(o,2))<=9||(s=3/Math.sqrt(l),n.mK=i*s*n.deltaK,r.mK=o*s*n.deltaK)));for(t=0;t<m;++t)(n=u[t]).model.skip||(a=t>0?u[t-1]:null,r=t<m-1?u[t+1]:null,a&&!a.model.skip&&(c=(n.model.x-a.model.x)/3,n.model.controlPointPreviousX=n.model.x-c,n.model.controlPointPreviousY=n.model.y-c*n.mK),r&&!r.model.skip&&(c=(r.model.x-n.model.x)/3,n.model.controlPointNextX=n.model.x+c,n.model.controlPointNextY=n.model.y+c*n.mK))},ie.nextItem=function(e,t,a){return a?t>=e.length-1?e[0]:e[t+1]:t>=e.length-1?e[e.length-1]:e[t+1]},ie.previousItem=function(e,t,a){return a?t<=0?e[e.length-1]:e[t-1]:t<=0?e[0]:e[t-1]},ie.niceNum=function(e,t){var a=Math.floor(ie.log10(e)),n=e/Math.pow(10,a);return(t?n<1.5?1:n<3?2:n<7?5:10:n<=1?1:n<=2?2:n<=5?5:10)*Math.pow(10,a)},ie.requestAnimFrame="undefined"===typeof window?function(e){e()}:window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){return window.setTimeout(e,1e3/60)},ie.getRelativePosition=function(e,t){var a,n,r=e.originalEvent||e,i=e.target||e.srcElement,o=i.getBoundingClientRect(),s=r.touches;s&&s.length>0?(a=s[0].clientX,n=s[0].clientY):(a=r.clientX,n=r.clientY);var l=parseFloat(ie.getStyle(i,"padding-left")),c=parseFloat(ie.getStyle(i,"padding-top")),u=parseFloat(ie.getStyle(i,"padding-right")),m=parseFloat(ie.getStyle(i,"padding-bottom")),d=o.right-o.left-l-u,p=o.bottom-o.top-c-m;return{x:a=Math.round((a-o.left-l)/d*i.width/t.currentDevicePixelRatio),y:n=Math.round((n-o.top-c)/p*i.height/t.currentDevicePixelRatio)}},ie.getConstraintWidth=function(e){return a(e,"max-width","clientWidth")},ie.getConstraintHeight=function(e){return a(e,"max-height","clientHeight")},ie._calculatePadding=function(e,t,a){return(t=ie.getStyle(e,t)).indexOf("%")>-1?a*parseInt(t,10)/100:parseInt(t,10)},ie._getParentNode=function(e){var t=e.parentNode;return t&&"[object ShadowRoot]"===t.toString()&&(t=t.host),t},ie.getMaximumWidth=function(e){var t=ie._getParentNode(e);if(!t)return e.clientWidth;var a=t.clientWidth,n=a-ie._calculatePadding(t,"padding-left",a)-ie._calculatePadding(t,"padding-right",a),r=ie.getConstraintWidth(e);return isNaN(r)?n:Math.min(n,r)},ie.getMaximumHeight=function(e){var t=ie._getParentNode(e);if(!t)return e.clientHeight;var a=t.clientHeight,n=a-ie._calculatePadding(t,"padding-top",a)-ie._calculatePadding(t,"padding-bottom",a),r=ie.getConstraintHeight(e);return isNaN(r)?n:Math.min(n,r)},ie.getStyle=function(e,t){return e.currentStyle?e.currentStyle[t]:document.defaultView.getComputedStyle(e,null).getPropertyValue(t)},ie.retinaScale=function(e,t){var a=e.currentDevicePixelRatio=t||"undefined"!==typeof window&&window.devicePixelRatio||1;if(1!==a){var n=e.canvas,r=e.height,i=e.width;n.height=r*a,n.width=i*a,e.ctx.scale(a,a),n.style.height||n.style.width||(n.style.height=r+"px",n.style.width=i+"px")}},ie.fontString=function(e,t,a){return t+" "+e+"px "+a},ie.longestText=function(e,t,a,n){var r=(n=n||{}).data=n.data||{},i=n.garbageCollect=n.garbageCollect||[];n.font!==t&&(r=n.data={},i=n.garbageCollect=[],n.font=t),e.font=t;var o,s,l,c,u,m=0,d=a.length;for(o=0;o<d;o++)if(void 0!==(c=a[o])&&null!==c&&!0!==ie.isArray(c))m=ie.measureText(e,r,i,m,c);else if(ie.isArray(c))for(s=0,l=c.length;s<l;s++)void 0===(u=c[s])||null===u||ie.isArray(u)||(m=ie.measureText(e,r,i,m,u));var p=i.length/2;if(p>a.length){for(o=0;o<p;o++)delete r[i[o]];i.splice(0,p)}return m},ie.measureText=function(e,t,a,n,r){var i=t[r];return i||(i=t[r]=e.measureText(r).width,a.push(r)),i>n&&(n=i),n},ie.numberOfLabelLines=function(e){var t=1;return ie.each(e,(function(e){ie.isArray(e)&&e.length>t&&(t=e.length)})),t},ie.color=L?function(e){return e instanceof CanvasGradient&&(e=$.global.defaultColor),L(e)}:function(e){return console.error("Color.js not found!"),e},ie.getHoverColor=function(e){return e instanceof CanvasPattern||e instanceof CanvasGradient?e:ie.color(e).saturate(.5).darken(.1).rgbString()}};function Ga(){throw new Error("This method is not implemented: either no adapter can be found or an incomplete integration was provided.")}function Ya(e){this.options=e||{}}ie.extend(Ya.prototype,{formats:Ga,parse:Ga,format:Ga,add:Ga,diff:Ga,startOf:Ga,endOf:Ga,_create:function(e){return e}}),Ya.override=function(e){ie.extend(Ya.prototype,e)};var Qa={_date:Ya},Ka={formatters:{values:function(e){return ie.isArray(e)?e:""+e},linear:function(e,t,a){var n=a.length>3?a[2]-a[1]:a[1]-a[0];Math.abs(n)>1&&e!==Math.floor(e)&&(n=e-Math.floor(e));var r=ie.log10(Math.abs(n)),i="";if(0!==e)if(Math.max(Math.abs(a[0]),Math.abs(a[a.length-1]))<1e-4){var o=ie.log10(Math.abs(e)),s=Math.floor(o)-Math.floor(r);s=Math.max(Math.min(s,20),0),i=e.toExponential(s)}else{var l=-1*Math.floor(r);l=Math.max(Math.min(l,20),0),i=e.toFixed(l)}else i="0";return i},logarithmic:function(e,t,a){var n=e/Math.pow(10,Math.floor(ie.log10(e)));return 0===e?"0":1===n||2===n||5===n||0===t||t===a.length-1?e.toExponential():""}}},Xa=ie.isArray,$a=ie.isNullOrUndef,Ja=ie.valueOrDefault,Za=ie.valueAtIndexOrDefault;function en(e,t){for(var a=[],n=e.length/t,r=0,i=e.length;r<i;r+=n)a.push(e[Math.floor(r)]);return a}function tn(e,t,a){var n,r=e.getTicks().length,i=Math.min(t,r-1),o=e.getPixelForTick(i),s=e._startPixel,l=e._endPixel,c=1e-6;if(!(a&&(n=1===r?Math.max(o-s,l-o):0===t?(e.getPixelForTick(1)-o)/2:(o-e.getPixelForTick(i-1))/2,(o+=i<t?n:-n)<s-c||o>l+c)))return o}function an(e,t){ie.each(e,(function(e){var a,n=e.gc,r=n.length/2;if(r>t){for(a=0;a<r;++a)delete e.data[n[a]];n.splice(0,r)}}))}function nn(e,t,a,n){var r,i,o,s,l,c,u,m,d,p,h,g,f,b=a.length,v=[],E=[],y=[],O=0,x=0;for(r=0;r<b;++r){if(s=a[r].label,l=a[r].major?t.major:t.minor,e.font=c=l.string,u=n[c]=n[c]||{data:{},gc:[]},m=l.lineHeight,d=p=0,$a(s)||Xa(s)){if(Xa(s))for(i=0,o=s.length;i<o;++i)h=s[i],$a(h)||Xa(h)||(d=ie.measureText(e,u.data,u.gc,d,h),p+=m)}else d=ie.measureText(e,u.data,u.gc,d,s),p=m;v.push(d),E.push(p),y.push(m/2),O=Math.max(d,O),x=Math.max(p,x)}function k(e){return{width:v[e]||0,height:E[e]||0,offset:y[e]||0}}return an(n,b),g=v.indexOf(O),f=E.indexOf(x),{first:k(0),last:k(b-1),widest:k(g),highest:k(f)}}function rn(e){return e.drawTicks?e.tickMarkLength:0}function on(e){var t,a;return e.display?(t=ie.options._parseFont(e),a=ie.options.toPadding(e.padding),t.lineHeight+a.height):0}function sn(e,t){return ie.extend(ie.options._parseFont({fontFamily:Ja(t.fontFamily,e.fontFamily),fontSize:Ja(t.fontSize,e.fontSize),fontStyle:Ja(t.fontStyle,e.fontStyle),lineHeight:Ja(t.lineHeight,e.lineHeight)}),{color:ie.options.resolve([t.fontColor,e.fontColor,$.global.defaultFontColor])})}function ln(e){var t=sn(e,e.minor);return{minor:t,major:e.major.enabled?sn(e,e.major):t}}function cn(e){var t,a,n,r=[];for(a=0,n=e.length;a<n;++a)"undefined"!==typeof(t=e[a])._index&&r.push(t);return r}function un(e){var t,a,n=e.length;if(n<2)return!1;for(a=e[0],t=1;t<n;++t)if(e[t]-e[t-1]!==a)return!1;return a}function mn(e,t,a,n){var r,i,o,s,l=un(e),c=(t.length-1)/n;if(!l)return Math.max(c,1);for(o=0,s=(r=ie.math._factorize(l)).length-1;o<s;o++)if((i=r[o])>c)return i;return Math.max(c,1)}function dn(e){var t,a,n=[];for(t=0,a=e.length;t<a;t++)e[t].major&&n.push(t);return n}function pn(e,t,a){var n,r,i=0,o=t[0];for(a=Math.ceil(a),n=0;n<e.length;n++)r=e[n],n===o?(r._index=n,o=t[++i*a]):delete r.label}function hn(e,t,a,n){var r,i,o,s,l=Ja(a,0),c=Math.min(Ja(n,e.length),e.length),u=0;for(t=Math.ceil(t),n&&(t=(r=n-a)/Math.floor(r/t)),s=l;s<0;)u++,s=Math.round(l+u*t);for(i=Math.max(l,0);i<c;i++)o=e[i],i===s?(o._index=i,u++,s=Math.round(l+u*t)):delete o.label}$._set("scale",{display:!0,position:"left",offset:!1,gridLines:{display:!0,color:"rgba(0,0,0,0.1)",lineWidth:1,drawBorder:!0,drawOnChartArea:!0,drawTicks:!0,tickMarkLength:10,zeroLineWidth:1,zeroLineColor:"rgba(0,0,0,0.25)",zeroLineBorderDash:[],zeroLineBorderDashOffset:0,offsetGridLines:!1,borderDash:[],borderDashOffset:0},scaleLabel:{display:!1,labelString:"",padding:{top:4,bottom:4}},ticks:{beginAtZero:!1,minRotation:0,maxRotation:50,mirror:!1,padding:0,reverse:!1,display:!0,autoSkip:!0,autoSkipPadding:0,labelOffset:0,callback:Ka.formatters.values,minor:{},major:{}}});var gn=pe.extend({zeroLineIndex:0,getPadding:function(){var e=this;return{left:e.paddingLeft||0,top:e.paddingTop||0,right:e.paddingRight||0,bottom:e.paddingBottom||0}},getTicks:function(){return this._ticks},_getLabels:function(){var e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]},mergeTicksOptions:function(){},beforeUpdate:function(){ie.callback(this.options.beforeUpdate,[this])},update:function(e,t,a){var n,r,i,o,s,l=this,c=l.options.ticks,u=c.sampleSize;if(l.beforeUpdate(),l.maxWidth=e,l.maxHeight=t,l.margins=ie.extend({left:0,right:0,top:0,bottom:0},a),l._ticks=null,l.ticks=null,l._labelSizes=null,l._maxLabelLines=0,l.longestLabelWidth=0,l.longestTextCache=l.longestTextCache||{},l._gridLineItems=null,l._labelItems=null,l.beforeSetDimensions(),l.setDimensions(),l.afterSetDimensions(),l.beforeDataLimits(),l.determineDataLimits(),l.afterDataLimits(),l.beforeBuildTicks(),o=l.buildTicks()||[],(!(o=l.afterBuildTicks(o)||o)||!o.length)&&l.ticks)for(o=[],n=0,r=l.ticks.length;n<r;++n)o.push({value:l.ticks[n],major:!1});return l._ticks=o,s=u<o.length,i=l._convertTicksToLabels(s?en(o,u):o),l._configure(),l.beforeCalculateTickRotation(),l.calculateTickRotation(),l.afterCalculateTickRotation(),l.beforeFit(),l.fit(),l.afterFit(),l._ticksToDraw=c.display&&(c.autoSkip||"auto"===c.source)?l._autoSkip(o):o,s&&(i=l._convertTicksToLabels(l._ticksToDraw)),l.ticks=i,l.afterUpdate(),l.minSize},_configure:function(){var e,t,a=this,n=a.options.ticks.reverse;a.isHorizontal()?(e=a.left,t=a.right):(e=a.top,t=a.bottom,n=!n),a._startPixel=e,a._endPixel=t,a._reversePixels=n,a._length=t-e},afterUpdate:function(){ie.callback(this.options.afterUpdate,[this])},beforeSetDimensions:function(){ie.callback(this.options.beforeSetDimensions,[this])},setDimensions:function(){var e=this;e.isHorizontal()?(e.width=e.maxWidth,e.left=0,e.right=e.width):(e.height=e.maxHeight,e.top=0,e.bottom=e.height),e.paddingLeft=0,e.paddingTop=0,e.paddingRight=0,e.paddingBottom=0},afterSetDimensions:function(){ie.callback(this.options.afterSetDimensions,[this])},beforeDataLimits:function(){ie.callback(this.options.beforeDataLimits,[this])},determineDataLimits:ie.noop,afterDataLimits:function(){ie.callback(this.options.afterDataLimits,[this])},beforeBuildTicks:function(){ie.callback(this.options.beforeBuildTicks,[this])},buildTicks:ie.noop,afterBuildTicks:function(e){var t=this;return Xa(e)&&e.length?ie.callback(t.options.afterBuildTicks,[t,e]):(t.ticks=ie.callback(t.options.afterBuildTicks,[t,t.ticks])||t.ticks,e)},beforeTickToLabelConversion:function(){ie.callback(this.options.beforeTickToLabelConversion,[this])},convertTicksToLabels:function(){var e=this,t=e.options.ticks;e.ticks=e.ticks.map(t.userCallback||t.callback,this)},afterTickToLabelConversion:function(){ie.callback(this.options.afterTickToLabelConversion,[this])},beforeCalculateTickRotation:function(){ie.callback(this.options.beforeCalculateTickRotation,[this])},calculateTickRotation:function(){var e,t,a,n,r,i,o,s=this,l=s.options,c=l.ticks,u=s.getTicks().length,m=c.minRotation||0,d=c.maxRotation,p=m;!s._isVisible()||!c.display||m>=d||u<=1||!s.isHorizontal()?s.labelRotation=m:(t=(e=s._getLabelSizes()).widest.width,a=e.highest.height-e.highest.offset,n=Math.min(s.maxWidth,s.chart.width-t),t+6>(r=l.offset?s.maxWidth/u:n/(u-1))&&(r=n/(u-(l.offset?.5:1)),i=s.maxHeight-rn(l.gridLines)-c.padding-on(l.scaleLabel),o=Math.sqrt(t*t+a*a),p=ie.toDegrees(Math.min(Math.asin(Math.min((e.highest.height+6)/r,1)),Math.asin(Math.min(i/o,1))-Math.asin(a/o))),p=Math.max(m,Math.min(d,p))),s.labelRotation=p)},afterCalculateTickRotation:function(){ie.callback(this.options.afterCalculateTickRotation,[this])},beforeFit:function(){ie.callback(this.options.beforeFit,[this])},fit:function(){var e=this,t=e.minSize={width:0,height:0},a=e.chart,n=e.options,r=n.ticks,i=n.scaleLabel,o=n.gridLines,s=e._isVisible(),l="bottom"===n.position,c=e.isHorizontal();if(c?t.width=e.maxWidth:s&&(t.width=rn(o)+on(i)),c?s&&(t.height=rn(o)+on(i)):t.height=e.maxHeight,r.display&&s){var u=ln(r),m=e._getLabelSizes(),d=m.first,p=m.last,h=m.widest,g=m.highest,f=.4*u.minor.lineHeight,b=r.padding;if(c){var v=0!==e.labelRotation,E=ie.toRadians(e.labelRotation),y=Math.cos(E),O=Math.sin(E),x=O*h.width+y*(g.height-(v?g.offset:0))+(v?0:f);t.height=Math.min(e.maxHeight,t.height+x+b);var k,S,w=e.getPixelForTick(0)-e.left,D=e.right-e.getPixelForTick(e.getTicks().length-1);v?(k=l?y*d.width+O*d.offset:O*(d.height-d.offset),S=l?O*(p.height-p.offset):y*p.width+O*p.offset):(k=d.width/2,S=p.width/2),e.paddingLeft=Math.max((k-w)*e.width/(e.width-w),0)+3,e.paddingRight=Math.max((S-D)*e.width/(e.width-D),0)+3}else{var j=r.mirror?0:h.width+b+f;t.width=Math.min(e.maxWidth,t.width+j),e.paddingTop=d.height/2,e.paddingBottom=p.height/2}}e.handleMargins(),c?(e.width=e._length=a.width-e.margins.left-e.margins.right,e.height=t.height):(e.width=t.width,e.height=e._length=a.height-e.margins.top-e.margins.bottom)},handleMargins:function(){var e=this;e.margins&&(e.margins.left=Math.max(e.paddingLeft,e.margins.left),e.margins.top=Math.max(e.paddingTop,e.margins.top),e.margins.right=Math.max(e.paddingRight,e.margins.right),e.margins.bottom=Math.max(e.paddingBottom,e.margins.bottom))},afterFit:function(){ie.callback(this.options.afterFit,[this])},isHorizontal:function(){var e=this.options.position;return"top"===e||"bottom"===e},isFullWidth:function(){return this.options.fullWidth},getRightValue:function(e){if($a(e))return NaN;if(("number"===typeof e||e instanceof Number)&&!isFinite(e))return NaN;if(e)if(this.isHorizontal()){if(void 0!==e.x)return this.getRightValue(e.x)}else if(void 0!==e.y)return this.getRightValue(e.y);return e},_convertTicksToLabels:function(e){var t,a,n,r=this;for(r.ticks=e.map((function(e){return e.value})),r.beforeTickToLabelConversion(),t=r.convertTicksToLabels(e)||r.ticks,r.afterTickToLabelConversion(),a=0,n=e.length;a<n;++a)e[a].label=t[a];return t},_getLabelSizes:function(){var e=this,t=e._labelSizes;return t||(e._labelSizes=t=nn(e.ctx,ln(e.options.ticks),e.getTicks(),e.longestTextCache),e.longestLabelWidth=t.widest.width),t},_parseValue:function(e){var t,a,n,r;return Xa(e)?(t=+this.getRightValue(e[0]),a=+this.getRightValue(e[1]),n=Math.min(t,a),r=Math.max(t,a)):(t=void 0,a=e=+this.getRightValue(e),n=e,r=e),{min:n,max:r,start:t,end:a}},_getScaleLabel:function(e){var t=this._parseValue(e);return void 0!==t.start?"["+t.start+", "+t.end+"]":+this.getRightValue(e)},getLabelForIndex:ie.noop,getPixelForValue:ie.noop,getValueForPixel:ie.noop,getPixelForTick:function(e){var t=this,a=t.options.offset,n=t._ticks.length,r=1/Math.max(n-(a?0:1),1);return e<0||e>n-1?null:t.getPixelForDecimal(e*r+(a?r/2:0))},getPixelForDecimal:function(e){var t=this;return t._reversePixels&&(e=1-e),t._startPixel+e*t._length},getDecimalForPixel:function(e){var t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t},getBasePixel:function(){return this.getPixelForValue(this.getBaseValue())},getBaseValue:function(){var e=this,t=e.min,a=e.max;return e.beginAtZero?0:t<0&&a<0?a:t>0&&a>0?t:0},_autoSkip:function(e){var t,a,n,r,i=this,o=i.options.ticks,s=i._length,l=o.maxTicksLimit||s/i._tickSize()+1,c=o.major.enabled?dn(e):[],u=c.length,m=c[0],d=c[u-1];if(u>l)return pn(e,c,u/l),cn(e);if(n=mn(c,e,s,l),u>0){for(t=0,a=u-1;t<a;t++)hn(e,n,c[t],c[t+1]);return r=u>1?(d-m)/(u-1):null,hn(e,n,ie.isNullOrUndef(r)?0:m-r,m),hn(e,n,d,ie.isNullOrUndef(r)?e.length:d+r),cn(e)}return hn(e,n),cn(e)},_tickSize:function(){var e=this,t=e.options.ticks,a=ie.toRadians(e.labelRotation),n=Math.abs(Math.cos(a)),r=Math.abs(Math.sin(a)),i=e._getLabelSizes(),o=t.autoSkipPadding||0,s=i?i.widest.width+o:0,l=i?i.highest.height+o:0;return e.isHorizontal()?l*n>s*r?s/n:l/r:l*r<s*n?l/n:s/r},_isVisible:function(){var e,t,a,n=this,r=n.chart,i=n.options.display;if("auto"!==i)return!!i;for(e=0,t=r.data.datasets.length;e<t;++e)if(r.isDatasetVisible(e)&&((a=r.getDatasetMeta(e)).xAxisID===n.id||a.yAxisID===n.id))return!0;return!1},_computeGridLineItems:function(e){var t,a,n,r,i,o,s,l,c,u,m,d,p,h,g,f,b,v=this,E=v.chart,y=v.options,O=y.gridLines,x=y.position,k=O.offsetGridLines,S=v.isHorizontal(),w=v._ticksToDraw,D=w.length+(k?1:0),j=rn(O),C=[],N=O.drawBorder?Za(O.lineWidth,0,0):0,P=N/2,_=ie._alignPixel,M=function(e){return _(E,e,N)};for("top"===x?(t=M(v.bottom),s=v.bottom-j,c=t-P,m=M(e.top)+P,p=e.bottom):"bottom"===x?(t=M(v.top),m=e.top,p=M(e.bottom)-P,s=t+P,c=v.top+j):"left"===x?(t=M(v.right),o=v.right-j,l=t-P,u=M(e.left)+P,d=e.right):(t=M(v.left),u=e.left,d=M(e.right)-P,o=t+P,l=v.left+j),a=0;a<D;++a)n=w[a]||{},$a(n.label)&&a<w.length||(a===v.zeroLineIndex&&y.offset===k?(h=O.zeroLineWidth,g=O.zeroLineColor,f=O.zeroLineBorderDash||[],b=O.zeroLineBorderDashOffset||0):(h=Za(O.lineWidth,a,1),g=Za(O.color,a,"rgba(0,0,0,0.1)"),f=O.borderDash||[],b=O.borderDashOffset||0),void 0!==(r=tn(v,n._index||a,k))&&(i=_(E,r,h),S?o=l=u=d=i:s=c=m=p=i,C.push({tx1:o,ty1:s,tx2:l,ty2:c,x1:u,y1:m,x2:d,y2:p,width:h,color:g,borderDash:f,borderDashOffset:b})));return C.ticksLength=D,C.borderValue=t,C},_computeLabelItems:function(){var e,t,a,n,r,i,o,s,l,c,u,m,d=this,p=d.options,h=p.ticks,g=p.position,f=h.mirror,b=d.isHorizontal(),v=d._ticksToDraw,E=ln(h),y=h.padding,O=rn(p.gridLines),x=-ie.toRadians(d.labelRotation),k=[];for("top"===g?(i=d.bottom-O-y,o=x?"left":"center"):"bottom"===g?(i=d.top+O+y,o=x?"right":"center"):"left"===g?(r=d.right-(f?0:O)-y,o=f?"left":"right"):(r=d.left+(f?0:O)+y,o=f?"right":"left"),e=0,t=v.length;e<t;++e)n=(a=v[e]).label,$a(n)||(s=d.getPixelForTick(a._index||e)+h.labelOffset,c=(l=a.major?E.major:E.minor).lineHeight,u=Xa(n)?n.length:1,b?(r=s,m="top"===g?((x?1:.5)-u)*c:(x?0:.5)*c):(i=s,m=(1-u)*c/2),k.push({x:r,y:i,rotation:x,label:n,font:l,textOffset:m,textAlign:o}));return k},_drawGrid:function(e){var t=this,a=t.options.gridLines;if(a.display){var n,r,i,o,s,l=t.ctx,c=t.chart,u=ie._alignPixel,m=a.drawBorder?Za(a.lineWidth,0,0):0,d=t._gridLineItems||(t._gridLineItems=t._computeGridLineItems(e));for(i=0,o=d.length;i<o;++i)n=(s=d[i]).width,r=s.color,n&&r&&(l.save(),l.lineWidth=n,l.strokeStyle=r,l.setLineDash&&(l.setLineDash(s.borderDash),l.lineDashOffset=s.borderDashOffset),l.beginPath(),a.drawTicks&&(l.moveTo(s.tx1,s.ty1),l.lineTo(s.tx2,s.ty2)),a.drawOnChartArea&&(l.moveTo(s.x1,s.y1),l.lineTo(s.x2,s.y2)),l.stroke(),l.restore());if(m){var p,h,g,f,b=m,v=Za(a.lineWidth,d.ticksLength-1,1),E=d.borderValue;t.isHorizontal()?(p=u(c,t.left,b)-b/2,h=u(c,t.right,v)+v/2,g=f=E):(g=u(c,t.top,b)-b/2,f=u(c,t.bottom,v)+v/2,p=h=E),l.lineWidth=m,l.strokeStyle=Za(a.color,0),l.beginPath(),l.moveTo(p,g),l.lineTo(h,f),l.stroke()}}},_drawLabels:function(){var e=this;if(e.options.ticks.display){var t,a,n,r,i,o,s,l,c=e.ctx,u=e._labelItems||(e._labelItems=e._computeLabelItems());for(t=0,n=u.length;t<n;++t){if(o=(i=u[t]).font,c.save(),c.translate(i.x,i.y),c.rotate(i.rotation),c.font=o.string,c.fillStyle=o.color,c.textBaseline="middle",c.textAlign=i.textAlign,s=i.label,l=i.textOffset,Xa(s))for(a=0,r=s.length;a<r;++a)c.fillText(""+s[a],0,l),l+=o.lineHeight;else c.fillText(s,0,l);c.restore()}}},_drawTitle:function(){var e=this,t=e.ctx,a=e.options,n=a.scaleLabel;if(n.display){var r,i,o=Ja(n.fontColor,$.global.defaultFontColor),s=ie.options._parseFont(n),l=ie.options.toPadding(n.padding),c=s.lineHeight/2,u=a.position,m=0;if(e.isHorizontal())r=e.left+e.width/2,i="bottom"===u?e.bottom-c-l.bottom:e.top+c+l.top;else{var d="left"===u;r=d?e.left+c+l.top:e.right-c-l.top,i=e.top+e.height/2,m=d?-.5*Math.PI:.5*Math.PI}t.save(),t.translate(r,i),t.rotate(m),t.textAlign="center",t.textBaseline="middle",t.fillStyle=o,t.font=s.string,t.fillText(n.labelString,0,0),t.restore()}},draw:function(e){var t=this;t._isVisible()&&(t._drawGrid(e),t._drawTitle(),t._drawLabels())},_layers:function(){var e=this,t=e.options,a=t.ticks&&t.ticks.z||0,n=t.gridLines&&t.gridLines.z||0;return e._isVisible()&&a!==n&&e.draw===e._draw?[{z:n,draw:function(){e._drawGrid.apply(e,arguments),e._drawTitle.apply(e,arguments)}},{z:a,draw:function(){e._drawLabels.apply(e,arguments)}}]:[{z:a,draw:function(){e.draw.apply(e,arguments)}}]},_getMatchingVisibleMetas:function(e){var t=this,a=t.isHorizontal();return t.chart._getSortedVisibleDatasetMetas().filter((function(n){return(!e||n.type===e)&&(a?n.xAxisID===t.id:n.yAxisID===t.id)}))}});gn.prototype._draw=gn.prototype.draw;var fn=gn,bn=ie.isNullOrUndef,vn={position:"bottom"},En=fn.extend({determineDataLimits:function(){var e,t=this,a=t._getLabels(),n=t.options.ticks,r=n.min,i=n.max,o=0,s=a.length-1;void 0!==r&&(e=a.indexOf(r))>=0&&(o=e),void 0!==i&&(e=a.indexOf(i))>=0&&(s=e),t.minIndex=o,t.maxIndex=s,t.min=a[o],t.max=a[s]},buildTicks:function(){var e=this,t=e._getLabels(),a=e.minIndex,n=e.maxIndex;e.ticks=0===a&&n===t.length-1?t:t.slice(a,n+1)},getLabelForIndex:function(e,t){var a=this,n=a.chart;return n.getDatasetMeta(t).controller._getValueScaleId()===a.id?a.getRightValue(n.data.datasets[t].data[e]):a._getLabels()[e]},_configure:function(){var e=this,t=e.options.offset,a=e.ticks;fn.prototype._configure.call(e),e.isHorizontal()||(e._reversePixels=!e._reversePixels),a&&(e._startValue=e.minIndex-(t?.5:0),e._valueRange=Math.max(a.length-(t?0:1),1))},getPixelForValue:function(e,t,a){var n,r,i,o=this;return bn(t)||bn(a)||(e=o.chart.data.datasets[a].data[t]),bn(e)||(n=o.isHorizontal()?e.x:e.y),(void 0!==n||void 0!==e&&isNaN(t))&&(r=o._getLabels(),e=ie.valueOrDefault(n,e),t=-1!==(i=r.indexOf(e))?i:t,isNaN(t)&&(t=e)),o.getPixelForDecimal((t-o._startValue)/o._valueRange)},getPixelForTick:function(e){var t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e],e+this.minIndex)},getValueForPixel:function(e){var t=this,a=Math.round(t._startValue+t.getDecimalForPixel(e)*t._valueRange);return Math.min(Math.max(a,0),t.ticks.length-1)},getBasePixel:function(){return this.bottom}}),yn=vn;En._defaults=yn;var On=ie.noop,xn=ie.isNullOrUndef;function kn(e,t){var a,n,r,i,o=[],s=1e-14,l=e.stepSize,c=l||1,u=e.maxTicks-1,m=e.min,d=e.max,p=e.precision,h=t.min,g=t.max,f=ie.niceNum((g-h)/u/c)*c;if(f<s&&xn(m)&&xn(d))return[h,g];(i=Math.ceil(g/f)-Math.floor(h/f))>u&&(f=ie.niceNum(i*f/u/c)*c),l||xn(p)?a=Math.pow(10,ie._decimalPlaces(f)):(a=Math.pow(10,p),f=Math.ceil(f*a)/a),n=Math.floor(h/f)*f,r=Math.ceil(g/f)*f,l&&(!xn(m)&&ie.almostWhole(m/f,f/1e3)&&(n=m),!xn(d)&&ie.almostWhole(d/f,f/1e3)&&(r=d)),i=(r-n)/f,i=ie.almostEquals(i,Math.round(i),f/1e3)?Math.round(i):Math.ceil(i),n=Math.round(n*a)/a,r=Math.round(r*a)/a,o.push(xn(m)?n:m);for(var b=1;b<i;++b)o.push(Math.round((n+b*f)*a)/a);return o.push(xn(d)?r:d),o}var Sn=fn.extend({getRightValue:function(e){return"string"===typeof e?+e:fn.prototype.getRightValue.call(this,e)},handleTickRangeOptions:function(){var e=this,t=e.options.ticks;if(t.beginAtZero){var a=ie.sign(e.min),n=ie.sign(e.max);a<0&&n<0?e.max=0:a>0&&n>0&&(e.min=0)}var r=void 0!==t.min||void 0!==t.suggestedMin,i=void 0!==t.max||void 0!==t.suggestedMax;void 0!==t.min?e.min=t.min:void 0!==t.suggestedMin&&(null===e.min?e.min=t.suggestedMin:e.min=Math.min(e.min,t.suggestedMin)),void 0!==t.max?e.max=t.max:void 0!==t.suggestedMax&&(null===e.max?e.max=t.suggestedMax:e.max=Math.max(e.max,t.suggestedMax)),r!==i&&e.min>=e.max&&(r?e.max=e.min+1:e.min=e.max-1),e.min===e.max&&(e.max++,t.beginAtZero||e.min--)},getTickLimit:function(){var e,t=this,a=t.options.ticks,n=a.stepSize,r=a.maxTicksLimit;return n?e=Math.ceil(t.max/n)-Math.floor(t.min/n)+1:(e=t._computeTickLimit(),r=r||11),r&&(e=Math.min(r,e)),e},_computeTickLimit:function(){return Number.POSITIVE_INFINITY},handleDirectionalChanges:On,buildTicks:function(){var e=this,t=e.options.ticks,a=e.getTickLimit(),n={maxTicks:a=Math.max(2,a),min:t.min,max:t.max,precision:t.precision,stepSize:ie.valueOrDefault(t.fixedStepSize,t.stepSize)},r=e.ticks=kn(n,e);e.handleDirectionalChanges(),e.max=ie.max(r),e.min=ie.min(r),t.reverse?(r.reverse(),e.start=e.max,e.end=e.min):(e.start=e.min,e.end=e.max)},convertTicksToLabels:function(){var e=this;e.ticksAsNumbers=e.ticks.slice(),e.zeroLineIndex=e.ticks.indexOf(0),fn.prototype.convertTicksToLabels.call(e)},_configure:function(){var e,t=this,a=t.getTicks(),n=t.min,r=t.max;fn.prototype._configure.call(t),t.options.offset&&a.length&&(n-=e=(r-n)/Math.max(a.length-1,1)/2,r+=e),t._startValue=n,t._endValue=r,t._valueRange=r-n}}),wn={position:"left",ticks:{callback:Ka.formatters.linear}},Dn=0,jn=1;function Cn(e,t,a){var n=[a.type,void 0===t&&void 0===a.stack?a.index:"",a.stack].join(".");return void 0===e[n]&&(e[n]={pos:[],neg:[]}),e[n]}function Nn(e,t,a,n){var r,i,o=e.options,s=Cn(t,o.stacked,a),l=s.pos,c=s.neg,u=n.length;for(r=0;r<u;++r)i=e._parseValue(n[r]),isNaN(i.min)||isNaN(i.max)||a.data[r].hidden||(l[r]=l[r]||0,c[r]=c[r]||0,o.relativePoints?l[r]=100:i.min<0||i.max<0?c[r]+=i.min:l[r]+=i.max)}function Pn(e,t,a){var n,r,i=a.length;for(n=0;n<i;++n)r=e._parseValue(a[n]),isNaN(r.min)||isNaN(r.max)||t.data[n].hidden||(e.min=Math.min(e.min,r.min),e.max=Math.max(e.max,r.max))}var _n=Sn.extend({determineDataLimits:function(){var e,t,a,n,r=this,i=r.options,o=r.chart.data.datasets,s=r._getMatchingVisibleMetas(),l=i.stacked,c={},u=s.length;if(r.min=Number.POSITIVE_INFINITY,r.max=Number.NEGATIVE_INFINITY,void 0===l)for(e=0;!l&&e<u;++e)l=void 0!==(t=s[e]).stack;for(e=0;e<u;++e)a=o[(t=s[e]).index].data,l?Nn(r,c,t,a):Pn(r,t,a);ie.each(c,(function(e){n=e.pos.concat(e.neg),r.min=Math.min(r.min,ie.min(n)),r.max=Math.max(r.max,ie.max(n))})),r.min=ie.isFinite(r.min)&&!isNaN(r.min)?r.min:Dn,r.max=ie.isFinite(r.max)&&!isNaN(r.max)?r.max:jn,r.handleTickRangeOptions()},_computeTickLimit:function(){var e,t=this;return t.isHorizontal()?Math.ceil(t.width/40):(e=ie.options._parseFont(t.options.ticks),Math.ceil(t.height/e.lineHeight))},handleDirectionalChanges:function(){this.isHorizontal()||this.ticks.reverse()},getLabelForIndex:function(e,t){return this._getScaleLabel(this.chart.data.datasets[t].data[e])},getPixelForValue:function(e){var t=this;return t.getPixelForDecimal((+t.getRightValue(e)-t._startValue)/t._valueRange)},getValueForPixel:function(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange},getPixelForTick:function(e){var t=this.ticksAsNumbers;return e<0||e>t.length-1?null:this.getPixelForValue(t[e])}}),Mn=wn;_n._defaults=Mn;var In=ie.valueOrDefault,Tn=ie.math.log10;function An(e,t){var a,n,r=[],i=In(e.min,Math.pow(10,Math.floor(Tn(t.min)))),o=Math.floor(Tn(t.max)),s=Math.ceil(t.max/Math.pow(10,o));0===i?(a=Math.floor(Tn(t.minNotZero)),n=Math.floor(t.minNotZero/Math.pow(10,a)),r.push(i),i=n*Math.pow(10,a)):(a=Math.floor(Tn(i)),n=Math.floor(i/Math.pow(10,a)));var l=a<0?Math.pow(10,Math.abs(a)):1;do{r.push(i),10===++n&&(n=1,l=++a>=0?1:l),i=Math.round(n*Math.pow(10,a)*l)/l}while(a<o||a===o&&n<s);var c=In(e.max,i);return r.push(c),r}var Ln={position:"left",ticks:{callback:Ka.formatters.logarithmic}};function Rn(e,t){return ie.isFinite(e)&&e>=0?e:t}var Fn=fn.extend({determineDataLimits:function(){var e,t,a,n,r,i,o=this,s=o.options,l=o.chart,c=l.data.datasets,u=o.isHorizontal();function m(e){return u?e.xAxisID===o.id:e.yAxisID===o.id}o.min=Number.POSITIVE_INFINITY,o.max=Number.NEGATIVE_INFINITY,o.minNotZero=Number.POSITIVE_INFINITY;var d=s.stacked;if(void 0===d)for(e=0;e<c.length;e++)if(t=l.getDatasetMeta(e),l.isDatasetVisible(e)&&m(t)&&void 0!==t.stack){d=!0;break}if(s.stacked||d){var p={};for(e=0;e<c.length;e++){var h=[(t=l.getDatasetMeta(e)).type,void 0===s.stacked&&void 0===t.stack?e:"",t.stack].join(".");if(l.isDatasetVisible(e)&&m(t))for(void 0===p[h]&&(p[h]=[]),r=0,i=(n=c[e].data).length;r<i;r++){var g=p[h];a=o._parseValue(n[r]),isNaN(a.min)||isNaN(a.max)||t.data[r].hidden||a.min<0||a.max<0||(g[r]=g[r]||0,g[r]+=a.max)}}ie.each(p,(function(e){if(e.length>0){var t=ie.min(e),a=ie.max(e);o.min=Math.min(o.min,t),o.max=Math.max(o.max,a)}}))}else for(e=0;e<c.length;e++)if(t=l.getDatasetMeta(e),l.isDatasetVisible(e)&&m(t))for(r=0,i=(n=c[e].data).length;r<i;r++)a=o._parseValue(n[r]),isNaN(a.min)||isNaN(a.max)||t.data[r].hidden||a.min<0||a.max<0||(o.min=Math.min(a.min,o.min),o.max=Math.max(a.max,o.max),0!==a.min&&(o.minNotZero=Math.min(a.min,o.minNotZero)));o.min=ie.isFinite(o.min)?o.min:null,o.max=ie.isFinite(o.max)?o.max:null,o.minNotZero=ie.isFinite(o.minNotZero)?o.minNotZero:null,this.handleTickRangeOptions()},handleTickRangeOptions:function(){var e=this,t=e.options.ticks,a=1,n=10;e.min=Rn(t.min,e.min),e.max=Rn(t.max,e.max),e.min===e.max&&(0!==e.min&&null!==e.min?(e.min=Math.pow(10,Math.floor(Tn(e.min))-1),e.max=Math.pow(10,Math.floor(Tn(e.max))+1)):(e.min=a,e.max=n)),null===e.min&&(e.min=Math.pow(10,Math.floor(Tn(e.max))-1)),null===e.max&&(e.max=0!==e.min?Math.pow(10,Math.floor(Tn(e.min))+1):n),null===e.minNotZero&&(e.min>0?e.minNotZero=e.min:e.max<1?e.minNotZero=Math.pow(10,Math.floor(Tn(e.max))):e.minNotZero=a)},buildTicks:function(){var e=this,t=e.options.ticks,a=!e.isHorizontal(),n={min:Rn(t.min),max:Rn(t.max)},r=e.ticks=An(n,e);e.max=ie.max(r),e.min=ie.min(r),t.reverse?(a=!a,e.start=e.max,e.end=e.min):(e.start=e.min,e.end=e.max),a&&r.reverse()},convertTicksToLabels:function(){this.tickValues=this.ticks.slice(),fn.prototype.convertTicksToLabels.call(this)},getLabelForIndex:function(e,t){return this._getScaleLabel(this.chart.data.datasets[t].data[e])},getPixelForTick:function(e){var t=this.tickValues;return e<0||e>t.length-1?null:this.getPixelForValue(t[e])},_getFirstTickValue:function(e){var t=Math.floor(Tn(e));return Math.floor(e/Math.pow(10,t))*Math.pow(10,t)},_configure:function(){var e=this,t=e.min,a=0;fn.prototype._configure.call(e),0===t&&(t=e._getFirstTickValue(e.minNotZero),a=In(e.options.ticks.fontSize,$.global.defaultFontSize)/e._length),e._startValue=Tn(t),e._valueOffset=a,e._valueRange=(Tn(e.max)-Tn(t))/(1-a)},getPixelForValue:function(e){var t=this,a=0;return(e=+t.getRightValue(e))>t.min&&e>0&&(a=(Tn(e)-t._startValue)/t._valueRange+t._valueOffset),t.getPixelForDecimal(a)},getValueForPixel:function(e){var t=this,a=t.getDecimalForPixel(e);return 0===a&&0===t.min?0:Math.pow(10,t._startValue+(a-t._valueOffset)*t._valueRange)}}),Un=Ln;Fn._defaults=Un;var Bn=ie.valueOrDefault,zn=ie.valueAtIndexOrDefault,Hn=ie.options.resolve,qn={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,color:"rgba(0,0,0,0.1)",lineWidth:1,borderDash:[],borderDashOffset:0},gridLines:{circular:!1},ticks:{showLabelBackdrop:!0,backdropColor:"rgba(255,255,255,0.75)",backdropPaddingY:2,backdropPaddingX:2,callback:Ka.formatters.linear},pointLabels:{display:!0,fontSize:10,callback:function(e){return e}}};function Wn(e){var t=e.ticks;return t.display&&e.display?Bn(t.fontSize,$.global.defaultFontSize)+2*t.backdropPaddingY:0}function Vn(e,t,a){return ie.isArray(a)?{w:ie.longestText(e,e.font,a),h:a.length*t}:{w:e.measureText(a).width,h:t}}function Gn(e,t,a,n,r){return e===n||e===r?{start:t-a/2,end:t+a/2}:e<n||e>r?{start:t-a,end:t}:{start:t,end:t+a}}function Yn(e){var t,a,n,r=ie.options._parseFont(e.options.pointLabels),i={l:0,r:e.width,t:0,b:e.height-e.paddingTop},o={};e.ctx.font=r.string,e._pointLabelSizes=[];var s=e.chart.data.labels.length;for(t=0;t<s;t++){n=e.getPointPosition(t,e.drawingArea+5),a=Vn(e.ctx,r.lineHeight,e.pointLabels[t]),e._pointLabelSizes[t]=a;var l=e.getIndexAngle(t),c=ie.toDegrees(l)%360,u=Gn(c,n.x,a.w,0,180),m=Gn(c,n.y,a.h,90,270);u.start<i.l&&(i.l=u.start,o.l=l),u.end>i.r&&(i.r=u.end,o.r=l),m.start<i.t&&(i.t=m.start,o.t=l),m.end>i.b&&(i.b=m.end,o.b=l)}e.setReductions(e.drawingArea,i,o)}function Qn(e){return 0===e||180===e?"center":e<180?"left":"right"}function Kn(e,t,a,n){var r,i,o=a.y+n/2;if(ie.isArray(t))for(r=0,i=t.length;r<i;++r)e.fillText(t[r],a.x,o),o+=n;else e.fillText(t,a.x,o)}function Xn(e,t,a){90===e||270===e?a.y-=t.h/2:(e>270||e<90)&&(a.y-=t.h)}function $n(e){var t=e.ctx,a=e.options,n=a.pointLabels,r=Wn(a),i=e.getDistanceFromCenterForValue(a.ticks.reverse?e.min:e.max),o=ie.options._parseFont(n);t.save(),t.font=o.string,t.textBaseline="middle";for(var s=e.chart.data.labels.length-1;s>=0;s--){var l=0===s?r/2:0,c=e.getPointPosition(s,i+l+5),u=zn(n.fontColor,s,$.global.defaultFontColor);t.fillStyle=u;var m=e.getIndexAngle(s),d=ie.toDegrees(m);t.textAlign=Qn(d),Xn(d,e._pointLabelSizes[s],c),Kn(t,e.pointLabels[s],c,o.lineHeight)}t.restore()}function Jn(e,t,a,n){var r,i=e.ctx,o=t.circular,s=e.chart.data.labels.length,l=zn(t.color,n-1),c=zn(t.lineWidth,n-1);if((o||s)&&l&&c){if(i.save(),i.strokeStyle=l,i.lineWidth=c,i.setLineDash&&(i.setLineDash(t.borderDash||[]),i.lineDashOffset=t.borderDashOffset||0),i.beginPath(),o)i.arc(e.xCenter,e.yCenter,a,0,2*Math.PI);else{r=e.getPointPosition(0,a),i.moveTo(r.x,r.y);for(var u=1;u<s;u++)r=e.getPointPosition(u,a),i.lineTo(r.x,r.y)}i.closePath(),i.stroke(),i.restore()}}function Zn(e){return ie.isNumber(e)?e:0}var er=Sn.extend({setDimensions:function(){var e=this;e.width=e.maxWidth,e.height=e.maxHeight,e.paddingTop=Wn(e.options)/2,e.xCenter=Math.floor(e.width/2),e.yCenter=Math.floor((e.height-e.paddingTop)/2),e.drawingArea=Math.min(e.height-e.paddingTop,e.width)/2},determineDataLimits:function(){var e=this,t=e.chart,a=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;ie.each(t.data.datasets,(function(r,i){if(t.isDatasetVisible(i)){var o=t.getDatasetMeta(i);ie.each(r.data,(function(t,r){var i=+e.getRightValue(t);isNaN(i)||o.data[r].hidden||(a=Math.min(i,a),n=Math.max(i,n))}))}})),e.min=a===Number.POSITIVE_INFINITY?0:a,e.max=n===Number.NEGATIVE_INFINITY?0:n,e.handleTickRangeOptions()},_computeTickLimit:function(){return Math.ceil(this.drawingArea/Wn(this.options))},convertTicksToLabels:function(){var e=this;Sn.prototype.convertTicksToLabels.call(e),e.pointLabels=e.chart.data.labels.map((function(){var t=ie.callback(e.options.pointLabels.callback,arguments,e);return t||0===t?t:""}))},getLabelForIndex:function(e,t){return+this.getRightValue(this.chart.data.datasets[t].data[e])},fit:function(){var e=this,t=e.options;t.display&&t.pointLabels.display?Yn(e):e.setCenterPoint(0,0,0,0)},setReductions:function(e,t,a){var n=this,r=t.l/Math.sin(a.l),i=Math.max(t.r-n.width,0)/Math.sin(a.r),o=-t.t/Math.cos(a.t),s=-Math.max(t.b-(n.height-n.paddingTop),0)/Math.cos(a.b);r=Zn(r),i=Zn(i),o=Zn(o),s=Zn(s),n.drawingArea=Math.min(Math.floor(e-(r+i)/2),Math.floor(e-(o+s)/2)),n.setCenterPoint(r,i,o,s)},setCenterPoint:function(e,t,a,n){var r=this,i=r.width-t-r.drawingArea,o=e+r.drawingArea,s=a+r.drawingArea,l=r.height-r.paddingTop-n-r.drawingArea;r.xCenter=Math.floor((o+i)/2+r.left),r.yCenter=Math.floor((s+l)/2+r.top+r.paddingTop)},getIndexAngle:function(e){var t=this.chart,a=(e*(360/t.data.labels.length)+((t.options||{}).startAngle||0))%360;return(a<0?a+360:a)*Math.PI*2/360},getDistanceFromCenterForValue:function(e){var t=this;if(ie.isNullOrUndef(e))return NaN;var a=t.drawingArea/(t.max-t.min);return t.options.ticks.reverse?(t.max-e)*a:(e-t.min)*a},getPointPosition:function(e,t){var a=this,n=a.getIndexAngle(e)-Math.PI/2;return{x:Math.cos(n)*t+a.xCenter,y:Math.sin(n)*t+a.yCenter}},getPointPositionForValue:function(e,t){return this.getPointPosition(e,this.getDistanceFromCenterForValue(t))},getBasePosition:function(e){var t=this,a=t.min,n=t.max;return t.getPointPositionForValue(e||0,t.beginAtZero?0:a<0&&n<0?n:a>0&&n>0?a:0)},_drawGrid:function(){var e,t,a,n=this,r=n.ctx,i=n.options,o=i.gridLines,s=i.angleLines,l=Bn(s.lineWidth,o.lineWidth),c=Bn(s.color,o.color);if(i.pointLabels.display&&$n(n),o.display&&ie.each(n.ticks,(function(e,a){0!==a&&(t=n.getDistanceFromCenterForValue(n.ticksAsNumbers[a]),Jn(n,o,t,a))})),s.display&&l&&c){for(r.save(),r.lineWidth=l,r.strokeStyle=c,r.setLineDash&&(r.setLineDash(Hn([s.borderDash,o.borderDash,[]])),r.lineDashOffset=Hn([s.borderDashOffset,o.borderDashOffset,0])),e=n.chart.data.labels.length-1;e>=0;e--)t=n.getDistanceFromCenterForValue(i.ticks.reverse?n.min:n.max),a=n.getPointPosition(e,t),r.beginPath(),r.moveTo(n.xCenter,n.yCenter),r.lineTo(a.x,a.y),r.stroke();r.restore()}},_drawLabels:function(){var e=this,t=e.ctx,a=e.options.ticks;if(a.display){var n,r,i=e.getIndexAngle(0),o=ie.options._parseFont(a),s=Bn(a.fontColor,$.global.defaultFontColor);t.save(),t.font=o.string,t.translate(e.xCenter,e.yCenter),t.rotate(i),t.textAlign="center",t.textBaseline="middle",ie.each(e.ticks,(function(i,l){(0!==l||a.reverse)&&(n=e.getDistanceFromCenterForValue(e.ticksAsNumbers[l]),a.showLabelBackdrop&&(r=t.measureText(i).width,t.fillStyle=a.backdropColor,t.fillRect(-r/2-a.backdropPaddingX,-n-o.size/2-a.backdropPaddingY,r+2*a.backdropPaddingX,o.size+2*a.backdropPaddingY)),t.fillStyle=s,t.fillText(i,0,-n))})),t.restore()}},_drawTitle:ie.noop}),tr=qn;er._defaults=tr;var ar=ie._deprecated,nr=ie.options.resolve,rr=ie.valueOrDefault,ir=Number.MIN_SAFE_INTEGER||-9007199254740991,or=Number.MAX_SAFE_INTEGER||9007199254740991,sr={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},lr=Object.keys(sr);function cr(e,t){return e-t}function ur(e){var t,a,n,r={},i=[];for(t=0,a=e.length;t<a;++t)r[n=e[t]]||(r[n]=!0,i.push(n));return i}function mr(e){return ie.valueOrDefault(e.time.min,e.ticks.min)}function dr(e){return ie.valueOrDefault(e.time.max,e.ticks.max)}function pr(e,t,a,n){if("linear"===n||!e.length)return[{time:t,pos:0},{time:a,pos:1}];var r,i,o,s,l,c=[],u=[t];for(r=0,i=e.length;r<i;++r)(s=e[r])>t&&s<a&&u.push(s);for(u.push(a),r=0,i=u.length;r<i;++r)l=u[r+1],o=u[r-1],s=u[r],void 0!==o&&void 0!==l&&Math.round((l+o)/2)===s||c.push({time:s,pos:r/(i-1)});return c}function hr(e,t,a){for(var n,r,i,o=0,s=e.length-1;o>=0&&o<=s;){if(r=e[(n=o+s>>1)-1]||null,i=e[n],!r)return{lo:null,hi:i};if(i[t]<a)o=n+1;else{if(!(r[t]>a))return{lo:r,hi:i};s=n-1}}return{lo:i,hi:null}}function gr(e,t,a,n){var r=hr(e,t,a),i=r.lo?r.hi?r.lo:e[e.length-2]:e[0],o=r.lo?r.hi?r.hi:e[e.length-1]:e[1],s=o[t]-i[t],l=s?(a-i[t])/s:0,c=(o[n]-i[n])*l;return i[n]+c}function fr(e,t){var a=e._adapter,n=e.options.time,r=n.parser,i=r||n.format,o=t;return"function"===typeof r&&(o=r(o)),ie.isFinite(o)||(o="string"===typeof i?a.parse(o,i):a.parse(o)),null!==o?+o:(r||"function"!==typeof i||(o=i(t),ie.isFinite(o)||(o=a.parse(o))),o)}function br(e,t){if(ie.isNullOrUndef(t))return null;var a=e.options.time,n=fr(e,e.getRightValue(t));return null===n||a.round&&(n=+e._adapter.startOf(n,a.round)),n}function vr(e,t,a,n){var r,i,o,s=lr.length;for(r=lr.indexOf(e);r<s-1;++r)if(o=(i=sr[lr[r]]).steps?i.steps:or,i.common&&Math.ceil((a-t)/(o*i.size))<=n)return lr[r];return lr[s-1]}function Er(e,t,a,n,r){var i,o;for(i=lr.length-1;i>=lr.indexOf(a);i--)if(o=lr[i],sr[o].common&&e._adapter.diff(r,n,o)>=t-1)return o;return lr[a?lr.indexOf(a):0]}function yr(e){for(var t=lr.indexOf(e)+1,a=lr.length;t<a;++t)if(sr[lr[t]].common)return lr[t]}function Or(e,t,a,n){var r,i=e._adapter,o=e.options,s=o.time,l=s.unit||vr(s.minUnit,t,a,n),c=nr([s.stepSize,s.unitStepSize,1]),u="week"===l&&s.isoWeekday,m=t,d=[];if(u&&(m=+i.startOf(m,"isoWeek",u)),m=+i.startOf(m,u?"day":l),i.diff(a,t,l)>1e5*c)throw t+" and "+a+" are too far apart with stepSize of "+c+" "+l;for(r=m;r<a;r=+i.add(r,c,l))d.push(r);return r!==a&&"ticks"!==o.bounds||d.push(r),d}function xr(e,t,a,n,r){var i,o,s=0,l=0;return r.offset&&t.length&&(i=gr(e,"time",t[0],"pos"),s=1===t.length?1-i:(gr(e,"time",t[1],"pos")-i)/2,o=gr(e,"time",t[t.length-1],"pos"),l=1===t.length?o:(o-gr(e,"time",t[t.length-2],"pos"))/2),{start:s,end:l,factor:1/(s+1+l)}}function kr(e,t,a,n){var r,i,o=e._adapter,s=+o.startOf(t[0].value,n),l=t[t.length-1].value;for(r=s;r<=l;r=+o.add(r,1,n))(i=a[r])>=0&&(t[i].major=!0);return t}function Sr(e,t,a){var n,r,i=[],o={},s=t.length;for(n=0;n<s;++n)o[r=t[n]]=n,i.push({value:r,major:!1});return 0!==s&&a?kr(e,i,o,a):i}var wr={position:"bottom",distribution:"linear",bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,displayFormat:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{autoSkip:!1,source:"auto",major:{enabled:!1}}},Dr=fn.extend({initialize:function(){this.mergeTicksOptions(),fn.prototype.initialize.call(this)},update:function(){var e=this,t=e.options,a=t.time||(t.time={}),n=e._adapter=new Qa._date(t.adapters.date);return ar("time scale",a.format,"time.format","time.parser"),ar("time scale",a.min,"time.min","ticks.min"),ar("time scale",a.max,"time.max","ticks.max"),ie.mergeIf(a.displayFormats,n.formats()),fn.prototype.update.apply(e,arguments)},getRightValue:function(e){return e&&void 0!==e.t&&(e=e.t),fn.prototype.getRightValue.call(this,e)},determineDataLimits:function(){var e,t,a,n,r,i,o,s=this,l=s.chart,c=s._adapter,u=s.options,m=u.time.unit||"day",d=or,p=ir,h=[],g=[],f=[],b=s._getLabels();for(e=0,a=b.length;e<a;++e)f.push(br(s,b[e]));for(e=0,a=(l.data.datasets||[]).length;e<a;++e)if(l.isDatasetVisible(e))if(r=l.data.datasets[e].data,ie.isObject(r[0]))for(g[e]=[],t=0,n=r.length;t<n;++t)i=br(s,r[t]),h.push(i),g[e][t]=i;else g[e]=f.slice(0),o||(h=h.concat(f),o=!0);else g[e]=[];f.length&&(d=Math.min(d,f[0]),p=Math.max(p,f[f.length-1])),h.length&&(h=a>1?ur(h).sort(cr):h.sort(cr),d=Math.min(d,h[0]),p=Math.max(p,h[h.length-1])),d=br(s,mr(u))||d,p=br(s,dr(u))||p,d=d===or?+c.startOf(Date.now(),m):d,p=p===ir?+c.endOf(Date.now(),m)+1:p,s.min=Math.min(d,p),s.max=Math.max(d+1,p),s._table=[],s._timestamps={data:h,datasets:g,labels:f}},buildTicks:function(){var e,t,a,n=this,r=n.min,i=n.max,o=n.options,s=o.ticks,l=o.time,c=n._timestamps,u=[],m=n.getLabelCapacity(r),d=s.source,p=o.distribution;for(c="data"===d||"auto"===d&&"series"===p?c.data:"labels"===d?c.labels:Or(n,r,i,m),"ticks"===o.bounds&&c.length&&(r=c[0],i=c[c.length-1]),r=br(n,mr(o))||r,i=br(n,dr(o))||i,e=0,t=c.length;e<t;++e)(a=c[e])>=r&&a<=i&&u.push(a);return n.min=r,n.max=i,n._unit=l.unit||(s.autoSkip?vr(l.minUnit,n.min,n.max,m):Er(n,u.length,l.minUnit,n.min,n.max)),n._majorUnit=s.major.enabled&&"year"!==n._unit?yr(n._unit):void 0,n._table=pr(n._timestamps.data,r,i,p),n._offsets=xr(n._table,u,r,i,o),s.reverse&&u.reverse(),Sr(n,u,n._majorUnit)},getLabelForIndex:function(e,t){var a=this,n=a._adapter,r=a.chart.data,i=a.options.time,o=r.labels&&e<r.labels.length?r.labels[e]:"",s=r.datasets[t].data[e];return ie.isObject(s)&&(o=a.getRightValue(s)),i.tooltipFormat?n.format(fr(a,o),i.tooltipFormat):"string"===typeof o?o:n.format(fr(a,o),i.displayFormats.datetime)},tickFormatFunction:function(e,t,a,n){var r=this,i=r._adapter,o=r.options,s=o.time.displayFormats,l=s[r._unit],c=r._majorUnit,u=s[c],m=a[t],d=o.ticks,p=c&&u&&m&&m.major,h=i.format(e,n||(p?u:l)),g=p?d.major:d.minor,f=nr([g.callback,g.userCallback,d.callback,d.userCallback]);return f?f(h,t,a):h},convertTicksToLabels:function(e){var t,a,n=[];for(t=0,a=e.length;t<a;++t)n.push(this.tickFormatFunction(e[t].value,t,e));return n},getPixelForOffset:function(e){var t=this,a=t._offsets,n=gr(t._table,"time",e,"pos");return t.getPixelForDecimal((a.start+n)*a.factor)},getPixelForValue:function(e,t,a){var n=this,r=null;if(void 0!==t&&void 0!==a&&(r=n._timestamps.datasets[a][t]),null===r&&(r=br(n,e)),null!==r)return n.getPixelForOffset(r)},getPixelForTick:function(e){var t=this.getTicks();return e>=0&&e<t.length?this.getPixelForOffset(t[e].value):null},getValueForPixel:function(e){var t=this,a=t._offsets,n=t.getDecimalForPixel(e)/a.factor-a.end,r=gr(t._table,"pos",n,"time");return t._adapter._create(r)},_getLabelSize:function(e){var t=this,a=t.options.ticks,n=t.ctx.measureText(e).width,r=ie.toRadians(t.isHorizontal()?a.maxRotation:a.minRotation),i=Math.cos(r),o=Math.sin(r),s=rr(a.fontSize,$.global.defaultFontSize);return{w:n*i+s*o,h:n*o+s*i}},getLabelWidth:function(e){return this._getLabelSize(e).w},getLabelCapacity:function(e){var t=this,a=t.options.time,n=a.displayFormats,r=n[a.unit]||n.millisecond,i=t.tickFormatFunction(e,0,Sr(t,[e],t._majorUnit),r),o=t._getLabelSize(i),s=Math.floor(t.isHorizontal()?t.width/o.w:t.height/o.h);return t.options.offset&&s--,s>0?s:1}}),jr=wr;Dr._defaults=jr;var Cr={category:En,linear:_n,logarithmic:Fn,radialLinear:er,time:Dr},Nr={datetime:"MMM D, YYYY, h:mm:ss a",millisecond:"h:mm:ss.SSS a",second:"h:mm:ss a",minute:"h:mm a",hour:"hA",day:"MMM D",week:"ll",month:"MMM YYYY",quarter:"[Q]Q - YYYY",year:"YYYY"};Qa._date.override("function"===typeof e?{_id:"moment",formats:function(){return Nr},parse:function(t,a){return"string"===typeof t&&"string"===typeof a?t=e(t,a):t instanceof e||(t=e(t)),t.isValid()?t.valueOf():null},format:function(t,a){return e(t).format(a)},add:function(t,a,n){return e(t).add(a,n).valueOf()},diff:function(t,a,n){return e(t).diff(e(a),n)},startOf:function(t,a,n){return t=e(t),"isoWeek"===a?t.isoWeekday(n).valueOf():t.startOf(a).valueOf()},endOf:function(t,a){return e(t).endOf(a).valueOf()},_create:function(t){return e(t)}}:{}),$._set("global",{plugins:{filler:{propagate:!0}}});var Pr={dataset:function(e){var t=e.fill,a=e.chart,n=a.getDatasetMeta(t),r=n&&a.isDatasetVisible(t)&&n.dataset._children||[],i=r.length||0;return i?function(e,t){return t<i&&r[t]._view||null}:null},boundary:function(e){var t=e.boundary,a=t?t.x:null,n=t?t.y:null;return ie.isArray(t)?function(e,a){return t[a]}:function(e){return{x:null===a?e.x:a,y:null===n?e.y:n}}}};function _r(e,t,a){var n,r=e._model||{},i=r.fill;if(void 0===i&&(i=!!r.backgroundColor),!1===i||null===i)return!1;if(!0===i)return"origin";if(n=parseFloat(i,10),isFinite(n)&&Math.floor(n)===n)return"-"!==i[0]&&"+"!==i[0]||(n=t+n),!(n===t||n<0||n>=a)&&n;switch(i){case"bottom":return"start";case"top":return"end";case"zero":return"origin";case"origin":case"start":case"end":return i;default:return!1}}function Mr(e){var t,a=e.el._model||{},n=e.el._scale||{},r=e.fill,i=null;if(isFinite(r))return null;if("start"===r?i=void 0===a.scaleBottom?n.bottom:a.scaleBottom:"end"===r?i=void 0===a.scaleTop?n.top:a.scaleTop:void 0!==a.scaleZero?i=a.scaleZero:n.getBasePixel&&(i=n.getBasePixel()),void 0!==i&&null!==i){if(void 0!==i.x&&void 0!==i.y)return i;if(ie.isFinite(i))return{x:(t=n.isHorizontal())?i:null,y:t?null:i}}return null}function Ir(e){var t,a,n,r,i,o=e.el._scale,s=o.options,l=o.chart.data.labels.length,c=e.fill,u=[];if(!l)return null;for(t=s.ticks.reverse?o.max:o.min,a=s.ticks.reverse?o.min:o.max,n=o.getPointPositionForValue(0,t),r=0;r<l;++r)i="start"===c||"end"===c?o.getPointPositionForValue(r,"start"===c?t:a):o.getBasePosition(r),s.gridLines.circular&&(i.cx=n.x,i.cy=n.y,i.angle=o.getIndexAngle(r)-Math.PI/2),u.push(i);return u}function Tr(e){return(e.el._scale||{}).getPointPositionForValue?Ir(e):Mr(e)}function Ar(e,t,a){var n,r=e[t].fill,i=[t];if(!a)return r;for(;!1!==r&&-1===i.indexOf(r);){if(!isFinite(r))return r;if(!(n=e[r]))return!1;if(n.visible)return r;i.push(r),r=n.fill}return!1}function Lr(e){var t=e.fill,a="dataset";return!1===t?null:(isFinite(t)||(a="boundary"),Pr[a](e))}function Rr(e){return e&&!e.skip}function Fr(e,t,a,n,r){var i,o,s,l;if(n&&r){for(e.moveTo(t[0].x,t[0].y),i=1;i<n;++i)ie.canvas.lineTo(e,t[i-1],t[i]);if(void 0===a[0].angle)for(e.lineTo(a[r-1].x,a[r-1].y),i=r-1;i>0;--i)ie.canvas.lineTo(e,a[i],a[i-1],!0);else for(o=a[0].cx,s=a[0].cy,l=Math.sqrt(Math.pow(a[0].x-o,2)+Math.pow(a[0].y-s,2)),i=r-1;i>0;--i)e.arc(o,s,l,a[i].angle,a[i-1].angle,!0)}}function Ur(e,t,a,n,r,i){var o,s,l,c,u,m,d,p,h=t.length,g=n.spanGaps,f=[],b=[],v=0,E=0;for(e.beginPath(),o=0,s=h;o<s;++o)u=a(c=t[l=o%h]._view,l,n),m=Rr(c),d=Rr(u),i&&void 0===p&&m&&(s=h+(p=o+1)),m&&d?(v=f.push(c),E=b.push(u)):v&&E&&(g?(m&&f.push(c),d&&b.push(u)):(Fr(e,f,b,v,E),v=E=0,f=[],b=[]));Fr(e,f,b,v,E),e.closePath(),e.fillStyle=r,e.fill()}var Br={id:"filler",afterDatasetsUpdate:function(e,t){var a,n,r,i,o=(e.data.datasets||[]).length,s=t.propagate,l=[];for(n=0;n<o;++n)i=null,(r=(a=e.getDatasetMeta(n)).dataset)&&r._model&&r instanceof Ve.Line&&(i={visible:e.isDatasetVisible(n),fill:_r(r,n,o),chart:e,el:r}),a.$filler=i,l.push(i);for(n=0;n<o;++n)(i=l[n])&&(i.fill=Ar(l,n,s),i.boundary=Tr(i),i.mapper=Lr(i))},beforeDatasetsDraw:function(e){var t,a,n,r,i,o,s,l=e._getSortedVisibleDatasetMetas(),c=e.ctx;for(a=l.length-1;a>=0;--a)(t=l[a].$filler)&&t.visible&&(r=(n=t.el)._view,i=n._children||[],o=t.mapper,s=r.backgroundColor||$.global.defaultColor,o&&s&&i.length&&(ie.canvas.clipArea(c,e.chartArea),Ur(c,i,o,r,s,n._loop),ie.canvas.unclipArea(c)))}},zr=ie.rtl.getRtlAdapter,Hr=ie.noop,qr=ie.valueOrDefault;function Wr(e,t){return e.usePointStyle&&e.boxWidth>t?t:e.boxWidth}$._set("global",{legend:{display:!0,position:"top",align:"center",fullWidth:!0,reverse:!1,weight:1e3,onClick:function(e,t){var a=t.datasetIndex,n=this.chart,r=n.getDatasetMeta(a);r.hidden=null===r.hidden?!n.data.datasets[a].hidden:null,n.update()},onHover:null,onLeave:null,labels:{boxWidth:40,padding:10,generateLabels:function(e){var t=e.data.datasets,a=e.options.legend||{},n=a.labels&&a.labels.usePointStyle;return e._getSortedDatasetMetas().map((function(a){var r=a.controller.getStyle(n?0:void 0);return{text:t[a.index].label,fillStyle:r.backgroundColor,hidden:!e.isDatasetVisible(a.index),lineCap:r.borderCapStyle,lineDash:r.borderDash,lineDashOffset:r.borderDashOffset,lineJoin:r.borderJoinStyle,lineWidth:r.borderWidth,strokeStyle:r.borderColor,pointStyle:r.pointStyle,rotation:r.rotation,datasetIndex:a.index}}),this)}}},legendCallback:function(e){var t,a,n,r=document.createElement("ul"),i=e.data.datasets;for(r.setAttribute("class",e.id+"-legend"),t=0,a=i.length;t<a;t++)(n=r.appendChild(document.createElement("li"))).appendChild(document.createElement("span")).style.backgroundColor=i[t].backgroundColor,i[t].label&&n.appendChild(document.createTextNode(i[t].label));return r.outerHTML}});var Vr=pe.extend({initialize:function(e){var t=this;ie.extend(t,e),t.legendHitBoxes=[],t._hoveredItem=null,t.doughnutMode=!1},beforeUpdate:Hr,update:function(e,t,a){var n=this;return n.beforeUpdate(),n.maxWidth=e,n.maxHeight=t,n.margins=a,n.beforeSetDimensions(),n.setDimensions(),n.afterSetDimensions(),n.beforeBuildLabels(),n.buildLabels(),n.afterBuildLabels(),n.beforeFit(),n.fit(),n.afterFit(),n.afterUpdate(),n.minSize},afterUpdate:Hr,beforeSetDimensions:Hr,setDimensions:function(){var e=this;e.isHorizontal()?(e.width=e.maxWidth,e.left=0,e.right=e.width):(e.height=e.maxHeight,e.top=0,e.bottom=e.height),e.paddingLeft=0,e.paddingTop=0,e.paddingRight=0,e.paddingBottom=0,e.minSize={width:0,height:0}},afterSetDimensions:Hr,beforeBuildLabels:Hr,buildLabels:function(){var e=this,t=e.options.labels||{},a=ie.callback(t.generateLabels,[e.chart],e)||[];t.filter&&(a=a.filter((function(a){return t.filter(a,e.chart.data)}))),e.options.reverse&&a.reverse(),e.legendItems=a},afterBuildLabels:Hr,beforeFit:Hr,fit:function(){var e=this,t=e.options,a=t.labels,n=t.display,r=e.ctx,i=ie.options._parseFont(a),o=i.size,s=e.legendHitBoxes=[],l=e.minSize,c=e.isHorizontal();if(c?(l.width=e.maxWidth,l.height=n?10:0):(l.width=n?10:0,l.height=e.maxHeight),n){if(r.font=i.string,c){var u=e.lineWidths=[0],m=0;r.textAlign="left",r.textBaseline="middle",ie.each(e.legendItems,(function(e,t){var n=Wr(a,o)+o/2+r.measureText(e.text).width;(0===t||u[u.length-1]+n+2*a.padding>l.width)&&(m+=o+a.padding,u[u.length-(t>0?0:1)]=0),s[t]={left:0,top:0,width:n,height:o},u[u.length-1]+=n+a.padding})),l.height+=m}else{var d=a.padding,p=e.columnWidths=[],h=e.columnHeights=[],g=a.padding,f=0,b=0;ie.each(e.legendItems,(function(e,t){var n=Wr(a,o)+o/2+r.measureText(e.text).width;t>0&&b+o+2*d>l.height&&(g+=f+a.padding,p.push(f),h.push(b),f=0,b=0),f=Math.max(f,n),b+=o+d,s[t]={left:0,top:0,width:n,height:o}})),g+=f,p.push(f),h.push(b),l.width+=g}e.width=l.width,e.height=l.height}else e.width=l.width=e.height=l.height=0},afterFit:Hr,isHorizontal:function(){return"top"===this.options.position||"bottom"===this.options.position},draw:function(){var e=this,t=e.options,a=t.labels,n=$.global,r=n.defaultColor,i=n.elements.line,o=e.height,s=e.columnHeights,l=e.width,c=e.lineWidths;if(t.display){var u,m=zr(t.rtl,e.left,e.minSize.width),d=e.ctx,p=qr(a.fontColor,n.defaultFontColor),h=ie.options._parseFont(a),g=h.size;d.textAlign=m.textAlign("left"),d.textBaseline="middle",d.lineWidth=.5,d.strokeStyle=p,d.fillStyle=p,d.font=h.string;var f=Wr(a,g),b=e.legendHitBoxes,v=function(e,t,n){if(!(isNaN(f)||f<=0)){d.save();var o=qr(n.lineWidth,i.borderWidth);if(d.fillStyle=qr(n.fillStyle,r),d.lineCap=qr(n.lineCap,i.borderCapStyle),d.lineDashOffset=qr(n.lineDashOffset,i.borderDashOffset),d.lineJoin=qr(n.lineJoin,i.borderJoinStyle),d.lineWidth=o,d.strokeStyle=qr(n.strokeStyle,r),d.setLineDash&&d.setLineDash(qr(n.lineDash,i.borderDash)),a&&a.usePointStyle){var s=f*Math.SQRT2/2,l=m.xPlus(e,f/2),c=t+g/2;ie.canvas.drawPoint(d,n.pointStyle,s,l,c,n.rotation)}else d.fillRect(m.leftForLtr(e,f),t,f,g),0!==o&&d.strokeRect(m.leftForLtr(e,f),t,f,g);d.restore()}},E=function(e,t,a,n){var r=g/2,i=m.xPlus(e,f+r),o=t+r;d.fillText(a.text,i,o),a.hidden&&(d.beginPath(),d.lineWidth=2,d.moveTo(i,o),d.lineTo(m.xPlus(i,n),o),d.stroke())},y=function(e,n){switch(t.align){case"start":return a.padding;case"end":return e-n;default:return(e-n+a.padding)/2}},O=e.isHorizontal();u=O?{x:e.left+y(l,c[0]),y:e.top+a.padding,line:0}:{x:e.left+a.padding,y:e.top+y(o,s[0]),line:0},ie.rtl.overrideTextDirection(e.ctx,t.textDirection);var x=g+a.padding;ie.each(e.legendItems,(function(t,n){var r=d.measureText(t.text).width,i=f+g/2+r,p=u.x,h=u.y;m.setWidth(e.minSize.width),O?n>0&&p+i+a.padding>e.left+e.minSize.width&&(h=u.y+=x,u.line++,p=u.x=e.left+y(l,c[u.line])):n>0&&h+x>e.top+e.minSize.height&&(p=u.x=p+e.columnWidths[u.line]+a.padding,u.line++,h=u.y=e.top+y(o,s[u.line]));var k=m.x(p);v(k,h,t),b[n].left=m.leftForLtr(k,b[n].width),b[n].top=h,E(k,h,t,r),O?u.x+=i+a.padding:u.y+=x})),ie.rtl.restoreTextDirection(e.ctx,t.textDirection)}},_getLegendItemAt:function(e,t){var a,n,r,i=this;if(e>=i.left&&e<=i.right&&t>=i.top&&t<=i.bottom)for(r=i.legendHitBoxes,a=0;a<r.length;++a)if(e>=(n=r[a]).left&&e<=n.left+n.width&&t>=n.top&&t<=n.top+n.height)return i.legendItems[a];return null},handleEvent:function(e){var t,a=this,n=a.options,r="mouseup"===e.type?"click":e.type;if("mousemove"===r){if(!n.onHover&&!n.onLeave)return}else{if("click"!==r)return;if(!n.onClick)return}t=a._getLegendItemAt(e.x,e.y),"click"===r?t&&n.onClick&&n.onClick.call(a,e.native,t):(n.onLeave&&t!==a._hoveredItem&&(a._hoveredItem&&n.onLeave.call(a,e.native,a._hoveredItem),a._hoveredItem=t),n.onHover&&t&&n.onHover.call(a,e.native,t))}});function Gr(e,t){var a=new Vr({ctx:e.ctx,options:t,chart:e});qt.configure(e,a,t),qt.addBox(e,a),e.legend=a}var Yr={id:"legend",_element:Vr,beforeInit:function(e){var t=e.options.legend;t&&Gr(e,t)},beforeUpdate:function(e){var t=e.options.legend,a=e.legend;t?(ie.mergeIf(t,$.global.legend),a?(qt.configure(e,a,t),a.options=t):Gr(e,t)):a&&(qt.removeBox(e,a),delete e.legend)},afterEvent:function(e,t){var a=e.legend;a&&a.handleEvent(t)}},Qr=ie.noop;$._set("global",{title:{display:!1,fontStyle:"bold",fullWidth:!0,padding:10,position:"top",text:"",weight:2e3}});var Kr=pe.extend({initialize:function(e){var t=this;ie.extend(t,e),t.legendHitBoxes=[]},beforeUpdate:Qr,update:function(e,t,a){var n=this;return n.beforeUpdate(),n.maxWidth=e,n.maxHeight=t,n.margins=a,n.beforeSetDimensions(),n.setDimensions(),n.afterSetDimensions(),n.beforeBuildLabels(),n.buildLabels(),n.afterBuildLabels(),n.beforeFit(),n.fit(),n.afterFit(),n.afterUpdate(),n.minSize},afterUpdate:Qr,beforeSetDimensions:Qr,setDimensions:function(){var e=this;e.isHorizontal()?(e.width=e.maxWidth,e.left=0,e.right=e.width):(e.height=e.maxHeight,e.top=0,e.bottom=e.height),e.paddingLeft=0,e.paddingTop=0,e.paddingRight=0,e.paddingBottom=0,e.minSize={width:0,height:0}},afterSetDimensions:Qr,beforeBuildLabels:Qr,buildLabels:Qr,afterBuildLabels:Qr,beforeFit:Qr,fit:function(){var e,t=this,a=t.options,n=t.minSize={},r=t.isHorizontal();a.display?(e=(ie.isArray(a.text)?a.text.length:1)*ie.options._parseFont(a).lineHeight+2*a.padding,t.width=n.width=r?t.maxWidth:e,t.height=n.height=r?e:t.maxHeight):t.width=n.width=t.height=n.height=0},afterFit:Qr,isHorizontal:function(){var e=this.options.position;return"top"===e||"bottom"===e},draw:function(){var e=this,t=e.ctx,a=e.options;if(a.display){var n,r,i,o=ie.options._parseFont(a),s=o.lineHeight,l=s/2+a.padding,c=0,u=e.top,m=e.left,d=e.bottom,p=e.right;t.fillStyle=ie.valueOrDefault(a.fontColor,$.global.defaultFontColor),t.font=o.string,e.isHorizontal()?(r=m+(p-m)/2,i=u+l,n=p-m):(r="left"===a.position?m+l:p-l,i=u+(d-u)/2,n=d-u,c=Math.PI*("left"===a.position?-.5:.5)),t.save(),t.translate(r,i),t.rotate(c),t.textAlign="center",t.textBaseline="middle";var h=a.text;if(ie.isArray(h))for(var g=0,f=0;f<h.length;++f)t.fillText(h[f],0,g,n),g+=s;else t.fillText(h,0,0,n);t.restore()}}});function Xr(e,t){var a=new Kr({ctx:e.ctx,options:t,chart:e});qt.configure(e,a,t),qt.addBox(e,a),e.titleBlock=a}var $r={},Jr=Br,Zr=Yr,ei={id:"title",_element:Kr,beforeInit:function(e){var t=e.options.title;t&&Xr(e,t)},beforeUpdate:function(e){var t=e.options.title,a=e.titleBlock;t?(ie.mergeIf(t,$.global.title),a?(qt.configure(e,a,t),a.options=t):Xr(e,t)):a&&(qt.removeBox(e,a),delete e.titleBlock)}};for(var ti in $r.filler=Jr,$r.legend=Zr,$r.title=ei,Wa.helpers=ie,Va(),Wa._adapters=Qa,Wa.Animation=ge,Wa.animationService=fe,Wa.controllers=kt,Wa.DatasetController=xe,Wa.defaults=$,Wa.Element=pe,Wa.elements=Ve,Wa.Interaction=Pt,Wa.layouts=qt,Wa.platform=ba,Wa.plugins=va,Wa.Scale=fn,Wa.scaleService=Ea,Wa.Ticks=Ka,Wa.Tooltip=Ta,Wa.helpers.each(Cr,(function(e,t){Wa.scaleService.registerScaleType(t,e,e._defaults)})),$r)$r.hasOwnProperty(ti)&&Wa.plugins.register($r[ti]);Wa.platform.initialize();var ai=Wa;return"undefined"!==typeof window&&(window.Chart=Wa),Wa.Chart=Wa,Wa.Legend=$r.legend._element,Wa.Title=$r.title._element,Wa.pluginService=Wa.plugins,Wa.PluginBase=Wa.Element.extend({}),Wa.canvasHelpers=Wa.helpers.canvas,Wa.layoutService=Wa.layouts,Wa.LinearScaleBase=Sn,Wa.helpers.each(["Bar","Bubble","Doughnut","Line","PolarArea","Radar","Scatter"],(function(e){Wa[e]=function(t,a){return new Wa(t,Wa.helpers.merge(a||{},{type:e.charAt(0).toLowerCase()+e.slice(1)}))}})),ai}(function(){try{return a(12)}catch(e){}}())},206:function(e,t,a){},207:function(e,t,a){},208:function(e,t,a){},209:function(e,t,a){},210:function(e,t,a){},211:function(e,t,a){},216:function(e,t,a){},239:function(e,t){e.exports=function(e){if("string"!==typeof e)return!1;var t=e.match(a);if(!t)return!1;var i=t[1];if(!i)return!1;if(n.test(i)||r.test(i))return!0;return!1};var a=/^(?:\w+:)?\/\/(\S+)$/,n=/^localhost[\:?\d]*(?:[^\:?\d]\S*)?$/,r=/^[^\s\.]+\.\S{2,}$/},25:function(e,t,a){"use strict";a.d(t,"a",(function(){return ke})),a.d(t,"b",(function(){return ge})),a.d(t,"c",(function(){return Me})),a.d(t,"d",(function(){return Re})),a.d(t,"e",(function(){return Be})),a.d(t,"j",(function(){return Kt})),a.d(t,"m",(function(){return $t})),a.d(t,"k",(function(){return Zt})),a.d(t,"l",(function(){return ta})),a.d(t,"n",(function(){return ia})),a.d(t,"f",(function(){return ma})),a.d(t,"g",(function(){return fa})),a.d(t,"h",(function(){return ya})),a.d(t,"i",(function(){return Ma}));var n=a(0),r=a.n(n),i=a(2),o=a.n(i),s=a(13),l=a.n(s),c=a(182),u=a.n(c),m=a(130),d=a.n(m),p=a(23),h=a.n(p),g=a(96),f=a(131),b=a.n(f);function v(){var e=document.createElement("div");e.style.position="absolute",e.style.top="-9999px",e.style.width="50px",e.style.height="50px",e.style.overflow="scroll",document.body.appendChild(e);var t=e.offsetWidth-e.clientWidth;return document.body.removeChild(e),t}function E(e){document.body.style.paddingRight=e>0?e+"px":null}function y(){return document.body.clientWidth<window.innerWidth}function O(){var e=window.getComputedStyle(document.body,null);return parseInt(e&&e.getPropertyValue("padding-right")||0,10)}function x(){var e=v(),t=document.querySelectorAll(".fixed-top, .fixed-bottom, .is-fixed, .sticky-top")[0],a=t?parseInt(t.style.paddingRight||0,10):0;y()&&E(a+e)}var k=void 0;function S(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:k;return t?e.split(" ").map((function(e){return t[e]||e})).join(" "):e}function w(e,t){var a={};return Object.keys(e).forEach((function(n){-1===t.indexOf(n)&&(a[n]=e[n])})),a}function D(e,t){for(var a=Array.isArray(t)?t:[t],n=a.length,r=void 0,i={};n>0;)i[r=a[n-=1]]=e[r];return i}var j={};function C(e){j[e]||("undefined"!==typeof console&&console.error(e),j[e]=!0)}function N(e,t){return function(a,n,r){null!==a[n]&&"undefined"!==typeof a[n]&&C('"'+n+'" property of "'+r+'" has been deprecated.\n'+t);for(var i=arguments.length,o=Array(i>3?i-3:0),s=3;s<i;s++)o[s-3]=arguments[s];return e.apply(void 0,[a,n,r].concat(o))}}function P(e,t,a){if(!(e[t]instanceof Element))return new Error("Invalid prop `"+t+"` supplied to `"+a+"`. Expected prop to be an instance of Element. Validation failed.")}function _(e){if(u()(e))return e();if("string"===typeof e&&document){var t=document.querySelector(e);if(null===t&&(t=document.querySelector("#"+e)),null===t)throw new Error("The target '"+e+"' could not be identified in the dom, tip: check spelling");return t}return e}var M={Fade:150,Collapse:350,Modal:300,Carousel:600},I=["in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","onEnter","onEntering","onEntered","onExit","onExiting","onExited"],T={ENTERING:"entering",ENTERED:"entered",EXITING:"exiting",EXITED:"exited"},A={esc:27,space:32,tab:9,up:38,down:40},L=["auto-start","auto","auto-end","top-start","top","top-end","right-start","right","right-end","bottom-end","bottom","bottom-start","left-end","left","left-start"],R=!("undefined"===typeof window||!window.document||!window.document.createElement),F=(Object.freeze({getScrollbarWidth:v,setScrollbarWidth:E,isBodyOverflowing:y,getOriginalBodyPadding:O,conditionallyUpdateScrollbar:x,setGlobalCssModule:function(e){k=e},mapToCssModules:S,omit:w,pick:D,warnOnce:C,deprecated:N,DOMElement:P,getTarget:_,TransitionTimeouts:M,TransitionPropTypeKeys:I,TransitionStatuses:T,keyCodes:A,PopperPlacements:L,canUseDOM:R}),"function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e}),U=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},B=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),z=function(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e},H=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},q=function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},W=function(e,t){var a={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n]);return a},V=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t},G={tag:o.a.oneOfType([o.a.func,o.a.string]),fluid:o.a.bool,className:o.a.string,cssModule:o.a.object},Y=function(e){var t=e.className,a=e.cssModule,n=e.fluid,i=e.tag,o=W(e,["className","cssModule","fluid","tag"]),s=S(l()(t,n?"container-fluid":"container"),a);return r.a.createElement(i,H({},o,{className:s}))};Y.propTypes=G,Y.defaultProps={tag:"div"};var Q={tag:o.a.oneOfType([o.a.func,o.a.string]),noGutters:o.a.bool,className:o.a.string,cssModule:o.a.object},K=function(e){var t=e.className,a=e.cssModule,n=e.noGutters,i=e.tag,o=W(e,["className","cssModule","noGutters","tag"]),s=S(l()(t,n?"no-gutters":null,"row"),a);return r.a.createElement(i,H({},o,{className:s}))};K.propTypes=Q,K.defaultProps={tag:"div"};var X=o.a.oneOfType([o.a.number,o.a.string]),$=o.a.oneOfType([o.a.bool,o.a.number,o.a.string,o.a.shape({size:o.a.oneOfType([o.a.bool,o.a.number,o.a.string]),push:N(X,'Please use the prop "order"'),pull:N(X,'Please use the prop "order"'),order:X,offset:X})]),J={tag:o.a.oneOfType([o.a.func,o.a.string]),xs:$,sm:$,md:$,lg:$,xl:$,className:o.a.string,cssModule:o.a.object,widths:o.a.array},Z={tag:"div",widths:["xs","sm","md","lg","xl"]},ee=function(e,t,a){return!0===a||""===a?e?"col":"col-"+t:"auto"===a?e?"col-auto":"col-"+t+"-auto":e?"col-"+a:"col-"+t+"-"+a},te=function(e){var t=e.className,a=e.cssModule,n=e.widths,i=e.tag,o=W(e,["className","cssModule","widths","tag"]),s=[];n.forEach((function(t,n){var r=e[t];if(delete o[t],r||""===r){var i=!n;if(d()(r)){var c,u=i?"-":"-"+t+"-",m=ee(i,t,r.size);s.push(S(l()((z(c={},m,r.size||""===r.size),z(c,"order"+u+r.order,r.order||0===r.order),z(c,"offset"+u+r.offset,r.offset||0===r.offset),c)),a))}else{var p=ee(i,t,r);s.push(p)}}})),s.length||s.push("col");var c=S(l()(t,s),a);return r.a.createElement(i,H({},o,{className:c}))};te.propTypes=J,te.defaultProps=Z;var ae={light:o.a.bool,dark:o.a.bool,inverse:N(o.a.bool,'Please use the prop "dark"'),full:o.a.bool,fixed:o.a.string,sticky:o.a.string,color:o.a.string,role:o.a.string,tag:o.a.oneOfType([o.a.func,o.a.string]),className:o.a.string,cssModule:o.a.object,toggleable:N(o.a.oneOfType([o.a.bool,o.a.string]),'Please use the prop "expand"'),expand:o.a.oneOfType([o.a.bool,o.a.string])},ne={xs:"sm",sm:"md",md:"lg",lg:"xl"},re=function(e){var t,a=e.toggleable,n=e.expand,i=e.className,o=e.cssModule,s=e.light,c=e.dark,u=e.inverse,m=e.fixed,d=e.sticky,p=e.color,h=e.tag,g=W(e,["toggleable","expand","className","cssModule","light","dark","inverse","fixed","sticky","color","tag"]),f=S(l()(i,"navbar",function(e){return!1!==e&&(!0===e||"xs"===e?"navbar-expand":"navbar-expand-"+e)}(n)||function(e){return void 0!==e&&"xl"!==e&&(!1===e?"navbar-expand":"navbar-expand-"+(!0===e?"sm":ne[e]||e))}(a),(z(t={"navbar-light":s,"navbar-dark":u||c},"bg-"+p,p),z(t,"fixed-"+m,m),z(t,"sticky-"+d,d),t)),o);return r.a.createElement(h,H({},g,{className:f}))};re.propTypes=ae,re.defaultProps={tag:"nav",expand:!1};var ie={tag:o.a.oneOfType([o.a.func,o.a.string]),className:o.a.string,cssModule:o.a.object},oe=function(e){var t=e.className,a=e.cssModule,n=e.tag,i=W(e,["className","cssModule","tag"]),o=S(l()(t,"navbar-brand"),a);return r.a.createElement(n,H({},i,{className:o}))};oe.propTypes=ie,oe.defaultProps={tag:"a"};var se={tag:o.a.oneOfType([o.a.func,o.a.string]),type:o.a.string,className:o.a.string,cssModule:o.a.object,children:o.a.node},le=function(e){var t=e.className,a=e.cssModule,n=e.children,i=e.tag,o=W(e,["className","cssModule","children","tag"]),s=S(l()(t,"navbar-toggler"),a);return r.a.createElement(i,H({},o,{className:s}),n||r.a.createElement("span",{className:S("navbar-toggler-icon",a)}))};le.propTypes=se,le.defaultProps={tag:"button",type:"button"};var ce={tabs:o.a.bool,pills:o.a.bool,vertical:o.a.oneOfType([o.a.bool,o.a.string]),horizontal:o.a.string,justified:o.a.bool,fill:o.a.bool,navbar:o.a.bool,card:o.a.bool,tag:o.a.oneOfType([o.a.func,o.a.string]),className:o.a.string,cssModule:o.a.object},ue=function(e){var t=e.className,a=e.cssModule,n=e.tabs,i=e.pills,o=e.vertical,s=e.horizontal,c=e.justified,u=e.fill,m=e.navbar,d=e.card,p=e.tag,h=W(e,["className","cssModule","tabs","pills","vertical","horizontal","justified","fill","navbar","card","tag"]),g=S(l()(t,m?"navbar-nav":"nav",!!s&&"justify-content-"+s,function(e){return!1!==e&&(!0===e||"xs"===e?"flex-column":"flex-"+e+"-column")}(o),{"nav-tabs":n,"card-header-tabs":d&&n,"nav-pills":i,"card-header-pills":d&&i,"nav-justified":c,"nav-fill":u}),a);return r.a.createElement(p,H({},h,{className:g}))};ue.propTypes=ce,ue.defaultProps={tag:"ul",vertical:!1};var me={tag:o.a.oneOfType([o.a.func,o.a.string]),active:o.a.bool,className:o.a.string,cssModule:o.a.object},de=function(e){var t=e.className,a=e.cssModule,n=e.active,i=e.tag,o=W(e,["className","cssModule","active","tag"]),s=S(l()(t,"nav-item",!!n&&"active"),a);return r.a.createElement(i,H({},o,{className:s}))};de.propTypes=me,de.defaultProps={tag:"li"};var pe={disabled:o.a.bool,dropup:N(o.a.bool,'Please use the prop "direction" with the value "up".'),direction:o.a.oneOf(["up","down","left","right"]),group:o.a.bool,isOpen:o.a.bool,nav:o.a.bool,active:o.a.bool,addonType:o.a.oneOfType([o.a.bool,o.a.oneOf(["prepend","append"])]),size:o.a.string,tag:o.a.string,toggle:o.a.func,children:o.a.node,className:o.a.string,cssModule:o.a.object,inNavbar:o.a.bool},he={toggle:o.a.func.isRequired,isOpen:o.a.bool.isRequired,direction:o.a.oneOf(["up","down","left","right"]).isRequired,inNavbar:o.a.bool.isRequired},ge=function(e){function t(e){U(this,t);var a=V(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.addEvents=a.addEvents.bind(a),a.handleDocumentClick=a.handleDocumentClick.bind(a),a.handleKeyDown=a.handleKeyDown.bind(a),a.removeEvents=a.removeEvents.bind(a),a.toggle=a.toggle.bind(a),a}return q(t,e),B(t,[{key:"getChildContext",value:function(){return{toggle:this.props.toggle,isOpen:this.props.isOpen,direction:"down"===this.props.direction&&this.props.dropup?"up":this.props.direction,inNavbar:this.props.inNavbar}}},{key:"componentDidMount",value:function(){this.handleProps()}},{key:"componentDidUpdate",value:function(e){this.props.isOpen!==e.isOpen&&this.handleProps()}},{key:"componentWillUnmount",value:function(){this.removeEvents()}},{key:"getContainer",value:function(){return h.a.findDOMNode(this)}},{key:"addEvents",value:function(){var e=this;["click","touchstart","keyup"].forEach((function(t){return document.addEventListener(t,e.handleDocumentClick,!0)}))}},{key:"removeEvents",value:function(){var e=this;["click","touchstart","keyup"].forEach((function(t){return document.removeEventListener(t,e.handleDocumentClick,!0)}))}},{key:"handleDocumentClick",value:function(e){if(!e||3!==e.which&&("keyup"!==e.type||e.which===A.tab)){var t=this.getContainer();(!t.contains(e.target)||t===e.target||"keyup"===e.type&&e.which!==A.tab)&&this.toggle(e)}}},{key:"handleKeyDown",value:function(e){if(!(-1===[A.esc,A.up,A.down,A.space].indexOf(e.which)||/button/i.test(e.target.tagName)&&e.which===A.space||/input|textarea/i.test(e.target.tagName))&&(e.preventDefault(),!this.props.disabled)){var t=this.getContainer();if(e.which===A.space&&this.props.isOpen&&t!==e.target&&e.target.click(),e.which===A.esc||!this.props.isOpen)return this.toggle(e),void t.querySelector("[aria-expanded]").focus();var a=S("dropdown-menu",this.props.cssModule),n=S("dropdown-item",this.props.cssModule),r=S("disabled",this.props.cssModule),i=t.querySelectorAll("."+a+" ."+n+":not(."+r+")");if(i.length){for(var o=-1,s=0;s<i.length;s+=1)if(i[s]===e.target){o=s;break}e.which===A.up&&o>0&&(o-=1),e.which===A.down&&o<i.length-1&&(o+=1),o<0&&(o=0),i[o].focus()}}}},{key:"handleProps",value:function(){this.props.isOpen?this.addEvents():this.removeEvents()}},{key:"toggle",value:function(e){return this.props.disabled?e&&e.preventDefault():this.props.toggle(e)}},{key:"render",value:function(){var e,t=w(this.props,["toggle","disabled","inNavbar","direction"]),a=t.className,n=t.cssModule,i=t.dropup,o=t.isOpen,s=t.group,c=t.size,u=t.nav,m=t.active,d=t.addonType,p=W(t,["className","cssModule","dropup","isOpen","group","size","nav","active","addonType"]),h="down"===this.props.direction&&i?"up":this.props.direction;p.tag=p.tag||(u?"li":"div");var f=S(l()(a,"down"!==h&&"drop"+h,!(!u||!m)&&"active",(z(e={},"input-group-"+d,d),z(e,"btn-group",s),z(e,"btn-group-"+c,!!c),z(e,"dropdown",!s&&!d),z(e,"show",o),z(e,"nav-item",u),e)),n);return r.a.createElement(g.Manager,H({},p,{className:f,onKeyDown:this.handleKeyDown}))}}]),t}(r.a.Component);ge.propTypes=pe,ge.defaultProps={isOpen:!1,direction:"down",nav:!1,active:!1,addonType:!1,inNavbar:!1},ge.childContextTypes=he;var fe={tag:o.a.oneOfType([o.a.func,o.a.string]),innerRef:o.a.oneOfType([o.a.func,o.a.string]),disabled:o.a.bool,active:o.a.bool,className:o.a.string,cssModule:o.a.object,onClick:o.a.func,href:o.a.any},be=function(e){function t(e){U(this,t);var a=V(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.onClick=a.onClick.bind(a),a}return q(t,e),B(t,[{key:"onClick",value:function(e){this.props.disabled?e.preventDefault():("#"===this.props.href&&e.preventDefault(),this.props.onClick&&this.props.onClick(e))}},{key:"render",value:function(){var e=this.props,t=e.className,a=e.cssModule,n=e.active,i=e.tag,o=e.innerRef,s=W(e,["className","cssModule","active","tag","innerRef"]),c=S(l()(t,"nav-link",{disabled:s.disabled,active:n}),a);return r.a.createElement(i,H({},s,{ref:o,onClick:this.onClick,className:c}))}}]),t}(r.a.Component);be.propTypes=fe,be.defaultProps={tag:"a"};var ve={tag:o.a.string,className:o.a.string,cssModule:o.a.object},Ee=function(e){var t=e.className,a=e.cssModule,n=e.tag,i=W(e,["className","cssModule","tag"]),o=S(l()(t,"breadcrumb"),a);return r.a.createElement(n,H({},i,{className:o}))};Ee.propTypes=ve,Ee.defaultProps={tag:"ol"};var ye={tag:o.a.oneOfType([o.a.func,o.a.string]),active:o.a.bool,className:o.a.string,cssModule:o.a.object},Oe=function(e){var t=e.className,a=e.cssModule,n=e.active,i=e.tag,o=W(e,["className","cssModule","active","tag"]),s=S(l()(t,!!n&&"active","breadcrumb-item"),a);return r.a.createElement(i,H({},o,{className:s}))};Oe.propTypes=ye,Oe.defaultProps={tag:"li"};var xe={active:o.a.bool,block:o.a.bool,color:o.a.string,disabled:o.a.bool,outline:o.a.bool,tag:o.a.oneOfType([o.a.func,o.a.string]),innerRef:o.a.oneOfType([o.a.func,o.a.string]),onClick:o.a.func,size:o.a.string,children:o.a.node,className:o.a.string,cssModule:o.a.object},ke=function(e){function t(e){U(this,t);var a=V(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.onClick=a.onClick.bind(a),a}return q(t,e),B(t,[{key:"onClick",value:function(e){this.props.disabled?e.preventDefault():this.props.onClick&&this.props.onClick(e)}},{key:"render",value:function(){var e=this.props,t=e.active,a=e.block,n=e.className,i=e.cssModule,o=e.color,s=e.outline,c=e.size,u=e.tag,m=e.innerRef,d=W(e,["active","block","className","cssModule","color","outline","size","tag","innerRef"]),p=S(l()(n,"btn","btn"+(s?"-outline":"")+"-"+o,!!c&&"btn-"+c,!!a&&"btn-block",{active:t,disabled:this.props.disabled}),i);return d.href&&"button"===u&&(u="a"),r.a.createElement(u,H({type:"button"===u&&d.onClick?"button":void 0},d,{className:p,ref:m,onClick:this.onClick}))}}]),t}(r.a.Component);ke.propTypes=xe,ke.defaultProps={color:"secondary",tag:"button"};var Se={children:o.a.node},we=function(e){return r.a.createElement(ge,H({group:!0},e))};we.propTypes=Se;var De={tag:o.a.oneOfType([o.a.func,o.a.string]),"aria-label":o.a.string,className:o.a.string,cssModule:o.a.object,role:o.a.string,size:o.a.string,vertical:o.a.bool},je=function(e){var t=e.className,a=e.cssModule,n=e.size,i=e.vertical,o=e.tag,s=W(e,["className","cssModule","size","vertical","tag"]),c=S(l()(t,!!n&&"btn-group-"+n,i?"btn-group-vertical":"btn-group"),a);return r.a.createElement(o,H({},s,{className:c}))};je.propTypes=De,je.defaultProps={tag:"div",role:"group"};var Ce={tag:o.a.oneOfType([o.a.func,o.a.string]),"aria-label":o.a.string,className:o.a.string,cssModule:o.a.object,role:o.a.string},Ne=function(e){var t=e.className,a=e.cssModule,n=e.tag,i=W(e,["className","cssModule","tag"]),o=S(l()(t,"btn-toolbar"),a);return r.a.createElement(n,H({},i,{className:o}))};Ne.propTypes=Ce,Ne.defaultProps={tag:"div",role:"toolbar"};var Pe={children:o.a.node,active:o.a.bool,disabled:o.a.bool,divider:o.a.bool,tag:o.a.oneOfType([o.a.func,o.a.string]),header:o.a.bool,onClick:o.a.func,className:o.a.string,cssModule:o.a.object,toggle:o.a.bool},_e={toggle:o.a.func},Me=function(e){function t(e){U(this,t);var a=V(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.onClick=a.onClick.bind(a),a.getTabIndex=a.getTabIndex.bind(a),a}return q(t,e),B(t,[{key:"onClick",value:function(e){this.props.disabled||this.props.header||this.props.divider?e.preventDefault():(this.props.onClick&&this.props.onClick(e),this.props.toggle&&this.context.toggle(e))}},{key:"getTabIndex",value:function(){return this.props.disabled||this.props.header||this.props.divider?"-1":"0"}},{key:"render",value:function(){var e=this.getTabIndex(),t=w(this.props,["toggle"]),a=t.className,n=t.cssModule,i=t.divider,o=t.tag,s=t.header,c=t.active,u=W(t,["className","cssModule","divider","tag","header","active"]),m=S(l()(a,{disabled:u.disabled,"dropdown-item":!i&&!s,active:c,"dropdown-header":s,"dropdown-divider":i}),n);return"button"===o&&(s?o="h6":i?o="div":u.href&&(o="a")),r.a.createElement(o,H({type:"button"===o&&(u.onClick||this.props.toggle)?"button":void 0},u,{tabIndex:e,className:m,onClick:this.onClick}))}}]),t}(r.a.Component);Me.propTypes=Pe,Me.defaultProps={tag:"button",toggle:!0},Me.contextTypes=_e;var Ie={tag:o.a.string,children:o.a.node.isRequired,right:o.a.bool,flip:o.a.bool,className:o.a.string,cssModule:o.a.object},Te={isOpen:o.a.bool.isRequired,direction:o.a.oneOf(["up","down","left","right"]).isRequired,inNavbar:o.a.bool.isRequired},Ae={flip:{enabled:!1}},Le={up:"top",left:"left",right:"right",down:"bottom"},Re=function(e,t){var a=e.className,n=e.cssModule,i=e.right,o=e.tag,s=e.flip,c=W(e,["className","cssModule","right","tag","flip"]),u=S(l()(a,"dropdown-menu",{"dropdown-menu-right":i,show:t.isOpen}),n),m=o;if(t.isOpen&&!t.inNavbar){m=g.Popper;var d=Le[t.direction]||"bottom",p=i?"end":"start";c.placement=d+"-"+p,c.component=o,c.modifiers=s?void 0:Ae}return r.a.createElement(m,H({tabIndex:"-1",role:"menu"},c,{"aria-hidden":!t.isOpen,className:u}))};Re.propTypes=Ie,Re.defaultProps={tag:"div",flip:!0},Re.contextTypes=Te;var Fe={caret:o.a.bool,color:o.a.string,children:o.a.node,className:o.a.string,cssModule:o.a.object,disabled:o.a.bool,onClick:o.a.func,"aria-haspopup":o.a.bool,split:o.a.bool,tag:o.a.oneOfType([o.a.func,o.a.string]),nav:o.a.bool},Ue={isOpen:o.a.bool.isRequired,toggle:o.a.func.isRequired,inNavbar:o.a.bool.isRequired},Be=function(e){function t(e){U(this,t);var a=V(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.onClick=a.onClick.bind(a),a}return q(t,e),B(t,[{key:"onClick",value:function(e){this.props.disabled?e.preventDefault():(this.props.nav&&!this.props.tag&&e.preventDefault(),this.props.onClick&&this.props.onClick(e),this.context.toggle(e))}},{key:"render",value:function(){var e=this.props,t=e.className,a=e.color,n=e.cssModule,i=e.caret,o=e.split,s=e.nav,c=e.tag,u=W(e,["className","color","cssModule","caret","split","nav","tag"]),m=u["aria-label"]||"Toggle Dropdown",d=S(l()(t,{"dropdown-toggle":i||o,"dropdown-toggle-split":o,"nav-link":s}),n),p=u.children||r.a.createElement("span",{className:"sr-only"},m),h=void 0;return s&&!c?(h="a",u.href="#"):c?h=c:(h=ke,u.color=a,u.cssModule=n),this.context.inNavbar?r.a.createElement(h,H({},u,{className:d,onClick:this.onClick,"aria-expanded":this.context.isOpen,children:p})):r.a.createElement(g.Target,H({},u,{className:d,component:h,onClick:this.onClick,"aria-expanded":this.context.isOpen,children:p}))}}]),t}(r.a.Component);function ze(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function He(e,t){return e(t={exports:{}},t.exports),t.exports}Be.propTypes=Fe,Be.defaultProps={"aria-haspopup":!0,color:"secondary"},Be.contextTypes=Ue,ze(He((function(e,t){t.__esModule=!0,t.classNamesShape=t.timeoutsShape=void 0,t.transitionTimeout=function(e){var t="transition"+e+"Timeout",a="transition"+e;return function(e){if(e[a]){if(null==e[t])return new Error(t+" wasn't supplied to CSSTransitionGroup: this can cause unreliable animations and won't be supported in a future version of React. See https://fb.me/react-animation-transition-group-timeout for more information.");if("number"!==typeof e[t])return new Error(t+" must be a number (in milliseconds)")}return null}};var a,n=(a=o.a)&&a.__esModule?a:{default:a};t.timeoutsShape=n.default.oneOfType([n.default.number,n.default.shape({enter:n.default.number,exit:n.default.number}).isRequired]),t.classNamesShape=n.default.oneOfType([n.default.string,n.default.shape({enter:n.default.string,exit:n.default.string,active:n.default.string}),n.default.shape({enter:n.default.string,enterActive:n.default.string,exit:n.default.string,exitActive:n.default.string})])})));var qe=ze(He((function(e,t){t.__esModule=!0,t.EXITING=t.ENTERED=t.ENTERING=t.EXITED=t.UNMOUNTED=void 0;var a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(o.a),n=s(r.a),i=s(h.a);function s(e){return e&&e.__esModule?e:{default:e}}var l=t.UNMOUNTED="unmounted",c=t.EXITED="exited",u=t.ENTERING="entering",m=t.ENTERED="entered",d=t.EXITING="exiting",p=function(e){function t(a,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==("undefined"===typeof t?"undefined":F(t))&&"function"!==typeof t?e:t}(this,e.call(this,a,n)),i=n.transitionGroup,o=i&&!i.isMounting?a.enter:a.appear,s=void 0;return r.nextStatus=null,a.in?o?(s=c,r.nextStatus=u):s=m:s=a.unmountOnExit||a.mountOnEnter?l:c,r.state={status:s},r.nextCallback=null,r}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+("undefined"===typeof t?"undefined":F(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.getChildContext=function(){return{transitionGroup:null}},t.prototype.componentDidMount=function(){this.updateStatus(!0)},t.prototype.componentWillReceiveProps=function(e){var t=(this.pendingState||this.state).status;e.in?(t===l&&this.setState({status:c}),t!==u&&t!==m&&(this.nextStatus=u)):t!==u&&t!==m||(this.nextStatus=d)},t.prototype.componentDidUpdate=function(){this.updateStatus()},t.prototype.componentWillUnmount=function(){this.cancelNextCallback()},t.prototype.getTimeouts=function(){var e=this.props.timeout,t=void 0,a=void 0,n=void 0;return t=a=n=e,null!=e&&"number"!==typeof e&&(t=e.exit,a=e.enter,n=e.appear),{exit:t,enter:a,appear:n}},t.prototype.updateStatus=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.nextStatus;if(null!==t){this.nextStatus=null,this.cancelNextCallback();var a=i.default.findDOMNode(this);t===u?this.performEnter(a,e):this.performExit(a)}else this.props.unmountOnExit&&this.state.status===c&&this.setState({status:l})},t.prototype.performEnter=function(e,t){var a=this,n=this.props.enter,r=this.context.transitionGroup?this.context.transitionGroup.isMounting:t,i=this.getTimeouts();t||n?(this.props.onEnter(e,r),this.safeSetState({status:u},(function(){a.props.onEntering(e,r),a.onTransitionEnd(e,i.enter,(function(){a.safeSetState({status:m},(function(){a.props.onEntered(e,r)}))}))}))):this.safeSetState({status:m},(function(){a.props.onEntered(e)}))},t.prototype.performExit=function(e){var t=this,a=this.props.exit,n=this.getTimeouts();a?(this.props.onExit(e),this.safeSetState({status:d},(function(){t.props.onExiting(e),t.onTransitionEnd(e,n.exit,(function(){t.safeSetState({status:c},(function(){t.props.onExited(e)}))}))}))):this.safeSetState({status:c},(function(){t.props.onExited(e)}))},t.prototype.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},t.prototype.safeSetState=function(e,t){var a=this;this.pendingState=e,t=this.setNextCallback(t),this.setState(e,(function(){a.pendingState=null,t()}))},t.prototype.setNextCallback=function(e){var t=this,a=!0;return this.nextCallback=function(n){a&&(a=!1,t.nextCallback=null,e(n))},this.nextCallback.cancel=function(){a=!1},this.nextCallback},t.prototype.onTransitionEnd=function(e,t,a){this.setNextCallback(a),e?(this.props.addEndListener&&this.props.addEndListener(e,this.nextCallback),null!=t&&setTimeout(this.nextCallback,t)):setTimeout(this.nextCallback,0)},t.prototype.render=function(){var e=this.state.status;if(e===l)return null;var t=this.props,a=t.children,r=function(e,t){var a={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n]);return a}(t,["children"]);if(delete r.in,delete r.mountOnEnter,delete r.unmountOnExit,delete r.appear,delete r.enter,delete r.exit,delete r.timeout,delete r.addEndListener,delete r.onEnter,delete r.onEntering,delete r.onEntered,delete r.onExit,delete r.onExiting,delete r.onExited,"function"===typeof a)return a(e,r);var i=n.default.Children.only(a);return n.default.cloneElement(i,r)},t}(n.default.Component);function g(){}p.contextTypes={transitionGroup:a.object},p.childContextTypes={transitionGroup:function(){}},p.propTypes={},p.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:g,onEntering:g,onEntered:g,onExit:g,onExiting:g,onExited:g},p.UNMOUNTED=0,p.EXITED=1,p.ENTERING=2,p.ENTERED=3,p.EXITING=4,t.default=p}))),We=H({},qe.propTypes,{children:o.a.oneOfType([o.a.arrayOf(o.a.node),o.a.node]),tag:o.a.oneOfType([o.a.string,o.a.func]),baseClass:o.a.string,baseClassActive:o.a.string,className:o.a.string,cssModule:o.a.object}),Ve=H({},qe.defaultProps,{tag:"div",baseClass:"fade",baseClassActive:"show",timeout:M.Fade,appear:!0,enter:!0,exit:!0,in:!0});function Ge(e){var t=e.tag,a=e.baseClass,n=e.baseClassActive,i=e.className,o=e.cssModule,s=e.children,c=W(e,["tag","baseClass","baseClassActive","className","cssModule","children"]),u=D(c,I),m=w(c,I);return r.a.createElement(qe,u,(function(e){var c="entered"===e,u=S(l()(i,a,c&&n),o);return r.a.createElement(t,H({className:u},m),s)}))}Ge.propTypes=We,Ge.defaultProps=Ve;var Ye={color:o.a.string,pill:o.a.bool,tag:o.a.oneOfType([o.a.func,o.a.string]),children:o.a.node,className:o.a.string,cssModule:o.a.object},Qe=function(e){var t=e.className,a=e.cssModule,n=e.color,i=e.pill,o=e.tag,s=W(e,["className","cssModule","color","pill","tag"]),c=S(l()(t,"badge","badge-"+n,!!i&&"badge-pill"),a);return s.href&&"span"===o&&(o="a"),r.a.createElement(o,H({},s,{className:c}))};Qe.propTypes=Ye,Qe.defaultProps={color:"secondary",pill:!1,tag:"span"};var Ke={tag:o.a.oneOfType([o.a.func,o.a.string]),inverse:o.a.bool,color:o.a.string,block:N(o.a.bool,'Please use the props "body"'),body:o.a.bool,outline:o.a.bool,className:o.a.string,cssModule:o.a.object},Xe=function(e){var t=e.className,a=e.cssModule,n=e.color,i=e.block,o=e.body,s=e.inverse,c=e.outline,u=e.tag,m=W(e,["className","cssModule","color","block","body","inverse","outline","tag"]),d=S(l()(t,"card",!!s&&"text-white",!(!i&&!o)&&"card-body",!!n&&(c?"border":"bg")+"-"+n),a);return r.a.createElement(u,H({},m,{className:d}))};Xe.propTypes=Ke,Xe.defaultProps={tag:"div"};var $e={tag:o.a.oneOfType([o.a.func,o.a.string]),className:o.a.string,cssModule:o.a.object},Je=function(e){var t=e.className,a=e.cssModule,n=e.tag,i=W(e,["className","cssModule","tag"]),o=S(l()(t,"card-group"),a);return r.a.createElement(n,H({},i,{className:o}))};Je.propTypes=$e,Je.defaultProps={tag:"div"};var Ze={tag:o.a.oneOfType([o.a.func,o.a.string]),className:o.a.string,cssModule:o.a.object},et=function(e){var t=e.className,a=e.cssModule,n=e.tag,i=W(e,["className","cssModule","tag"]),o=S(l()(t,"card-deck"),a);return r.a.createElement(n,H({},i,{className:o}))};et.propTypes=Ze,et.defaultProps={tag:"div"};var tt={tag:o.a.oneOfType([o.a.func,o.a.string]),className:o.a.string,cssModule:o.a.object},at=function(e){var t=e.className,a=e.cssModule,n=e.tag,i=W(e,["className","cssModule","tag"]),o=S(l()(t,"card-columns"),a);return r.a.createElement(n,H({},i,{className:o}))};at.propTypes=tt,at.defaultProps={tag:"div"};var nt={tag:o.a.oneOfType([o.a.func,o.a.string]),className:o.a.string,cssModule:o.a.object},rt=function(e){var t=e.className,a=e.cssModule,n=e.tag,i=W(e,["className","cssModule","tag"]),o=S(l()(t,"card-body"),a);return r.a.createElement(n,H({},i,{className:o}))};rt.propTypes=nt,rt.defaultProps={tag:"div"};var it={tag:o.a.oneOfType([o.a.func,o.a.string]),innerRef:o.a.oneOfType([o.a.func,o.a.string]),className:o.a.string,cssModule:o.a.object},ot=function(e){var t=e.className,a=e.cssModule,n=e.tag,i=e.innerRef,o=W(e,["className","cssModule","tag","innerRef"]),s=S(l()(t,"card-link"),a);return r.a.createElement(n,H({},o,{ref:i,className:s}))};ot.propTypes=it,ot.defaultProps={tag:"a"};var st={tag:o.a.oneOfType([o.a.func,o.a.string]),className:o.a.string,cssModule:o.a.object},lt=function(e){var t=e.className,a=e.cssModule,n=e.tag,i=W(e,["className","cssModule","tag"]),o=S(l()(t,"card-footer"),a);return r.a.createElement(n,H({},i,{className:o}))};lt.propTypes=st,lt.defaultProps={tag:"div"};var ct={tag:o.a.oneOfType([o.a.func,o.a.string]),className:o.a.string,cssModule:o.a.object},ut=function(e){var t=e.className,a=e.cssModule,n=e.tag,i=W(e,["className","cssModule","tag"]),o=S(l()(t,"card-header"),a);return r.a.createElement(n,H({},i,{className:o}))};ut.propTypes=ct,ut.defaultProps={tag:"div"};var mt={tag:o.a.oneOfType([o.a.func,o.a.string]),top:o.a.bool,bottom:o.a.bool,className:o.a.string,cssModule:o.a.object},dt=function(e){var t=e.className,a=e.cssModule,n=e.top,i=e.bottom,o=e.tag,s=W(e,["className","cssModule","top","bottom","tag"]),c="card-img";n&&(c="card-img-top"),i&&(c="card-img-bottom");var u=S(l()(t,c),a);return r.a.createElement(o,H({},s,{className:u}))};dt.propTypes=mt,dt.defaultProps={tag:"img"};var pt={tag:o.a.oneOfType([o.a.func,o.a.string]),className:o.a.string,cssModule:o.a.object},ht=function(e){var t=e.className,a=e.cssModule,n=e.tag,i=W(e,["className","cssModule","tag"]),o=S(l()(t,"card-img-overlay"),a);return r.a.createElement(n,H({},i,{className:o}))};ht.propTypes=pt,ht.defaultProps={tag:"div"};var gt=function(e){function t(e){U(this,t);var a=V(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={startAnimation:!1},a.onEnter=a.onEnter.bind(a),a.onEntering=a.onEntering.bind(a),a.onExit=a.onExit.bind(a),a.onExiting=a.onExiting.bind(a),a.onExited=a.onExited.bind(a),a}return q(t,e),B(t,[{key:"onEnter",value:function(e,t){this.setState({startAnimation:!1}),this.props.onEnter(e,t)}},{key:"onEntering",value:function(e,t){var a=e.offsetHeight;return this.setState({startAnimation:!0}),this.props.onEntering(e,t),a}},{key:"onExit",value:function(e){this.setState({startAnimation:!1}),this.props.onExit(e)}},{key:"onExiting",value:function(e){this.setState({startAnimation:!0}),e.dispatchEvent(new CustomEvent("slide.bs.carousel")),this.props.onExiting(e)}},{key:"onExited",value:function(e){e.dispatchEvent(new CustomEvent("slid.bs.carousel")),this.props.onExited(e)}},{key:"render",value:function(){var e=this,t=this.props,a=t.in,n=t.children,i=t.cssModule,o=t.slide,s=t.tag,c=t.className,u=W(t,["in","children","cssModule","slide","tag","className"]);return r.a.createElement(qe,H({},u,{enter:o,exit:o,in:a,onEnter:this.onEnter,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}),(function(t){var a=e.context.direction,o=t===T.ENTERED||t===T.EXITING,u=(t===T.ENTERING||t===T.EXITING)&&e.state.startAnimation&&("right"===a?"carousel-item-left":"carousel-item-right"),m=t===T.ENTERING&&("right"===a?"carousel-item-next":"carousel-item-prev"),d=S(l()(c,"carousel-item",o&&"active",u,m),i);return r.a.createElement(s,{className:d},n)}))}}]),t}(r.a.Component);gt.propTypes=H({},qe.propTypes,{tag:o.a.oneOfType([o.a.func,o.a.string]),in:o.a.bool,cssModule:o.a.object,children:o.a.node,slide:o.a.bool,className:o.a.string}),gt.defaultProps=H({},qe.defaultProps,{tag:"div",timeout:M.Carousel,slide:!0}),gt.contextTypes={direction:o.a.string};var ft=function(e){function t(e){U(this,t);var a=V(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.handleKeyPress=a.handleKeyPress.bind(a),a.renderItems=a.renderItems.bind(a),a.hoverStart=a.hoverStart.bind(a),a.hoverEnd=a.hoverEnd.bind(a),a.state={direction:"right",indicatorClicked:!1},a}return q(t,e),B(t,[{key:"getChildContext",value:function(){return{direction:this.state.direction}}},{key:"componentDidMount",value:function(){"carousel"===this.props.ride&&this.setInterval(),document.addEventListener("keyup",this.handleKeyPress)}},{key:"componentWillReceiveProps",value:function(e){this.setInterval(e),this.props.activeIndex+1===e.activeIndex?this.setState({direction:"right"}):this.props.activeIndex-1===e.activeIndex?this.setState({direction:"left"}):this.props.activeIndex>e.activeIndex?this.setState({direction:this.state.indicatorClicked?"left":"right"}):this.props.activeIndex!==e.activeIndex&&this.setState({direction:this.state.indicatorClicked?"right":"left"}),this.setState({indicatorClicked:!1})}},{key:"componentWillUnmount",value:function(){this.clearInterval(),document.removeEventListener("keyup",this.handleKeyPress)}},{key:"setInterval",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;this.clearInterval(),e.interval&&(this.cycleInterval=setInterval((function(){e.next()}),parseInt(e.interval,10)))}))},{key:"clearInterval",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){clearInterval(this.cycleInterval)}))},{key:"hoverStart",value:function(){var e;("hover"===this.props.pause&&this.clearInterval(),this.props.mouseEnter)&&(e=this.props).mouseEnter.apply(e,arguments)}},{key:"hoverEnd",value:function(){var e;("hover"===this.props.pause&&this.setInterval(),this.props.mouseLeave)&&(e=this.props).mouseLeave.apply(e,arguments)}},{key:"handleKeyPress",value:function(e){this.props.keyboard&&(37===e.keyCode?this.props.previous():39===e.keyCode&&this.props.next())}},{key:"renderItems",value:function(e,t){var a=this,n=this.props.slide;return r.a.createElement("div",{role:"listbox",className:t},e.map((function(e,t){var i=t===a.props.activeIndex;return r.a.cloneElement(e,{in:i,slide:n})})))}},{key:"render",value:function(){var e=this,t=this.props,a=t.children,n=t.cssModule,i=t.slide,o=t.className,s=S(l()(o,"carousel",i&&"slide"),n),c=S(l()("carousel-inner"),n);if(a.every((function(e){return e.type===gt})))return r.a.createElement("div",{className:s,onMouseEnter:this.hoverStart,onMouseLeave:this.hoverEnd},this.renderItems(a,c));if(a[0]instanceof Array){var u=a[0],m=a[1],d=a[2];return r.a.createElement("div",{className:s,onMouseEnter:this.hoverStart,onMouseLeave:this.hoverEnd},this.renderItems(u,c),m,d)}var p=a[0],h=r.a.cloneElement(p,{onClickHandler:function(t){"function"===typeof p.props.onClickHandler&&e.setState({indicatorClicked:!0},(function(){return p.props.onClickHandler(t)}))}}),g=a[1],f=a[2],b=a[3];return r.a.createElement("div",{className:s,onMouseEnter:this.hoverStart,onMouseLeave:this.hoverEnd},h,this.renderItems(g,c),f,b)}}]),t}(r.a.Component);ft.propTypes={activeIndex:o.a.number,next:o.a.func.isRequired,previous:o.a.func.isRequired,keyboard:o.a.bool,pause:o.a.oneOf(["hover",!1]),ride:o.a.oneOf(["carousel"]),interval:o.a.oneOfType([o.a.number,o.a.string,o.a.bool]),children:o.a.array,mouseEnter:o.a.func,mouseLeave:o.a.func,slide:o.a.bool,cssModule:o.a.object,className:o.a.string},ft.defaultProps={interval:5e3,pause:"hover",keyboard:!0,slide:!0},ft.childContextTypes={direction:o.a.string};var bt=function(e){var t=e.direction,a=e.onClickHandler,n=e.cssModule,i=e.directionText,o=e.className,s=S(l()(o,"carousel-control-"+t),n),c=S(l()("carousel-control-"+t+"-icon"),n),u=S(l()("sr-only"),n);return r.a.createElement("a",{className:s,role:"button",tabIndex:"0",onClick:function(e){e.preventDefault(),a()}},r.a.createElement("span",{className:c,"aria-hidden":"true"}),r.a.createElement("span",{className:u},i||t))};bt.propTypes={direction:o.a.oneOf(["prev","next"]).isRequired,onClickHandler:o.a.func.isRequired,cssModule:o.a.object,directionText:o.a.string,className:o.a.string};var vt=function(e){var t=e.items,a=e.activeIndex,n=e.cssModule,i=e.onClickHandler,o=e.className,s=S(l()(o,"carousel-indicators"),n),c=t.map((function(e,t){var o=S(l()({active:a===t}),n);return r.a.createElement("li",{key:""+(e.key||e.src)+e.caption+e.altText,onClick:function(e){e.preventDefault(),i(t)},className:o})}));return r.a.createElement("ol",{className:s},c)};vt.propTypes={items:o.a.array.isRequired,activeIndex:o.a.number.isRequired,cssModule:o.a.object,onClickHandler:o.a.func.isRequired,className:o.a.string};var Et=function(e){var t=e.captionHeader,a=e.captionText,n=e.cssModule,i=e.className,o=S(l()(i,"carousel-caption","d-none","d-md-block"),n);return r.a.createElement("div",{className:o},r.a.createElement("h3",null,t),r.a.createElement("p",null,a))};Et.propTypes={captionHeader:o.a.string,captionText:o.a.string.isRequired,cssModule:o.a.object,className:o.a.string};var yt={items:o.a.array.isRequired,indicators:o.a.bool,controls:o.a.bool,autoPlay:o.a.bool,activeIndex:o.a.number,next:o.a.func,previous:o.a.func,goToIndex:o.a.func},Ot=function(e){function t(e){U(this,t);var a=V(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.animating=!1,a.state={activeIndex:0},a.next=a.next.bind(a),a.previous=a.previous.bind(a),a.goToIndex=a.goToIndex.bind(a),a.onExiting=a.onExiting.bind(a),a.onExited=a.onExited.bind(a),a}return q(t,e),B(t,[{key:"onExiting",value:function(){this.animating=!0}},{key:"onExited",value:function(){this.animating=!1}},{key:"next",value:function(){if(!this.animating){var e=this.state.activeIndex===this.props.items.length-1?0:this.state.activeIndex+1;this.setState({activeIndex:e})}}},{key:"previous",value:function(){if(!this.animating){var e=0===this.state.activeIndex?this.props.items.length-1:this.state.activeIndex-1;this.setState({activeIndex:e})}}},{key:"goToIndex",value:function(e){this.animating||this.setState({activeIndex:e})}},{key:"render",value:function(){var e=this,t=this.props,a=t.autoPlay,n=t.indicators,i=t.controls,o=t.items,s=t.goToIndex,l=W(t,["autoPlay","indicators","controls","items","goToIndex"]),c=this.state.activeIndex,u=o.map((function(t){return r.a.createElement(gt,{onExiting:e.onExiting,onExited:e.onExited,key:t.src},r.a.createElement("img",{src:t.src,alt:t.altText}),r.a.createElement(Et,{captionText:t.caption,captionHeader:t.caption}))}));return r.a.createElement(ft,H({activeIndex:c,next:this.next,previous:this.previous,ride:a?"carousel":void 0},l),n&&r.a.createElement(vt,{items:o,activeIndex:l.activeIndex||c,onClickHandler:s||this.goToIndex}),u,i&&r.a.createElement(bt,{direction:"prev",directionText:"Previous",onClickHandler:l.previous||this.previous}),i&&r.a.createElement(bt,{direction:"next",directionText:"Next",onClickHandler:l.next||this.next}))}}]),t}(n.Component);Ot.propTypes=yt,Ot.defaultProps={controls:!0,indicators:!0,autoPlay:!0};var xt={tag:o.a.oneOfType([o.a.func,o.a.string]),className:o.a.string,cssModule:o.a.object},kt=function(e){var t=e.className,a=e.cssModule,n=e.tag,i=W(e,["className","cssModule","tag"]),o=S(l()(t,"card-subtitle"),a);return r.a.createElement(n,H({},i,{className:o}))};kt.propTypes=xt,kt.defaultProps={tag:"h6"};var St={tag:o.a.oneOfType([o.a.func,o.a.string]),className:o.a.string,cssModule:o.a.object},wt=function(e){var t=e.className,a=e.cssModule,n=e.tag,i=W(e,["className","cssModule","tag"]),o=S(l()(t,"card-text"),a);return r.a.createElement(n,H({},i,{className:o}))};wt.propTypes=St,wt.defaultProps={tag:"p"};var Dt={tag:o.a.oneOfType([o.a.func,o.a.string]),className:o.a.string,cssModule:o.a.object},jt=function(e){var t=e.className,a=e.cssModule,n=e.tag,i=W(e,["className","cssModule","tag"]),o=S(l()(t,"card-title"),a);return r.a.createElement(n,H({},i,{className:o}))};jt.propTypes=Dt,jt.defaultProps={tag:"h5"};var Ct={children:o.a.node.isRequired,className:o.a.string,placement:o.a.string,placementPrefix:o.a.string,hideArrow:o.a.bool,tag:o.a.string,isOpen:o.a.bool.isRequired,cssModule:o.a.object,offset:o.a.oneOfType([o.a.string,o.a.number]),fallbackPlacement:o.a.oneOfType([o.a.string,o.a.array]),flip:o.a.bool,container:o.a.oneOfType([o.a.string,o.a.func,P]),target:o.a.oneOfType([o.a.string,o.a.func,P]).isRequired,modifiers:o.a.object},Nt={popperManager:o.a.object.isRequired},Pt=function(e){function t(e){U(this,t);var a=V(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.handlePlacementChange=a.handlePlacementChange.bind(a),a.setTargetNode=a.setTargetNode.bind(a),a.getTargetNode=a.getTargetNode.bind(a),a.state={},a}return q(t,e),B(t,[{key:"getChildContext",value:function(){return{popperManager:{setTargetNode:this.setTargetNode,getTargetNode:this.getTargetNode}}}},{key:"componentDidMount",value:function(){this.handleProps()}},{key:"componentDidUpdate",value:function(e){this.props.isOpen!==e.isOpen?this.handleProps():this._element&&this.renderIntoSubtree()}},{key:"componentWillUnmount",value:function(){this.hide()}},{key:"setTargetNode",value:function(e){this.targetNode=e}},{key:"getTargetNode",value:function(){return this.targetNode}},{key:"getContainerNode",value:function(){return _(this.props.container)}},{key:"handlePlacementChange",value:function(e){return this.state.placement!==e.placement&&this.setState({placement:e.placement}),e}},{key:"handleProps",value:function(){"inline"!==this.props.container&&(this.props.isOpen?this.show():this.hide())}},{key:"hide",value:function(){this._element&&(this.getContainerNode().removeChild(this._element),h.a.unmountComponentAtNode(this._element),this._element=null)}},{key:"show",value:function(){this._element=document.createElement("div"),this.getContainerNode().appendChild(this._element),this.renderIntoSubtree(),this._element.childNodes&&this._element.childNodes[0]&&this._element.childNodes[0].focus&&this._element.childNodes[0].focus()}},{key:"renderIntoSubtree",value:function(){h.a.unstable_renderSubtreeIntoContainer(this,this.renderChildren(),this._element)}},{key:"renderChildren",value:function(){var e=this.props,t=e.cssModule,a=e.children,n=(e.isOpen,e.flip),i=(e.target,e.offset),o=e.fallbackPlacement,s=e.placementPrefix,c=e.hideArrow,u=e.className,m=e.tag,d=(e.container,e.modifiers),p=W(e,["cssModule","children","isOpen","flip","target","offset","fallbackPlacement","placementPrefix","hideArrow","className","tag","container","modifiers"]),h=S("arrow",t),f=(this.state.placement||p.placement).split("-")[0],b=S(l()(u,s?s+"-"+f:f),this.props.cssModule),v=H({offset:{offset:i},flip:{enabled:n,behavior:o},update:{enabled:!0,order:950,fn:this.handlePlacementChange}},d);return r.a.createElement(g.Popper,H({modifiers:v},p,{component:m,className:b}),a,!c&&r.a.createElement(g.Arrow,{className:h}))}},{key:"render",value:function(){return this.setTargetNode(_(this.props.target)),"inline"===this.props.container&&this.props.isOpen?this.renderChildren():null}}]),t}(r.a.Component);Pt.propTypes=Ct,Pt.defaultProps={placement:"auto",hideArrow:!1,isOpen:!1,offset:0,fallbackPlacement:"flip",flip:!0,container:"body",modifiers:{}},Pt.childContextTypes=Nt;var _t=function(e,t){return t.popperManager.setTargetNode(_(e.target)),null};_t.contextTypes={popperManager:o.a.object.isRequired},_t.propTypes={target:o.a.oneOfType([o.a.string,o.a.func,P]).isRequired};var Mt={placement:o.a.oneOf(L),target:o.a.oneOfType([o.a.string,o.a.func,P]).isRequired,container:o.a.oneOfType([o.a.string,o.a.func,P]),isOpen:o.a.bool,disabled:o.a.bool,hideArrow:o.a.bool,className:o.a.string,innerClassName:o.a.string,placementPrefix:o.a.string,cssModule:o.a.object,toggle:o.a.func,delay:o.a.oneOfType([o.a.shape({show:o.a.number,hide:o.a.number}),o.a.number]),modifiers:o.a.object},It={show:0,hide:0},Tt={isOpen:!1,hideArrow:!1,placement:"right",placementPrefix:"bs-popover",delay:It,toggle:function(){}},At=function(e){function t(e){U(this,t);var a=V(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.addTargetEvents=a.addTargetEvents.bind(a),a.handleDocumentClick=a.handleDocumentClick.bind(a),a.removeTargetEvents=a.removeTargetEvents.bind(a),a.getRef=a.getRef.bind(a),a.toggle=a.toggle.bind(a),a.show=a.show.bind(a),a.hide=a.hide.bind(a),a}return q(t,e),B(t,[{key:"componentDidMount",value:function(){this._target=_(this.props.target),this.handleProps()}},{key:"componentDidUpdate",value:function(){this.handleProps()}},{key:"componentWillUnmount",value:function(){this.clearShowTimeout(),this.clearHideTimeout(),this.removeTargetEvents()}},{key:"getRef",value:function(e){this._popover=e}},{key:"getDelay",value:function(e){var t=this.props.delay;return"object"===("undefined"===typeof t?"undefined":F(t))?isNaN(t[e])?It[e]:t[e]:t}},{key:"handleProps",value:function(){this.props.isOpen?this.show():this.hide()}},{key:"show",value:function(){this.clearHideTimeout(),this.addTargetEvents(),this.props.isOpen||(this.clearShowTimeout(),this._showTimeout=setTimeout(this.toggle,this.getDelay("show")))}},{key:"hide",value:function(){this.clearShowTimeout(),this.removeTargetEvents(),this.props.isOpen&&(this.clearHideTimeout(),this._hideTimeout=setTimeout(this.toggle,this.getDelay("hide")))}},{key:"clearShowTimeout",value:function(){clearTimeout(this._showTimeout),this._showTimeout=void 0}},{key:"clearHideTimeout",value:function(){clearTimeout(this._hideTimeout),this._hideTimeout=void 0}},{key:"handleDocumentClick",value:function(e){e.target===this._target||this._target.contains(e.target)||e.target===this._popover||this._popover&&this._popover.contains(e.target)||(this._hideTimeout&&this.clearHideTimeout(),this.props.isOpen&&this.toggle(e))}},{key:"addTargetEvents",value:function(){var e=this;["click","touchstart"].forEach((function(t){return document.addEventListener(t,e.handleDocumentClick,!0)}))}},{key:"removeTargetEvents",value:function(){var e=this;["click","touchstart"].forEach((function(t){return document.removeEventListener(t,e.handleDocumentClick,!0)}))}},{key:"toggle",value:function(e){return this.props.disabled?e&&e.preventDefault():this.props.toggle(e)}},{key:"render",value:function(){if(!this.props.isOpen)return null;var e=w(this.props,Object.keys(Mt)),t=S(l()("popover-inner",this.props.innerClassName),this.props.cssModule),a=S(l()("popover","show",this.props.className),this.props.cssModule);return r.a.createElement(Pt,{className:a,target:this.props.target,isOpen:this.props.isOpen,hideArrow:this.props.hideArrow,placement:this.props.placement,placementPrefix:this.props.placementPrefix,container:this.props.container,modifiers:this.props.modifiers},r.a.createElement("div",H({},e,{className:t,ref:this.getRef})))}}]),t}(r.a.Component);At.propTypes=Mt,At.defaultProps=Tt;var Lt={tag:o.a.oneOfType([o.a.func,o.a.string]),className:o.a.string,cssModule:o.a.object},Rt=function(e){var t=e.className,a=e.cssModule,n=e.tag,i=W(e,["className","cssModule","tag"]),o=S(l()(t,"popover-header"),a);return r.a.createElement(n,H({},i,{className:o}))};Rt.propTypes=Lt,Rt.defaultProps={tag:"h3"};var Ft={tag:o.a.oneOfType([o.a.func,o.a.string]),className:o.a.string,cssModule:o.a.object},Ut=function(e){var t=e.className,a=e.cssModule,n=e.tag,i=W(e,["className","cssModule","tag"]),o=S(l()(t,"popover-body"),a);return r.a.createElement(n,H({},i,{className:o}))};Ut.propTypes=Ft,Ut.defaultProps={tag:"div"};var Bt={children:o.a.node,bar:o.a.bool,multi:o.a.bool,tag:o.a.string,value:o.a.oneOfType([o.a.string,o.a.number]),max:o.a.oneOfType([o.a.string,o.a.number]),animated:o.a.bool,striped:o.a.bool,color:o.a.string,className:o.a.string,barClassName:o.a.string,cssModule:o.a.object},zt=function(e){var t=e.children,a=e.className,n=e.barClassName,i=e.cssModule,o=e.value,s=e.max,c=e.animated,u=e.striped,m=e.color,d=e.bar,p=e.multi,h=e.tag,g=W(e,["children","className","barClassName","cssModule","value","max","animated","striped","color","bar","multi","tag"]),f=b()(o)/b()(s)*100,v=S(l()(a,"progress"),i),E=S(l()("progress-bar",d&&a||n,c?"progress-bar-animated":null,m?"bg-"+m:null,u||c?"progress-bar-striped":null),i),y=p?t:r.a.createElement("div",{className:E,style:{width:f+"%"},role:"progressbar","aria-valuenow":o,"aria-valuemin":"0","aria-valuemax":s,children:t});return d?y:r.a.createElement(h,H({},g,{className:v,children:y}))};zt.propTypes=Bt,zt.defaultProps={tag:"div",value:0,max:100};var Ht={children:o.a.node.isRequired,node:o.a.any},qt=function(e){function t(){return U(this,t),V(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return q(t,e),B(t,[{key:"componentWillUnmount",value:function(){this.defaultNode&&document.body.removeChild(this.defaultNode),this.defaultNode=null}},{key:"render",value:function(){return R?(this.props.node||this.defaultNode||(this.defaultNode=document.createElement("div"),document.body.appendChild(this.defaultNode)),h.a.createPortal(this.props.children,this.props.node||this.defaultNode)):null}}]),t}(r.a.Component);function Wt(){}qt.propTypes=Ht;var Vt=o.a.shape(Ge.propTypes),Gt={isOpen:o.a.bool,autoFocus:o.a.bool,centered:o.a.bool,size:o.a.string,toggle:o.a.func,keyboard:o.a.bool,role:o.a.string,labelledBy:o.a.string,backdrop:o.a.oneOfType([o.a.bool,o.a.oneOf(["static"])]),onEnter:o.a.func,onExit:o.a.func,onOpened:o.a.func,onClosed:o.a.func,children:o.a.node,className:o.a.string,wrapClassName:o.a.string,modalClassName:o.a.string,backdropClassName:o.a.string,contentClassName:o.a.string,external:o.a.node,fade:o.a.bool,cssModule:o.a.object,zIndex:o.a.oneOfType([o.a.number,o.a.string]),backdropTransition:Vt,modalTransition:Vt},Yt=Object.keys(Gt),Qt={isOpen:!1,autoFocus:!0,centered:!1,role:"dialog",backdrop:!0,keyboard:!0,zIndex:1050,fade:!0,onOpened:Wt,onClosed:Wt,modalTransition:{timeout:M.Modal},backdropTransition:{mountOnEnter:!0,timeout:M.Fade}},Kt=function(e){function t(e){U(this,t);var a=V(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a._element=null,a._originalBodyPadding=null,a.handleBackdropClick=a.handleBackdropClick.bind(a),a.handleEscape=a.handleEscape.bind(a),a.onOpened=a.onOpened.bind(a),a.onClosed=a.onClosed.bind(a),a.state={isOpen:e.isOpen},e.isOpen&&a.init(),a}return q(t,e),B(t,[{key:"componentDidMount",value:function(){this.props.onEnter&&this.props.onEnter(),this.state.isOpen&&this.props.autoFocus&&this.setFocus(),this._isMounted=!0}},{key:"componentWillReceiveProps",value:function(e){e.isOpen&&!this.props.isOpen&&this.setState({isOpen:e.isOpen})}},{key:"componentWillUpdate",value:function(e,t){t.isOpen&&!this.state.isOpen&&this.init()}},{key:"componentDidUpdate",value:function(e,t){this.props.autoFocus&&this.state.isOpen&&!t.isOpen&&this.setFocus()}},{key:"componentWillUnmount",value:function(){this.props.onExit&&this.props.onExit(),this.state.isOpen&&this.destroy(),this._isMounted=!1}},{key:"onOpened",value:function(e,t){this.props.onOpened(),(this.props.modalTransition.onEntered||Wt)(e,t)}},{key:"onClosed",value:function(e){this.props.onClosed(),(this.props.modalTransition.onExited||Wt)(e),this.destroy(),this._isMounted&&this.setState({isOpen:!1})}},{key:"setFocus",value:function(){this._dialog&&this._dialog.parentNode&&"function"===typeof this._dialog.parentNode.focus&&this._dialog.parentNode.focus()}},{key:"handleBackdropClick",value:function(e){if(e.stopPropagation(),this.props.isOpen&&!0===this.props.backdrop){var t=this._dialog;e.target&&!t.contains(e.target)&&this.props.toggle&&this.props.toggle(e)}}},{key:"handleEscape",value:function(e){this.props.isOpen&&this.props.keyboard&&27===e.keyCode&&this.props.toggle&&this.props.toggle(e)}},{key:"init",value:function(){this._element=document.createElement("div"),this._element.setAttribute("tabindex","-1"),this._element.style.position="relative",this._element.style.zIndex=this.props.zIndex,this._originalBodyPadding=O(),x(),document.body.appendChild(this._element),this.bodyClassAdded||(document.body.className=l()(document.body.className,S("modal-open",this.props.cssModule)),this.bodyClassAdded=!0)}},{key:"destroy",value:function(){if(this._element&&(document.body.removeChild(this._element),this._element=null),this.bodyClassAdded){var e=S("modal-open",this.props.cssModule),t=new RegExp("(^| )"+e+"( |$)");document.body.className=document.body.className.replace(t," ").trim(),this.bodyClassAdded=!1}E(this._originalBodyPadding)}},{key:"renderModalDialog",value:function(){var e,t=this,a=w(this.props,Yt),n="modal-dialog";return r.a.createElement("div",H({},a,{className:S(l()(n,this.props.className,(e={},z(e,"modal-"+this.props.size,this.props.size),z(e,"modal-dialog-centered",this.props.centered),e)),this.props.cssModule),role:"document",ref:function(e){t._dialog=e}}),r.a.createElement("div",{className:S(l()("modal-content",this.props.contentClassName),this.props.cssModule)},this.props.children))}},{key:"render",value:function(){if(this.state.isOpen){var e=this.props,t=e.wrapClassName,a=e.modalClassName,n=e.backdropClassName,i=e.cssModule,o=e.isOpen,s=e.backdrop,c=e.role,u=e.labelledBy,m=e.external,d={onClick:this.handleBackdropClick,onKeyUp:this.handleEscape,style:{display:"block"},"aria-labelledby":u,role:c,tabIndex:"-1"},p=this.props.fade,h=H({},Ge.defaultProps,this.props.modalTransition,{baseClass:p?this.props.modalTransition.baseClass:"",timeout:p?this.props.modalTransition.timeout:0}),g=H({},Ge.defaultProps,this.props.backdropTransition,{baseClass:p?this.props.backdropTransition.baseClass:"",timeout:p?this.props.backdropTransition.timeout:0});return r.a.createElement(qt,{node:this._element},r.a.createElement("div",{className:S(t)},r.a.createElement(Ge,H({},d,h,{in:o,onEntered:this.onOpened,onExited:this.onClosed,cssModule:i,className:S(l()("modal",a),i)}),m,this.renderModalDialog()),r.a.createElement(Ge,H({},g,{in:o&&!!s,cssModule:i,className:S(l()("modal-backdrop",n),i)}))))}return null}}]),t}(r.a.Component);Kt.propTypes=Gt,Kt.defaultProps=Qt;var Xt={tag:o.a.oneOfType([o.a.func,o.a.string]),wrapTag:o.a.oneOfType([o.a.func,o.a.string]),toggle:o.a.func,className:o.a.string,cssModule:o.a.object,children:o.a.node,closeAriaLabel:o.a.string},$t=function(e){var t=void 0,a=e.className,n=e.cssModule,i=e.children,o=e.toggle,s=e.tag,c=e.wrapTag,u=e.closeAriaLabel,m=W(e,["className","cssModule","children","toggle","tag","wrapTag","closeAriaLabel"]),d=S(l()(a,"modal-header"),n);return o&&(t=r.a.createElement("button",{type:"button",onClick:o,className:S("close",n),"aria-label":u},r.a.createElement("span",{"aria-hidden":"true"},String.fromCharCode(215)))),r.a.createElement(c,H({},m,{className:d}),r.a.createElement(s,{className:S("modal-title",n)},i),t)};$t.propTypes=Xt,$t.defaultProps={tag:"h5",wrapTag:"div",closeAriaLabel:"Close"};var Jt={tag:o.a.oneOfType([o.a.func,o.a.string]),className:o.a.string,cssModule:o.a.object},Zt=function(e){var t=e.className,a=e.cssModule,n=e.tag,i=W(e,["className","cssModule","tag"]),o=S(l()(t,"modal-body"),a);return r.a.createElement(n,H({},i,{className:o}))};Zt.propTypes=Jt,Zt.defaultProps={tag:"div"};var ea={tag:o.a.oneOfType([o.a.func,o.a.string]),className:o.a.string,cssModule:o.a.object},ta=function(e){var t=e.className,a=e.cssModule,n=e.tag,i=W(e,["className","cssModule","tag"]),o=S(l()(t,"modal-footer"),a);return r.a.createElement(n,H({},i,{className:o}))};ta.propTypes=ea,ta.defaultProps={tag:"div"};var aa={placement:o.a.oneOf(L),target:o.a.oneOfType([o.a.string,o.a.func,P]).isRequired,container:o.a.oneOfType([o.a.string,o.a.func,P]),isOpen:o.a.bool,disabled:o.a.bool,hideArrow:o.a.bool,className:o.a.string,innerClassName:o.a.string,cssModule:o.a.object,toggle:o.a.func,autohide:o.a.bool,placementPrefix:o.a.string,delay:o.a.oneOfType([o.a.shape({show:o.a.number,hide:o.a.number}),o.a.number]),modifiers:o.a.object},na={show:0,hide:250},ra={isOpen:!1,hideArrow:!1,placement:"top",placementPrefix:"bs-tooltip",delay:na,autohide:!0,toggle:function(){}},ia=function(e){function t(e){U(this,t);var a=V(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.addTargetEvents=a.addTargetEvents.bind(a),a.handleDocumentClick=a.handleDocumentClick.bind(a),a.removeTargetEvents=a.removeTargetEvents.bind(a),a.toggle=a.toggle.bind(a),a.onMouseOverTooltip=a.onMouseOverTooltip.bind(a),a.onMouseLeaveTooltip=a.onMouseLeaveTooltip.bind(a),a.onMouseOverTooltipContent=a.onMouseOverTooltipContent.bind(a),a.onMouseLeaveTooltipContent=a.onMouseLeaveTooltipContent.bind(a),a.show=a.show.bind(a),a.hide=a.hide.bind(a),a}return q(t,e),B(t,[{key:"componentDidMount",value:function(){this._target=_(this.props.target),this.addTargetEvents()}},{key:"componentWillUnmount",value:function(){this.removeTargetEvents()}},{key:"onMouseOverTooltip",value:function(){this._hideTimeout&&this.clearHideTimeout(),this._showTimeout=setTimeout(this.show,this.getDelay("show"))}},{key:"onMouseLeaveTooltip",value:function(){this._showTimeout&&this.clearShowTimeout(),this._hideTimeout=setTimeout(this.hide,this.getDelay("hide"))}},{key:"onMouseOverTooltipContent",value:function(){this.props.autohide||this._hideTimeout&&this.clearHideTimeout()}},{key:"onMouseLeaveTooltipContent",value:function(){this.props.autohide||(this._showTimeout&&this.clearShowTimeout(),this._hideTimeout=setTimeout(this.hide,this.getDelay("hide")))}},{key:"getDelay",value:function(e){var t=this.props.delay;return"object"===("undefined"===typeof t?"undefined":F(t))?isNaN(t[e])?na[e]:t[e]:t}},{key:"show",value:function(){this.props.isOpen||(this.clearShowTimeout(),this.toggle())}},{key:"hide",value:function(){this.props.isOpen&&(this.clearHideTimeout(),this.toggle())}},{key:"clearShowTimeout",value:function(){clearTimeout(this._showTimeout),this._showTimeout=void 0}},{key:"clearHideTimeout",value:function(){clearTimeout(this._hideTimeout),this._hideTimeout=void 0}},{key:"handleDocumentClick",value:function(e){(e.target===this._target||this._target.contains(e.target))&&(this._hideTimeout&&this.clearHideTimeout(),this.props.isOpen||this.toggle())}},{key:"addTargetEvents",value:function(){var e=this;this._target.addEventListener("mouseover",this.onMouseOverTooltip,!0),this._target.addEventListener("mouseout",this.onMouseLeaveTooltip,!0),["click","touchstart"].forEach((function(t){return document.addEventListener(t,e.handleDocumentClick,!0)}))}},{key:"removeTargetEvents",value:function(){var e=this;this._target.removeEventListener("mouseover",this.onMouseOverTooltip,!0),this._target.removeEventListener("mouseout",this.onMouseLeaveTooltip,!0),["click","touchstart"].forEach((function(t){return document.removeEventListener(t,e.handleDocumentClick,!0)}))}},{key:"toggle",value:function(e){return this.props.disabled?e&&e.preventDefault():this.props.toggle()}},{key:"render",value:function(){if(!this.props.isOpen)return null;var e=w(this.props,Object.keys(aa)),t=S(l()("tooltip-inner",this.props.innerClassName),this.props.cssModule),a=S(l()("tooltip","show",this.props.className),this.props.cssModule);return r.a.createElement(Pt,{className:a,target:this.props.target,isOpen:this.props.isOpen,hideArrow:this.props.hideArrow,placement:this.props.placement,placementPrefix:this.props.placementPrefix,container:this.props.container,modifiers:this.props.modifiers},r.a.createElement("div",H({},e,{className:t,onMouseOver:this.onMouseOverTooltipContent,onMouseLeave:this.onMouseLeaveTooltipContent})))}}]),t}(r.a.Component);ia.propTypes=aa,ia.defaultProps=ra;var oa={className:o.a.string,cssModule:o.a.object,size:o.a.string,bordered:o.a.bool,striped:o.a.bool,inverse:N(o.a.bool,'Please use the prop "dark"'),dark:o.a.bool,hover:o.a.bool,responsive:o.a.oneOfType([o.a.bool,o.a.string]),tag:o.a.oneOfType([o.a.func,o.a.string]),responsiveTag:o.a.oneOfType([o.a.func,o.a.string])},sa=function(e){var t=e.className,a=e.cssModule,n=e.size,i=e.bordered,o=e.striped,s=e.inverse,c=e.dark,u=e.hover,m=e.responsive,d=e.tag,p=e.responsiveTag,h=W(e,["className","cssModule","size","bordered","striped","inverse","dark","hover","responsive","tag","responsiveTag"]),g=S(l()(t,"table",!!n&&"table-"+n,!!i&&"table-bordered",!!o&&"table-striped",!(!c&&!s)&&"table-dark",!!u&&"table-hover"),a),f=r.a.createElement(d,H({},h,{className:g}));if(m){var b=!0===m?"table-responsive":"table-responsive-"+m;return r.a.createElement(p,{className:b},f)}return f};sa.propTypes=oa,sa.defaultProps={tag:"table",responsiveTag:"div"};var la={tag:o.a.oneOfType([o.a.func,o.a.string]),flush:o.a.bool,className:o.a.string,cssModule:o.a.object},ca=function(e){var t=e.className,a=e.cssModule,n=e.tag,i=e.flush,o=W(e,["className","cssModule","tag","flush"]),s=S(l()(t,"list-group",!!i&&"list-group-flush"),a);return r.a.createElement(n,H({},o,{className:s}))};ca.propTypes=la,ca.defaultProps={tag:"ul"};var ua={children:o.a.node,inline:o.a.bool,tag:o.a.oneOfType([o.a.func,o.a.string]),innerRef:o.a.oneOfType([o.a.func,o.a.string]),className:o.a.string,cssModule:o.a.object},ma=function(e){var t=e.className,a=e.cssModule,n=e.inline,i=e.tag,o=e.innerRef,s=W(e,["className","cssModule","inline","tag","innerRef"]),c=S(l()(t,!!n&&"form-inline"),a);return r.a.createElement(i,H({},s,{ref:o,className:c}))};ma.propTypes=ua,ma.defaultProps={tag:"form"};var da={children:o.a.node,tag:o.a.string,className:o.a.string,cssModule:o.a.object,valid:o.a.bool},pa={tag:"div",valid:void 0},ha=function(e){var t=e.className,a=e.cssModule,n=e.valid,i=e.tag,o=W(e,["className","cssModule","valid","tag"]),s=S(l()(t,n?"valid-feedback":"invalid-feedback"),a);return r.a.createElement(i,H({},o,{className:s}))};ha.propTypes=da,ha.defaultProps=pa;var ga={children:o.a.node,row:o.a.bool,check:o.a.bool,inline:o.a.bool,disabled:o.a.bool,tag:o.a.string,className:o.a.string,cssModule:o.a.object},fa=function(e){var t=e.className,a=e.cssModule,n=e.row,i=e.disabled,o=e.check,s=e.inline,c=e.tag,u=W(e,["className","cssModule","row","disabled","check","inline","tag"]),m=S(l()(t,!!n&&"row",o?"form-check":"form-group",!(!o||!s)&&"form-check-inline",!(!o||!i)&&"disabled"),a);return r.a.createElement(c,H({},u,{className:m}))};fa.propTypes=ga,fa.defaultProps={tag:"div"};var ba={children:o.a.node,inline:o.a.bool,tag:o.a.oneOfType([o.a.func,o.a.string]),color:o.a.string,className:o.a.string,cssModule:o.a.object},va=function(e){var t=e.className,a=e.cssModule,n=e.inline,i=e.color,o=e.tag,s=W(e,["className","cssModule","inline","color","tag"]),c=S(l()(t,!n&&"form-text",!!i&&"text-"+i),a);return r.a.createElement(o,H({},s,{className:c}))};va.propTypes=ba,va.defaultProps={tag:"small",color:"muted"};var Ea={children:o.a.node,type:o.a.string,size:o.a.string,bsSize:o.a.string,state:N(o.a.string,'Please use the props "valid" and "invalid" to indicate the state.'),valid:o.a.bool,invalid:o.a.bool,tag:o.a.oneOfType([o.a.func,o.a.string]),innerRef:o.a.oneOfType([o.a.func,o.a.string]),static:N(o.a.bool,'Please use the prop "plaintext"'),plaintext:o.a.bool,addon:o.a.bool,className:o.a.string,cssModule:o.a.object},ya=function(e){function t(){return U(this,t),V(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return q(t,e),B(t,[{key:"render",value:function(){var e=this.props,t=e.className,a=e.cssModule,n=e.type,i=e.bsSize,o=e.state,s=e.valid,c=e.invalid,u=e.tag,m=e.addon,d=e.static,p=e.plaintext,h=e.innerRef,g=W(e,["className","cssModule","type","bsSize","state","valid","invalid","tag","addon","static","plaintext","innerRef"]),f=["radio","checkbox"].indexOf(n)>-1,b=new RegExp("\\D","g"),v=u||("select"===n||"textarea"===n?n:"input"),E="form-control";p||d?(E+="-plaintext",v=u||"p"):"file"===n?E+="-file":f&&(E=m?null:"form-check-input"),o&&"undefined"===typeof s&&"undefined"===typeof c&&("danger"===o?c=!0:"success"===o&&(s=!0)),g.size&&b.test(g.size)&&(C('Please use the prop "bsSize" instead of the "size" to bootstrap\'s input sizing.'),i=g.size,delete g.size);var y=S(l()(t,c&&"is-invalid",s&&"is-valid",!!i&&"form-control-"+i,E),a);return"input"!==v&&"string"===typeof u||(g.type=n),r.a.createElement(v,H({},g,{ref:h,className:y}))}}]),t}(r.a.Component);ya.propTypes=Ea,ya.defaultProps={type:"text"};var Oa={tag:o.a.oneOfType([o.a.func,o.a.string]),size:o.a.string,className:o.a.string,cssModule:o.a.object},xa=function(e){var t=e.className,a=e.cssModule,n=e.tag,i=e.size,o=W(e,["className","cssModule","tag","size"]),s=S(l()(t,"input-group",i?"input-group-"+i:null),a);return r.a.createElement(n,H({},o,{className:s}))};xa.propTypes=Oa,xa.defaultProps={tag:"div"};var ka={tag:o.a.oneOfType([o.a.func,o.a.string]),className:o.a.string,cssModule:o.a.object},Sa=function(e){var t=e.className,a=e.cssModule,n=e.tag,i=W(e,["className","cssModule","tag"]),o=S(l()(t,"input-group-text"),a);return r.a.createElement(n,H({},i,{className:o}))};Sa.propTypes=ka,Sa.defaultProps={tag:"span"};var wa={tag:o.a.oneOfType([o.a.func,o.a.string]),addonType:o.a.oneOf(["prepend","append"]).isRequired,children:o.a.node,className:o.a.string,cssModule:o.a.object},Da=function(e){var t=e.className,a=e.cssModule,n=e.tag,i=e.addonType,o=e.children,s=W(e,["className","cssModule","tag","addonType","children"]),c=S(l()(t,"input-group-"+i),a);return"string"===typeof o?r.a.createElement(n,H({},s,{className:c}),r.a.createElement(Sa,{children:o})):r.a.createElement(n,H({},s,{className:c,children:o}))};Da.propTypes=wa,Da.defaultProps={tag:"div"};o.a.oneOfType([o.a.func,o.a.string]),o.a.oneOf(["prepend","append"]).isRequired,o.a.node,o.a.string,o.a.object,o.a.string,o.a.object,o.a.oneOf(["prepend","append"]).isRequired,o.a.node;var ja=o.a.oneOfType([o.a.number,o.a.string]),Ca=o.a.oneOfType([o.a.string,o.a.number,o.a.shape({size:ja,push:N(ja,'Please use the prop "order"'),pull:N(ja,'Please use the prop "order"'),order:ja,offset:ja})]),Na={children:o.a.node,hidden:o.a.bool,check:o.a.bool,size:o.a.string,for:o.a.string,tag:o.a.string,className:o.a.string,cssModule:o.a.object,xs:Ca,sm:Ca,md:Ca,lg:Ca,xl:Ca,widths:o.a.array},Pa={tag:"label",widths:["xs","sm","md","lg","xl"]},_a=function(e,t,a){return!0===a||""===a?e?"col":"col-"+t:"auto"===a?e?"col-auto":"col-"+t+"-auto":e?"col-"+a:"col-"+t+"-"+a},Ma=function(e){var t=e.className,a=e.cssModule,n=e.hidden,i=e.widths,o=e.tag,s=e.check,c=e.size,u=e.for,m=W(e,["className","cssModule","hidden","widths","tag","check","size","for"]),p=[];i.forEach((function(t,n){var r=e[t];if(delete m[t],r||""===r){var i=!n,o=void 0;if(d()(r)){var s,c=i?"-":"-"+t+"-";o=_a(i,t,r.size),p.push(S(l()((z(s={},o,r.size||""===r.size),z(s,"order"+c+r.order,r.order||0===r.order),z(s,"offset"+c+r.offset,r.offset||0===r.offset),s))),a)}else o=_a(i,t,r),p.push(o)}}));var h=S(l()(t,!!n&&"sr-only",!!s&&"form-check-label",!!c&&"col-form-label-"+c,p,!!p.length&&"col-form-label"),a);return r.a.createElement(o,H({htmlFor:u},m,{className:h}))};Ma.propTypes=Na,Ma.defaultProps=Pa;o.a.bool,o.a.bool,o.a.node,o.a.string,o.a.object,o.a.bool,o.a.bool,o.a.bool,o.a.bool,o.a.bool,o.a.bool,o.a.oneOfType([o.a.func,o.a.string]),o.a.bool;var Ia={children:o.a.node,className:o.a.string,cssModule:o.a.object,size:o.a.string,tag:o.a.oneOfType([o.a.func,o.a.string])},Ta=function(e){var t=e.className,a=e.cssModule,n=e.size,i=e.tag,o=W(e,["className","cssModule","size","tag"]),s=S(l()(t,"pagination",z({},"pagination-"+n,!!n)),a);return r.a.createElement(i,H({},o,{className:s}))};Ta.propTypes=Ia,Ta.defaultProps={tag:"ul"};var Aa={active:o.a.bool,children:o.a.node,className:o.a.string,cssModule:o.a.object,disabled:o.a.bool,tag:o.a.oneOfType([o.a.func,o.a.string])},La=function(e){var t=e.active,a=e.className,n=e.cssModule,i=e.disabled,o=e.tag,s=W(e,["active","className","cssModule","disabled","tag"]),c=S(l()(a,"page-item",{active:t,disabled:i}),n);return r.a.createElement(o,H({},s,{className:c}))};La.propTypes=Aa,La.defaultProps={tag:"li"};var Ra={"aria-label":o.a.string,children:o.a.node,className:o.a.string,cssModule:o.a.object,next:o.a.bool,previous:o.a.bool,tag:o.a.oneOfType([o.a.func,o.a.string])},Fa=function(e){var t=e.className,a=e.cssModule,n=e.next,i=e.previous,o=e.tag,s=W(e,["className","cssModule","next","previous","tag"]),c=S(l()(t,"page-link"),a),u=void 0;i?u="Previous":n&&(u="Next");var m=e["aria-label"]||u,d=void 0;i?d="\xab":n&&(d="\xbb");var p=e.children;return p&&Array.isArray(p)&&0===p.length&&(p=null),(i||n)&&(p=[r.a.createElement("span",{"aria-hidden":"true",key:"caret"},p||d),r.a.createElement("span",{className:"sr-only",key:"sr"},m)]),r.a.createElement(o,H({},s,{className:c,"aria-label":m}),p)};Fa.propTypes=Ra,Fa.defaultProps={tag:"a"};var Ua={tag:o.a.oneOfType([o.a.func,o.a.string]),activeTab:o.a.any,className:o.a.string,cssModule:o.a.object},Ba={activeTabId:o.a.any},za=function(e){function t(e){U(this,t);var a=V(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={activeTab:a.props.activeTab},a}return q(t,e),B(t,[{key:"getChildContext",value:function(){return{activeTabId:this.state.activeTab}}},{key:"componentWillReceiveProps",value:function(e){this.state.activeTab!==e.activeTab&&this.setState({activeTab:e.activeTab})}},{key:"render",value:function(){var e=this.props,t=e.className,a=e.cssModule,n=e.tag,i=w(this.props,Object.keys(Ua)),o=S(l()("tab-content",t),a);return r.a.createElement(n,H({},i,{className:o}))}}]),t}(n.Component);za.propTypes=Ua,za.defaultProps={tag:"div"},za.childContextTypes=Ba;var Ha={tag:o.a.oneOfType([o.a.func,o.a.string]),className:o.a.string,cssModule:o.a.object,tabId:o.a.any},qa={activeTabId:o.a.any};function Wa(e,t){var a=e.className,n=e.cssModule,i=e.tabId,o=e.tag,s=W(e,["className","cssModule","tabId","tag"]),c=S(l()("tab-pane",a,{active:i===t.activeTabId}),n);return r.a.createElement(o,H({},s,{className:c}))}Wa.propTypes=Ha,Wa.defaultProps={tag:"div"},Wa.contextTypes=qa;var Va={tag:o.a.oneOfType([o.a.func,o.a.string]),fluid:o.a.bool,className:o.a.string,cssModule:o.a.object},Ga=function(e){var t=e.className,a=e.cssModule,n=e.tag,i=e.fluid,o=W(e,["className","cssModule","tag","fluid"]),s=S(l()(t,"jumbotron",!!i&&"jumbotron-fluid"),a);return r.a.createElement(n,H({},o,{className:s}))};Ga.propTypes=Va,Ga.defaultProps={tag:"div"};var Ya,Qa={children:o.a.node,className:o.a.string,closeClassName:o.a.string,closeAriaLabel:o.a.string,cssModule:o.a.object,color:o.a.string,isOpen:o.a.bool,toggle:o.a.func,tag:o.a.oneOfType([o.a.func,o.a.string]),transition:o.a.shape(Ge.propTypes)},Ka={color:"success",isOpen:!0,tag:"div",closeAriaLabel:"Close",transition:H({},Ge.defaultProps,{unmountOnExit:!0})};function Xa(e){var t=e.className,a=e.closeClassName,n=e.closeAriaLabel,i=e.cssModule,o=e.tag,s=e.color,c=e.isOpen,u=e.toggle,m=e.children,d=e.transition,p=W(e,["className","closeClassName","closeAriaLabel","cssModule","tag","color","isOpen","toggle","children","transition"]),h=S(l()(t,"alert","alert-"+s,{"alert-dismissible":u}),i),g=S(l()("close",a),i);return r.a.createElement(Ge,H({},p,d,{tag:o,className:h,in:c,role:"alert"}),u?r.a.createElement("button",{type:"button",className:g,"aria-label":n,onClick:u},r.a.createElement("span",{"aria-hidden":"true"},"\xd7")):null,m)}Xa.propTypes=Qa,Xa.defaultProps=Ka;var $a=H({},qe.propTypes,{isOpen:o.a.bool,children:o.a.oneOfType([o.a.arrayOf(o.a.node),o.a.node]),tag:o.a.oneOfType([o.a.func,o.a.string]),className:o.a.node,navbar:o.a.bool,cssModule:o.a.object}),Ja=H({},qe.defaultProps,{isOpen:!1,appear:!1,enter:!0,exit:!0,tag:"div",timeout:M.Collapse}),Za=(z(Ya={},T.ENTERING,"collapsing"),z(Ya,T.ENTERED,"collapse show"),z(Ya,T.EXITING,"collapsing"),z(Ya,T.EXITED,"collapse"),Ya);function en(e){return e.scrollHeight}var tn=function(e){function t(e){U(this,t);var a=V(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={height:null},["onEntering","onEntered","onExit","onExiting","onExited"].forEach((function(e){a[e]=a[e].bind(a)})),a}return q(t,e),B(t,[{key:"onEntering",value:function(e,t){this.setState({height:en(e)}),this.props.onEntering(e,t)}},{key:"onEntered",value:function(e,t){this.setState({height:null}),this.props.onEntered(e,t)}},{key:"onExit",value:function(e){this.setState({height:en(e)}),this.props.onExit(e)}},{key:"onExiting",value:function(e){e.offsetHeight;this.setState({height:0}),this.props.onExiting(e)}},{key:"onExited",value:function(e){this.setState({height:null}),this.props.onExited(e)}},{key:"render",value:function(){var e=this.props,t=e.tag,a=e.isOpen,n=e.className,i=e.navbar,o=e.cssModule,s=e.children,c=W(e,["tag","isOpen","className","navbar","cssModule","children"]),u=this.state.height,m=D(c,I),d=w(c,I);return r.a.createElement(qe,H({},m,{in:a,onEntering:this.onEntering,onEntered:this.onEntered,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}),(function(e){var a=function(e){return Za[e]||"collapse"}(e),c=S(l()(n,a,i&&"navbar-collapse"),o),m=null===u?null:{height:u};return r.a.createElement(t,H({},d,{style:H({},d.style,m),className:c}),s)}))}}]),t}(n.Component);tn.propTypes=$a,tn.defaultProps=Ja;var an={tag:o.a.oneOfType([o.a.func,o.a.string]),active:o.a.bool,disabled:o.a.bool,color:o.a.string,action:o.a.bool,className:o.a.any,cssModule:o.a.object},nn=function(e){e.preventDefault()},rn=function(e){var t=e.className,a=e.cssModule,n=e.tag,i=e.active,o=e.disabled,s=e.action,c=e.color,u=W(e,["className","cssModule","tag","active","disabled","action","color"]),m=S(l()(t,!!i&&"active",!!o&&"disabled",!!s&&"list-group-item-action",!!c&&"list-group-item-"+c,"list-group-item"),a);return o&&(u.onClick=nn),r.a.createElement(n,H({},u,{className:m}))};rn.propTypes=an,rn.defaultProps={tag:"li"};var on={tag:o.a.oneOfType([o.a.func,o.a.string]),className:o.a.any,cssModule:o.a.object},sn=function(e){var t=e.className,a=e.cssModule,n=e.tag,i=W(e,["className","cssModule","tag"]),o=S(l()(t,"list-group-item-heading"),a);return r.a.createElement(n,H({},i,{className:o}))};sn.propTypes=on,sn.defaultProps={tag:"h5"};var ln={tag:o.a.oneOfType([o.a.func,o.a.string]),className:o.a.any,cssModule:o.a.object},cn=function(e){var t=e.className,a=e.cssModule,n=e.tag,i=W(e,["className","cssModule","tag"]),o=S(l()(t,"list-group-item-text"),a);return r.a.createElement(n,H({},i,{className:o}))};cn.propTypes=ln,cn.defaultProps={tag:"p"};(function(e){function t(e){U(this,t);var a=V(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={isOpen:!0},a.toggle=a.toggle.bind(a),a}q(t,e),B(t,[{key:"toggle",value:function(){this.setState({isOpen:!this.state.isOpen})}},{key:"render",value:function(){return r.a.createElement(Xa,H({isOpen:this.state.isOpen,toggle:this.toggle},this.props))}}])})(n.Component),function(e){function t(e){U(this,t);var a=V(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={isOpen:!1},a.toggle=a.toggle.bind(a),a}q(t,e),B(t,[{key:"toggle",value:function(){this.setState({isOpen:!this.state.isOpen})}},{key:"render",value:function(){return r.a.createElement(we,H({isOpen:this.state.isOpen,toggle:this.toggle},this.props))}}])}(n.Component),function(e){function t(e){U(this,t);var a=V(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={isOpen:!1},a.toggle=a.toggle.bind(a),a}q(t,e),B(t,[{key:"toggle",value:function(){this.setState({isOpen:!this.state.isOpen})}},{key:"render",value:function(){return r.a.createElement(ge,H({isOpen:this.state.isOpen,toggle:this.toggle},this.props))}}])}(n.Component),function(e){function t(e){U(this,t);var a=V(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={isOpen:!1},a.toggle=a.toggle.bind(a),a}q(t,e),B(t,[{key:"toggle",value:function(){this.setState({isOpen:!this.state.isOpen})}},{key:"render",value:function(){return r.a.createElement(ia,H({isOpen:this.state.isOpen,toggle:this.toggle},this.props))}}])}(n.Component)},251:function(e,t,a){"use strict";var n=a(5),r=a(6),i=a(8),o=a(7),s=a(0),l=a.n(s),c=a(3),u=a(12),m=a.n(u),d=a(1),p=a(9),h=a(4),g=a(14),f=(a(426),function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).state={isLoading:!0,errorMsg:""},r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props,a=t.repoID,n=t.commitID;p.a.getCommitDetails(a,n).then((function(t){e.setState({isLoading:!1,errorMsg:"",commitDetails:t.data})})).catch((function(t){var a=h.a.getErrorMsg(t);e.setState({isLoading:!1,errorMsg:a})}))}},{key:"render",value:function(){var e=this.props,t=e.toggleDialog;e.commitTime;return l.a.createElement(c.x,{isOpen:!0,centered:!0,toggle:t},l.a.createElement(c.A,{toggle:t},Object(d.mb)("Modification Details")),l.a.createElement(c.y,null,l.a.createElement("p",{className:"small"},m()(this.props.commitTime).format("YYYY-MM-DD HH:mm:ss")),l.a.createElement(b,{data:this.state})))}}]),a}(l.a.Component)),b=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(){var e;Object(n.a)(this,a);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).renderDetails=function(e){for(var t=[{type:"new",title:Object(d.mb)("New files")},{type:"removed",title:Object(d.mb)("Deleted files")},{type:"renamed",title:Object(d.mb)("Renamed or Moved files")},{type:"modified",title:Object(d.mb)("Modified files")},{type:"newdir",title:Object(d.mb)("New directories")},{type:"deldir",title:Object(d.mb)("Deleted directories")}],a=!0,n=0,r=t.length;n<r;n++)if(e[t[n].type].length){a=!1;break}return a?l.a.createElement("p",null,e.cmt_desc):l.a.createElement(l.a.Fragment,null,t.map((function(t,a){if(e[t.type].length)return l.a.createElement(l.a.Fragment,{key:a},l.a.createElement("h6",null,t.title),l.a.createElement("ul",null,e[t.type].map((function(e,t){return l.a.createElement("li",{key:t,dangerouslySetInnerHTML:{__html:e},className:"commit-detail-item"})}))))})))},e}return Object(r.a)(a,[{key:"render",value:function(){var e=this.props.data,t=e.isLoading,a=e.errorMsg,n=e.commitDetails;return t?l.a.createElement(g.a,null):a?l.a.createElement("p",{className:"error mt-4 text-center"},a):this.renderDetails(n)}}]),a}(l.a.Component);t.a=f},252:function(e,t,a){"use strict";a.d(t,"b",(function(){return dt})),a.d(t,"a",(function(){return pt}));var n=a(15),r=a(18),i=a(20),o=a(21),s=a(22),l=a(0),c=a.n(l),u=a(23),m=a.n(u),d=a(29),p=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(i.a)(this,Object(o.a)(t).call(this,e))).handleClick=function(e){a.props.disabled||(a.getContainer().contains(e.target)?a.toggle():a.state.dropdownOpen&&a.setState({dropdownOpen:!a.state.dropdownOpen}))},a.toggle=function(){a.setState({dropdownOpen:!a.state.dropdownOpen})},a.state={dropdownOpen:!1},a}return Object(s.a)(t,e),Object(r.a)(t,[{key:"getContainer",value:function(){return m.a.findDOMNode(this)}},{key:"componentDidMount",value:function(){document.addEventListener("click",this.handleClick)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.handleClick)}},{key:"render",value:function(){var e=this;return c.a.createElement("div",{className:"header-list"},c.a.createElement("div",{className:"list-body "+(this.props.disabled?"":"header-list-body-hover")+(this.state.dropdownOpen?" header-list-body-highlight":"")},c.a.createElement("div",{className:"list-title"},this.props.t(this.props.headerType)),c.a.createElement("div",{className:"list-caret"},c.a.createElement("i",{className:this.state.dropdownOpen?"iconfont icon-caret-up":"iconfont icon-drop-down"}))),this.state.dropdownOpen&&c.a.createElement("div",{className:"list-dropdown"},c.a.createElement("div",{className:"list-dropdown-item",onClick:function(t){e.props.onClickHeader(t,"paragraph")}},this.props.t("paragraph")),c.a.createElement("div",{className:"list-dropdown-item",onClick:function(t){e.props.onClickHeader(t,"header_one")}},this.props.t("header_one")),c.a.createElement("div",{className:"list-dropdown-item",onClick:function(t){e.props.onClickHeader(t,"header_two")}},this.props.t("header_two")),c.a.createElement("div",{className:"list-dropdown-item",onClick:function(t){e.props.onClickHeader(t,"header_three")}},this.props.t("header_three")),c.a.createElement("div",{className:"list-dropdown-item",onClick:function(t){e.props.onClickHeader(t,"header_four")}},this.props.t("header_four")),c.a.createElement("div",{className:"list-dropdown-item",onClick:function(t){e.props.onClickHeader(t,"header_five")}},this.props.t("header_five")),c.a.createElement("div",{className:"list-dropdown-item",onClick:function(t){e.props.onClickHeader(t,"header_six")}},this.props.t("header_six"))))}}]),t}(c.a.PureComponent),h=Object(d.c)("seafile-editor")(p),g=function(e){function t(){return Object(n.a)(this,t),Object(i.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return c.a.createElement("div",{className:"btn-group "+this.props.className,role:"group"},this.props.children)}}]),t}(c.a.PureComponent),f=a(52),b=a(25),v=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(i.a)(this,Object(o.a)(t).call(this,e))).toggle=function(){if(!(a.props.disabled||a.state.isFreezed&&!a.state.tooltipOpen)){a.setState({tooltipOpen:!a.state.tooltipOpen,isFreezed:!0});var e=Object(f.a)(a);setTimeout((function(){e.setState({isFreezed:!1})}),100)}},a.getClassName=function(){var e=a.props.isRichEditor?"rich-icon-btn "+(a.props.disabled?"rich-icon-btn-disabled":"rich-icon-btn-hover"):"btn btn-icon btn-secondary btn-active";return e=e+" "+(a.props.className||"")},a.state={tooltipOpen:!1,isFreezed:!1},a}return Object(s.a)(t,e),Object(r.a)(t,[{key:"shouldComponentUpdate",value:function(e,t){return this.props.disabled!==e.disabled?(this.setState({tooltipOpen:!1}),!0):t.tooltipOpen!==this.state.tooltipOpen||e.isActive!==this.props.isActive}},{key:"render",value:function(){var e=this.getClassName();return c.a.createElement("button",{id:this.props.id,type:"button",onClick:this.props.disabled?null:this.props.onClick,onMouseDown:this.props.disabled?null:this.props.onMouseDown,className:e,"data-active":this.props.isActive||!1,disabled:this.props.disabled},c.a.createElement("i",{className:this.props.icon}),c.a.createElement(b.n,{toggle:this.toggle,delay:{show:0,hide:0},target:this.props.id,placement:"bottom",isOpen:this.state.tooltipOpen},this.props.text))}}]),t}(c.a.Component),E=Object(d.c)("seafile-editor")(v),y=a(48),O=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(i.a)(this,Object(o.a)(t).call(this,e))).setInitialValue=function(){var e=a.editorUtils.getSelectedText();if(a.isLinkActive){var t=a.editorUtils.getCurrentLinkNode();a.setState({title:a.editorUtils.getLinkText(t),url:t.data.href})}else a.setState({title:e,url:""})},a.handleUrlChange=function(e){a.setState({url:e.target.value})},a.handleTitleChange=function(e){a.setState({title:e.target.value})},a.handleSubmit=function(e){e.preventDefault(),0!==a.state.title.length&&0!==a.state.url.length&&(a.isLinkActive?a.editorUtils.setLink({text:a.state.title,url:a.state.url,selection:a.editorSelection}):a.editorUtils.insertLink({text:a.state.title,url:a.state.url,selection:a.editorSelection}),a.props.toggleLinkDialog())},a.editorUtils=new y.a(window.editor),a.isLinkActive=a.editorUtils.isLinkActive(),a.editorSelection=null,a.state={url:"",title:""},a}return Object(s.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){this.editorSelection=window.editor.selection}},{key:"componentWillMount",value:function(){this.setInitialValue()}},{key:"render",value:function(){return c.a.createElement(b.j,{isOpen:!0,toggle:this.props.toggleLinkDialog,className:this.props.className},c.a.createElement(b.m,{toggle:this.props.toggleLinkDialog},this.props.t("insert_link")),c.a.createElement(b.k,null,c.a.createElement(l.Fragment,null,c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{className:"form-check-label",htmlFor:"addLink"},this.props.t("link_address")),c.a.createElement("input",{type:"url",className:"form-control",id:"addLink",value:this.state.url,onChange:this.handleUrlChange})),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{className:"form-check-label",htmlFor:"addTitle"},this.props.t("link_title")),c.a.createElement("input",{type:"text",className:"form-control",id:"addTitle",value:this.state.title,onChange:this.handleTitleChange})))),c.a.createElement(b.l,null,c.a.createElement(b.a,{color:"primary",disabled:!1,onClick:this.handleSubmit},this.props.t("add_link")),c.a.createElement(b.a,{color:"secondary",onClick:this.props.toggleLinkDialog},this.props.t("cancel"))))}}]),t}(c.a.PureComponent),x=Object(d.c)("seafile-editor")(O),k=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(i.a)(this,Object(o.a)(t).call(this,e))).handleUrlChange=function(e){a.setState({url:e.target.value})},a.handleSubmit=function(e){a.props.insertImage({url:a.state.url,selection:a.editorSelection}),a.props.onToggleImageDialog()},a.state={url:""},a.editorSelection=null,a}return Object(s.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){this.editorSelection=window.editor.selection}},{key:"render",value:function(){return c.a.createElement(b.j,{isOpen:!0,toggle:this.props.onToggleImageDialog,className:this.props.className},c.a.createElement(b.m,{toggle:this.props.onToggleImageDialog},this.props.t("insert_image")),c.a.createElement(b.k,null,c.a.createElement(b.f,null,c.a.createElement(b.g,null,c.a.createElement(b.i,{for:"columnName"},this.props.t("image_address")),c.a.createElement(b.h,{id:"columnName",value:this.state.value,onChange:this.handleUrlChange,autoFocus:!0})))),c.a.createElement(b.l,null,c.a.createElement(b.a,{color:"primary",disabled:0===this.state.url.length,onClick:this.handleSubmit},this.props.t("submit"))," ",c.a.createElement(b.a,{color:"secondary",onClick:this.props.onToggleImageDialog},this.props.t("cancel"))))}}]),t}(c.a.PureComponent),S=Object(d.c)("seafile-editor")(k),w=function(e){function t(){return Object(n.a)(this,t),Object(i.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this;return c.a.createElement(g,{className:"editor-btn-group"},c.a.createElement(D,{icon:"iconfont icon-left-alignment",items:[{handle:function(t){e.props.onSetAlign(t,"left")},icon:"iconfont icon-left-alignment",text:this.props.t("left")},{handle:function(t){e.props.onSetAlign(t,"center")},icon:"iconfont icon-center-horizontally",text:this.props.t("center")},{handle:function(t){e.props.onSetAlign(t,"right")},icon:"icon icon-align-right",text:this.props.t("right")}]}),c.a.createElement(D,{icon:"iconfont icon-column",items:[{handle:this.props.onInsertColumn,text:this.props.t("Insert_Column")},{handle:this.props.onRemoveColumn,text:this.props.t("Remove_Column")}]}),c.a.createElement(D,{icon:"iconfont icon-row",items:[{handle:this.props.onInsertRow,text:this.props.t("Insert_Row")},{handle:this.props.onRemoveRow,text:this.props.t("Remove_Row")}]}),c.a.createElement(E,{disabled:!1,isRichEditor:!0,text:this.props.t("remove_table"),id:"removeTable",icon:"iconfont icon-delete-table",onMouseDown:this.props.onRemoveTable}))}}]),t}(c.a.PureComponent),D=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(i.a)(this,Object(o.a)(t).call(this,e))).handleClick=function(e){a.props.disabled||(a.getContainer().contains(e.target)?a.toggle():a.state.dropdownOpen&&a.setState({dropdownOpen:!a.state.dropdownOpen}))},a.toggle=function(){a.setState({dropdownOpen:!a.state.dropdownOpen})},a.state={dropdownOpen:!1},a}return Object(s.a)(t,e),Object(r.a)(t,[{key:"getContainer",value:function(){return m.a.findDOMNode(this)}},{key:"componentDidMount",value:function(){document.addEventListener("click",this.handleClick)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.handleClick)}},{key:"render",value:function(){var e=[];return this.props.items.forEach((function(t,a){e.push(c.a.createElement("button",{key:"dropdown-item"+a,onMouseDown:t.handle,className:"dropdown-item"},t.icon?c.a.createElement("i",{className:t.icon,style:{marginRight:"6px"}}):null,t.text))})),c.a.createElement("div",{className:"custom-dropdown-list"},c.a.createElement("div",{id:"list_toggle",className:"dropdown-list-toggle"},c.a.createElement("i",{className:this.props.icon,style:{marginRight:"3px"}}),c.a.createElement("i",{className:this.state.dropdownOpen?"iconfont icon-caret-up":"iconfont icon-drop-down"})),this.state.dropdownOpen&&c.a.createElement("div",{role:"menu",className:"custom-dropdown-menu dropdown-menu"},e))}}]),t}(c.a.PureComponent),j=Object(d.c)("seafile-editor")(w),C=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,s=new Array(r),l=0;l<r;l++)s[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(s)))).state={dropdownOpen:!1,tooltipOpen:!1},a.imgtoggle=function(){a.setState({dropdownOpen:!a.state.dropdownOpen})},a.toggle=function(){a.props.disabled?a.setState({tooltipOpen:!1}):a.setState({tooltipOpen:!a.state.tooltipOpen})},a.uploadLocalImage=function(e){window.editor.editorApi.uploadLocalImage&&window.editor.editorApi.uploadLocalImage(e.target.files[0]).then((function(e){a.props.onInsertImage({url:e})}))},a.handleFileChange=function(e){a.uploadLocalImage(e),a.setState({dropdownOpen:!1})},a.onInputFile=function(e){e.target.value=null,e.nativeEvent.stopImmediatePropagation(),e.stopPropagation()},a}return Object(s.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props.t;return c.a.createElement(c.a.Fragment,null,c.a.createElement(b.b,{isOpen:this.state.dropdownOpen,toggle:this.imgtoggle,className:this.props.disabled?"upload-localimg upload-localimg-disabled":"upload-localimg upload-localimg-hover"},c.a.createElement(b.e,{id:this.props.id,disabled:this.props.disabled},c.a.createElement("i",{className:"iconfont icon-image"}),c.a.createElement(b.n,{toggle:this.toggle,delay:{show:0,hide:0},target:this.props.id,placement:"bottom",isOpen:this.state.tooltipOpen},e("insert_image"))),c.a.createElement(b.d,null,c.a.createElement(b.c,{onClick:this.props.onToggleImageDialog},e("insert_network_image")),!this.props.isSimpleEditor&&c.a.createElement(b.c,{onMouseDown:this.props.insertRepoImage},e("Insert_library_image")),c.a.createElement(b.c,{className:"image-uploader-btn"},c.a.createElement(b.i,{className:"image-uploader-label",for:"image-uploader",onClick:this.onInputFile},e("upload_local_image")),c.a.createElement(b.h,{type:"file",accept:"image/*",onChange:this.handleFileChange,onClick:this.onInputFile,className:"image-uploader",id:"image-uploader"})))))}}]),t}(c.a.Component),N=Object(d.c)("seafile-editor")(C),P=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(i.a)(this,Object(o.a)(t).call(this,e))).onToggleLink=function(e){a.editorUtils.isLinkActive()?a.editorUtils.unwrapLink():a.props.onToggleLinkDialog()},a.editor=window.editor,a.editorUtils=new y.a(a.editor),a}return Object(s.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this,t=this.props.t,a=this.props.toolbarStatus,n=this.props.readOnly,r=a.isTableActive,i=a.isHeadActive,o=a.isCodeActive,s=a.isBoldActive,l=a.isItalicActive,u=a.isInlineCodeActive,m=a.isLinkActive,d=a.isBlockquoteActive,p=a.isOrderedListActive,f=a.isUnorderedListActive,b=a.isCheckListActive;return c.a.createElement("div",{className:"sf-editor-rich-menu "+(this.props.isSimpleEditor?"":"rich-menu")},c.a.createElement("div",{className:"button-container"},!n&&c.a.createElement("div",{className:"header-list-container"},c.a.createElement(h,{disabled:o||r,headerType:a.headerType,onClickHeader:this.editorUtils.onClickHeader})),c.a.createElement(g,{className:"editor-btn-group"},c.a.createElement(E,{disabled:o||i,isRichEditor:!0,text:t("bold"),id:"BOLDButton",icon:"iconfont icon-bold",isActive:s,onMouseDown:function(t){return e.editorUtils.onClickMark(t,"BOLD")}}),c.a.createElement(E,{disabled:o||i,isRichEditor:!0,text:t("italic"),id:"ITALICButton",icon:"iconfont icon-italic",isActive:l,onMouseDown:function(t){return e.editorUtils.onClickMark(t,"ITALIC")}}),c.a.createElement(E,{disabled:o||i,isRichEditor:!0,text:t("code"),id:"CODEButton",icon:"iconfont icon-code",isActive:u,onMouseDown:function(t){return e.editorUtils.onClickMark(t,"CODE")}}),c.a.createElement(E,{disabled:o||i,isRichEditor:!0,text:t("insert_link"),id:"linkButton",icon:"iconfont icon-link",isActive:m,onMouseDown:this.onToggleLink})),c.a.createElement(g,{className:"editor-btn-group"},c.a.createElement(E,{disabled:r||o||i,isRichEditor:!0,text:t("quote"),id:"block-quoteButton",icon:"iconfont icon-quote-left",isActive:d,onMouseDown:function(t){return e.editorUtils.onClickBlock(t,"blockquote")}}),c.a.createElement(E,{disabled:r||o||i,isRichEditor:!0,text:t("ordered_list"),id:"ordered_listButton",icon:"iconfont icon-list-ol",isActive:p,onMouseDown:function(t){return e.editorUtils.onClickBlock(t,"ordered_list")}}),c.a.createElement(E,{disabled:r||o||i,isRichEditor:!0,text:t("unordered_list"),id:"unordered_listButton",icon:"iconfont icon-list-ul",isActive:f,onMouseDown:function(t){return e.editorUtils.onClickBlock(t,"unordered_list")}}),c.a.createElement(E,{disabled:r||o||i,isRichEditor:!0,text:t("check_list_item"),id:"checkListItemButton",icon:"iconfont icon-check-square",isActive:b,onMouseDown:this.editorUtils.onToggleCheckItem})),c.a.createElement(g,{className:"editor-btn-group"},c.a.createElement(E,{disabled:r||i,isRichEditor:!0,text:t("code_block"),id:"codeButton",icon:"iconfont icon-code-block",onMouseDown:function(t){return e.editorUtils.onClickBlock(t,"code_block")},isActive:o&&!n}),c.a.createElement(E,{disabled:o||r||i,isRichEditor:!0,text:t("insert_table"),id:"tableButton",icon:"iconfont icon-table",onMouseDown:this.editorUtils.onAddTable}),c.a.createElement(N,{disabled:o||i,text:"insert_image",id:"insertImageButton",insertRepoFile:this.props.insertRepoFile,isSimpleEditor:this.props.isSimpleEditor,onInsertImage:this.editorUtils.insertImage,toolbarStatus:this.props.toolbarStatus,onToggleImageDialog:this.props.onToggleImageDialog})),r&&!n&&c.a.createElement(j,{onRemoveTable:this.editorUtils.onRemoveTable,onInsertColumn:this.editorUtils.onInsertColumn,onRemoveColumn:this.editorUtils.onRemoveColumn,onInsertRow:this.editorUtils.onInsertRow,onRemoveRow:this.editorUtils.onRemoveRow,onSetAlign:this.editorUtils.onSetAlign})),this.props.hasSidePanel&&c.a.createElement("div",{className:"button-container"},!this.props.isShowSidePanel&&c.a.createElement(g,{className:"editor-btn-group position-absolute dropdown-menu-right"},c.a.createElement(E,{isRichEditor:!0,text:t("Show_side_panel"),id:"showSidepanel",icon:"iconfont icon-angle-double-left",isActive:!1,onMouseDown:this.props.toggleSidePanel})),this.props.isShowSidePanel&&c.a.createElement(g,{className:"editor-btn-group position-absolute dropdown-menu-right"},c.a.createElement(E,{isRichEditor:!0,text:t("Hide_side_panel"),id:"hideSidepanel",icon:"iconfont icon-angle-double-right",isActive:!1,onMouseDown:this.props.toggleSidePanel}))),this.props.isShowLinkDialog&&c.a.createElement(x,{toggleLinkDialog:this.props.onToggleLinkDialog}),this.props.isShowImageDialog&&c.a.createElement(S,{onToggleImageDialog:this.props.onToggleImageDialog,insertImage:this.editorUtils.insertImage}))}}]),t}(c.a.Component),_=Object(d.c)("seafile-editor")(P),M=a(11),I=a(62),T=function(e){return Object(I.a)(e)&&Array.isArray(e.redos)&&Array.isArray(e.undos)&&(0===e.redos.length||M.e.isOperationList(e.redos[0]))&&(0===e.undos.length||M.e.isOperationList(e.undos[0]))},A=function(e){if(M.a.isCommand(e))switch(e.type){case"redo":case"undo":return!0}return!1},L=(new WeakMap,new WeakMap),R=new WeakMap,F={isHistoryEditor:function(e){return M.b.isEditor(e)&&T(e.history)},isMerging:function(e){return R.get(e)},isSaving:function(e){return L.get(e)},withoutMerging:function(e,t){var a=F.isMerging(e);R.set(e,!1),t(),R.set(e,a)},withoutSaving:function(e,t){var a=F.isSaving(e);L.set(e,!1),t(),L.set(e,a)}},U=function(e){var t=e.apply,a=e.exec;return e.history={undos:[],redos:[]},e.exec=function(t){if(F.isHistoryEditor(e)&&A(t)){var n=e.history,r=n.undos,i=n.redos;if("redo"===t.type&&i.length>0){var o=i[i.length-1];return F.withoutSaving(e,(function(){M.b.withoutNormalizing(e,(function(){var t=!0,a=!1,n=void 0;try{for(var r,i=o[Symbol.iterator]();!(t=(r=i.next()).done);t=!0){var s=r.value;e.apply(s)}}catch(l){a=!0,n=l}finally{try{t||null==i.return||i.return()}finally{if(a)throw n}}}))})),n.redos.pop(),void n.undos.push(o)}if("undo"===t.type&&r.length>0){var s=r[r.length-1];return F.withoutSaving(e,(function(){M.b.withoutNormalizing(e,(function(){var t=s.map(M.e.inverse).reverse(),a=!0,n=!1,r=void 0;try{for(var i,o=t[Symbol.iterator]();!(a=(i=o.next()).done);a=!0){var l=i.value;l===t[t.length-1]&&"set_selection"===l.type&&null==l.newProperties||e.apply(l)}}catch(c){n=!0,r=c}finally{try{a||null==o.return||o.return()}finally{if(n)throw r}}}))})),n.redos.push(s),void n.undos.pop()}}a(t)},e.apply=function(a){if(F.isHistoryEditor(e)){var n=e.operations,r=e.history,i=r.undos,o=i[i.length-1],s=o&&o[o.length-1],l=H(a,s),c=F.isSaving(e),u=F.isMerging(e);if(null==c&&(c=z(a)),c){if(null==u&&(u=null!=o&&(0!==n.length||(B(a,s)||l))),o&&u)l&&o.pop(),o.push(a);else{var m=[a];i.push(m)}for(;i.length>100;)i.shift();q(a)&&(r.redos=[])}}t(a)},e},B=function(e,t){return"set_selection"===e.type||(!(!t||"insert_text"!==e.type||"insert_text"!==t.type||e.offset!==t.offset+t.text.length||!M.f.equals(e.path,t.path))||!(!t||"remove_text"!==e.type||"remove_text"!==t.type||e.offset+e.text.length!==t.offset||!M.f.equals(e.path,t.path)))},z=function(e,t){return"set_selection"!==e.type||null!=e.newProperties},H=function(e,t){return!(!t||"set_selection"!==e.type||"set_selection"!==t.type)},q=function(e){return"set_selection"!==e.type},W=a(41),V=a(47),G=function(e){if(e)return M.h.isCollapsed(e)},Y=a(87),Q=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(i.a)(this,Object(o.a)(t).call(this,e))).saveRef=function(e){a.refDom=e},a.getLinkUrl=function(){var e=a.props.editorUtils.getCurrentLinkNode();e&&(a.linkUrl=e.data.href)},a.setMenuPosition=function(){if(0!==window.getSelection().anchorOffset&&0!==window.getSelection().focusOffset){var e=window.getSelection().getRangeAt(0),t=e.getBoundingClientRect();navigator.userAgent.indexOf("Chrome")<0&&navigator.userAgent.indexOf("Safari")>0&&e.collapsed&&0===t.top&&0===t.height&&(0===e.startOffset?e.setEnd(e.endContainer,1):e.setStart(e.startContainer,e.startOffset-1),0===(t=e.getBoundingClientRect()).top&&0===t.height&&e.getClientRects().length&&(t=e.getClientRects()[0]));var n=a.refDom.style;n.zIndex="1050",n.top="".concat(t.top-45,"px");var r=parseInt(t.x-125);r<0?n.left="0px":r+250>document.body.clientWidth?n.left="".concat(document.body.clientWidth-250,"px"):n.left="".concat(t.x-125,"px")}},a.componentDidMount=function(){requestAnimationFrame((function(){a.setMenuPosition()}))},a.componentWillUnmount=function(){a.refDom=null},a.componentWillMount=function(){a.getLinkUrl()},a.linkUrl="",a}return Object(s.a)(t,e),Object(r.a)(t,[{key:"componentDidUpdate",value:function(){this.setMenuPosition()}},{key:"componentWillReceiveProps",value:function(){this.getLinkUrl()}},{key:"render",value:function(){var e=this;return c.a.createElement("div",{className:"seafile-ed-hovermenu",ref:function(t){return e.refDom=t}},c.a.createElement("a",{href:this.linkUrl,target:"blank",className:"seafile-ed-hovermenu-link"},this.linkUrl),c.a.createElement(b.a,{color:"",className:"seafile-ed-hovermenu-btn",onClick:this.props.editorUtils.unwrapLink},c.a.createElement("i",{className:"iconfont icon-delete"})),c.a.createElement(b.a,{color:"",onClick:this.props.onToggleLinkDialog,className:"seafile-ed-hovermenu-btn"},c.a.createElement("i",{className:"iconfont icon-edit"})),c.a.createElement("span",{className:"seafile-ed-hovermenu-triangle"}))}}]),t}(c.a.Component),K=Object(d.c)("seafile-editor")(Q),X=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(i.a)(this,Object(o.a)(t).call(this,e))).setMenuPosition=function(){var e=a.menu.offsetHeight;0===e&&requestAnimationFrame(a.setMenuPosition);var t=0;t=a.position.top+e>document.body.clientHeight?document.body.clientHeight-e-5:a.position.top;var n=a.position.left+3;a.setState({contextStyle:{top:t,left:n,zIndex:"1051",display:"block"}})},a.tableUtils=e.tableUtils,a.state={contextStyle:{}},a}return Object(s.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){this.position=this.props.contextMenuPosition,this.setMenuPosition()}},{key:"componentWillUnmount",value:function(){this.menu=null}},{key:"render",value:function(){var e=this;return c.a.createElement("div",{role:"menu",style:this.state.contextStyle,ref:function(t){return e.menu=t},className:"seafile-contextmenu dropdown-menu"},c.a.createElement("button",{onMouseDown:function(t){return e.tableUtils.insertRow("before")},className:"seafile-contextmenu-item dropdown-item"},this.props.t("Insert_Row_Before")),c.a.createElement("button",{onMouseDown:function(t){return e.tableUtils.insertRow("after")},className:"seafile-contextmenu-item dropdown-item"},this.props.t("Insert_Row_After")),c.a.createElement("button",{onMouseDown:function(t){return e.tableUtils.insertColumn("before")},className:"seafile-contextmenu-item dropdown-item"},this.props.t("Insert_Column_Before")),c.a.createElement("button",{onMouseDown:function(t){return e.tableUtils.insertColumn("after")},className:"seafile-contextmenu-item dropdown-item"},this.props.t("Insert_Column_After")),c.a.createElement("div",{className:"seafile-divider dropdown-divider"}),c.a.createElement("button",{onMouseDown:this.tableUtils.removeRow,className:"seafile-contextmenu-item dropdown-item"},this.props.t("Remove_Row")),c.a.createElement("button",{onMouseDown:this.tableUtils.removeColumn,className:"seafile-contextmenu-item dropdown-item"},this.props.t("Remove_Column")))}}]),t}(c.a.Component),$=Object(d.c)("seafile-editor")(X),J=a(33),Z=a(30),ee=a(84),te=a(85),ae=a(60),ne=a(99),re=a(117),ie=a(116),oe=function e(t){Object(n.a)(this,e),this.type=t.type||"link",this.children=t.children||[{text:""}],this.data=t.data||{href:""}},se=function(e){return Object.assign({},new oe(e))},le=function e(t){Object(n.a)(this,e),this.type=t.type||"image",this.data=t.data||{src:""},this.children=t.children||[{text:""}]},ce=function(e){return Object.assign({},new le(e))},ue=a(239),me=a.n(ue),de=a(24),pe=function(e){var t=e.exec,a=new ee.a(e),n=new te.a(e),r=new ae.a(e),i=new re.a(e);return e.exec=function(o){var s=o.data,l=e.selection;switch(o.type){case"set_header":M.b.setNodes(e,{type:o.headerType});break;case"insert_data":var c=Object(ne.a)(s),u=c.fragment,m=c.type,d=c.html,p=c.text;if("file"===m)return void t(o);if(me()(p)&&!n.isInCodeBlock()){if(p.endsWith("png")||p.endsWith("PNG")||p.endsWith("jpg")||p.endsWith("JPG")||p.endsWith("gif")||p.endsWith("GIF")){var h=ce({data:{src:p}});return void M.b.insertNodes(e,h)}if(window.editor.editorApi.isInternalFileLink(p)){var g=p.lastIndexOf("/");if(g>0){var f=p.substring(g+1),b=decodeURIComponent(f);return void de.a.insertNodes(e,[se({data:{href:p},children:[{text:b}]}),{text:" "}])}}if(window.editor.editorApi.isInternalDirLink(p)){var v=p.lastIndexOf("/");if(v>0){f=p.substring(v+1);var E=decodeURIComponent(f);return void de.a.insertNodes(e,[se({data:{href:p},children:[{text:E}]}),{text:" "}])}}return void de.a.insertNodes(e,[se({data:{href:p},children:[{text:p}]}),{text:" "}])}try{if(r.isInTable())return void r.pasteContentInTable(o);if(a.isInlist())return void a.pasteContentInList(o);if(n.isInCodeBlock())return void n.pasteContentInCodeBlock(o);if(i.isInBlockquote())return void i.pasteContentInBlockquote(o)}catch(A){M.b.insertText(p)}if("fragment"===m){var y=M.b.match(e,e.selection,"block"),O=Object(Z.a)(y,2),x=O[0],k=O[1];return"paragraph"===u[0].type?void M.b.insertFragment(e,u):de.a.isEmptyParagraph(x)?(M.b.insertNodes(e,u),void M.b.delete(e,{at:k})):void M.b.insertNodes(e,u)}if("html"===m){var S=Object(ie.a)(d);try{M.b.insertNodes(e,S)}catch(A){M.b.insertText(p)}return}if("text"===m)return void p.split(/\r\n|\n/g).forEach((function(t,a){0===a?M.b.insertText(e,t):M.b.insertNodes(e,{type:"paragraph",children:[{text:t}]})}));t(o);break;case"set_blockquote":if(!l)return;i.wrapBlockquote();break;case"unwrap_blockquote":i.unwrapBlockquote();break;case"set_ordered_list":if(!l)return;a.wrapList("ordered_list");break;case"set_unordered_list":if(!l)return;a.wrapList("unordered_list");break;case"unwrap_unordered_list":case"unwrap_ordered_list":a.unwrapList();break;case"wrap_check_list_item":if(0===a.getCurrentListItem().length)a.wrapList("unordered_list"),M.b.setNodes(e,{data:{checked:!1}},{match:{type:"list_item"}});else{var w,D=M.b.nodes(e,{at:e.selection,match:{type:"list_item"}}),j=!0,C=!1,N=void 0;try{for(var P,_=D[Symbol.iterator]();!(j=(P=_.next()).done);j=!0){w=P.value}}catch(L){C=!0,N=L}finally{try{j||null==_.return||_.return()}finally{if(C)throw N}}M.b.setNodes(e,{data:{checked:!1}},{at:w[1]})}break;case"unwrap_check_list_item":var I=a.getCurrentListItem();M.b.setNodes(e,{data:{}},{at:I[0][1]});break;case"set_code_block":n.wrapCodeBlock();break;case"unwrap_code_block":n.unwrapCodeBlock();break;case"exit_code_block":M.b.splitNodes(e,{match:"block",always:!0}),n.unwrapCodeBlock(!0);break;case"increase_code_block_indent":if(G(e.selection)){var T=M.b.match(e,e.selection,"block");M.b.insertText(e,"\t",{at:{anchor:{path:[].concat(Object(J.a)(T[1]),[0]),offset:0},focus:{path:[].concat(Object(J.a)(T[1]),[0]),offset:0}}})}break;case"insert_table":r.insertTable();break;case"remove_table":r.removeTable();break;case"insert_row":r.insertRow();break;case"insert_column":r.insertColumn();break;case"remove_row":r.removeRow();break;case"remove_column":r.removeColumn();break;case"set_table_cell_align":r.setAlign(o.align);break;case"exit_table":r.exitTable();break;default:t(o)}},e},he=function(e){var t=e.exec,a=e.isInline;return e.isInline=function(e){return"link"===e.type||"image"===e.type||a(e)},e.exec=function(a){var n=a.data,r=e.selection;switch(a.type){case"insert_link_at_selection":var i=(r=a.elementData.selection)&&M.h.isCollapsed(r),o=se({type:"link",children:[{text:a.elementData.text}],data:{href:a.elementData.url}});i?M.b.insertNodes(e,o,{at:r}):(M.b.wrapNodes(e,o,{split:!0,at:r}),M.b.select(e,r),M.b.collapse(e,{edge:"end"}));break;case"unwrap_link":M.b.unwrapNodes(e,{match:{type:"link"}});break;case"set_link":M.b.removeNodes(e,{match:{type:"link"}});var s=se({type:"link",data:{href:a.elementData.url},children:[{text:a.elementData.text}]});M.b.insertNodes(e,s);break;case"insert_image_at_selection":var l=ce({data:a.data});M.b.insertNodes(e,l,{at:a.at});break;case"set_image":M.b.setNodes(e,{data:n},{match:{type:"image"},at:e.selection,voids:!0});break;case"insert_data":if(n.types.includes("Files")&&n.files[0].type.includes("image")&&window.editor.editorApi.uploadLocalImage)return void window.editor.editorApi.uploadLocalImage(a.data.files[0]).then((function(t){var a=ce({data:{src:t}});M.b.insertNodes(e,a)}));t(a);break;default:t(a)}},e},ge=function(e){var t=e.isVoid;return e.isVoid=function(e){return"image"===e.type||t(e)},e},fe=a(35),be=/\*\*\*(\S+)\*\*\*|\_\_\_(\S+)\_\_\_|\*\_\_(\S+)\_\_\*|\_\*\*(\S+)\*\*\_|\_\_\*(\S+)\*\_\_|\*\*\_(\S+)_\*\*/,ve=/\*\*(\S+)\*\*|\_\_(\S+)\_\_/,Ee=/\*(\S+)\*|_(\S+)_/,ye=/\`(\S+)\`/,Oe=function e(t){var a=this;Object(n.a)(this,e),this.getTextInfoBeforeSelection=function(){var e=a.editor,t=a.editor.selection.anchor,n=M.b.nodes(e,{match:"block"}),r=Object(Z.a)(n,1)[0],i=r?r[1]:[],o={anchor:t,focus:M.b.start(e,i)};return{range:o,beforeText:M.b.text(e,o),block:r}},this.setTextMarkByShortCut=function(e,t){var n,r,i,o,s=a.editor,l=s.selection,c=M.b.node(s,l),u=Object(Z.a)(c,2),m=u[0],d=u[1],p=m.text,h=l.anchor.offset,g=p[h-1];if(("_"===g||"`"===g||"*"===g)&&((o=p.match(be))?(i=o.index,n={BOLD:!0,ITALIC:!0}):(o=p.match(ve))?(i=o.index,n={BOLD:!0}):(o=p.match(Ee))?(i=o.index,n={ITALIC:!0}):(o=p.match(ye))&&(i=o.index,n={CODE:!0}),o)){for(var f=1;f<o.length;f++)if(o[f]){r=o[f];break}n=Object.assign({BOLD:!1,ITALIC:!1,CODE:!1},n),M.b.select(s,{anchor:{path:d,offset:i},focus:{path:d,offset:h}}),M.b.delete(s,s.selection),M.b.insertText(s," "),M.b.insertNodes(s,[Object(fe.a)({text:r},n),{text:" "}]);var b=M.f.next(M.f.next(d));return M.b.select(s,b),void M.b.collapse(s,{edge:"end"})}e(t)},this.editor=t},xe={"1.":"ordered_list","*":"unordered_list","-":"unordered_list",">":"blockquote","#":"header_one","##":"header_two","###":"header_three","####":"header_four","#####":"header_five","######":"header_six","   ":"code_block"},ke=function(e){var t=e.exec,a=new ee.a(e),n=new te.a(e),r=new ae.a(e),i=new Oe(e),o=new re.a(e);return e.exec=function(s){var l=e.selection;switch(s.type){case"split_list_item":M.b.splitNodes(e,{match:"block",always:!0});break;case"insert_break":if(!M.h.isCollapsed(e.selection)){var c=M.b.node(e,[e.selection.anchor.path[0]]);return c&&c[0].type.includes("header")?(t(s),void M.b.setNodes(e,{type:"paragraph"})):r.isInTable()?(M.b.collapse(e,{edge:"end"}),void r.insertRow()):void t(s)}var u=M.b.nodes(e,{match:{type:"link"}}),m=Object(Z.a)(u,1)[0];if(m){var d=m[1];if(M.b.isEnd(e,e.selection.anchor,d)){var p={path:M.f.next(d),offset:0};M.b.select(e,p)}}var h=M.b.nodes(e,{match:{type:"image"}}),g=Object(Z.a)(h,1)[0];if(g){var f=g[1].slice(),b=f.pop();return M.b.insertNodes(e,{text:""},{at:[].concat(Object(J.a)(f),[b+1])}),r.isInTable()?void r.insertRow():void t(s)}if(o.isInBlockquote()){var v=M.b.nodes(e,{match:"block"}),E=Object(Z.a)(v,1)[0];if(0===M.d.text(E[0]).length)return void M.b.unwrapNodes(e,{match:{type:"blockquote"},split:!0})}if(a.isInlist()){var y=de.a.getNodesByTypeAtRange(e,"list_item");if(0===M.d.text(y[0]).length)return void a.unwrapList();if(G(e.selection))return void de.a.splitNodesAtPoint(e,{at:e.selection.anchor,match:{type:"list_item"},always:!0})}if(n.isInCodeBlock())return void n.splitCodeLine();if(r.isInTable())return void r.insertRow();var O=M.b.node(e,[e.selection.anchor.path[0]]);if(O&&O[0].type.includes("header")){var x=O[0],k=e.selection.anchor.offset;return t(s),void(k===M.d.text(x).length&&M.b.setNodes(e,{type:"paragraph"}))}t(s);break;case"insert_text":if(" "===s.text&&G(l)){if(r.isInTable()||n.isInCodeBlock())return void t(s);var S=i.getTextInfoBeforeSelection(),w=S.beforeText,D=S.range,j=S.block,C=j[1],N=xe[w];return N?(M.b.select(e,D),M.b.delete(e),"blockquote"===N&&(o.isInBlockquote()||e.exec({type:"set_blockquote"})),N.includes("header")&&"paragraph"===j[0].type&&1===C.length&&e.exec({type:"set_header",headerType:N}),"ordered_list"===N&&e.exec({type:"set_ordered_list"}),"unordered_list"===N&&e.exec({type:"set_unordered_list"}),"code_block"!==N||n.isInCodeBlock()?void 0:void e.exec({type:"set_code_block"})):void i.setTextMarkByShortCut(t,s)}if("`"===s.text&&G(e.selection)){var P=i.getTextInfoBeforeSelection(),_=P.beforeText,I=P.range;if("``"===_&&!n.isInCodeBlock())return M.b.select(e,I),M.b.delete(e),void e.exec({type:"set_code_block"})}t(s);break;case"increase_list_item_depth":a.increaseListDepth();break;case"delete_backward":if(0===l.anchor.offset&&G(l)){var T=M.b.nodes(e,{match:"block"}),A=Object(Z.a)(T,1)[0][0];if(A.type.includes("header")&&0===M.d.text(A).length)return void e.exec({type:"set_header",headerType:"paragraph"});if(o.isInBlockquote())return void e.exec({type:"unwrap_blockquote"});if(a.isInlist()){var L=M.b.nodes(e,{match:[{type:"ordered_list"},{type:"unordered_list"}]}),R=Object(Z.a)(L,1)[0][0];if(1===R.children.length&&0===M.d.text(R).length)return void a.unwrapList()}if(n.isInCodeBlock()){var F=M.b.match(e,e.selection,{type:"code_block"})[0],U=F.children;if(0===M.d.text(F).length&&1===U.length)return void e.exec({type:"unwrap_code_block"})}if(r.isInTable()){var B=M.b.match(e,e.selection,"block"),z=B[1],H=B[0];if(0===M.b.start(e,z).offset&&1===H.children.length)return}}t(s);break;default:t(s)}},e},Se=function(e){var t=e.normalizeNode;return e.normalizeNode=function(a){var n=Object(Z.a)(a,2),r=n[0],i=n[1],o=r.type;if(1===i.length&&"list_item"===o&&de.a.wrapNodes(e,{type:"unordered_list",children:[r]},{at:i}),1===i.length&&("ordered_list"===o||"unordered_list"===o)){var s=i[0],l=e.children[s-1],c=e.children[s+1];l&&l.type===o&&de.a.mergeNodes(e,{at:i}),c&&c.type===o&&de.a.mergeNodes(e,{at:[s+1]})}return 1===i.length&&i[0]===e.children.length-1&&("paragraph"===r.type&&de.a.isEmptyParagraph(r)||de.a.insertNodes(e,{type:"paragraph",children:[{text:""}]},{at:[i[0]+1]})),"blockquote"===o&&r.children.forEach((function(t,a){var n=[].concat(Object(J.a)(i),[a]);"blockquote"===t.type&&de.a.unwrapNodes(e,{at:n})})),"link"===o&&""===M.d.text(r)&&r.children.length>0&&de.a.removeNodes(e,{at:i}),M.i.isText(r)&&0===r.text.length&&Object.keys(r).length>1&&de.a.setNodes(e,{CODE:!1,BOLD:!1,ITALIC:!1},{at:i}),t([r,i])},e},we=a(51),De=a.n(we),je={fragment:"application/x-slate-fragment",html:"text/html",text:"text/plain"};var Ce=function(e,t,a){var n=je[t],r=e.dataTransfer||e.clipboardData;if("fragment"===t){var i=window.btoa(encodeURIComponent(JSON.stringify(a)));r.setData(n,i),r.setData("text",r.getData("text"))}else"html"===t?(r.setData(n,a),r.setData("text",r.getData("text"))):r.setData("text",a)},Ne=function e(t){var a=this;Object(n.a)(this,e),this.onKeyDown=function(e){if(13===e.nativeEvent.keyCode&&(e.preventDefault(),De()("shift+enter",e)?a.listUtils.isInlist()&&a.editor.exec({type:"split_list_item"}):De()("mod+enter",e)?(a.codeUtils.isInCodeBlock()&&a.editor.exec({type:"exit_code_block"}),a.tableUtils.isInTable()&&a.editor.exec({type:"exit_table"})):a.editor.exec({type:"insert_break"})),De()("shift+tab",e)&&(e.preventDefault(),a.listUtils.isInlist())){var t=M.b.nodes(a.editor,{match:[{type:"unordered_list"},{type:"ordered_list"}],at:a.editor.selection,mode:"highest"}),n=Object(Z.a)(t,1)[0];if(!n)return;var r=n[0].type;a.editor.exec({type:"unwrap_".concat(r)})}if(De()("mod+s",e)&&(e.preventDefault(),a.editor.onSave()),De()("tab",e)&&M.h.isCollapsed(a.editor.selection)&&(e.preventDefault(),a.codeUtils.isInCodeBlock()&&a.editor.exec({type:"increase_code_block_indent"}),a.listUtils.isInlist()&&a.editor.exec({type:"increase_list_item_depth"})),De()("mod+b",e)&&(e.preventDefault(),a.codeUtils.isInCodeBlock()||a.editor.exec({type:"format_text",properties:{BOLD:!0}})),De()("mod+i",e)&&(e.preventDefault(),a.codeUtils.isInCodeBlock()||a.editor.exec({type:"format_text",properties:{ITALIC:!0}})),De()("mod+/",e)&&(e.preventDefault(),a.codeUtils.isInCodeBlock()||a.editor.exec({type:"format_text",properties:{CODE:!0}})),De()("backspace",e)){var i=de.a.match(a.editor,a.editor.selection,"inline");if(i&&"image"===i[0].type)return e.preventDefault(),void a.editor.exec({type:"delete_backward",unit:"character"})}},this.onCut=function(e,t){var n=de.a.match(a.editor,a.editor.selection,{type:"image"});if(n)return Ce(e,"fragment",[{type:"paragraph",children:[n[0]]}]),void a.editor.exec({type:"delete_backward",unit:"character"})},this.onCopy=function(e,t){if(a.tableUtils.isInTable()){e.preventDefault();var n=a.tableUtils.getSelectedTableCells();return n?void Ce(e,"fragment",n):void Ce(e,"text",de.a.text(t,t.selection))}},this.editor=t,this.listUtils=new ee.a(t),this.codeUtils=new te.a(t),this.tableUtils=new ae.a(t),this.onSave=t.onSave},Pe=(a(310),window.navigator.platform.indexOf("Win")<0?"\u2318":"CTRL"),_e=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(i.a)(this,Object(o.a)(t).call(this,e))).renderShortcut=function(e){return c.a.createElement(l.Fragment,null,c.a.createElement("span",{className:"keyboard-shortcut"},e.map((function(e,t){return c.a.createElement("kbd",{key:t},e)}))),c.a.createElement("br",null))},a.renderContainer=function(e,t){return c.a.createElement("div",{className:"keyboard-shortcut-container"},c.a.createElement("div",{className:"col-4"},a.renderShortcut(e)),c.a.createElement("div",{className:"col-8"},t))},a.shortcutData=[{Make_list:[["*","space"],["-","space"]],Make_ordered_list:[["1.","space"]],Insert_new_item:[["Enter"]],Insert_child_in_item:[["Shift","Enter"]],Increase_depth:[["Tab"]]},{Heading_1:[["#","space"]],Heading_2:[["##","space"]],Heading_3:[["###","space"]],Heading_4:[["####","space"]],Heading_5:[["#####","space"]],Heading_6:[["######","space"]]},{Make_code_block:[["```"],["space*4"]],Insert_new_line:[["Enter"]],Escape_code_block:[[Pe,"Enter"]],Insert_indent:[["Tab"]]},{Make_Block_quote:[[">","space"]],Escape_Block_quote:[["Enter"]]},{Insert_Table_Row:[["Enter"]],Escape_table:[[Pe,"Enter"]]},{Bold:[["**bold**","space"],["__bold__","space"]],Italic:[["*italic*","space"],["_italic_","space"]],Italic_Bold:[["***italic***","space"],["___italic___","space"]],Inline_code:[["`code`","space"]]},{Paste_screen_shot:[[Pe,"v"]],Drag_image_from_anywhere_to_upload_it:[]}],a}return Object(s.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props,t=e.t,a=e.toggleShortcutDialog,n=e.userHelp,r=n.userHelpData;return c.a.createElement(b.j,{isOpen:!0,toggle:a,className:"keyboard-shortcut-dialog"},c.a.createElement(b.m,{toggle:a},c.a.createElement("span",{className:"mr-2"},t(n.title))),c.a.createElement(b.k,null,c.a.createElement("div",null,c.a.createElement("div",{className:"pb-2"},c.a.createElement("div",{className:"keyboard-shortcut-title pb-1"},t(r[1].shortcutType)),this.renderContainer(this.shortcutData[1].Heading_1[0],t(r[1].shortcutData.Heading_1)),this.renderContainer(this.shortcutData[1].Heading_2[0],t(r[1].shortcutData.Heading_2)),this.renderContainer(this.shortcutData[1].Heading_3[0],t(r[1].shortcutData.Heading_3)),this.renderContainer(this.shortcutData[1].Heading_4[0],t(r[1].shortcutData.Heading_4)),this.renderContainer(this.shortcutData[1].Heading_5[0],t(r[1].shortcutData.Heading_5)),this.renderContainer(this.shortcutData[1].Heading_6[0],t(r[1].shortcutData.Heading_6))),c.a.createElement("div",{className:"pb-2"},c.a.createElement("div",{className:"keyboard-shortcut-title pb-1"},t(r[0].shortcutType)),c.a.createElement("div",{className:"keyboard-shortcut-container"},c.a.createElement("div",{className:"col-4"},this.renderShortcut(this.shortcutData[0].Make_list[0]),this.renderShortcut(this.shortcutData[0].Make_list[1])),c.a.createElement("div",{className:"col-8"},t(r[0].shortcutData.Make_list))),c.a.createElement("div",{className:"keyboard-shortcut-container"},c.a.createElement("div",{className:"col-4"},this.renderShortcut(this.shortcutData[0].Make_ordered_list[0])),c.a.createElement("div",{className:"col-8"},t(r[0].shortcutData.Make_ordered_list))),this.renderContainer(this.shortcutData[0].Increase_depth[0],t(r[0].shortcutData.Increase_depth)),this.renderContainer(this.shortcutData[0].Insert_child_in_item[0],t(r[0].shortcutData.Insert_child_in_item)),this.renderContainer(this.shortcutData[0].Insert_new_item[0],t(r[0].shortcutData.Insert_new_item))),c.a.createElement("div",{className:"pb-2"},c.a.createElement("div",{className:"keyboard-shortcut-title pb-1"},t(r[5].shortcutType)),c.a.createElement("div",{className:"keyboard-shortcut-container"},c.a.createElement("div",{className:"col-4"},this.renderShortcut(this.shortcutData[5].Bold[0]),this.renderShortcut(this.shortcutData[5].Bold[1])),c.a.createElement("div",{className:"col-8"},t(r[5].shortcutData.Bold))),c.a.createElement("div",{className:"keyboard-shortcut-container"},c.a.createElement("div",{className:"col-4"},this.renderShortcut(this.shortcutData[5].Italic[0]),this.renderShortcut(this.shortcutData[5].Italic[1])),c.a.createElement("div",{className:"col-8"},t(r[5].shortcutData.Italic))),c.a.createElement("div",{className:"keyboard-shortcut-container"},c.a.createElement("div",{className:"col-4"},this.renderShortcut(this.shortcutData[5].Italic_Bold[0]),this.renderShortcut(this.shortcutData[5].Italic_Bold[1])),c.a.createElement("div",{className:"col-8"},t(r[5].shortcutData.Italic_Bold))),this.renderContainer(this.shortcutData[5].Inline_code[0],t(r[5].shortcutData.Inline_code))),c.a.createElement("div",{className:"pb-2"},c.a.createElement("div",{className:"keyboard-shortcut-title pb-1"},t(r[2].shortcutType)),c.a.createElement("div",{className:"keyboard-shortcut-container"},c.a.createElement("div",{className:"col-4"},this.renderShortcut(this.shortcutData[2].Make_code_block[0]),this.renderShortcut(this.shortcutData[2].Make_code_block[1])),c.a.createElement("div",{className:"col-8"},t(r[2].shortcutData.Make_code_block))),this.renderContainer(this.shortcutData[2].Insert_indent[0],t(r[2].shortcutData.Insert_indent)),this.renderContainer(this.shortcutData[2].Insert_new_line[0],t(r[2].shortcutData.Insert_new_line)),this.renderContainer(this.shortcutData[2].Escape_code_block[0],t(r[2].shortcutData.Escape_code_block))),c.a.createElement("div",{className:"pb-2"},c.a.createElement("div",{className:"keyboard-shortcut-title pb-1"},t(r[3].shortcutType)),this.renderContainer(this.shortcutData[3].Make_Block_quote[0],t(r[3].shortcutData.Make_Block_quote)),this.renderContainer(this.shortcutData[3].Escape_Block_quote[0],t(r[3].shortcutData.Escape_Block_quote))),c.a.createElement("div",{className:"pb-2"},c.a.createElement("div",{className:"keyboard-shortcut-title pb-1"},t(r[4].shortcutType)),this.renderContainer(this.shortcutData[4].Insert_Table_Row[0],t(r[4].shortcutData.Insert_Table_Row)),this.renderContainer(this.shortcutData[4].Escape_table[0],t(r[4].shortcutData.Escape_table))),c.a.createElement("div",{className:"pb-2"},c.a.createElement("div",{className:"keyboard-shortcut-title pb-1"},t(r[7].shortcutType)),this.renderContainer(this.shortcutData[6].Paste_screen_shot[0],t(r[7].shortcutData.Paste_screen_shot))))))}}]),t}(c.a.PureComponent),Me=Object(d.c)("dtable")(_e),Ie=(a(205),a(206),a(312),a(207),a(208),a(209),a(210),a(211),function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(i.a)(this,Object(o.a)(t).call(this,e))).onChange=function(e){a.setState({value:e}),!0===a.state.isShowContextMenu&&(a.setState({isShowContextMenu:!1}),a.contextMenuPosition={}),a.editor.operations.some((function(e){return"set_selection"!==e.type&&"set_value"!==e.type}))&&(a.contentChanged=!0)},a.foucsEditor=function(){a.editorRef.firstChild.focus()},a.hasContentChange=function(){return a.contentChanged},a.onToggleLinkDialog=function(){a.setState({isShowLinkDialog:!a.state.isShowLinkDialog})},a.onToggleImageDialog=function(){a.setState({isShowImageDialog:!a.state.isShowImageDialog})},a.onContextMenu=function(e){a.tableUtils.isInTable()&&(e.preventDefault(),a.contextMenuPosition={left:e.clientX,top:e.clientY},a.setState({isShowContextMenu:!a.state.isShowContextMenu}))},a.toggleShortcutDialog=function(){a.setState({isShowShortcutDialog:!a.state.isShowShortcutDialog})},a.editor=Se(ke(ge(pe(he(U(Object(V.e)(Object(M.j)()))))))),a.editor.editorApi=e.editorApi,window.editor=a.editor,a.editorUtils=new y.a(a.editor),a.tableUtils=new ae.a(a.editor),a.plugin=new Ne(a.editor),a.editorRef=null,a.contextMenuPosition={},a.state={value:Object(W.a)(e.value),isShowLinkDialog:!1,isShowImageDialog:!1,isShowBigImage:!1,isShowContextMenu:!1,isShowShortcutDialog:!1},a}return Object(s.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){this.props.onRef(this)}},{key:"getMarkdown",value:function(){return this.contentChanged=!1,Object(W.b)(this.state.value)}},{key:"getValue",value:function(){return this.state.value}},{key:"render",value:function(){var e=this,t=this.state,a=t.value,n=t.isShowLinkDialog,r=t.isShowImageDialog,i=this.editor,o=this.foucsEditor,s=this.editorUtils.getToolbarStatus(),l=this.props,u=l.readOnly,m=l.t,d=G(i.selection);return c.a.createElement("div",{className:"seafile-editor-module seafile-simple-editor"},c.a.createElement(V.c,{editor:this.editor,value:a,onChange:this.onChange},c.a.createElement("div",{className:"seafile-rich-editor-topbar"},c.a.createElement(_,{onToggleLinkDialog:this.onToggleLinkDialog,onToggleImageDialog:this.onToggleImageDialog,toolbarStatus:s,isSimpleEditor:!0,isShowLinkDialog:n,isShowImageDialog:r}),c.a.createElement("div",{className:"btn-group editor-btn-group"},c.a.createElement(E,{isRichEditor:!0,text:m("Shortcut_help"),id:"helpIcon",className:"use-help-icon",icon:"iconfont icon-use-help",onMouseDown:function(t){return e.toggleShortcutDialog()}}))),c.a.createElement("div",{className:"editor-container"},c.a.createElement("div",{ref:function(t){return e.editorRef=t},onClick:1===a.length&&"paragraph"===a[0].type&&0===M.d.text(a[0].children[0]).length?o:null,className:"editor article"},c.a.createElement(V.a,{renderElement:function(e){return Object(y.d)(e,i,u)},className:"editor-component",renderLeaf:y.c,onContextMenu:this.onContextMenu,onCopy:function(t){e.plugin.onCopy(t,i)},onCut:function(t){return e.plugin.onCut(t)},autoFocus:!0,onKeyDown:this.plugin.onKeyDown,decorate:y.b})),s.isLinkActive&&d?c.a.createElement(Y.a,null,c.a.createElement(K,{onToggleLinkDialog:this.onToggleLinkDialog,editorUtils:this.editorUtils})):null,this.state.isShowContextMenu&&c.a.createElement(Y.a,null,c.a.createElement($,{tableUtils:this.tableUtils,contextMenuPosition:this.contextMenuPosition})),this.state.isShowShortcutDialog&&c.a.createElement(Me,{userHelp:m("userHelp",{returnObjects:!0}),toggleShortcutDialog:this.toggleShortcutDialog}))))}}]),t}(c.a.Component)),Te=Object(d.c)("seafile-editor")(Ie),Ae=a(56),Le=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(i.a)(this,Object(o.a)(t).call(this,e))).platfrom=navigator.platform.indexOf("Win")<0?"Mac":"Win",a}return Object(s.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return c.a.createElement("li",{className:"help-shortcut"},c.a.createElement("div",{className:"help-shortcut-left"},this.props.shortcutName),c.a.createElement("div",{className:"help-shortcut-right"},c.a.createElement(Re,{platfrom:this.platform,shortcuts:this.props.shortcuts})))}}]),t}(c.a.Component),Re=function(e){function t(){return Object(n.a)(this,t),Object(i.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this;return c.a.createElement(c.a.Fragment,null,this.props.shortcuts.map((function(t){var a=t[0],n=t[1];return"object"===typeof t[0]&&(a="Win"===e.platfrom?t[0][0]:t[0][1]),c.a.createElement("div",{className:"help-shortcut-right-container",key:"help"+t[0]},a?c.a.createElement("div",{className:"key shortcut-first"},a):null,n?c.a.createElement("div",{className:"key shortcut-second"},n):null)})))}}]),t}(c.a.PureComponent),Fe=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(i.a)(this,Object(o.a)(t).call(this,e))).shortcutData=[{Make_list:[["* / + / -","space"]],Make_ordered_list:[["* / + / -","space"]],Insert_new_item:[["Enter"]],Insert_child_in_item:[["Shift","Enter"]],Increase_depth:[["Tab"]]},{Heading_1:[["#","space"]],Heading_2:[["##","space"]],Heading_3:[["###","space"]],Heading_4:[["####","space"]],Heading_5:[["#####","space"]],Heading_6:[["######","space"]]},{Make_code_block:[["```"]],Insert_new_line:[["Enter"]],Escape_code_block:[[["Ctrl","Cmd"],"Enter"]],Insert_indent:[["Tab"]]},{Make_Block_quote:[["* / + / -","space"]],Escape_Block_quote:[["Enter"]]},{Insert_Table_Row:[["Enter"]],Escape_table:[[["Ctrl","Cmd"],"Enter"]]},{Bold:[["**bold** / __bold__","space"]],Italic:[["*italic* / _italic_","space"]],Italic_Bold:[["***italic*** / ___italic___","space"]],Inline_code:[["`code`","space"]]},{Save_file:[[["Ctrl","Cmd"],"s"]]},{Paste_screen_shot:[[["Ctrl","Cmd"],"v"]],Drag_image_from_anywhere_to_upload_it:[]}],a}return Object(s.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props.data.shortcutType,t=this.props.data.shortcutData,a=[];for(var n in t){var r=this.shortcutData[this.props.index][n];a.push(c.a.createElement(Le,{key:"help "+n,shortcutName:t[n],shortcuts:r}))}return c.a.createElement("div",{className:"help-content-container"},c.a.createElement("h5",{className:"help-shortcut-type"},e),c.a.createElement("ul",{className:"help-shortcut-list"},a))}}]),t}(c.a.PureComponent),Ue=function(e){function t(){return Object(n.a)(this,t),Object(i.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return c.a.createElement("div",{className:"seafile-editor-help align-self-end"},c.a.createElement("div",{className:"help-header d-flex"},c.a.createElement("div",{className:"help-title"},this.props.userHelp.title),c.a.createElement("div",{className:"help-close",onClick:this.props.hideHelpDialog},c.a.createElement("i",{className:"iconfont icon-times-circle"}))),c.a.createElement("div",{className:"help-content"},this.props.userHelp.userHelpData.map((function(e,t){return c.a.createElement(Fe,{key:"help-list"+t,index:t,data:e})}))))}}]),t}(c.a.PureComponent),Be=a(59),ze=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(i.a)(this,Object(o.a)(t).call(this,e))).handleCommentChange=function(e){var t=e.target.value;a.setState({comment:t})},a.submitComment=function(){var e=a.state.comment.trim();if(e.length>0&&a.props.quote.length>0){var t={quote:a.props.quote,position:a.props.commentPosition},n=JSON.stringify(t);a.props.editorApi.postComment(e,n).then((function(e){a.props.onCommentAdded()}))}},a.setQuoteText=function(e){Be.a.process(e).then((function(e){var t=String(e);a.setState({quote:t})}))},a.state={comment:"",quote:""},a}return Object(s.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){this.setQuoteText(this.props.quote)}},{key:"componentWillReceiveProps",value:function(e){this.props.quote!==e.quote&&this.setQuoteText(e.quote)}},{key:"render",value:function(){return c.a.createElement("div",{className:"comment-dialog"},c.a.createElement("div",null,this.props.editorApi.name),c.a.createElement("blockquote",{className:"comment-dialog-quote"},c.a.createElement("div",{dangerouslySetInnerHTML:{__html:this.state.quote}})),c.a.createElement("textarea",{value:this.state.comment,onChange:this.handleCommentChange}),c.a.createElement("div",{className:"button-group"},c.a.createElement(b.a,{size:"sm",color:"primary",onClick:this.submitComment},this.props.t("submit")),c.a.createElement(b.a,{size:"sm",color:"secondary",onClick:this.props.toggleCommentDialog},this.props.t("cancel"))),c.a.createElement("span",{className:"comment-dialog-triangle"}))}}]),t}(c.a.Component),He=a(183),qe=a(12),We=a.n(qe),Ve=(a(322),function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(i.a)(this,Object(o.a)(t).call(this,e))).handleClick=function(){a.props.openDialogs&&a.props.openDialogs("add-participant")},a.tooltipToggle=function(){a.setState({tooltipOpen:!a.state.tooltipOpen})},a.state={tooltipOpen:!1},a}return Object(s.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props.participants;return c.a.createElement("div",{className:"participants mb-2 position-relative"},e.map((function(e,t){return c.a.createElement(Ge,{item:e,index:t,key:t})})),c.a.createElement("span",{className:"add-participants",onClick:this.handleClick,id:"add-participant-icon"},c.a.createElement("i",{className:"iconfont icon-plus-circle"})),c.a.createElement(b.n,{toggle:this.tooltipToggle,delay:{show:0,hide:0},target:"add-participant-icon",placement:"bottom",isOpen:this.state.tooltipOpen},this.props.t("Add_participants")))}}]),t}(c.a.Component)),Ge=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(i.a)(this,Object(o.a)(t).call(this,e))).toggleAvatarTooltip=function(){a.setState({showAvatarTooltip:!a.state.showAvatarTooltip})},a.state={showAvatarTooltip:!1},a}return Object(s.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props,t=e.item,a=e.index,n="participant-avatar-"+a;return c.a.createElement("span",{className:"participant-avatar"},c.a.createElement("img",{src:t.avatar_url,className:"avatar",id:n,alt:"avatar",key:a}),c.a.createElement(b.n,{toggle:this.toggleAvatarTooltip,delay:{show:0,hide:0},target:n,placement:"bottom",isOpen:this.state.showAvatarTooltip},t.name))}}]),t}(c.a.Component),Ye=Ve,Qe=a(104),Ke={control:{backgroundColor:"#fff",fontSize:14,fontWeight:"normal"},highlighter:{overflow:"hidden"},input:{margin:0},"&singleLine":{control:{display:"inline-block",width:130},highlighter:{padding:1,border:"2px inset transparent"},input:{padding:1,border:"2px inset"}},"&multiLine":{control:{},highlighter:{padding:9},input:{padding:"8px 6px",minHeight:90,height:90,border:"1px solid #e6e6dd",borderRadius:"5px",overfflowY:"auto","&focused":{backgroundColor:"#cee4e5",outlineOffset:"-2px",outlineColor:"-webkit-focus-ring-color",outlineStyle:"auto",outlineWidth:"5px"}}},suggestions:{list:{backgroundColor:"white",border:"1px solid rgba(0,0,0,0.15)",fontSize:14,maxHeight:200,overflow:"auto",position:"absolute",bottom:14,width:"150px"},item:{width:"auto",padding:"5px 15px",overflowX:"auto",borderBottom:"1px solid rgba(0,0,0,0.15)","&focused":{backgroundColor:"#f19654",color:"#fff",fontWeight:"400"}}}},Xe=(a(216),function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(i.a)(this,Object(o.a)(t).call(this,e))).toggleResolvedComment=function(){a.setState({showResolvedComment:!a.state.showResolvedComment})},a.listComments=function(e){a.props.editorApi.listComments().then((function(t){if(a.setState({commentsList:t.data.comments}),e){var n=Object(f.a)(a);setTimeout((function(){n.refs.commentsList.scrollTo(0,1e4)}),100)}}))},a.handleCommentChange=function(e){a.setState({comment:e.target.value})},a.resolveComment=function(e){a.props.editorApi.updateComment(e.target.id,"true").then((function(){a.listComments()}))},a.deleteComment=function(e){a.props.editorApi.deleteComment(e.target.id).then((function(){a.listComments()}))},a.editComment=function(e,t){a.props.editorApi.updateComment(e,null,null,t).then((function(e){a.listComments()}))},a.listRepoRelatedUsers=function(){window.showParticipants&&a.props.editorApi.listRepoRelatedUsers().then((function(e){var t=e.data.user_list.map((function(e){return{id:e.email,display:e.name}}));a.setState({relatedUsers:t})}))},a.addComment=function(){a.state.comment.trim()&&(a.props.editorApi.postComment(a.state.comment.trim()).then((function(){a.listComments(!0)})).catch((function(e){e.response.data&&Ae.a.danger(e.response.data.error_msg,{duration:3})})),a.setState({comment:""}))},a.onSubmit=function(){window.showParticipants&&a.addParticipant(a.props.editorApi.userName),0!==a.toBeAddedParticipant.length&&window.showParticipants?a.props.editorApi.addFileParticipants(a.toBeAddedParticipant).then((function(e){a.toBeAddedParticipant=[],a.addComment(),a.props.onParticipantsChange()})).catch((function(e){e.response.data&&Ae.a.danger(e.response.data.error_msg,{duration:3})})):a.addComment()},a.checkParticipant=function(e){return a.props.participants.map((function(e){return e.email})).includes(e)},a.addParticipant=function(e){a.checkParticipant(e)||a.toBeAddedParticipant.push(e)},a.renderUserSuggestion=function(e,t,a,n,r){return c.a.createElement("div",{className:"user ".concat(r?"focused":"")},a)},a.state={commentsList:[],showResolvedComment:!0,comment:"",relatedUsers:null},a.toBeAddedParticipant=[],a}return Object(s.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){this.listComments(),this.listRepoRelatedUsers()}},{key:"componentWillReceiveProps",value:function(e){this.props.relistComment!==e.relistComment&&this.listComments(!0)}},{key:"render",value:function(){var e=this,t=this.props.t,a=this.props.participants;return c.a.createElement("div",{className:"seafile-comment"},c.a.createElement("div",{className:"seafile-comment-toggle-resolved"},c.a.createElement("div",{className:"seafile-comment-title-text"},t("Show_resolved_comments")),c.a.createElement("div",{className:"seafile-comment-title-toggle d-flex"},c.a.createElement("label",{className:"custom-switch",id:"toggle-resolved-comments"},c.a.createElement("input",{type:"checkbox",name:"option",className:"custom-switch-input",onChange:this.toggleResolvedComment,checked:this.state.showResolvedComment&&"checked"}),c.a.createElement("span",{className:"custom-switch-indicator"})))),c.a.createElement("ul",{className:window.showParticipants?"seafile-comment-list show-participants":"seafile-comment-list",ref:"commentsList"},this.state.commentsList.length>0&&this.state.commentsList.map((function(t){var a=new Date(t.created_at).getTime(),n=We()(a).format("YYYY-MM-DD HH:mm");return c.a.createElement(c.a.Fragment,{key:t.id},c.a.createElement($e,{item:t,time:n,t:e.props.t,deleteComment:e.deleteComment,resolveComment:e.resolveComment,editComment:e.editComment,showResolvedComment:e.state.showResolvedComment,editorApi:e.props.editorApi,scrollToQuote:e.props.scrollToQuote}))})),0===this.state.commentsList.length&&c.a.createElement("li",{className:"comment-vacant"},t("no_comment_yet"))),c.a.createElement("div",{className:"seafile-comment-footer"},a&&window.showParticipants&&c.a.createElement(Ye,{openDialogs:this.props.openDialogs,participants:a,t:this.props.t}),window.showParticipants?c.a.createElement(Qe.b,{value:this.state.comment,onChange:this.handleCommentChange,placeholder:t("add_a_comment"),style:Ke},c.a.createElement(Qe.a,{trigger:"@",displayTransform:function(e,t){return"@".concat(t)},data:this.state.relatedUsers,renderSuggestion:this.renderUserSuggestion,onAdd:function(t,a){e.addParticipant(t)},appendSpaceOnAdd:!0})):c.a.createElement("textarea",{className:"add-comment-input",onChange:this.handleCommentChange,value:this.state.comment,placeholder:t("add_a_comment"),clos:"100",rows:"3",warp:"virtual"}),c.a.createElement(b.a,{className:"submit-comment",color:"primary",size:"sm",onClick:this.onSubmit},t("submit"))))}}]),t}(c.a.Component)),$e=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(i.a)(this,Object(o.a)(t).call(this,e))).toggleDropDownMenu=function(){a.setState({dropdownOpen:!a.state.dropdownOpen})},a.convertComment=function(e){if(Be.a.process(e.comment).then((function(e){var t=String(e);a.setState({html:t})})),e.detail){var t=JSON.parse(e.detail);Be.a.process(t.quote).then((function(e){var n=String(e);a.setState({quote:n,position:t.position})}))}},a.toggleEditComment=function(){a.setState({editable:!a.state.editable})},a.updateComment=function(e){var t=a.state.newComment;a.props.item.comment!==t&&a.props.editComment(e.target.id,t),a.toggleEditComment()},a.handleCommentChange=function(e){a.setState({newComment:e.target.value})},a.state={dropdownOpen:!1,html:"",newComment:a.props.item.comment,editable:!1,quote:"",position:null},a}return Object(s.a)(t,e),Object(r.a)(t,[{key:"componentWillMount",value:function(){this.convertComment(this.props.item)}},{key:"componentWillReceiveProps",value:function(e){this.convertComment(e.item)}},{key:"render",value:function(){var e=this.props,t=e.item,a=e.t,n=e.editorApi;return t.resolved&&!this.props.showResolvedComment?null:this.state.editable?c.a.createElement("li",{className:"seafile-comment-item",id:t.id},c.a.createElement("div",{className:"seafile-comment-info"},c.a.createElement("img",{className:"avatar",src:t.avatar_url,alt:""}),c.a.createElement("div",{className:"reviewer-info"},c.a.createElement("div",{className:"reviewer-name ellipsis"},t.user_name),c.a.createElement("div",{className:"review-time"},this.props.time))),c.a.createElement("div",{className:"seafile-edit-comment"},c.a.createElement("textarea",{className:"edit-comment-input",value:this.state.newComment,onChange:this.handleCommentChange,clos:"100",rows:"3",warp:"virtual"}),c.a.createElement(b.a,{className:"comment-btn",color:"primary",size:"sm",onClick:this.updateComment,id:t.id},a("Update"))," ",c.a.createElement(b.a,{className:"comment-btn",color:"secondary",size:"sm",onClick:this.toggleEditComment},a("cancel")))):c.a.createElement("li",{className:t.resolved?"seafile-comment-item seafile-comment-item-resolved":"seafile-comment-item",id:t.id},c.a.createElement("div",{className:"seafile-comment-info"},c.a.createElement("img",{className:"avatar",src:t.avatar_url,alt:""}),c.a.createElement("div",{className:"reviewer-info"},c.a.createElement("div",{className:"reviewer-name ellipsis"},t.user_name),c.a.createElement("div",{className:"review-time"},this.props.time)),c.a.createElement(b.b,{isOpen:this.state.dropdownOpen,size:"sm",className:"seafile-comment-dropdown",toggle:this.toggleDropDownMenu},c.a.createElement(b.e,{className:"seafile-comment-dropdown-btn"},c.a.createElement("i",{className:"iconfont icon-ellipsis-v"})),c.a.createElement(b.d,null,t.user_email===n.userName&&c.a.createElement(b.c,{onClick:this.props.deleteComment,className:"delete-comment",id:t.id},a("delete")),t.user_email===n.userName&&c.a.createElement(b.c,{onClick:this.toggleEditComment,className:"edit-comment",id:t.id},a("edit")),!t.resolved&&c.a.createElement(b.c,{onClick:this.props.resolveComment,className:"seafile-comment-resolved",id:t.id},a("Mark_as_Resolved"))))),t.detail&&c.a.createElement("blockquote",{className:"seafile-comment-content"},c.a.createElement("div",{onClick:this.props.scrollToQuote.bind(this,this.state.position),dangerouslySetInnerHTML:{__html:this.state.quote}})),c.a.createElement("div",{className:"seafile-comment-content",dangerouslySetInnerHTML:{__html:this.state.html}}))}}]),t}(c.a.Component),Je=Xe,Ze=(a(344),function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,s=new Array(r),l=0;l<r;l++)s[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(s)))).onEditFileTagToggle=function(){a.props.openDialogs&&a.props.openDialogs("file_tags")},a.onListRelatedFileToggle=function(){a.props.openDialogs&&a.props.openDialogs("related_files")},a.bytesToSize=function(e){if(e<0)return"--";var t=["bytes","KB","MB","GB","TB","PB"];if(0===e)return e+" "+t[0];var a=parseInt(Math.floor(Math.log(e)/Math.log(1e3)),10);return 0===a?e+" "+t[a]:(e/Math.pow(1e3,a)).toFixed(1)+" "+t[a]},a}return Object(s.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props,t=e.fileTagList,a=e.relatedFiles,n=e.fileInfo,r=this.props.editorApi,i=r.filePath,o=r.serviceUrl;return c.a.createElement("div",{className:"dirent-table-container"},c.a.createElement("table",{className:"table-thead-hidden"},c.a.createElement("thead",null,c.a.createElement("tr",null,c.a.createElement("th",{width:"40%"}),c.a.createElement("th",{width:"60%"}))),c.a.createElement("tbody",null,c.a.createElement("tr",null,c.a.createElement("th",null,this.props.t("Size")),c.a.createElement("td",null,this.bytesToSize(n.size))),c.a.createElement("tr",null,c.a.createElement("th",null,this.props.t("Location")),c.a.createElement("td",null,i)),c.a.createElement("tr",null,c.a.createElement("th",null,this.props.t("Last_Update")),c.a.createElement("td",null,We()(n.last_modified).fromNow())),c.a.createElement("tr",{className:"file-tag-container"},c.a.createElement("th",null,this.props.t("Tags")),c.a.createElement("td",null,t.length>0&&c.a.createElement("ul",{className:"file-tag-list"},t.map((function(e){return c.a.createElement("li",{key:e.id,className:"file-tag-item"},c.a.createElement("span",{className:"file-tag",style:{backgroundColor:e.tag_color}}),c.a.createElement("span",{className:"tag-name",title:e.tag_name},e.tag_name))}))),c.a.createElement("i",{className:"iconfont icon-pencil attr-action-icon",onClick:this.onEditFileTagToggle}))),c.a.createElement("tr",{className:"file-related-files"},c.a.createElement("th",null,this.props.t("Related_Files")),c.a.createElement("td",null,a.length>0&&c.a.createElement("ul",null,a.map((function(e,t){var a=o+"/lib/"+e.repo_id+"/file"+encodeURIComponent(e.path);return c.a.createElement("li",{key:t},c.a.createElement("a",{href:a,rel:"noopener noreferrer",target:"_blank"},e.name))}))),c.a.createElement("i",{className:"iconfont icon-pencil attr-action-icon",onClick:this.onListRelatedFileToggle}))),this.props.participants&&window.showParticipants&&c.a.createElement("tr",{className:"file-participants"},c.a.createElement("th",null,this.props.t("Participants")),c.a.createElement("td",null,c.a.createElement(Ye,{openDialogs:this.props.openDialogs,participants:this.props.participants,t:this.props.t}))))))}}]),t}(c.a.Component)),et=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,s=new Array(r),l=0;l<r;l++)s[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(s)))).state={navItem:"outline"},a.onOutlineClick=function(e){e.preventDefault(),a.props.toggleCommentBtn(!1),a.setState({navItem:"outline"})},a.onMarkdownHintClick=function(e){e.preventDefault(),a.props.toggleCommentBtn(!1),a.setState({navItem:"markdownHint"})},a.onDetailClick=function(e){e.preventDefault(),a.props.toggleCommentBtn(!1),a.setState({navItem:"detail"})},a.onCommentsPanelClick=function(e){e.preventDefault(),a.props.toggleCommentBtn(!0),a.setState({navItem:"commentsPanel"})},a.openMarkdownHint=function(){a.setState({navItem:"markdownHint"})},a}return Object(s.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){window.openMarkdownHint=this.openMarkdownHint}},{key:"componentWillReceiveProps",value:function(e){e.issues!==this.props.issues&&e.issues.issue_list.length>0&&this.setState({navItem:"markdownHint"})}},{key:"componentWillUnmount",value:function(){window.openMarkdownHint=null}},{key:"render",value:function(){var e="",t="",a="";return"outline"===this.state.navItem?e="active":"commentsPanel"===this.state.navItem?t="active":"detail"===this.state.navItem?a="active":"active",c.a.createElement("div",{className:"side-panel"},c.a.createElement("ul",{className:"nav justify-content-center"},c.a.createElement("li",{className:"nav-item"},c.a.createElement("a",{className:"nav-link "+e,href:"",onClick:this.onOutlineClick},c.a.createElement("i",{className:"iconfont icon-list-ul"}))),c.a.createElement("li",{className:"nav-item"},c.a.createElement("a",{className:"nav-link "+a,href:"",onClick:this.onDetailClick},c.a.createElement("i",{className:"iconfont icon-info-circle"}))),c.a.createElement("li",{className:"nav-item"},c.a.createElement("a",{className:"nav-link "+t,href:"",onClick:this.onCommentsPanelClick},c.a.createElement("i",{className:"iconfont icon-comment"})))),c.a.createElement("div",{className:"side-panel-content"},"outline"===this.state.navItem&&c.a.createElement(He.a,{editor:this.props.editor,document:this.props.document,t:this.props.t}),"commentsPanel"===this.state.navItem&&c.a.createElement(Je,{editorApi:this.props.editorApi,t:this.props.t,scrollToQuote:this.props.scrollToQuote,relistComment:this.props.relistComment,openDialogs:this.props.openDialogs,participants:this.props.participants,onParticipantsChange:this.props.onParticipantsChange}),"detail"===this.state.navItem&&c.a.createElement(Ze,{t:this.props.t,relatedFiles:this.props.relatedFiles,fileTagList:this.props.fileTagList,editorApi:this.props.editorApi,openDialogs:this.props.openDialogs,fileInfo:this.props.fileInfo,participants:this.props.participants})))}}]),t}(c.a.PureComponent),tt=(a(345),a(346),a(347),function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(i.a)(this,Object(o.a)(t).call(this,e))).getDomNodeByPath=function(e){for(var t,a=document.querySelector(".editor-component");"number"===typeof e[0]&&a;)t=a.children[e[0]],e.shift(),a=t;return t},a.setBtnPosition=function(){a.state.showCommentBtn&&(a.timmer||(a.timmer=setTimeout((function(){var e=a.editor.selection;if(!e||M.h.isCollapsed(e))return a.refs.commentbtn.style.top="-1000px",clearTimeout(a.timmer),void(a.timmer=null);var t=e.anchor.path.slice();t.pop();var n=a.getDomNodeByPath(t),r=a.refs.commentbtn.style;r.right="40px",r.top=n?"".concat(n.offsetTop,"px"):"-1000px",clearTimeout(a.timmer),a.timmer=null}),40)))},a.initialSidePanel=function(){var e=a.getCookie("md-editor-main-panel-width");e&&a.setState({mainPanelWidth:1*e});var t=a.getCookie("md-editor-show-side-panel");"true"===t?a.setState({isShowSidePanel:!0}):"false"===t&&a.setState({isShowSidePanel:!1})},a.scrollToNode=function(e){var t=document.querySelector(".editor-component").childNodes[e.path[0]];a.refs.editorContainer.scrollTo(0,t.offsetTop),window.location.hash=encodeURI(e.children[0].text),M.b.select(a.editor,e.path)},a.showHelpDialog=function(){a.setState({isShowSidePanel:!1,isShowHelpDialog:!0})},a.hideHelpDialog=function(){a.setState({isShowHelpDialog:!1})},a.insertRepoImage=function(e){e.preventDefault(),a.props.readOnly||a.props.openDialogs&&a.props.openDialogs("insert_repo_image")},a.onResizeMouseUp=function(e){a.state.resizeFlag&&a.setState({resizeFlag:!1}),a.setCookie("md-editor-main-panel-width",a.state.mainPanelWidth)},a.onResizeMouseDown=function(e){a.setState({resizeFlag:!0})},a.onResizeMouseMove=function(e){var t=a.state.mainPanelWidth+e.nativeEvent.movementX/e.view.innerWidth*100;t>=82||t<=30?a.setState({resizeFlag:!1}):a.setState({mainPanelWidth:t})},a.toggleSidePanel=function(){a.state.isShowSidePanel?(a.setState({isShowSidePanel:!1}),a.setCookie("md-editor-show-side-panel","false")):(a.setState({isShowSidePanel:!0}),a.setCookie("md-editor-show-side-panel","true")),a.setState({isShowHelpDialog:!1})},a.handleCommentOpen=function(){a.setState({mainPanelWidth:70,isShowHelpDialog:!1})},a.setCookie=function(e,t){document.cookie=e+"="+t+"; "},a.onSave=function(e){a.props.onSave()},a.insertRepoFile=function(){a.props.readOnly||a.props.openDialogs&&a.props.openDialogs("insert_file")},a.onCommentAdded=function(){a.toggleCommentDialog(),a.setState({relistComment:a.state.relistComment+1})},a.toggleCommentBtn=function(e){a.setState({showCommentBtn:e})},a.addComment=function(e){e.stopPropagation(),a.getQuote(),a.toggleCommentDialog()},a.toggleCommentDialog=function(){a.setState({showCommentDialog:!a.state.showCommentDialog})},a.getQuote=function(){a.quote=Object(W.b)(M.b.fragment(a.editor,a.editor.selection)),a.setState({commentPosition:a.editor.selection.anchor.path})},a.onChange=function(e){a.setState({value:e}),!0===a.state.isShowContextMenu&&(a.setState({isShowContextMenu:!1}),a.contextMenuPosition={}),a.props.onChange(e,a.editor.operations)},a.foucsEditor=function(){a.editorRef.firstChild.focus()},a.onToggleLinkDialog=function(){a.setState({isShowLinkDialog:!a.state.isShowLinkDialog})},a.onToggleImageDialog=function(){a.setState({isShowImageDialog:!a.state.isShowImageDialog})},a.getCookie=function(e){for(var t=e+"=",a=document.cookie.split(";"),n=0;n<a.length;n++){var r=a[n].trim();if(0===r.indexOf(t))return r.substring(t.length,r.length)}return""},a.addComment=function(e){e.stopPropagation(),a.getQuote(),a.toggleCommentDialog()},a.scrollToQuote=function(e){if(e){var t=a.editor,n=t.children[e[0]],r=V.b.toDOMNode(t,n);a.refs.editorContainer.scrollTo(0,r.offsetTop),M.b.select(a.editor,e)}},a.onContextMenu=function(e){a.tableUtils.isInTable()&&(e.preventDefault(),a.contextMenuPosition={left:e.clientX,top:e.clientY},a.setState({isShowContextMenu:!a.state.isShowContextMenu}))},a.editor=Se(ke(ge(pe(he(U(Object(V.e)(Object(M.j)()))))))),a.editor.editorApi=e.editorApi,a.editor.onSave=e.onSave,window.editor=a.editor,a.editorUtils=new y.a(a.editor),a.tableUtils=new ae.a(a.editor),a.plugin=new Ne(a.editor),a.editorRef=null,a.timmer=null,a.contextMenuPosition={},a.state={value:e.value,leftNavMode:"files",mainPanelWidth:80,resizeFlag:!1,isShowHelpDialog:!1,isShowSidePanel:!1,isShowLinkDialog:!1,isShowImageDialog:!1,isShowContextMenu:!1,showCommentBtn:!1,showCommentDialog:!1,commentPosition:null,relistComment:0},a}return Object(s.a)(t,e),Object(r.a)(t,[{key:"componentDidCatch",value:function(e){this.props.resetRichValue(),console.log(e)}},{key:"componentDidMount",value:function(){window.richMarkdownEditor=this,this.props.collabUsers.filter((function(e){return!0===e.is_editing&&void 0===e.myself})).length>0&&Ae.a.danger("Another user is editing this file!",{duration:3}),-1===navigator.userAgent.toLowerCase().indexOf("chrome")&&Ae.a.warning(this.props.t("Editing_files_in_this_browser_can_lead_to_slight_display_problems"),{duration:4});var e=Object(Z.a)(Array.from(M.d.texts(this.editor.children[0]))[0],2)[1];e.unshift(0),M.b.select(this.editor,{path:e,offset:0})}},{key:"componentWillReceiveProps",value:function(e){this.props.issues!==e.issues&&e.issues.issue_list.length>0&&!this.state.isShowSidePanel&&this.setState({isShowSidePanel:!0},(function(){window.openMarkdownHint&&window.openMarkdownHint()}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.value,n=t.isShowLinkDialog,r=t.isShowImageDialog,i=this.props,o=i.t,s=i.mode,l=i.editorApi,u=this.state,m=u.mainPanelWidth,d=u.isShowHelpDialog,p=u.isShowSidePanel,h=this.state.resizeFlag?this.onResizeMouseMove:null,g="seafile-editor-main-panel d-flex align-self-end ".concat(p||d?"":"seafile-editor-all-panel"),f={width:p?m+"%":"100%"},b=this.editor,v=this.foucsEditor,E=this.editorUtils.getToolbarStatus(),O=this.props.readOnly,x=G(b.selection);return c.a.createElement("div",{className:"seafile-editor-module seafile-editor"},c.a.createElement(V.c,{editor:this.editor,value:a,onChange:this.onChange},c.a.createElement("div",{className:"seafile-rich-editor-topbar"},c.a.createElement(_,{onToggleLinkDialog:this.onToggleLinkDialog,onToggleImageDialog:this.onToggleImageDialog,toolbarStatus:E,toggleSidePanel:this.toggleSidePanel,insertRepoFile:this.insertRepoFile,isShowLinkDialog:n,isShowImageDialog:r,isShowSidePanel:p,hasSidePanel:!0,mode:s,readOnly:O})),c.a.createElement("div",{className:"seafile-editor-main d-flex",onMouseMove:h,onMouseUp:this.onResizeMouseUp},c.a.createElement("div",{className:g,style:f},c.a.createElement("div",{className:"editor-container align-self-start",ref:"editorContainer"},c.a.createElement("div",{ref:function(t){return e.editorRef=t},onClick:2===a.length&&"paragraph"===a[0].type&&0===M.d.text(a[0].children[0]).length?v:null,className:"editor article"},c.a.createElement(V.a,{renderElement:function(e){return Object(y.d)(e,b,O)},className:"editor-component",renderLeaf:y.c,onContextMenu:this.onContextMenu,onCopy:function(t){e.plugin.onCopy(t,b)},onCut:function(t){return e.plugin.onCut(t)},autoFocus:!0,onKeyDown:this.plugin.onKeyDown,decorate:y.b,onSelect:this.setBtnPosition}),this.state.showCommentBtn&&c.a.createElement("i",{className:"iconfont icon-plus-square seafile-viewer-comment-btn",ref:"commentbtn",onMouseDown:this.addComment})),E.isLinkActive&&x?c.a.createElement(Y.a,null,c.a.createElement(K,{onToggleLinkDialog:this.onToggleLinkDialog,editorUtils:this.editorUtils})):null,this.state.isShowContextMenu&&c.a.createElement(Y.a,null,c.a.createElement($,{tableUtils:this.tableUtils,contextMenuPosition:this.contextMenuPosition})))),!d&&p&&c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"seafile-editor-resize",style:{right:100-m+"%"},onMouseDown:this.onResizeMouseDown}),c.a.createElement("div",{className:"seafile-editor-side-panel align-self-start",style:{width:100-m+"%"}},c.a.createElement(et,{editor:this,document:a,issues:this.props.issues,scrollToNode:this.scrollToNode,scrollToQuote:this.scrollToQuote,t:this.props.t,editorApi:l,toggleCommentBtn:this.toggleCommentBtn,relistComment:this.state.relistComment,relatedFiles:this.props.relatedFiles,fileTagList:this.props.fileTagList,openDialogs:this.props.openDialogs,fileInfo:this.props.fileInfo,participants:this.props.participants,onParticipantsChange:this.props.onParticipantsChange}))),d&&c.a.createElement(Ue,{userHelp:o("userHelp",{returnObjects:!0}),hideHelpDialog:this.hideHelpDialog}),this.state.showCommentDialog&&c.a.createElement(ze,{editorApi:l,t:o,quote:this.quote,scrollToQuote:this.scrollToQuote,commentPosition:this.state.commentPosition,onCommentAdded:this.onCommentAdded,toggleCommentDialog:this.toggleCommentDialog}))))}}]),t}(c.a.Component)),at=Object(d.c)("seafile-editor")(tt),nt=a(111),rt=a.n(nt),it=a(13),ot=a(81);a(217),a(348),a(350),a(311);var st=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,s=new Array(r),l=0;l<r;l++)s[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(s)))).state={isFocused:!1},a.focus=function(){a.codeMirror&&a.codeMirror.focus()},a.focusChanged=function(e){a.setState({isFocused:e}),a.props.onFocusChange&&a.props.onFocusChange(e)},a.cursorActivity=function(e){a.props.onCursorActivity&&a.props.onCursorActivity(e)},a.scrollChanged=function(e){a.props.onScroll&&a.props.onScroll(e.getScrollInfo())},a.codemirrorValueChanged=function(e,t){a.props.onChange&&"setValue"!==t.origin&&a.props.onChange(e.getValue(),t)},a}return Object(s.a)(t,e),Object(r.a)(t,[{key:"getCodeMirrorInstance",value:function(){return this.props.codeMirrorInstance||a(55)}},{key:"componentWillMount",value:function(){this.props.path&&console.error("Warning: react-codemirror: the `path` prop has been changed to `name`")}},{key:"componentDidMount",value:function(){var e=this.getCodeMirrorInstance();this.codeMirror=e.fromTextArea(this.textareaNode,this.props.options),this.codeMirror.on("change",this.codemirrorValueChanged),this.codeMirror.on("cursorActivity",this.cursorActivity),this.codeMirror.on("focus",this.focusChanged.bind(this,!0)),this.codeMirror.on("blur",this.focusChanged.bind(this,!1)),this.codeMirror.on("scroll",this.scrollChanged)}},{key:"componentWillUnmount",value:function(){this.codeMirror&&this.codeMirror.toTextArea()}},{key:"componentWillReceiveProps",value:function(e){if(this.codeMirror&&void 0!==e.initialValue&&e.initialValue!==this.props.initialValue)if(this.props.preserveScrollPosition){var t=this.codeMirror.getScrollInfo();this.codeMirror.setValue(e.initialValue),this.codeMirror.scrollTo(t.left,t.top)}else this.codeMirror.setValue(e.initialValue)}},{key:"render",value:function(){var e=this,t=it("ReactCodeMirror",this.state.isFocused?"ReactCodeMirror--focused":null,this.props.className);return c.a.createElement("div",{className:t},c.a.createElement("textarea",{ref:function(t){return e.textareaNode=t},name:this.props.name||this.props.path,defaultValue:this.props.initialValue,autoComplete:"off",autoFocus:this.props.autoFocus}))}}]),t}(c.a.Component),lt=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(i.a)(this,Object(o.a)(t).call(this,e))).state={html:"",leftIsBindScroll:!1,rightIsBindScroll:!1},a.scrollData={scrollPercentage:0,leftPanel:null,rightPanel:null},a.updateCode=function(e){a.props.onChange(e)},a.onLeftScroll=function(e){var t=a.scrollData.leftPanel;a.scrollData.scrollPercentage=t.scrollTop/t.scrollHeight,a.scrollData.rightPanel.scrollTop=a.scrollData.scrollPercentage*a.scrollData.rightPanel.scrollHeight},a.onRightScroll=function(e){var t=a.scrollData.rightPanel;a.scrollData.scrollPercentage=t.scrollTop/t.scrollHeight,a.scrollData.leftPanel.scrollTop=a.scrollData.scrollPercentage*a.scrollData.leftPanel.scrollHeight},a.onEnterLeftPanel=function(){a.setState({leftIsBindScroll:!0})},a.onLeaveLeftPanel=function(){a.setState({leftIsBindScroll:!1})},a.onEnterRightPanel=function(){a.setState({rightIsBindScroll:!0})},a.onLeaveRightPanel=function(){a.setState({rightIsBindScroll:!1})},a.onHotKey=function(e){if(De()("mod+s",e))return e.preventDefault(),a.props.onSave(e),!0},a.options={lineNumbers:!0,mode:"markdown",lineWrapping:!0,scrollbarStyle:null},a.setContent=ot.throttle(a.setContent,1e3),a}return Object(s.a)(t,e),Object(r.a)(t,[{key:"setContent",value:function(e){var t=this;Be.a.process(e).then((function(e){var a=String(e);t.setState({html:a})}))}},{key:"componentDidMount",value:function(){this.scrollData.leftPanel=document.querySelector(".plain-editor-left-panel"),this.scrollData.rightPanel=document.querySelector(".plain-editor-right-panel"),this.setContent(this.props.currentContent),this.props.collabUsers.filter((function(e){return!0===e.is_editing&&void 0===e.myself})).length>0&&Ae.a.danger("Another user is editing this file!",{duration:3})}},{key:"componentWillReceiveProps",value:function(e){this.setContent(e.currentContent)}},{key:"componentDidUpdate",value:function(){rt.a.highlightAll()}},{key:"render",value:function(){return c.a.createElement("div",{className:"seafile-editor-module seafile-editor"},c.a.createElement("div",{className:"seafile-editor-main plain-editor-main d-flex"},c.a.createElement("div",{className:"plain-editor-left-panel",onKeyDown:this.onHotKey,onMouseLeave:this.onLeaveLeftPanel,onMouseEnter:this.onEnterLeftPanel,onScroll:this.state.leftIsBindScroll?this.onLeftScroll:null},c.a.createElement(st,{initialValue:this.props.initialValue,onChange:this.updateCode,options:this.options})),c.a.createElement("div",{className:"plain-editor-right-panel",onMouseEnter:this.onEnterRightPanel,onMouseLeave:this.onLeaveRightPanel,onScroll:this.state.rightIsBindScroll?this.onRightScroll:null},c.a.createElement("div",{className:"preview"},c.a.createElement("div",{className:"rendered-markdown article",dangerouslySetInnerHTML:{__html:this.state.html}})))))}}]),t}(c.a.Component);lt.defaultProps={collabUsers:[]};var ct=Object(d.c)("seafile-editor")(lt),ut=function(e){function t(e){var a;Object(n.a)(this,t),(a=Object(i.a)(this,Object(o.a)(t).call(this,e))).switchToPlainTextEditor=function(){if("rich"===a.props.editorMode){var e=a.state.richValue,t=Object(W.b)(e);a.props.setEditorMode("plain"),a.setState({initialPlainValue:t,currentContent:t})}a.props.collabServer&&a.props.emitSwitchEditor(!1)},a.switchToRichTextEditor=function(){a.setState({richValue:Object(W.a)(a.state.currentContent)}),a.props.setEditorMode("rich"),a.props.collabServer&&a.props.emitSwitchEditor(!1)},a.onUnload=function(e){if(a.props.contentChanged){var t="Leave this page? The system may not save your changes.";return a.props.clearTimer(),a.props.deleteDraft&&a.props.deleteDraft(),e.returnValue=t,t}},a.onChange=function(e,t){"rich"===a.props.editorMode?(a.setState({richValue:e}),a.props.setDraftValue("rich",a.state.richValue),0!==t.filter((function(e){return"set_selection"!==e.type&&"set_value"!==e.type})).length&&(a.props.onContentChanged(!0),a.autoSave&&a.props.autoSaveDraft())):(a.setState({currentContent:e}),a.props.onContentChanged(!0),a.props.setDraftValue("rich",a.state.richValue),a.props.autoSaveDraft())},a.saveContent=function(e){a.props.editorApi.saveContent(e).then((function(){a.props.onSaving(!1),a.props.onContentChanged(!1),a.lastModifyTime=new Date,Ae.a.success(a.props.t("file_saved"),{duration:2}),a.props.editorApi.getFileInfo().then((function(e){a.props.setFileInfoMtime(e.data)})),a.addParticipants()}),(function(){a.props.onSaving(!1),Ae.a.danger(a.props.t("file_failed_to_save"),{duration:2})})),a.props.onSaving(!0)},a.addParticipants=function(){if(!a.isParticipant&&window.showParticipants){var e=a.props.editorApi,t=e.userName,n=e.addFileParticipants,r=a.props.participants;if(!r||0===r.length||(a.isParticipant=r.every((function(e){return e.email===t})),!a.isParticipant))n([t]).then((function(e){a.isParticipant=!0,a.props.onParticipantsChange()}))}},a.onRichEditorSave=function(){if(!a.props.isSaving){var e=a.state.richValue,t=Object(W.b)(e);a.saveContent(t),a.props.clearTimer(),a.props.deleteDraft&&a.props.deleteDraft()}},a.resetRichValue=function(){var e=a.state.richValue;a.setState({richValue:e})},a.onPlainEditorSave=function(){if(!a.props.isSaving){var e=a.state.currentContent;a.saveContent(e),a.props.clearTimer(),a.props.deleteDraft&&a.props.deleteDraft()}},a.resetContentChanged=function(){a.props.contentChanged&&a.props.onContentChanged(!1),a.autoSave=!0};var r=a.props.markdownContent,s="editor"===a.props.mode,l=a.props.isDraft;return a.lastModifyTime=null,a.autoSave=!1,a.isParticipant=!1,window.seafileEditor=Object(f.a)(a),a.state={isTreeDataLoaded:!1,initialPlainValue:"",currentContent:r,richValue:s||l?Object(W.a)(r):Object(W.a)(""),issues:{issue_list:[]}},a}return Object(s.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){window.addEventListener("beforeunload",this.onUnload)}},{key:"componentWillMount",value:function(){if("rich"===this.props.editorMode){var e=this.state.richValue,t=e[0];if(1===e.length&&"paragraph"===t.type&&1===t.children.length&&M.i.isText(t.children[0])&&0===t.children[0].text.length){var a={type:"header_one",children:[{text:this.props.fileInfo.name.slice(0,this.props.fileInfo.name.lastIndexOf(".")),marks:[]}]};e.push(a),e.shift(),this.setState({richValue:e})}}}},{key:"render",value:function(){var e="";return"rich"===this.props.editorMode?e=c.a.createElement(at,{editorApi:this.props.editorApi,onChange:this.onChange,onSave:this.onRichEditorSave,value:this.state.richValue,resetRichValue:this.resetRichValue,contentChanged:this.props.contentChanged,saving:this.props.saving,switchToMarkDownViewer:this.switchToMarkDownViewer,switchToPlainTextEditor:this.switchToPlainTextEditor,fileInfo:this.props.fileInfo,toggleStar:this.props.toggleStar,issues:this.state.issues,resetContentChanged:this.resetContentChanged,collabUsers:this.props.collabUsers,mode:this.props.editorMode,draftID:this.props.draftID,isDraft:this.props.isDraft,openDialogs:this.props.openDialogs,readOnly:this.props.readOnly,relatedFiles:this.props.relatedFiles,fileTagList:this.props.fileTagList,participants:this.props.participants,onParticipantsChange:this.props.onParticipantsChange}):"plain"===this.props.editorMode&&(e=c.a.createElement(ct,{editorApi:this.props.editorApi,initialValue:this.state.initialPlainValue,currentContent:this.state.currentContent,contentChanged:this.props.contentChanged,switchToRichTextEditor:this.switchToRichTextEditor,switchToMarkDownViewer:this.switchToMarkDownViewer,onSave:this.onPlainEditorSave,onChange:this.onChange,fileInfo:this.props.fileInfo,toggleStar:this.props.toggleStar,collabUsers:this.props.collabUsers,mode:this.props.editorMode,draftID:this.props.draftID,isDraft:this.props.isDraft})),e}}]),t}(c.a.Component);ut.defaultProps={userInfo:null};var mt=Object(d.c)("seafile-editor")(ut),dt=function(e){function t(){return Object(n.a)(this,t),Object(i.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(r.a)(t,[{key:"componentDidCatch",value:function(e){console.error(e),this.forceUpdate()}},{key:"render",value:function(){return c.a.createElement(Te,this.props)}}]),t}(c.a.Component),pt=function(e){function t(){return Object(n.a)(this,t),Object(i.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(r.a)(t,[{key:"componentDidCatch",value:function(e){console.error(e),this.forceUpdate()}},{key:"render",value:function(){return c.a.createElement(mt,this.props)}}]),t}(c.a.Component)},27:function(e,t,a){"use strict";var n=a(5),r=a(6),i=a(8),o=a(7),s=a(0),l=a.n(s),c=a(1),u=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(r.a)(a,[{key:"render",value:function(){return l.a.createElement("div",{className:this.props.forDialog?"text-center mt-8":"empty-tip"},l.a.createElement("img",{src:"".concat(c.Jb,"img/no-items-tip.png"),alt:"",width:"100",height:"100",className:"no-items-img-tip"}),this.props.children)}}]),a}(l.a.Component);t.a=u},296:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,r=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),i=a(0),o=a(2),s=(n=o)&&n.__esModule?n:{default:n};function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var u=function(e){function t(){var e,a,n;l(this,t);for(var r=arguments.length,i=Array(r),o=0;o<r;o++)i[o]=arguments[o];return a=n=c(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),n._setTargetNode=function(e){n._targetNode=e},n._getTargetNode=function(){return n._targetNode},c(n,a)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"getChildContext",value:function(){return{popperManager:{setTargetNode:this._setTargetNode,getTargetNode:this._getTargetNode}}}},{key:"render",value:function(){var e=this.props,t=e.tag,a=e.children,n=function(e,t){var a={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n]);return a}(e,["tag","children"]);return!1!==t?(0,i.createElement)(t,n,a):a}}]),t}(i.Component);u.childContextTypes={popperManager:s.default.object.isRequired},u.propTypes={tag:s.default.oneOfType([s.default.string,s.default.bool]),children:s.default.oneOfType([s.default.node,s.default.func])},u.defaultProps={tag:"div"},t.default=u},297:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},i=a(0),o=a(2),s=(n=o)&&n.__esModule?n:{default:n};var l=function(e,t){var a=e.component,n=void 0===a?"div":a,o=e.innerRef,s=e.children,l=function(e,t){var a={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n]);return a}(e,["component","innerRef","children"]),c=t.popperManager,u=function(e){c.setTargetNode(e),"function"===typeof o&&o(e)};if("function"===typeof s)return s({targetProps:{ref:u},restProps:l});var m=r({},l);return"string"===typeof n?m.ref=u:m.innerRef=u,(0,i.createElement)(n,m,s)};l.contextTypes={popperManager:s.default.object.isRequired},l.propTypes={component:s.default.oneOfType([s.default.node,s.default.func]),innerRef:s.default.func,children:s.default.oneOfType([s.default.node,s.default.func])},t.default=l},298:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},r=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),i=a(0),o=l(a(2)),s=l(a(238));function l(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var m=function(e){function t(){var e,a,r;c(this,t);for(var i=arguments.length,o=Array(i),s=0;s<i;s++)o[s]=arguments[s];return a=r=u(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.state={},r._setArrowNode=function(e){r._arrowNode=e},r._getTargetNode=function(){return r.context.popperManager.getTargetNode()},r._getOffsets=function(e){return Object.keys(e.offsets).map((function(t){return e.offsets[t]}))},r._isDataDirty=function(e){return!r.state.data||JSON.stringify(r._getOffsets(r.state.data))!==JSON.stringify(r._getOffsets(e))},r._updateStateModifier={enabled:!0,order:900,fn:function(e){return r._isDataDirty(e)&&r.setState({data:e}),e}},r._getPopperStyle=function(){var e=r.state.data;return r._popper&&e?n({position:e.offsets.popper.position},e.styles):{position:"absolute",pointerEvents:"none",opacity:0}},r._getPopperPlacement=function(){return r.state.data?r.state.data.placement:void 0},r._getPopperHide=function(){return r.state.data&&r.state.data.hide?"":void 0},r._getArrowStyle=function(){if(r.state.data&&r.state.data.offsets.arrow){var e=r.state.data.offsets.arrow;return{top:e.top,left:e.left}}return{}},r._handlePopperRef=function(e){r._popperNode=e,e?r._createPopper():r._destroyPopper(),r.props.innerRef&&r.props.innerRef(e)},r._scheduleUpdate=function(){r._popper&&r._popper.scheduleUpdate()},u(r,a)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"getChildContext",value:function(){return{popper:{setArrowNode:this._setArrowNode,getArrowStyle:this._getArrowStyle}}}},{key:"componentDidUpdate",value:function(e){e.placement===this.props.placement&&e.eventsEnabled===this.props.eventsEnabled||(this._destroyPopper(),this._createPopper()),e.children!==this.props.children&&this._scheduleUpdate()}},{key:"componentWillUnmount",value:function(){this._destroyPopper()}},{key:"_createPopper",value:function(){var e=this,t=this.props,a=t.placement,r=t.eventsEnabled,i=n({},this.props.modifiers,{applyStyle:{enabled:!1},updateState:this._updateStateModifier});this._arrowNode&&(i.arrow={element:this._arrowNode}),this._popper=new s.default(this._getTargetNode(),this._popperNode,{placement:a,eventsEnabled:r,modifiers:i}),setTimeout((function(){return e._scheduleUpdate()}))}},{key:"_destroyPopper",value:function(){this._popper&&this._popper.destroy()}},{key:"render",value:function(){var e=this.props,t=e.component,a=(e.innerRef,e.placement,e.eventsEnabled,e.modifiers,e.children),r=function(e,t){var a={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n]);return a}(e,["component","innerRef","placement","eventsEnabled","modifiers","children"]),o=this._getPopperStyle(),s=this._getPopperPlacement(),l=this._getPopperHide();if("function"===typeof a)return a({popperProps:{ref:this._handlePopperRef,style:o,"data-placement":s,"data-x-out-of-boundaries":l},restProps:r,scheduleUpdate:this._scheduleUpdate});var c=n({},r,{style:n({},r.style,o),"data-placement":s,"data-x-out-of-boundaries":l});return"string"===typeof t?c.ref=this._handlePopperRef:c.innerRef=this._handlePopperRef,(0,i.createElement)(t,c,a)}}]),t}(i.Component);m.contextTypes={popperManager:o.default.object.isRequired},m.childContextTypes={popper:o.default.object.isRequired},m.propTypes={component:o.default.oneOfType([o.default.node,o.default.func]),innerRef:o.default.func,placement:o.default.oneOf(s.default.placements),eventsEnabled:o.default.bool,modifiers:o.default.object,children:o.default.oneOfType([o.default.node,o.default.func])},m.defaultProps={component:"div",placement:"bottom",eventsEnabled:!0,modifiers:{}},t.default=m},299:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},i=a(0),o=a(2),s=(n=o)&&n.__esModule?n:{default:n};var l=function(e,t){var a=e.component,n=void 0===a?"span":a,o=e.innerRef,s=e.children,l=function(e,t){var a={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n]);return a}(e,["component","innerRef","children"]),c=t.popper,u=function(e){c.setArrowNode(e),"function"===typeof o&&o(e)},m=c.getArrowStyle();if("function"===typeof s)return s({arrowProps:{ref:u,style:m},restProps:l});var d=r({},l,{style:r({},m,l.style)});return"string"===typeof n?d.ref=u:d.innerRef=u,(0,i.createElement)(n,d,s)};l.contextTypes={popper:s.default.object.isRequired},l.propTypes={component:s.default.oneOfType([s.default.node,s.default.func]),innerRef:s.default.func,children:s.default.oneOfType([s.default.node,s.default.func])},t.default=l},310:function(e,t,a){},312:function(e,t,a){},322:function(e,t,a){},344:function(e,t,a){},345:function(e,t,a){},346:function(e,t,a){},347:function(e,t,a){},348:function(e,t,a){!function(e){"use strict";e.defineMode("markdown",(function(t,a){var n=e.getMode(t,"text/html"),r="null"==n.name;function i(a){if(e.findModeByName){var n=e.findModeByName(a);n&&(a=n.mime||n.mimes[0])}var r=e.getMode(t,a);return"null"==r.name?null:r}void 0===a.highlightFormatting&&(a.highlightFormatting=!1),void 0===a.maxBlockquoteDepth&&(a.maxBlockquoteDepth=0),void 0===a.taskLists&&(a.taskLists=!1),void 0===a.strikethrough&&(a.strikethrough=!1),void 0===a.emoji&&(a.emoji=!1),void 0===a.fencedCodeBlockHighlighting&&(a.fencedCodeBlockHighlighting=!0),void 0===a.xml&&(a.xml=!0),void 0===a.tokenTypeOverrides&&(a.tokenTypeOverrides={});var o={header:"header",code:"comment",quote:"quote",list1:"variable-2",list2:"variable-3",list3:"keyword",hr:"hr",image:"image",imageAltText:"image-alt-text",imageMarker:"image-marker",formatting:"formatting",linkInline:"link",linkEmail:"link",linkText:"link",linkHref:"string",em:"em",strong:"strong",strikethrough:"strikethrough",emoji:"builtin"};for(var s in o)o.hasOwnProperty(s)&&a.tokenTypeOverrides[s]&&(o[s]=a.tokenTypeOverrides[s]);var l=/^([*\-_])(?:\s*\1){2,}\s*$/,c=/^(?:[*\-+]|^[0-9]+([.)]))\s+/,u=/^\[(x| )\](?=\s)/i,m=a.allowAtxHeaderWithoutSpace?/^(#+)/:/^(#+)(?: |$)/,d=/^ *(?:\={1,}|-{1,})\s*$/,p=/^[^#!\[\]*_\\<>` "'(~:]+/,h=/^(~~~+|```+)[ \t]*([\w+#-]*)[^\n`]*$/,g=/^\s*\[[^\]]+?\]:.*$/,f=/[!"#$%&'()*+,\-.\/:;<=>?@\[\\\]^_`{|}~\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u0AF0\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E42\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC9\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDF3C-\uDF3E]|\uD809[\uDC70-\uDC74]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]/,b="    ";function v(e,t,a){return t.f=t.inline=a,a(e,t)}function E(e,t,a){return t.f=t.block=a,a(e,t)}function y(e){return!e||!/\S/.test(e.string)}function O(t){if(t.linkTitle=!1,t.linkHref=!1,t.linkText=!1,t.em=!1,t.strong=!1,t.strikethrough=!1,t.quote=0,t.indentedCode=!1,t.f==k){var a=r;if(!a){var i=e.innerMode(n,t.htmlState);a="xml"==i.mode.name&&null===i.state.tagStart&&!i.state.context&&i.state.tokenize.isInText}a&&(t.f=j,t.block=x,t.htmlState=null)}return t.trailingSpace=0,t.trailingSpaceNewLine=!1,t.prevLine=t.thisLine,t.thisLine={stream:null},null}function x(t,n){var r=t.column()===n.indentation,s=y(n.prevLine.stream),p=n.indentedCode,f=n.prevLine.hr,b=!1!==n.list,E=(n.listStack[n.listStack.length-1]||0)+3;n.indentedCode=!1;var O=n.indentation;if(null===n.indentationDiff&&(n.indentationDiff=n.indentation,b)){for(n.em=!1,n.strong=!1,n.code=!1,n.strikethrough=!1,n.list=null;O<n.listStack[n.listStack.length-1];)n.listStack.pop(),n.listStack.length?n.indentation=n.listStack[n.listStack.length-1]:n.list=!1;!1!==n.list&&(n.indentationDiff=O-n.listStack[n.listStack.length-1])}var x=!s&&!f&&!n.prevLine.header&&(!b||!p)&&!n.prevLine.fencedCodeEnd,k=(!1===n.list||f||s)&&n.indentation<=E&&t.match(l),D=null;if(n.indentationDiff>=4&&(p||n.prevLine.fencedCodeEnd||n.prevLine.header||s))return t.skipToEnd(),n.indentedCode=!0,o.code;if(t.eatSpace())return null;if(r&&n.indentation<=E&&(D=t.match(m))&&D[1].length<=6)return n.quote=0,n.header=D[1].length,n.thisLine.header=!0,a.highlightFormatting&&(n.formatting="header"),n.f=n.inline,w(n);if(n.indentation<=E&&t.eat(">"))return n.quote=r?1:n.quote+1,a.highlightFormatting&&(n.formatting="quote"),t.eatSpace(),w(n);if(!k&&!n.setext&&r&&n.indentation<=E&&(D=t.match(c))){var j=D[1]?"ol":"ul";return n.indentation=O+t.current().length,n.list=!0,n.quote=0,n.listStack.push(n.indentation),a.taskLists&&t.match(u,!1)&&(n.taskList=!0),n.f=n.inline,a.highlightFormatting&&(n.formatting=["list","list-"+j]),w(n)}return r&&n.indentation<=E&&(D=t.match(h,!0))?(n.quote=0,n.fencedEndRE=new RegExp(D[1]+"+ *$"),n.localMode=a.fencedCodeBlockHighlighting&&i(D[2]),n.localMode&&(n.localState=e.startState(n.localMode)),n.f=n.block=S,a.highlightFormatting&&(n.formatting="code-block"),n.code=-1,w(n)):n.setext||!(x&&b||n.quote||!1!==n.list||n.code||k||g.test(t.string))&&(D=t.lookAhead(1))&&(D=D.match(d))?(n.setext?(n.header=n.setext,n.setext=0,t.skipToEnd(),a.highlightFormatting&&(n.formatting="header")):(n.header="="==D[0].charAt(0)?1:2,n.setext=n.header),n.thisLine.header=!0,n.f=n.inline,w(n)):k?(t.skipToEnd(),n.hr=!0,n.thisLine.hr=!0,o.hr):"["===t.peek()?v(t,n,M):v(t,n,n.inline)}function k(t,a){var i=n.token(t,a.htmlState);if(!r){var o=e.innerMode(n,a.htmlState);("xml"==o.mode.name&&null===o.state.tagStart&&!o.state.context&&o.state.tokenize.isInText||a.md_inside&&t.current().indexOf(">")>-1)&&(a.f=j,a.block=x,a.htmlState=null)}return i}function S(e,t){var n,r=t.listStack[t.listStack.length-1]||0,i=t.indentation<r,s=r+3;return t.fencedEndRE&&t.indentation<=s&&(i||e.match(t.fencedEndRE))?(a.highlightFormatting&&(t.formatting="code-block"),i||(n=w(t)),t.localMode=t.localState=null,t.block=x,t.f=j,t.fencedEndRE=null,t.code=0,t.thisLine.fencedCodeEnd=!0,i?E(e,t,t.block):n):t.localMode?t.localMode.token(e,t.localState):(e.skipToEnd(),o.code)}function w(e){var t=[];if(e.formatting){t.push(o.formatting),"string"===typeof e.formatting&&(e.formatting=[e.formatting]);for(var n=0;n<e.formatting.length;n++)t.push(o.formatting+"-"+e.formatting[n]),"header"===e.formatting[n]&&t.push(o.formatting+"-"+e.formatting[n]+"-"+e.header),"quote"===e.formatting[n]&&(!a.maxBlockquoteDepth||a.maxBlockquoteDepth>=e.quote?t.push(o.formatting+"-"+e.formatting[n]+"-"+e.quote):t.push("error"))}if(e.taskOpen)return t.push("meta"),t.length?t.join(" "):null;if(e.taskClosed)return t.push("property"),t.length?t.join(" "):null;if(e.linkHref?t.push(o.linkHref,"url"):(e.strong&&t.push(o.strong),e.em&&t.push(o.em),e.strikethrough&&t.push(o.strikethrough),e.emoji&&t.push(o.emoji),e.linkText&&t.push(o.linkText),e.code&&t.push(o.code),e.image&&t.push(o.image),e.imageAltText&&t.push(o.imageAltText,"link"),e.imageMarker&&t.push(o.imageMarker)),e.header&&t.push(o.header,o.header+"-"+e.header),e.quote&&(t.push(o.quote),!a.maxBlockquoteDepth||a.maxBlockquoteDepth>=e.quote?t.push(o.quote+"-"+e.quote):t.push(o.quote+"-"+a.maxBlockquoteDepth)),!1!==e.list){var r=(e.listStack.length-1)%3;r?1===r?t.push(o.list2):t.push(o.list3):t.push(o.list1)}return e.trailingSpaceNewLine?t.push("trailing-space-new-line"):e.trailingSpace&&t.push("trailing-space-"+(e.trailingSpace%2?"a":"b")),t.length?t.join(" "):null}function D(e,t){if(e.match(p,!0))return w(t)}function j(t,r){var i=r.text(t,r);if("undefined"!==typeof i)return i;if(r.list)return r.list=null,w(r);if(r.taskList)return" "===t.match(u,!0)[1]?r.taskOpen=!0:r.taskClosed=!0,a.highlightFormatting&&(r.formatting="task"),r.taskList=!1,w(r);if(r.taskOpen=!1,r.taskClosed=!1,r.header&&t.match(/^#+$/,!0))return a.highlightFormatting&&(r.formatting="header"),w(r);var s=t.next();if(r.linkTitle){r.linkTitle=!1;var l=s;"("===s&&(l=")");var c="^\\s*(?:[^"+(l=(l+"").replace(/([.?*+^\[\]\\(){}|-])/g,"\\$1"))+"\\\\]+|\\\\\\\\|\\\\.)"+l;if(t.match(new RegExp(c),!0))return o.linkHref}if("`"===s){var m=r.formatting;a.highlightFormatting&&(r.formatting="code"),t.eatWhile("`");var d=t.current().length;if(0!=r.code||r.quote&&1!=d){if(d==r.code){var p=w(r);return r.code=0,p}return r.formatting=m,w(r)}return r.code=d,w(r)}if(r.code)return w(r);if("\\"===s&&(t.next(),a.highlightFormatting)){var h=w(r),g=o.formatting+"-escape";return h?h+" "+g:g}if("!"===s&&t.match(/\[[^\]]*\] ?(?:\(|\[)/,!1))return r.imageMarker=!0,r.image=!0,a.highlightFormatting&&(r.formatting="image"),w(r);if("["===s&&r.imageMarker&&t.match(/[^\]]*\](\(.*?\)| ?\[.*?\])/,!1))return r.imageMarker=!1,r.imageAltText=!0,a.highlightFormatting&&(r.formatting="image"),w(r);if("]"===s&&r.imageAltText){a.highlightFormatting&&(r.formatting="image");var h=w(r);return r.imageAltText=!1,r.image=!1,r.inline=r.f=N,h}if("["===s&&!r.image)return r.linkText&&t.match(/^.*?\]/)||(r.linkText=!0,a.highlightFormatting&&(r.formatting="link")),w(r);if("]"===s&&r.linkText){a.highlightFormatting&&(r.formatting="link");var h=w(r);return r.linkText=!1,r.inline=r.f=t.match(/\(.*?\)| ?\[.*?\]/,!1)?N:j,h}if("<"===s&&t.match(/^(https?|ftps?):\/\/(?:[^\\>]|\\.)+>/,!1))return r.f=r.inline=C,a.highlightFormatting&&(r.formatting="link"),(h=w(r))?h+=" ":h="",h+o.linkInline;if("<"===s&&t.match(/^[^> \\]+@(?:[^\\>]|\\.)+>/,!1))return r.f=r.inline=C,a.highlightFormatting&&(r.formatting="link"),(h=w(r))?h+=" ":h="",h+o.linkEmail;if(a.xml&&"<"===s&&t.match(/^(!--|\?|!\[CDATA\[|[a-z][a-z0-9-]*(?:\s+[a-z_:.\-]+(?:\s*=\s*[^>]+)?)*\s*(?:>|$))/i,!1)){var b=t.string.indexOf(">",t.pos);if(-1!=b){var v=t.string.substring(t.start,b);/markdown\s*=\s*('|"){0,1}1('|"){0,1}/.test(v)&&(r.md_inside=!0)}return t.backUp(1),r.htmlState=e.startState(n),E(t,r,k)}if(a.xml&&"<"===s&&t.match(/^\/\w*?>/))return r.md_inside=!1,"tag";if("*"===s||"_"===s){for(var y=1,O=1==t.pos?" ":t.string.charAt(t.pos-2);y<3&&t.eat(s);)y++;var x=t.peek()||" ",S=!/\s/.test(x)&&(!f.test(x)||/\s/.test(O)||f.test(O)),D=!/\s/.test(O)&&(!f.test(O)||/\s/.test(x)||f.test(x)),P=null,_=null;if(y%2&&(r.em||!S||"*"!==s&&D&&!f.test(O)?r.em!=s||!D||"*"!==s&&S&&!f.test(x)||(P=!1):P=!0),y>1&&(r.strong||!S||"*"!==s&&D&&!f.test(O)?r.strong!=s||!D||"*"!==s&&S&&!f.test(x)||(_=!1):_=!0),null!=_||null!=P)return a.highlightFormatting&&(r.formatting=null==P?"strong":null==_?"em":"strong em"),!0===P&&(r.em=s),!0===_&&(r.strong=s),p=w(r),!1===P&&(r.em=!1),!1===_&&(r.strong=!1),p}else if(" "===s&&(t.eat("*")||t.eat("_"))){if(" "===t.peek())return w(r);t.backUp(1)}if(a.strikethrough)if("~"===s&&t.eatWhile(s)){if(r.strikethrough)return a.highlightFormatting&&(r.formatting="strikethrough"),p=w(r),r.strikethrough=!1,p;if(t.match(/^[^\s]/,!1))return r.strikethrough=!0,a.highlightFormatting&&(r.formatting="strikethrough"),w(r)}else if(" "===s&&t.match(/^~~/,!0)){if(" "===t.peek())return w(r);t.backUp(2)}if(a.emoji&&":"===s&&t.match(/^(?:[a-z_\d+][a-z_\d+-]*|\-[a-z_\d+][a-z_\d+-]*):/)){r.emoji=!0,a.highlightFormatting&&(r.formatting="emoji");var M=w(r);return r.emoji=!1,M}return" "===s&&(t.match(/^ +$/,!1)?r.trailingSpace++:r.trailingSpace&&(r.trailingSpaceNewLine=!0)),w(r)}function C(e,t){if(">"===e.next()){t.f=t.inline=j,a.highlightFormatting&&(t.formatting="link");var n=w(t);return n?n+=" ":n="",n+o.linkInline}return e.match(/^[^>]+/,!0),o.linkInline}function N(e,t){if(e.eatSpace())return null;var n=e.next();return"("===n||"["===n?(t.f=t.inline=_("("===n?")":"]"),a.highlightFormatting&&(t.formatting="link-string"),t.linkHref=!0,w(t)):"error"}var P={")":/^(?:[^\\\(\)]|\\.|\((?:[^\\\(\)]|\\.)*\))*?(?=\))/,"]":/^(?:[^\\\[\]]|\\.|\[(?:[^\\\[\]]|\\.)*\])*?(?=\])/};function _(e){return function(t,n){if(t.next()===e){n.f=n.inline=j,a.highlightFormatting&&(n.formatting="link-string");var r=w(n);return n.linkHref=!1,r}return t.match(P[e]),n.linkHref=!0,w(n)}}function M(e,t){return e.match(/^([^\]\\]|\\.)*\]:/,!1)?(t.f=I,e.next(),a.highlightFormatting&&(t.formatting="link"),t.linkText=!0,w(t)):v(e,t,j)}function I(e,t){if(e.match(/^\]:/,!0)){t.f=t.inline=T,a.highlightFormatting&&(t.formatting="link");var n=w(t);return t.linkText=!1,n}return e.match(/^([^\]\\]|\\.)+/,!0),o.linkText}function T(e,t){return e.eatSpace()?null:(e.match(/^[^\s]+/,!0),void 0===e.peek()?t.linkTitle=!0:e.match(/^(?:\s+(?:"(?:[^"\\]|\\\\|\\.)+"|'(?:[^'\\]|\\\\|\\.)+'|\((?:[^)\\]|\\\\|\\.)+\)))?/,!0),t.f=t.inline=j,o.linkHref+" url")}var A={startState:function(){return{f:x,prevLine:{stream:null},thisLine:{stream:null},block:x,htmlState:null,indentation:0,inline:j,text:D,formatting:!1,linkText:!1,linkHref:!1,linkTitle:!1,code:0,em:!1,strong:!1,header:0,setext:0,hr:!1,taskList:!1,list:!1,listStack:[],quote:0,trailingSpace:0,trailingSpaceNewLine:!1,strikethrough:!1,emoji:!1,fencedEndRE:null}},copyState:function(t){return{f:t.f,prevLine:t.prevLine,thisLine:t.thisLine,block:t.block,htmlState:t.htmlState&&e.copyState(n,t.htmlState),indentation:t.indentation,localMode:t.localMode,localState:t.localMode?e.copyState(t.localMode,t.localState):null,inline:t.inline,text:t.text,formatting:!1,linkText:t.linkText,linkTitle:t.linkTitle,linkHref:t.linkHref,code:t.code,em:t.em,strong:t.strong,strikethrough:t.strikethrough,emoji:t.emoji,header:t.header,setext:t.setext,hr:t.hr,taskList:t.taskList,list:t.list,listStack:t.listStack.slice(0),quote:t.quote,indentedCode:t.indentedCode,trailingSpace:t.trailingSpace,trailingSpaceNewLine:t.trailingSpaceNewLine,md_inside:t.md_inside,fencedEndRE:t.fencedEndRE}},token:function(e,t){if(t.formatting=!1,e!=t.thisLine.stream){if(t.header=0,t.hr=!1,e.match(/^\s*$/,!0))return O(t),null;if(t.prevLine=t.thisLine,t.thisLine={stream:e},t.taskList=!1,t.trailingSpace=0,t.trailingSpaceNewLine=!1,!t.localState&&(t.f=t.block,t.f!=k)){var a=e.match(/^\s*/,!0)[0].replace(/\t/g,b).length;if(t.indentation=a,t.indentationDiff=null,a>0)return null}}return t.f(e,t)},innerMode:function(e){return e.block==k?{state:e.htmlState,mode:n}:e.localState?{state:e.localState,mode:e.localMode}:{state:e,mode:A}},indent:function(t,a,r){return t.block==k&&n.indent?n.indent(t.htmlState,a,r):t.localState&&t.localMode.indent?t.localMode.indent(t.localState,a,r):e.Pass},blankLine:O,getType:w,blockCommentStart:"\x3c!--",blockCommentEnd:"--\x3e",closeBrackets:"()[]{}''\"\"``",fold:"markdown"};return A}),"xml"),e.defineMIME("text/markdown","markdown"),e.defineMIME("text/x-markdown","markdown")}(a(55),a(146),a(349))},349:function(e,t,a){!function(e){"use strict";e.modeInfo=[{name:"APL",mime:"text/apl",mode:"apl",ext:["dyalog","apl"]},{name:"PGP",mimes:["application/pgp","application/pgp-encrypted","application/pgp-keys","application/pgp-signature"],mode:"asciiarmor",ext:["asc","pgp","sig"]},{name:"ASN.1",mime:"text/x-ttcn-asn",mode:"asn.1",ext:["asn","asn1"]},{name:"Asterisk",mime:"text/x-asterisk",mode:"asterisk",file:/^extensions\.conf$/i},{name:"Brainfuck",mime:"text/x-brainfuck",mode:"brainfuck",ext:["b","bf"]},{name:"C",mime:"text/x-csrc",mode:"clike",ext:["c","h","ino"]},{name:"C++",mime:"text/x-c++src",mode:"clike",ext:["cpp","c++","cc","cxx","hpp","h++","hh","hxx"],alias:["cpp"]},{name:"Cobol",mime:"text/x-cobol",mode:"cobol",ext:["cob","cpy"]},{name:"C#",mime:"text/x-csharp",mode:"clike",ext:["cs"],alias:["csharp"]},{name:"Clojure",mime:"text/x-clojure",mode:"clojure",ext:["clj","cljc","cljx"]},{name:"ClojureScript",mime:"text/x-clojurescript",mode:"clojure",ext:["cljs"]},{name:"Closure Stylesheets (GSS)",mime:"text/x-gss",mode:"css",ext:["gss"]},{name:"CMake",mime:"text/x-cmake",mode:"cmake",ext:["cmake","cmake.in"],file:/^CMakeLists.txt$/},{name:"CoffeeScript",mimes:["application/vnd.coffeescript","text/coffeescript","text/x-coffeescript"],mode:"coffeescript",ext:["coffee"],alias:["coffee","coffee-script"]},{name:"Common Lisp",mime:"text/x-common-lisp",mode:"commonlisp",ext:["cl","lisp","el"],alias:["lisp"]},{name:"Cypher",mime:"application/x-cypher-query",mode:"cypher",ext:["cyp","cypher"]},{name:"Cython",mime:"text/x-cython",mode:"python",ext:["pyx","pxd","pxi"]},{name:"Crystal",mime:"text/x-crystal",mode:"crystal",ext:["cr"]},{name:"CSS",mime:"text/css",mode:"css",ext:["css"]},{name:"CQL",mime:"text/x-cassandra",mode:"sql",ext:["cql"]},{name:"D",mime:"text/x-d",mode:"d",ext:["d"]},{name:"Dart",mimes:["application/dart","text/x-dart"],mode:"dart",ext:["dart"]},{name:"diff",mime:"text/x-diff",mode:"diff",ext:["diff","patch"]},{name:"Django",mime:"text/x-django",mode:"django"},{name:"Dockerfile",mime:"text/x-dockerfile",mode:"dockerfile",file:/^Dockerfile$/},{name:"DTD",mime:"application/xml-dtd",mode:"dtd",ext:["dtd"]},{name:"Dylan",mime:"text/x-dylan",mode:"dylan",ext:["dylan","dyl","intr"]},{name:"EBNF",mime:"text/x-ebnf",mode:"ebnf"},{name:"ECL",mime:"text/x-ecl",mode:"ecl",ext:["ecl"]},{name:"edn",mime:"application/edn",mode:"clojure",ext:["edn"]},{name:"Eiffel",mime:"text/x-eiffel",mode:"eiffel",ext:["e"]},{name:"Elm",mime:"text/x-elm",mode:"elm",ext:["elm"]},{name:"Embedded Javascript",mime:"application/x-ejs",mode:"htmlembedded",ext:["ejs"]},{name:"Embedded Ruby",mime:"application/x-erb",mode:"htmlembedded",ext:["erb"]},{name:"Erlang",mime:"text/x-erlang",mode:"erlang",ext:["erl"]},{name:"Esper",mime:"text/x-esper",mode:"sql"},{name:"Factor",mime:"text/x-factor",mode:"factor",ext:["factor"]},{name:"FCL",mime:"text/x-fcl",mode:"fcl"},{name:"Forth",mime:"text/x-forth",mode:"forth",ext:["forth","fth","4th"]},{name:"Fortran",mime:"text/x-fortran",mode:"fortran",ext:["f","for","f77","f90","f95"]},{name:"F#",mime:"text/x-fsharp",mode:"mllike",ext:["fs"],alias:["fsharp"]},{name:"Gas",mime:"text/x-gas",mode:"gas",ext:["s"]},{name:"Gherkin",mime:"text/x-feature",mode:"gherkin",ext:["feature"]},{name:"GitHub Flavored Markdown",mime:"text/x-gfm",mode:"gfm",file:/^(readme|contributing|history).md$/i},{name:"Go",mime:"text/x-go",mode:"go",ext:["go"]},{name:"Groovy",mime:"text/x-groovy",mode:"groovy",ext:["groovy","gradle"],file:/^Jenkinsfile$/},{name:"HAML",mime:"text/x-haml",mode:"haml",ext:["haml"]},{name:"Haskell",mime:"text/x-haskell",mode:"haskell",ext:["hs"]},{name:"Haskell (Literate)",mime:"text/x-literate-haskell",mode:"haskell-literate",ext:["lhs"]},{name:"Haxe",mime:"text/x-haxe",mode:"haxe",ext:["hx"]},{name:"HXML",mime:"text/x-hxml",mode:"haxe",ext:["hxml"]},{name:"ASP.NET",mime:"application/x-aspx",mode:"htmlembedded",ext:["aspx"],alias:["asp","aspx"]},{name:"HTML",mime:"text/html",mode:"htmlmixed",ext:["html","htm","handlebars","hbs"],alias:["xhtml"]},{name:"HTTP",mime:"message/http",mode:"http"},{name:"IDL",mime:"text/x-idl",mode:"idl",ext:["pro"]},{name:"Pug",mime:"text/x-pug",mode:"pug",ext:["jade","pug"],alias:["jade"]},{name:"Java",mime:"text/x-java",mode:"clike",ext:["java"]},{name:"Java Server Pages",mime:"application/x-jsp",mode:"htmlembedded",ext:["jsp"],alias:["jsp"]},{name:"JavaScript",mimes:["text/javascript","text/ecmascript","application/javascript","application/x-javascript","application/ecmascript"],mode:"javascript",ext:["js"],alias:["ecmascript","js","node"]},{name:"JSON",mimes:["application/json","application/x-json"],mode:"javascript",ext:["json","map"],alias:["json5"]},{name:"JSON-LD",mime:"application/ld+json",mode:"javascript",ext:["jsonld"],alias:["jsonld"]},{name:"JSX",mime:"text/jsx",mode:"jsx",ext:["jsx"]},{name:"Jinja2",mime:"text/jinja2",mode:"jinja2",ext:["j2","jinja","jinja2"]},{name:"Julia",mime:"text/x-julia",mode:"julia",ext:["jl"]},{name:"Kotlin",mime:"text/x-kotlin",mode:"clike",ext:["kt"]},{name:"LESS",mime:"text/x-less",mode:"css",ext:["less"]},{name:"LiveScript",mime:"text/x-livescript",mode:"livescript",ext:["ls"],alias:["ls"]},{name:"Lua",mime:"text/x-lua",mode:"lua",ext:["lua"]},{name:"Markdown",mime:"text/x-markdown",mode:"markdown",ext:["markdown","md","mkd"]},{name:"mIRC",mime:"text/mirc",mode:"mirc"},{name:"MariaDB SQL",mime:"text/x-mariadb",mode:"sql"},{name:"Mathematica",mime:"text/x-mathematica",mode:"mathematica",ext:["m","nb"]},{name:"Modelica",mime:"text/x-modelica",mode:"modelica",ext:["mo"]},{name:"MUMPS",mime:"text/x-mumps",mode:"mumps",ext:["mps"]},{name:"MS SQL",mime:"text/x-mssql",mode:"sql"},{name:"mbox",mime:"application/mbox",mode:"mbox",ext:["mbox"]},{name:"MySQL",mime:"text/x-mysql",mode:"sql"},{name:"Nginx",mime:"text/x-nginx-conf",mode:"nginx",file:/nginx.*\.conf$/i},{name:"NSIS",mime:"text/x-nsis",mode:"nsis",ext:["nsh","nsi"]},{name:"NTriples",mimes:["application/n-triples","application/n-quads","text/n-triples"],mode:"ntriples",ext:["nt","nq"]},{name:"Objective-C",mime:"text/x-objectivec",mode:"clike",ext:["m","mm"],alias:["objective-c","objc"]},{name:"OCaml",mime:"text/x-ocaml",mode:"mllike",ext:["ml","mli","mll","mly"]},{name:"Octave",mime:"text/x-octave",mode:"octave",ext:["m"]},{name:"Oz",mime:"text/x-oz",mode:"oz",ext:["oz"]},{name:"Pascal",mime:"text/x-pascal",mode:"pascal",ext:["p","pas"]},{name:"PEG.js",mime:"null",mode:"pegjs",ext:["jsonld"]},{name:"Perl",mime:"text/x-perl",mode:"perl",ext:["pl","pm"]},{name:"PHP",mimes:["text/x-php","application/x-httpd-php","application/x-httpd-php-open"],mode:"php",ext:["php","php3","php4","php5","php7","phtml"]},{name:"Pig",mime:"text/x-pig",mode:"pig",ext:["pig"]},{name:"Plain Text",mime:"text/plain",mode:"null",ext:["txt","text","conf","def","list","log"]},{name:"PLSQL",mime:"text/x-plsql",mode:"sql",ext:["pls"]},{name:"PowerShell",mime:"application/x-powershell",mode:"powershell",ext:["ps1","psd1","psm1"]},{name:"Properties files",mime:"text/x-properties",mode:"properties",ext:["properties","ini","in"],alias:["ini","properties"]},{name:"ProtoBuf",mime:"text/x-protobuf",mode:"protobuf",ext:["proto"]},{name:"Python",mime:"text/x-python",mode:"python",ext:["BUILD","bzl","py","pyw"],file:/^(BUCK|BUILD)$/},{name:"Puppet",mime:"text/x-puppet",mode:"puppet",ext:["pp"]},{name:"Q",mime:"text/x-q",mode:"q",ext:["q"]},{name:"R",mime:"text/x-rsrc",mode:"r",ext:["r","R"],alias:["rscript"]},{name:"reStructuredText",mime:"text/x-rst",mode:"rst",ext:["rst"],alias:["rst"]},{name:"RPM Changes",mime:"text/x-rpm-changes",mode:"rpm"},{name:"RPM Spec",mime:"text/x-rpm-spec",mode:"rpm",ext:["spec"]},{name:"Ruby",mime:"text/x-ruby",mode:"ruby",ext:["rb"],alias:["jruby","macruby","rake","rb","rbx"]},{name:"Rust",mime:"text/x-rustsrc",mode:"rust",ext:["rs"]},{name:"SAS",mime:"text/x-sas",mode:"sas",ext:["sas"]},{name:"Sass",mime:"text/x-sass",mode:"sass",ext:["sass"]},{name:"Scala",mime:"text/x-scala",mode:"clike",ext:["scala"]},{name:"Scheme",mime:"text/x-scheme",mode:"scheme",ext:["scm","ss"]},{name:"SCSS",mime:"text/x-scss",mode:"css",ext:["scss"]},{name:"Shell",mimes:["text/x-sh","application/x-sh"],mode:"shell",ext:["sh","ksh","bash"],alias:["bash","sh","zsh"],file:/^PKGBUILD$/},{name:"Sieve",mime:"application/sieve",mode:"sieve",ext:["siv","sieve"]},{name:"Slim",mimes:["text/x-slim","application/x-slim"],mode:"slim",ext:["slim"]},{name:"Smalltalk",mime:"text/x-stsrc",mode:"smalltalk",ext:["st"]},{name:"Smarty",mime:"text/x-smarty",mode:"smarty",ext:["tpl"]},{name:"Solr",mime:"text/x-solr",mode:"solr"},{name:"SML",mime:"text/x-sml",mode:"mllike",ext:["sml","sig","fun","smackspec"]},{name:"Soy",mime:"text/x-soy",mode:"soy",ext:["soy"],alias:["closure template"]},{name:"SPARQL",mime:"application/sparql-query",mode:"sparql",ext:["rq","sparql"],alias:["sparul"]},{name:"Spreadsheet",mime:"text/x-spreadsheet",mode:"spreadsheet",alias:["excel","formula"]},{name:"SQL",mime:"text/x-sql",mode:"sql",ext:["sql"]},{name:"SQLite",mime:"text/x-sqlite",mode:"sql"},{name:"Squirrel",mime:"text/x-squirrel",mode:"clike",ext:["nut"]},{name:"Stylus",mime:"text/x-styl",mode:"stylus",ext:["styl"]},{name:"Swift",mime:"text/x-swift",mode:"swift",ext:["swift"]},{name:"sTeX",mime:"text/x-stex",mode:"stex"},{name:"LaTeX",mime:"text/x-latex",mode:"stex",ext:["text","ltx","tex"],alias:["tex"]},{name:"SystemVerilog",mime:"text/x-systemverilog",mode:"verilog",ext:["v","sv","svh"]},{name:"Tcl",mime:"text/x-tcl",mode:"tcl",ext:["tcl"]},{name:"Textile",mime:"text/x-textile",mode:"textile",ext:["textile"]},{name:"TiddlyWiki ",mime:"text/x-tiddlywiki",mode:"tiddlywiki"},{name:"Tiki wiki",mime:"text/tiki",mode:"tiki"},{name:"TOML",mime:"text/x-toml",mode:"toml",ext:["toml"]},{name:"Tornado",mime:"text/x-tornado",mode:"tornado"},{name:"troff",mime:"text/troff",mode:"troff",ext:["1","2","3","4","5","6","7","8","9"]},{name:"TTCN",mime:"text/x-ttcn",mode:"ttcn",ext:["ttcn","ttcn3","ttcnpp"]},{name:"TTCN_CFG",mime:"text/x-ttcn-cfg",mode:"ttcn-cfg",ext:["cfg"]},{name:"Turtle",mime:"text/turtle",mode:"turtle",ext:["ttl"]},{name:"TypeScript",mime:"application/typescript",mode:"javascript",ext:["ts"],alias:["ts"]},{name:"TypeScript-JSX",mime:"text/typescript-jsx",mode:"jsx",ext:["tsx"],alias:["tsx"]},{name:"Twig",mime:"text/x-twig",mode:"twig"},{name:"Web IDL",mime:"text/x-webidl",mode:"webidl",ext:["webidl"]},{name:"VB.NET",mime:"text/x-vb",mode:"vb",ext:["vb"]},{name:"VBScript",mime:"text/vbscript",mode:"vbscript",ext:["vbs"]},{name:"Velocity",mime:"text/velocity",mode:"velocity",ext:["vtl"]},{name:"Verilog",mime:"text/x-verilog",mode:"verilog",ext:["v"]},{name:"VHDL",mime:"text/x-vhdl",mode:"vhdl",ext:["vhd","vhdl"]},{name:"Vue.js Component",mimes:["script/x-vue","text/x-vue"],mode:"vue",ext:["vue"]},{name:"XML",mimes:["application/xml","text/xml"],mode:"xml",ext:["xml","xsl","xsd","svg"],alias:["rss","wsdl","xsd"]},{name:"XQuery",mime:"application/xquery",mode:"xquery",ext:["xy","xquery"]},{name:"Yacas",mime:"text/x-yacas",mode:"yacas",ext:["ys"]},{name:"YAML",mimes:["text/x-yaml","text/yaml"],mode:"yaml",ext:["yaml","yml"],alias:["yml"]},{name:"Z80",mime:"text/x-z80",mode:"z80",ext:["z80"]},{name:"mscgen",mime:"text/x-mscgen",mode:"mscgen",ext:["mscgen","mscin","msc"]},{name:"xu",mime:"text/x-xu",mode:"mscgen",ext:["xu"]},{name:"msgenny",mime:"text/x-msgenny",mode:"mscgen",ext:["msgenny"]}];for(var t=0;t<e.modeInfo.length;t++){var a=e.modeInfo[t];a.mimes&&(a.mime=a.mimes[0])}e.findModeByMIME=function(t){t=t.toLowerCase();for(var a=0;a<e.modeInfo.length;a++){var n=e.modeInfo[a];if(n.mime==t)return n;if(n.mimes)for(var r=0;r<n.mimes.length;r++)if(n.mimes[r]==t)return n}return/\+xml$/.test(t)?e.findModeByMIME("application/xml"):/\+json$/.test(t)?e.findModeByMIME("application/json"):void 0},e.findModeByExtension=function(t){for(var a=0;a<e.modeInfo.length;a++){var n=e.modeInfo[a];if(n.ext)for(var r=0;r<n.ext.length;r++)if(n.ext[r]==t)return n}},e.findModeByFileName=function(t){for(var a=0;a<e.modeInfo.length;a++){var n=e.modeInfo[a];if(n.file&&n.file.test(t))return n}var r=t.lastIndexOf("."),i=r>-1&&t.substring(r+1,t.length);if(i)return e.findModeByExtension(i)},e.findModeByName=function(t){t=t.toLowerCase();for(var a=0;a<e.modeInfo.length;a++){var n=e.modeInfo[a];if(n.name.toLowerCase()==t)return n;if(n.alias)for(var r=0;r<n.alias.length;r++)if(n.alias[r].toLowerCase()==t)return n}}}(a(55))},350:function(e,t,a){},426:function(e,t,a){},56:function(e,t,a){"use strict";var n=a(35),r=a(15),i=a(0),o=a.n(i),s=a(23),l=a.n(s),c=a(198),u=a(33),m=a(18),d=a(20),p=a(21),h=a(22),g=a(32),f=a(137),b=a.n(f),v=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).containerStyle=Object(g.css)({borderRadius:"3px",backgroundColor:"#fff",padding:"10px 16px",display:"flex",boxSizing:"border-box",boxShadow:"rgba(67, 90, 111, 0.3) 0px 0px 1px, rgba(67, 90, 111, 0.47) 0px 8px 10px -4px",justifyContent:"space-between",flexDirection:"row"}),a.containerBorderSuccess=Object(g.css)({borderLeft:"3px solid rgb(71, 184, 129)"}),a.containerBorderWarn=Object(g.css)({borderLeft:"3px solid rgb(217, 130, 43)"}),a.containerBorderDanger=Object(g.css)({borderLeft:"3px solid rgb(236, 76, 71)"}),a.containerBorderNotify=Object(g.css)({borderLeft:"3px solid rgb(16, 112, 202)"}),a.toastTextTitle=Object(g.css)({fontWeight:"600",fontSize:"14px",color:"#435a6f",margin:"0"}),a.toastTextChild=Object(g.css)({fontSize:"14px",color:"#999",margin:"0"}),a.toastClose=Object(g.css)({marginLeft:"15px",height:"24px",width:"24px",lineHeight:"22px",fontWeight:"700",textAlign:"center",fontSize:"20px",color:"#000",cursor:"pointer",opacity:"0.5",":hover":{opacity:1}}),a.toastIcon=Object(g.css)({marginRight:"10px",width:"14px",height:"20px",lineHeight:"20px"}),a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"getContainerStyle",value:function(e){switch(e){case"success":return{borderStyle:this.containerBorderSuccess,iconColor:Object(g.css)({color:"rgb(71, 184, 129)"}),iconClass:"iconfont icon-check-circle"};case"warning":return{borderStyle:this.containerBorderWarn,iconColor:Object(g.css)({color:"rgb(217, 130, 43)"}),iconClass:"iconfont icon-exclamation-triangle"};case"none":return{borderStyle:this.containerBorderNotify,iconColor:Object(g.css)({color:"rgb(16, 112, 202)"}),iconClass:"iconfont icon-exclamation-circle"};case"danger":return{borderStyle:this.containerBorderDanger,iconColor:Object(g.css)({color:"rgb(236, 76, 71)"}),iconClass:"iconfont icon-exclamation-circle"};default:return{borderStyle:this.containerBorderNotify,iconColor:Object(g.css)({color:"rgb(16, 112, 202)"}),iconClass:"iconfont icon-exclamation-circle"}}}},{key:"render",value:function(){var e=this.getContainerStyle(this.props.intent);return o.a.createElement("div",Object(g.css)(e.borderStyle,this.containerStyle),o.a.createElement("div",{className:this.toastIcon},o.a.createElement("i",Object.assign({className:e.iconClass},e.iconColor))),o.a.createElement("div",{className:this.toastTextContainer},o.a.createElement("p",{className:this.toastTextTitle},this.props.title),this.props.children?o.a.createElement("p",{className:this.toastTextChild},this.props.children):null),o.a.createElement("div",{onClick:this.props.onRemove,className:this.toastClose},o.a.createElement("span",null,"\xd7")))}}]),t}(o.a.PureComponent),E="cubic-bezier(0.0, 0.0, 0.2, 1)",y="cubic-bezier(0.4, 0.0, 1, 1)",O="cubic-bezier(0.175, 0.885, 0.320, 1.175)",x=g.css.keyframes("openAnimation",{from:{opacity:0,transform:"translateY(-120%)"},to:{transform:"translateY(0)"}}),k=g.css.keyframes("closeAnimation",{from:{transform:"scale(1)",opacity:1},to:{transform:"scale(0.9)",opacity:0}}),S=Object(g.css)({display:"flex",flexDirection:"column",alignItems:"center",height:0,transition:"all ".concat(240,"ms ").concat(E),'&[data-state="entering"], &[data-state="entered"]':{animation:"".concat(x," ").concat(240,"ms ").concat(O," both")},'&[data-state="exiting"]':{animation:"".concat(k," 120ms ").concat(y," both")}}),w=function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(a=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(i)))).state={isShown:!0,height:0},a.close=function(){a.clearCloseTimer(),a.setState({isShown:!1})},a.startCloseTimer=function(){a.props.duration&&(a.closeTimer=setTimeout((function(){a.close()}),1e3*a.props.duration))},a.clearCloseTimer=function(){a.closeTimer&&(clearTimeout(a.closeTimer),a.closeTimer=null)},a.handleMouseEnter=function(){a.clearCloseTimer()},a.handleMouseLeave=function(){a.startCloseTimer()},a.onRef=function(e){if(null!==e){var t=e.getBoundingClientRect().height;a.setState({height:t})}},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"componentDidUpdate",value:function(e){e.isShown!==this.props.isShown&&this.setState({isShown:this.props.isShown})}},{key:"componentDidMount",value:function(){this.startCloseTimer()}},{key:"componentWillUnmount",value:function(){this.clearCloseTimer()}},{key:"render",value:function(){var e=this;return o.a.createElement(b.a,{appear:!0,unmountOnExit:!0,timeout:240,in:this.state.isShown,onExited:this.props.onRemove},(function(t){return o.a.createElement("div",{"data-state":t,className:S,onMouseEnter:e.handleMouseEnter,onMouseLeave:e.handleMouseLeave,style:{height:e.state.height,zIndex:e.props.zIndex,marginBottom:e.state.isShown?0:-e.state.height}},o.a.createElement("div",{ref:e.onRef,style:{padding:8}},o.a.createElement(v,{intent:e.props.intent,title:e.props.title,children:e.props.children,isRemoveable:e.props.hasCloseButton,onRemove:function(){return e.close()}})))}))}}]),t}(o.a.PureComponent);w.defaultProps={intent:"none"};var D=Object(g.css)({maxWidth:560,margin:"0 auto",top:0,left:0,right:0,position:"fixed",zIndex:30}),j=function(e){return Object.hasOwnProperty.call(e,"id")},C=function(e){function t(e,a){var i;return Object(r.a)(this,t),(i=Object(d.a)(this,Object(p.a)(t).call(this,e,a))).getToasts=function(){return i.state.toasts},i.closeAll=function(){i.getToasts().forEach((function(e){return e.close()}))},i.notify=function(e,t){if(j(t)){var a=!0,n=!1,r=void 0;try{for(var o,s=i.state.toasts[Symbol.iterator]();!(a=(o=s.next()).done);a=!0){var l=o.value;String(l.id).startsWith(t.id)&&i.closeToast(l.id)}}catch(m){n=!0,r=m}finally{try{a||null==s.return||s.return()}finally{if(n)throw r}}}var c=i.createToastInstance(e,t);return i.setState((function(e){return{toasts:[c].concat(Object(u.a)(e.toasts))}})),c},i.createToastInstance=function(e,a){var n=++t.idCounter,r=j(a)?"".concat(a.id,"-").concat(n):n;return{id:r,title:e,description:a.description,hasCloseButton:a.hasCloseButton||!0,duration:a.duration||2,close:function(){return i.closeToast(r)},intent:a.intent}},i.closeToast=function(e){i.setState((function(t){return{toasts:t.toasts.map((function(t){return t.id===e?Object(n.a)(Object(n.a)({},t),{},{isShown:!1}):t}))}}))},i.removeToast=function(e){i.setState((function(t){return{toasts:t.toasts.filter((function(t){return t.id!==e}))}}))},e.bindNotify(i.notify),e.bindGetToasts(i.getToasts),e.bindCloseAll(i.closeAll),i.state={toasts:[]},i}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this;return o.a.createElement("span",{className:D},this.state.toasts.map((function(t){var a=t.id,n=t.description,r=Object(c.a)(t,["id","description"]);return o.a.createElement(w,Object.assign({key:a,onRemove:function(){return e.removeToast(a)}},r),n)})))}}]),t}(o.a.PureComponent);C.idCounter=0;var N="undefined"!==typeof window&&"undefined"!==typeof window.document,P=new function e(){var t=this;if(Object(r.a)(this,e),this._bindNotify=function(e){t.notifyHandler=e},this._bindGetToasts=function(e){t.getToastsHandler=e},this._bindCloseAll=function(e){t.closeAllHandler=e},this.getToasts=function(){return t.getToastsHandler()},this.closeAll=function(){return t.closeAllHandler()},this.notify=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.notifyHandler(e,Object(n.a)(Object(n.a)({},a),{},{intent:"none"}))},this.success=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.notifyHandler(e,Object(n.a)(Object(n.a)({},a),{},{intent:"success"}))},this.warning=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.notifyHandler(e,Object(n.a)(Object(n.a)({},a),{},{intent:"warning"}))},this.danger=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.notifyHandler(e,Object(n.a)(Object(n.a)({},a),{},{intent:"danger"}))},N){var a=document.createElement("div");a.setAttribute("data-evergreen-toaster-container",""),document.body.appendChild(a),l.a.render(o.a.createElement(C,{bindNotify:this._bindNotify,bindGetToasts:this._bindGetToasts,bindCloseAll:this._bindCloseAll}),a)}};t.a=P},599:function(e,t,a){var n=a(169);e.exports=function(e){return e===e&&!n(e)}},600:function(e,t){e.exports=function(e,t){return function(a){return null!=a&&(a[e]===t&&(void 0!==t||e in Object(a)))}}},601:function(e,t,a){},622:function(e,t,a){"use strict";(function(e){a.d(t,"a",(function(){return y}));var n=a(0),r=a.n(n),i=a(2),o=a.n(i),s=a(202),l=a.n(s),c=a(132),u=a.n(c),m=a(623),d=a.n(m),p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};function h(e,t){var a={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n]);return a}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function b(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var v="undefined"!==typeof e&&Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})&&"production",E=function(e){function t(){g(this,t);var a=f(this,e.call(this));return a.handleOnClick=function(e){var t=a.chartInstance,n=a.props,r=n.getDatasetAtEvent,i=n.getElementAtEvent,o=n.getElementsAtEvent,s=n.onElementsClick;r&&r(t.getDatasetAtEvent(e),e),i&&i(t.getElementAtEvent(e),e),o&&o(t.getElementsAtEvent(e),e),s&&s(t.getElementsAtEvent(e),e)},a.ref=function(e){a.element=e},a.chartInstance=void 0,a}return b(t,e),t.prototype.componentDidMount=function(){this.renderChart()},t.prototype.componentDidUpdate=function(){if(this.props.redraw)return this.destroyChart(),void this.renderChart();this.updateChart()},t.prototype.shouldComponentUpdate=function(e){var t=this.props,a=(t.redraw,t.type),n=t.options,r=t.plugins,i=t.legend,o=t.height,s=t.width;if(!0===e.redraw)return!0;if(o!==e.height||s!==e.width)return!0;if(a!==e.type)return!0;if(!u()(i,e.legend))return!0;if(!u()(n,e.options))return!0;var l=this.transformDataProp(e);return!u()(this.shadowDataProp,l)||!u()(r,e.plugins)},t.prototype.componentWillUnmount=function(){this.destroyChart()},t.prototype.transformDataProp=function(e){var t=e.data;return"function"==typeof t?t(this.element):t},t.prototype.memoizeDataProps=function(){if(this.props.data){var e=this.transformDataProp(this.props);return this.shadowDataProp=p({},e,{datasets:e.datasets&&e.datasets.map((function(e){return p({},e)}))}),this.saveCurrentDatasets(),e}},t.prototype.checkDatasets=function(e){var a="production"!==v&&"prod"!==v,n=this.props.datasetKeyProvider!==t.getLabelAsKey,r=e.length>1;if(a&&r&&!n){var i=!1;e.forEach((function(e){e.label||(i=!0)})),i&&console.error('[react-chartjs-2] Warning: Each dataset needs a unique key. By default, the "label" property on each dataset is used. Alternatively, you may provide a "datasetKeyProvider" as a prop that returns a unique key.')}},t.prototype.getCurrentDatasets=function(){return this.chartInstance&&this.chartInstance.config.data&&this.chartInstance.config.data.datasets||[]},t.prototype.saveCurrentDatasets=function(){var e=this;this.datasets=this.datasets||{},this.getCurrentDatasets().forEach((function(t){e.datasets[e.props.datasetKeyProvider(t)]=t}))},t.prototype.updateChart=function(){var e=this,t=this.props.options,a=this.memoizeDataProps(this.props);if(this.chartInstance){t&&(this.chartInstance.options=l.a.helpers.configMerge(this.chartInstance.options,t));var n=this.getCurrentDatasets(),r=a.datasets||[];this.checkDatasets(n);var i=d()(n,this.props.datasetKeyProvider);this.chartInstance.config.data.datasets=r.map((function(t){var a=i[e.props.datasetKeyProvider(t)];if(a&&a.type===t.type&&t.data){a.data.splice(t.data.length),t.data.forEach((function(e,n){a.data[n]=t.data[n]}));t.data;var n=h(t,["data"]);return p({},a,n)}return t}));a.datasets;var o=h(a,["datasets"]);this.chartInstance.config.data=p({},this.chartInstance.config.data,o),this.chartInstance.update()}},t.prototype.renderChart=function(){var e=this.props,a=e.options,n=e.legend,r=e.type,i=e.plugins,o=this.element,s=this.memoizeDataProps();"undefined"===typeof n||u()(t.defaultProps.legend,n)||(a.legend=n),this.chartInstance=new l.a(o,{type:r,data:s,options:a,plugins:i})},t.prototype.destroyChart=function(){this.saveCurrentDatasets();var e=Object.values(this.datasets);this.chartInstance.config.data.datasets=e,this.chartInstance.destroy()},t.prototype.render=function(){var e=this.props,t=e.height,a=e.width,n=e.id;return r.a.createElement("canvas",{ref:this.ref,height:t,width:a,id:n,onClick:this.handleOnClick})},t}(r.a.Component);E.getLabelAsKey=function(e){return e.label},E.propTypes={data:o.a.oneOfType([o.a.object,o.a.func]).isRequired,getDatasetAtEvent:o.a.func,getElementAtEvent:o.a.func,getElementsAtEvent:o.a.func,height:o.a.number,legend:o.a.object,onElementsClick:o.a.func,options:o.a.object,plugins:o.a.arrayOf(o.a.object),redraw:o.a.bool,type:function(e,t,a){if(!l.a.controllers[e[t]])return new Error("Invalid chart type `"+e[t]+"` supplied to `"+a+"`.")},width:o.a.number,datasetKeyProvider:o.a.func},E.defaultProps={legend:{display:!0,position:"bottom"},type:"doughnut",height:150,width:300,redraw:!1,options:{},datasetKeyProvider:E.getLabelAsKey};(function(e){function t(){return g(this,t),f(this,e.apply(this,arguments))}b(t,e),t.prototype.render=function(){var e=this;return r.a.createElement(E,p({},this.props,{ref:function(t){return e.chartInstance=t&&t.chartInstance},type:"doughnut"}))}})(r.a.Component),function(e){function t(){return g(this,t),f(this,e.apply(this,arguments))}b(t,e),t.prototype.render=function(){var e=this;return r.a.createElement(E,p({},this.props,{ref:function(t){return e.chartInstance=t&&t.chartInstance},type:"pie"}))}}(r.a.Component);var y=function(e){function t(){return g(this,t),f(this,e.apply(this,arguments))}return b(t,e),t.prototype.render=function(){var e=this;return r.a.createElement(E,p({},this.props,{ref:function(t){return e.chartInstance=t&&t.chartInstance},type:"line"}))},t}(r.a.Component);(function(e){function t(){return g(this,t),f(this,e.apply(this,arguments))}b(t,e),t.prototype.render=function(){var e=this;return r.a.createElement(E,p({},this.props,{ref:function(t){return e.chartInstance=t&&t.chartInstance},type:"bar"}))}})(r.a.Component),function(e){function t(){return g(this,t),f(this,e.apply(this,arguments))}b(t,e),t.prototype.render=function(){var e=this;return r.a.createElement(E,p({},this.props,{ref:function(t){return e.chartInstance=t&&t.chartInstance},type:"horizontalBar"}))}}(r.a.Component),function(e){function t(){return g(this,t),f(this,e.apply(this,arguments))}b(t,e),t.prototype.render=function(){var e=this;return r.a.createElement(E,p({},this.props,{ref:function(t){return e.chartInstance=t&&t.chartInstance},type:"radar"}))}}(r.a.Component),function(e){function t(){return g(this,t),f(this,e.apply(this,arguments))}b(t,e),t.prototype.render=function(){var e=this;return r.a.createElement(E,p({},this.props,{ref:function(t){return e.chartInstance=t&&t.chartInstance},type:"polarArea"}))}}(r.a.Component),function(e){function t(){return g(this,t),f(this,e.apply(this,arguments))}b(t,e),t.prototype.render=function(){var e=this;return r.a.createElement(E,p({},this.props,{ref:function(t){return e.chartInstance=t&&t.chartInstance},type:"bubble"}))}}(r.a.Component),function(e){function t(){return g(this,t),f(this,e.apply(this,arguments))}b(t,e),t.prototype.render=function(){var e=this;return r.a.createElement(E,p({},this.props,{ref:function(t){return e.chartInstance=t&&t.chartInstance},type:"scatter"}))}}(r.a.Component),l.a.defaults}).call(this,a(80))},623:function(e,t,a){var n=a(338),r=a(1237)((function(e,t,a){n(e,a,t)}));e.exports=r},96:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Arrow=t.Popper=t.Target=t.Manager=void 0;var n=s(a(296)),r=s(a(297)),i=s(a(298)),o=s(a(299));function s(e){return e&&e.__esModule?e:{default:e}}t.Manager=n.default,t.Target=r.default,t.Popper=i.default,t.Arrow=o.default}},[[1235,1,0]]]);
//# sourceMappingURL=sysAdmin.chunk.js.map